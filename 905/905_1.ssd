	LD	B,C
fblk3:	RRA
	JR	C,fblk2
	INC	HL
	DJNZ	fblk3
fblk5:	INC	IX
	DEC	DE
	LD	A,E
	OR	D
	JP	NZ,fblk4

;NOT found at all so retry starting at block zero

	POP	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	DEC	HL
	DEC	HL
	JP	fstart



;Found it

fblk2:	EX	DE,HL
	POP	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	POP	HL
	PUSH	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	CP	A
	LD	E,A
	JP	fblk12

;Find how many free & allocate them

fblk7:	INC	IX
	LD	E,(IX+0)
	LD	B,C
fblk9:	CP	A
	RR	E
	JR	NC,HL		;Get next chars
	INC	DE
	DJNZ	cmplop

notcmd:	CALL	getcmd		;Move onto command number
	BIT	7,(HL)		;Finished ?
	JR	nxtcmd		;Loop {zf used @ nxtcmd}

trymat:	DEC	B		;End of string => match
	JR	Z,gotcmd
	INC	DE		;Get next charcter
	LD	A,(DE)
	AND	05FH		;Caps it
	CP	'A'		;Non alpha => match
	JR	C,skpsp2
	CP	'Z'+1		;Alpha => no match
	JR	C,notcmd

skpsp2:	LD	A,(DE)		;Get character
	CP	' '		;Skip spaces
	JR	NZ,gotcmd
gotdot:	INC	DE		;Point to next character
	DJNZ	skpsp2		;Dec length & stfblk11
fblk12:	DEC	HL
	LD	A,H
	OR	L
	JR	Z,fblk11
	DJNZ	fblk9
	RR	E
	LD	(IX+0),E
	JP	fblk7

;Wind up

fblk11:	RR	E		;Allocate out of last byte
	DJNZ	fblk11
	LD	(IX+0),E
	EX	DE,HL

	POP	HL		;Fill in blocks found
	LD	(HL),E
	INC	HL
	LD	(HL),D

	POP	IX
	RET
;
; ****** END OF MAPMAN ******
;




	COMMON	/debug/

mesflg:	DEFS	1


	COMMON	/error/

errloc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2


	DSEG

cacmap:	DEFS	noblks*4	;Cache sector map

page:	DEFS	1åååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååå		;Current cache page

rwpage:	DEFS	1		;Parameter to rwdisk

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

;	******* MAPMAN AREAS *********

lstadr:	DEFS	2		;Address of last block found

mapptr:	DEFS	maxdrv*4	;( length (2) + mapptr (2) ) * maxdrv

myheap:	DEFS	heapln


	END
 
loc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2


	DSEG

cacmap:	DEFS	noblks*4	;Cache sector map

page:	DEFS	1E),A
	RET	Z		;Stop if zero

	LD	C,B		;Move the end to the beginning
	LD	B,0
	INC	DE
	LDIR
	RET





;FUNCTION hi (n: WORD): BYTE
;
;This returns the hi byte of N

hi:	POP	HL		;Return address
	POP	AF		;Hi_n (A) Lo_n (F)
	JP	(HL)		;Return





;FUNCTION lo (n: WORD): BYTE
;
;This returns the lo byte of N

lo:	POP	HL		;Return address
	POP	DE		;n
	LD	A,E		;Get lo byte
	JP	(HL)		;Return





;FUNCTION cli (VAR cmd: STRING 255): BYTE
;
;This looks up the command in <cmd> inialise messag,debug.

chario:	LD	HL,0
	LD	(sersp),HL
	LD	(serptr),HL
	LD	A,1		; Cache bank number
	LD	(serptr+2),A
	LD	(sersp+2),A

	LD	A,(07EH)
	LD	(mess),A
	LD	A,(07FH)
	LD	(debu),A

	RET



; Routine to wait for & read byte from 6502
; Value returned in A, all other regs preserved.
;
; NB.	the 6502 is now a Z80 !

wait65:	IN	A,(status)
	BIT	6,A
	JR	Z,wait65
	IN	A,(Jlatch)
	RET





	COMMON	/prispa/
space:	DS	4

	COMMON	/priptr/
ptr:	DS	4

	COMMON	/messag/
mess:	DS	ry
	ADC	HL,DE
	LD	(serptr),HL
;	RET	NC		;No carry into hi byte so not off end of cache
exitNZ:	XOR	A		;We have done something - return NZ
	INC	A
	RET			;64K buffer, so no wrap-round code




;
; Routine to poll front pannel switches
;
; If switch is 'Off' then exit FS & kill power.
; If rear pannel reset is pushed AND front switch is in sys_priv position,
; then exit to maintainance mode.


chksw:	IN	A,(status)
	BIT	1,A
	JR	Z,chk1		;Front sw is in syst position
	BIT	2,A
	RET	NZ		;Fron1

	COMMON	/debug/
debu:	DS	1


	DSEG
sersp:	DS	3

serptr:	DS	3

	END
ersp+2),A

	LD	A,(07EH)
	LD	(mess),A
	LD	A,(07FH)
	LD	(debu),A

	RET



; Routine to wait for & read byte from 6502
; Value returned in A, all other regs preserved.
;
; NB.	the 6502 is now a Z80 !

wait65:	IN	A,(status)
	BIT	6,A
	JR	Z,wait65
	IN	A,(Jlatch)
	RET





	COMMON	/prispa/
space:	DS	4

	COMMON	/priptr/
ptr:	DS	4

	COMMON	/messag/
mess:	DS	t sw is in Secure position

	CALL	emptyC		;Power off pos of switch
	LD	A,12		;Turn off relay
	CALL	to6502
chk3:	JR	chk3		;wait for end of world

chk1:	BIT	3,A		;In syst pos., so check for back pannel reset
	RET	NZ
	CALL	emptyC
	JP	fsexit

;
; FUNCTION Syst_sw:Boolean;
;
; Return condition of key switch.

systsw:	IN	A,(status)
	CPL			;Bit is active LOW
	AND	2
	RRCA			;return 0 (False) or 1 (True)
	RET

;
; PROCEDURE Char_io;
; Initialise character i/o (i not supported !)
; Also init	D,hour
setcl4:	INC	HL		;1st time round points to new hours
	CALL	write		;(HL) in decimal
	DEC	D
	JP	P,setcl4	;stops when D=-1 ie just written secs reg

;now start clock - NB D=0FFH ie select status register

	LD	A,1
	JP	writck		;and finish

	IF	option

setcl3:

;noclock present so set hms to zero

	LD	HL,rhour
	LD	B,3
	JP	filzer

	ENDIF

writea:	LD	(HL),A
write:	PUSH	BC

;convert to BCD

	XOR	A
	RLD			;top nibble to A lo

	LD	B,4
write1:	ADD	A,A
	DAA
	DJNZ	write1

	LD	B,T	quote,C
	JR	gsnext

noquot:	CP	'|'		;Char a bar ?
	JR	NZ,nobar2
	SET	bar,C
	JR	gsnext

nobar2:	CP	','		;Char a comma or space
	JR	Z,gsendq
	CP	' '
	JR	NZ,inschr
gsendq:	BIT	quoted,C
	JR	NZ,inschr
	BIT	stop,C
	JR	NZ,gsend
	JR	inschr

inschr:	BIT	barpln,C	;Check for |! flag
	JR	Z,noset
	SET	7,A
	RES	barpln,C

noset:	LD	(DE),A		;Put char into out string
	INC	DE
	INC	(IY+0)

gsnext:	INC	HL		;Check if run out of chars & loop
	DJNZ	gsloop

	INC	B		;Adjust B & HL for later
	DEC	HLA
	XOR	A
	RLD			;A=lo nibble of 
	ADD	A,B
	DAA			;A now in BCD
	POP	BC


;WRITCK
;write an RTC register
;
;On entry:
; D	register to write
; A	value to write
;
;On exit:
; A	naff
; rest	OK

writck:	PUSH	BC

	LD	B,A
	CALL	w3000
	OUT	(C),D
	LD	A,B

	RRCA
	RRCA
	RRCA
	RRCA			;top nibble in A
	OUT	(C),A
	OUT	(C),B		;lo nibble

	POP	BC
	RET



	COMMON	/now/

rdate:	DS	1		;date origin 1
rmonth:	DS	1		;month (LO,origin 1) and year (HI, origin 1981)
rhour:	DS	1
rmin:	DS	1

	BIT	quoted,C	;Check string terminated correctly wrt quotes
	JR	Z,gsend
	BIT	quote,C
	JR	Z,dufstr

gsend:	BIT	bar,C		;Check no bar flags still active
	JR	NZ,dufstr
	BIT	barpln,C
	JR	NZ,dufstr

	JR	gsskp4		;Start by checking if any bytes left

gsskp2:	LD	A,(HL)		;Skip trailing spaces
	CP	' '
	JR	NZ,gsskp3
gsskp4:	INC	HL
	DJNZ	gsskp2
	JR	gsmove

gsskp3:	CP	','		;And one trailing comma
	JR	NZ,gsmove
	INC	HL
	DEC	B

gsmove:	POP	DE		;Fill in new length of string
	LD	A,B
	OR	A
	LD	(D
rsec:	DS	1

	COMMON	/error/

errloc:	DS	1



	END

; D	register to write
; A	value to write
;
;On exit:
; A	naff
; rest	OK

writck:	PUSH	BC

	LD	B,A
	CALL	w3000
	OUT	(C),D
	LD	A,B

	RRCA
	RRCA
	RRCA
	RRCA			;top nibble in A
	OUT	(C),A
	OUT	(C),B		;lo nibble

	POP	BC
	RET



	COMMON	/now/

rdate:	DS	1		;date origin 1
rmonth:	DS	1		;month (LO,origin 1) and year (HI, origin 1981)
rhour:	DS	1
rmin:	DS	1
;On entry:
; D	register number
; HL	RAM address
;
;On exit:
; A,(HL) register contents IN HEX
; C	points to clock port
; rest	preserved

read:	CALL	readck
	LD	A,(HL)

;tohex
;On entry:
; A	BCD number
;
;On exit:
; A,(HL) hex number
; rest	preserved

tohex:	PUSH	BC
	LD	C,A
	RRCA
	RRCA
	RRCA
	RRCA
	AND	15
	ADD	A,A		;*2
	LD	B,A
	ADD	A,A		;*4
	ADD	A,A		;*8
	ADD	A,B		;*10
	LD	B,A
	LD	A,C		;this contains some of the hi-nibble set
	AND	15
	ADD	A,B		;and add lo-nibble
	POP	BC
)		;Date 1..31 (not bothering about months yet)
	INC	DE
	OR	A
	RET	Z
	CP	32
	RET	NC

	LD	A,(DE)		;months (lo-nibble) 1..12
	AND	15
	INC	DE		;years don't need checking
	OR	A
	RET	Z
	CP	13
	RET	NC

	LD	A,(DE)		;hours 0..23
	INC	DE
	CP	24
	RET	NC

	LD	A,(DE)		;mins 0..59
	INC	DE
	CP	60
	RET	NC

	LD	A,(DE)		;secs 0..59
	CP	60
	RET	NC

; new time is OK - set no error

	LD	(HL),0

	EX	DE,HL		;HL points to (end of) new time
	LD	DE,rsec
	LD	BC,5
	LDDR
	INC	HL		;points to VAR par	LD	(HL),A
	RET


;READCK
;Read a register from RTC
;
;On entry:
; D	register to be read
; HL	points to 1-byte block where reg will be stored

readck:	CALL	w3000
	OUT	(C),D
	IN	A,(C)
	LD	(HL),A
	IN	A,(C)
	RLD
	RET


w3000:	LD	C,clock
w3001:	IN	A,(C)
	OR	0F0H
	INC	A
	JR	Z,w3001

;There is a bug in the M3000 st at the end of an update cycle the device goes
;not busy 32us before it actually goes ready, so we have to wait 32us....

	LD	A,32*6/(4+12)+1		;32us at 6MHz
w3002:	DEC	A
	ameter block RDATE

;check for M3000

	IF	option

	IN	A,(idle)
	BIT	1,A
	JR	NZ,setcl3

	ENDIF

;now set time: stop clock

	LD	D,status
	LD	A,0
	CALL	writck		;writes A unmodified

	LD	D,date
	CALL	write		;writes (HL) in decimal
	INC	HL
	INC	D		;month reg
	LD	B,(HL)
	LD	A,(HL)
	AND	15
	CALL	writea		;write the months out
	INC	D		;year reg
	XOR	A
	LD	(HL),B
	RLD			;year to A low-nibble, 0 to hi
	ADD	A,81		;year was origin 81
	CALL	writea

;hms can go straight out to M3000

	LDJR	NZ,w3002

;but by this time it may have gone busy again...

	IN	A,(C)
	OR	0F0H
	INC	A
	JR	Z,w3001

	RET				;Not busy!




;PROCEDURE SetClk(address_of_new_time:Word);
;returns error=90H if date is invalid.
;If there is no RTC then the date & month/year is stored, but the
;hours/mins/secs are zeroed to indicate that they are not meaningful

setclk:	POP	BC
	POP	DE		;DE=pointer to new date/time
	PUSH	BC

	LD	HL,errloc
	LD	(HL),90H	;set error initially

;now range check

	LD	A,(DEer
;
;On exit:
; A	Byte with bit set
; B	1 - 8 => Bit number
; DE	Points to low byte of address in MAPPTR (length @(DE-2))
; HL	Address of byte

getblk:	PUSH	HL

	CP	maxdrv
	JP	NC,maperr

	ADD	A,A
	ADD	A,A
	LD	C,A
	LD	B,0
	LD	HL,mapptr+3
	ADD	HL,BC
	EX	(SP),HL

	LD	A,L		;HL/8, A=Remainder
	AND	7
	SRL	H
	RR	L
	SRL	H
	RR	L
	SRL	H
	RR	L

	LD	B,A		;Set bit A in A
	INC	B
	LD	C,B
	SUB	A
	SCF
getbl1:	RLA
	DJNZ	getbl1

	POP	DE
	PUSH	BC
	EX	DE,HL
	LD	B,(HL)		;BC:= address of C
	DJNZ	fblk0
fblk1:	LD	B,C
	PUSH	AF
	PUSH	BC
	PUSH	HL
	EX	DE,HL
	INC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	DEC	HL
	LD	B,(HL)
	DEC	HL
	LD	C,(HL)
	EX	DE,HL
	ADD	HL,BC
	POP	BC
	PUSH	BC
	POP	IX
	CP	A
	SBC	HL,BC
	EX	DE,HL
	POP	BC
	POP	AF
	POP	HL
	LD	C,8
	JP	fblk3

;Main find loop
;
;On entry:
; BC	8
; DE	number of bytes to search before giving up
; HL	start block number
; IX	pointer to current byte to search

fblk4:	LD	A,(IX+0)
	OR	A
	JR	NZ,fblk6
	ADD	HL,BC
	JP	fblk5
fblk6:map
	DEC	HL
	LD	C,(HL)

	IF	c.on		;** Range check block **

	PUSH	AF		;Check map exists
	LD	A,B
	AND	C
	INC	A
	JP	Z,maperr

	PUSH	HL		;Check valid block number
	DEC	HL
	LD	A,(HL)
	DEC	HL
	LD	L,(HL)
	LD	H,A
	CP	A
	SBC	HL,DE
	JP	C,ranerr

	POP	HL
	POP	AF

	ENDIF			;** End of range check **

	EX	DE,HL
	ADD	HL,BC
	POP	BC
	LD	B,C
	RET


	IF	c.on

;Bad map number / map not initialized

maperr:	error	'map no?'

;Block number out of range

ranerr:	error	'Bad block number'
h and year are packed as nibbles into a single byte: month - lo

	INC	D		;=month reg
	INC	HL		;=rmonth
	CALL	read
	LD	B,A		;month in B
	INC	D
	CALL	read		;year origin 1900 in A
	SUB	81		;we require origin 1981
	LD	(HL),A		;year to lo-nibble
	LD	A,B
	RLD			;month to lo-nibble, year to hi

; now check seconds again

	LD	HL,rsec
	LD	B,(HL)
	LD	D,second
	CALL	read
	SUB	B
	JP	NZ,getclk	;go round again if failed

	INC	A		;A=1 ie TRUE
	RET			;OK






;read
;read an M3000 register
;
	ENDIF




;PROCEDURE fblk (VAR block: block_descrip; VAR no_block: WORD);
;
;Attempt to find up to no_block blocks starting from block_descrip

fblk:	POP	HL		;Return address
	POP	BC		;no_block
	EX	(SP),HL		;block_descrip
	PUSH	IX
	PUSH	BC

fstart:	LD	A,(HL)		;Drive
	INC	HL
	PUSH	HL		;Save address of block number
	LD	E,(HL)		;get block number
	INC	HL
	LD	D,(HL)

	EX	DE,HL
	PUSH	HL
	CALL	getblk
	LD	C,8
	CP	A		;Clear carry for RRA
	DEC	B
	LD	A,(HL)
	JR	Z,fblk1
fblk0:	RRA
	DEC		CALL	osword

	LD	HL,(block+9)	;Buffer end
	LD	DE,(block+5)	;Buffer start
	OR	A		;Clear carry
	SBC	HL,DE		;Difference = length of Rx

	EX	DE,HL		;Result to DE
	POP	HL		;Address for length
	LD	(HL),E
	INC	HL
	LD	(HL),D

	LD	DE,(block+3)	;Stn
	POP	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D

	LD	A,(block+2)	;Port
	POP	HL
	LD	(HL),A

	LD	A,(block+1)	;Ctrl code
	AND	07FH
	POP	HL
	LD	(HL),A

	XOR	A
	INC	A		;Return True
	RET





; PROCEDURE Del_Rx(blockno:Byte);
;
; Delete an RxCB

dsettle time
	CALL	outcom
	LD	HL,secbuf	;Set address to R/W to/from
	LD	D,0FCH

write1:	OUT	(C),E
write0:	LD	A,(HL)
	CPL
	LD	B,A
write2:	IN	A,(status)
	RRCA
	JR	C,write4
	RRCA
	JR	C,write2
	LD	A,B
	OUT	(data),A
	INC	L
	JP	NZ,write0
	INC	E
	JP	write1

write4:	PUSH	AF		;Write finished so wait for tunnel erase to end
	LD	BC,3700/29	; 1ms minus allowance for shortest code to
write5:	DEC	BC		; next call of OUTCOM
	LD	A,B		; 29 is the no. of T states in the loop.
	OR	C
	JR	NZ,write5
	POPh no verify can cause no errors

;wait for head to load (=output from CTC)

headld:	IN	A,(status)
	AND	020H		;Test head load (=0 for loaded)
	JR	NZ,headld

	POP	AF		;NZ if we have done a real seek, so insert
				;RML-style wait
	LD	A,4
headl2:	LD	B,0
	DJNZ	$		;15*256*4=15000T,4 ms.
	DEC	A
	JR	NZ,headl2

	LD	A,E		;Fill in sector
	CPL
	OUT	(sector),A
	DI			;Stop interrupts

;retry sector without re-seeking

retrys:	LD	A,(rwpage)	;Page to use
	LD	E,A
	LD	C,pagon		;Paging register
	LD		AF		;useful instruction as A has been PUSHed before

;drop through

;Return from Read or Write

rwret:	RLCA			;Move byte back the way it came
	OUT	(pagoff),A	;Turn off cache memory
	CPL			;Data bus all inverted !
	AND	D		;Mask out silly bits
	LD	C,A		;Save error number in case we want to retry
	JR	Z,giveup	;OK ?

; Not Ready,Write prot,Write fault,Lost data are all fatal

	AND	0E7H
	JR	NZ,giveup

	LD	A,(rcount)	;How many goes have we had at this sector ?
	CP	maxtry		;Too many ?
	JR	NC,gA,H		;Save R/W flag
	LD	HL,rwmask	;Address of mask containing settle time bit
	OR	A
	JR	Z,write

;Read a sector

read:	LD	A,rdsec
	AND	(HL)		;Insert settle time
	CALL	outcom
	LD	HL,secbuf	;Set address to R/W to/from
	LD	D,9CH		;mask for relevant error bits

read1:	OUT	(C),E		;Set correct page
read0:	IN	A,(status)
	RRCA
	JR	C,rwret
	RRCA
	JR	C,read0
	IN	A,(data)
	CPL
	LD	(HL),A
	INC	L
	JP	NZ,read0
	INC	E
	JP	read1




;Write out a sector

write:	LD	A,wrsec
	AND	(HL)		;Insert 	CP	90H
	JR	NC,stadr1

	ENDIF

stadr3:	LD	HL,trkno	;Work out track address
	LD	B,0
	ADD	HL,BC
	LD	A,(HL)
	LD	(curtrk),HL	;Save address of current track store
	OR	A
	CALL	M,seekz		;-ve => not used before so seek track zero
	CPL
	OUT	(track),A	;update track register
	POP	HL

	IF	t.on
trace:	mcond	l4
	PUSH	AF
	PUSH	DE
	PUSH	HL
	PUSH	DE
	PUSH	HL
	mess	dtsmsg
	POP	HL
	CALL	dhxout
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(rwpage)
	CALL	cahex
	POP	HL
	POP	DE
l4:	POP	AF
	ENDIF


;		;Buffer start
	LD	(block+5),HL
	ADD	HL,BC
	LD	(block+9),HL
	POP	HL		;Stn
	LD	(block+3),HL
	POP	AF		;Port
	LD	(block+2),A
	LD	HL,0
	LD	(block+7),HL	;high bytes
	LD	(block+11),HL

	PUSH	BC		;Save return addr
	LD	HL,block
	LD	A,011H		;Parameters
	CALL	osword		;Open Rx

	POP	HL		;Return addr
	EX	(SP),HL
	LD	A,(block)	;Rxcb number
	LD	(HL),A
	RET

; FUNCTION Rx_read(blockno:Byte;VARctrl,port:Byte;VARstn,len:Word):Boolean;
;
; Poll RxCB - if no Rx, return False, else return True & fill On entry to here:
; D	track
; E	sector
; H	read flag

	LD	(secsav),DE	;Save in case of retrys
	LD	(drvsav),HL

retryt:	LD	BC,(curtrk)	;Get pointer to current track
	LD	A,(BC)
	CP	D		;Already there?
	PUSH	AF
	LD	A,-1
	JR	Z,nosetl
	LD	A,settle	;Settle time mask for read or write command
nosetl:	LD	(rwmask),A	;Save for read/write command

	LD	A,D		;Dest track
	LD	(BC),A		;Update track store
	CPL
	OUT	(data),A	; And prepare to seek

	LD	A,seek
	CALL	outcom		;Do it
	CALL	wairdy		;Seek witin parameters.

rxread:	POP	IY		;Return
	POP	BC		;Len
	POP	DE		;Stn
	POP	HL		;Port
	LD	(block),HL	;Temp storage
	POP	HL		;Ctrl
	POP	AF		;blockno

	PUSH	IY		;Return
	PUSH	HL		;ctrl
	LD	HL,(block)
	PUSH	HL		;Port
	PUSH	DE		;Stn
	PUSH	BC		;Len

	LD	(block),A	;Ready for reading Rx block

	LD	L,A		;Poll first
	LD	A,033H
	CALL	osbyte

	BIT	7,L
	JR	NZ,doread

	XOR	A		;No Rx so return false
	POP	HL
	POP	HL		;Spurious parameters
	POP	HL
	POP	HL
	RET

doread:	LD	HL,block
	LD	A,011H
NAME	('FSVERS')
True	EQU	-1
False	EQU	0

verA	EQU	0
verB	EQU	4
verC	EQU	9
TEST	EQU	FALSE





PUBLIC	VERHI,VERLO

	IF	Test

VERHI	EQU	'T'+'e'*256

	ELSE

VERHI	EQU	verA+'.'*256+030H

	ENDIF

VERLO	EQU	verB+verC*256+03030H


	END
åååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååå6: C=port no.
	IN	A,(C)
	OR	A		;Error code
	JR	Z,noerr1
	LD	C,A		;Return error
	LD	HL,errloc
	LD	(HL),199
	RET
	
noerr1:	LD	A,(rwpage)
	LD	H,A		;Destination address in paged RAM
	LD	L,B		;L:=0 (B already contains 0)
	CALL	waitin
	DI			;Stack not working when page open
	LD	A,pawrit
	OUT	(paport),A
	INIR
	INIR
	LD	A,panorm	;Close page again
	OUT	(paport),A
	EI
	LD	C,B		;C=0 ie no error
	RET

dowrit:	LD	BC,windat	;B=byte count=256, C=portno for OTIR
	LD	A,(rwpage)	;Dest. address in pag=0 on entry **

	LD	DE,-500H
tscon1:	ADD	HL,DE
	JR	C,tscon0
	SBC	HL,DE
tscon0:	RLA
	SRA	D
	RR	E
	JP	NC,tscon1

	LD	D,A		;Swap regs - so correct for output
	LD	E,L

	ENDIF

	POP	HL		;drive now in L (0..3)


;Convert drive number into drive bits

	SUB	A
	LD	B,L
	INC	B		;As drive numbers start at 0
	SCF
cdrnol:	RLA
	DJNZ	cdrnol
	LD	L,A		;has a single bit set in it.

;Start drive in A and select the correct side

	LD	A,(dsflag)	;Double sided ?
	AND	L
	LD	A,L		;Drive bits
	JR	Z,ed RAM
	LD	H,A
	LD	L,B		; L:=0 (B has 0 already)
	CALL	waitot

	LD	A,paread	;Value to be sent to (paport)
	CALL	CtoWIN		;Code in Safe RAM (DI,OTIR,OTIR,EI,RET)

	CALL	waitin
	IN	C,(C)		;return code
	RET	Z		;Done if OK
	LD	HL,errloc
	LD	(HL),199
	RET



wput:	CALL	waitot		;This rtn sends a byte to win, with h/shake
	OUT	(windat),A
	RET

waitot:	PUSH	AF		;Wait till win is ready for us to output
wo1:	IN	A,(winst)
	AND	3
	JR	NZ,wo1
	POP	AF
	RET

waitin:	PUSH	AF		;Wait for win to talkstadr2
	SRL	D		;Modify track number (/2)
	JR	NC,stadr2
	OR	10H		;Other side
stadr2:	LD	L,A		;Save for trace
	OR	88H		;Drv4 + Dint |

	PUSH	HL
	LD	(lmask),A

	IN	A,(status)	;Ready ?
	BIT	7,A

	PUSH	AF
	LD	A,(lmask)
	OUT	(latch),A	;Set drive glowing
	AND	1		;Use as offset for track store
	LD	C,A		; WON'T WORK ON >2 DRIVES ***************
	POP	AF

	IFF	large		;8" drives go round all the time

	JR	NZ,stadr3	;Ready => going round

stadr1:	IN	A,(ctc0)	;Wait 16*64mS so it can get up speed
 to us
wi1:	IN	A,(winst)
	AND	3
	CP	1
	JR	NZ,wi1
	POP	AF
	RET


	ELSE		;NOT nascom

rwdisc:	SUB	A
	LD	(rcount),A	;Set retry count to zero

	PUSH	DE		;Save disk & read flag

;Convert sector number (HL) into track/sector (DE)

	IF	large

;Divide by eight

	LD	A,L
	AND	7		;Remainder MOD 8
	LD	E,A
	ADD	HL,HL		;*2
	ADD	HL,HL		;*4
	ADD	HL,HL		;*8
	ADD	HL,HL		;*16
	ADD	HL,HL		;*32
	LD	D,H		; div 8 <=> *32 DIV 256

	ELSE

;Divide by five - Leaves result in A & remainder 

;**NB Areebl/

dsksiz:	DEFS	maxdrv * 2


	DSEG

cacmap:	DEFS	noblks*4	;Cache sector map

secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

page:	DEFS	1		;Current cache page

rwpage:	DEFS	1		;Parameter to RWDISC

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		;Contai
;FUNCTION land (a, b: WORD): WORD
;
;Returns the logical AND of A & B

land:	dstak	<DE,HL>

	LD	A,L		;Do lo-byte
	AND	E
	LD	L,A

	LD	A,H		;Do hi-byte
	AND	D
	LD	H,A

	RET






;PROCEDURE pad (VAR str: min_string; length: BYTE)
;
;Pads a string to length <length> with spaces

pad:	dstak	<AF,HL>

	LD	B,0
	LD	C,(HL)		;BC:= Current string length
	LD	(HL),A		;Set new length of string

	ADD	HL,BC		;Point to last char of string

	SUB	C		;A:= number of bytes to zero
	RET	C		;IF Ans either FF or mask for settle time bit

lmask:	DEFS	1

;	******* MAPMAN AREAS *********

lstadr:	DEFS	2		;Address of last block found

mapptr:	DEFS	maxdrv*4	;( length (2) + mapptr (2) ) * maxdrv

myheap:	DEFS	heapln


	END
 mment?

page:	DEFS	1		;Current cache page

rwpage:	DEFS	1		;Parameter to RWDISC

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		;Contairive0
	LD	DE,07878H	;Drive 1
	JR	drive1
drive0:	LD	DE,05050H	;Offset to clear CP/M area (drive 0)
drive1:	ADD	HL,DE
;
;	HL=sector no.
;
	LD	A,C		;=FF for read,0 for write
	CPL
	AND	1		;The difference between read & write op-codes
	OR	032H		;Read op-code
	CALL	wput		;put byte to win
	XOR	A		;a:=0
	CALL	wput
	LD	A,L		;Sector no.
	CALL	wput
	LD	A,H
	CALL	wput
	INC	C		;Store of r/w flag : now =0 for Read
	JR	NZ,dowrit

	CALL	waitin		;Wait for input indicator
	LD	BC,windat	;B=byte count=25xt command

getcmd:	BIT	7,(HL)		;Last char of cmd ?
	INC	HL		;Inc ptr {zf preserved}
	JR	Z,getcmd	;No => loop
	LD	A,(HL)		;Get <cmd code>
	INC	HL		;Inc ptr to start of next cmd
	RET


;Command table


cmdtab:	cm	CAT,3,+
	cm	SAVE,1
	cm	LOAD
	cm	INFO,n+2
	cm	<I AM>
	cm	SDISC
	cm	SDISK,n
	cm	DIR
	cm	LIB,n+2
	cm	DELETE,254,-
	cm	BYE
	cm	CDIR
	cm	BANNER
	cm	PRE
	cm	POST
	cm	ENDTEXT
	cm	NOBANNER
	cm	ACCESS
	cm	AUX
	cm	ACCOUNT
	cm	PASS
	cm	RENAME
	cm	DEFAULT

	cm






SH	AF		;To allow for the compulsory POP following
blkm:	POP	AF		;Jumped to from mcond.
	ENDIF

	RET




;RWDISC
;Read/Write sector to/from disk
;
;On entry:
;    (rwpage)	Page number to write to/get from
;	 D	Read flag (FF-read,0-write)
;	 E	Disk number
;	 HL	sector no.
;
;On exit:
; C	Error code (0 = OK)
;	(errloc) also updated


	IF nascom

rwdisc:	
	IF	t.on
	LD	A,(rwpage)
	tmess	<dtsmsg,HL,atmsg,AF>
	ENDIF

	LD	C,D		;Save r/w flag
	LD	A,E		;Test for drive 1
	OR	A
	JR	Z,dter to current byte to search

fblk4:	LD	A,(IX+0)
	OR	A
	JR	NZ,fblk6
	ADD	HL,BC
	JP	fblk5
fblk6:	LD	B,C
fblk3:	RRA
	JR	C,fblk2
	INC	HL
	DJNZ	fblk3
fblk5:	INC	IX
	DEC	DE
	LD	A,E
	OR	D
	JP	NZ,fblk4

;NOT found at all so retry starting at block zero

	POP	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	DEC	HL
	DEC	HL
	JP	fstart



;Found it

fblk2:	EX	DE,HL
	POP	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	POP	HL
	PUSH	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	CP	A
	LD	E,A
	JP	fblk12

;RB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPH„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰hªJQ—à
HŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à   „ , @–  !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPFind how many free & allocate them

fblk7:	INC	IX
	LD	E,(IX+0)
	LD	B,C
fblk9:	CP	A
	RR	E
	JR	NC,fblk11
fblk12:	DEC	HL
	LD	A,H
	OR	L
	JR	Z,fblk11
	DJNZ	fblk9
	RR	E
	LD	(IX+0),E
	JP	fblk7

;Wind up

fblk11:	RR	E		;Allocate out of last byte
	DJNZ	fblk11
	LD	(IX+0),E
	EX	DE,HL

	POP	HL		;Fill in blocks found
	LD	(HL),E
	INC	HL
	LD	(HL),D

	POP	IX
	RET
;
; ****** END OF MAPMAN ******
;




	COMMON	/debug/

mesflg:	DEFS	1


	COMMON	/error/

errloc:	DEFS	1

	COMMON	/f
	CALL	getblk
	LD	C,8
	CP	A		;Clear carry for RRA
	DEC	B
	LD	A,(HL)
	JR	Z,fblk1
fblk0:	RRA
	DEC	C
	DJNZ	fblk0
fblk1:	LD	B,C
	PUSH	AF
	PUSH	BC
	PUSH	HL
	EX	DE,HL
	INC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	DEC	HL
	LD	B,(HL)
	DEC	HL
	LD	C,(HL)
	EX	DE,HL
	ADD	HL,BC
	POP	BC
	PUSH	BC
	POP	IX
	CP	A
	SBC	HL,BC
	EX	DE,HL
	POP	BC
	POP	AF
	POP	HL
	LD	C,8
	JP	fblk3

;Main find loop
;
;On entry:
; BC	8
; DE	number of bytes to search before giving up
; HL	start block number
; IX	poinÚDdÇD€)"Br<t4’$!'-GEÀ)"B‚œt ’$!-)G@ 1"BJr²œà  …’L“P RD„TåI@ Ô€Z  á`—„ea¬rù~¹[®V+tB„ 7G.²ğŒ¬#u\­V   ¤‰©Ê‘‘à
H¦‡8  …’LSP bD„ÄCEˆ‘!1Ñf$HST4X‰Õ`RE4¸‘U9A.P 59 –€ ?\¡€uÊÑpŸ„nWY|.Ÿ+†X` õÊ7\­øFãr›Âéó8e¢qœg1ÈFëd¿\,‹…Ú°~ºc"@‘!1Ñ":‰#  ‘!1Ñf:0‰Õ#¢€‘!MPÑf:`IPÒã¦ ‘U9A.p  …RP bD„•%5I@ ×0Z  *¤à € UJ@A  ª•€‚€ód „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãe†‡ ÖXhpe†‡ÒğŒ¬ëd²ÃC;,48"ºÜ.3˜ŒäÉe†›W êzsÛ®Wë„zú² Ò²ú^@5C= OK)
;	(errloc) also updated
; (IY)	Needs writing flag cleared always. Blockno zapped if read error

rwblk:	LD	(IY+1),0FFH	;Clear needs writing flag

	PUSH	IY
	POP	HL		;Calculate page no. from table offset
	LD	BC,cacmap	;Start of table
	OR	A		;Clear carry
	SBC	HL,BC
	LD	A,L		;the answer

	LD	(rwpage),A	;Entry param for RWDISC

	LD	L,(IY+2)	;blockno.
	LD	A,(IY+3)	; Hi byte also holds drive
	AND	3FH		;not any more
	LD	H,A
	ADD	HL,HL		;Block * 2 = Sector

	LD	A,(IY+3)	;Drive
	RLCA
	RLCA‹%–
Ş§§0=ºåh­Å Æ«õÂı+ _¥ä ô@ô¼Y&ğº|ÎÉu˜+wiI’O †Iš!  1•p
Hˆ†˜  Ä‰	*Jj“€  …RÓP bD„TåE8‘!M=$HEXIT”  MN@%  	xFÖâ 	]Ö9|¿\­×+º!B £—YxF :Ç.V¨¨  ¶Å6¨8 Í  në…ºá|ºß®˜è $HENTSŒ–€RD„U%(éx$HEXIT‘ RD…4ô8É$STKLMœ   …R“P bD„ÄCDx‘!1Ñ"$HST4G‰Õ RD…5sI@ ÔÀZ  á/ÊÂ7+¬œ##ËÂ2°ÖÉq—„eaÖºÜ.3ˆŒà#9ˆÎB7[%úáh¸Ø¤"[õÓ  Ä‰	ˆ†ˆñĞpH˜ˆh‘ Ä‰
j†ˆñÑ H¦¨h©' ¤‰
jæ“€  …RSP bD„$48‘!]N$HCERRIÕ`RD…t5X‘!	MA$HWSPC”  M`€ H`uQ€Õ \¶¨ˆäŞ& !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   d
	AND	03H		;Now back in right place
	LD	E,A

	PUSH	HL
	PUSH	DE
	CALL	rwdisc		;Get first
	POP	DE
	POP	HL
	INC	C		;Error => return now
	DEC	C
	JR	Z,nxtsec

blkdud:	DEC	D		;Test for read operation
	RET	Z		;Write, so no need to zap blockno.
	LD	(IY+2),0FFH
	LD	(IY+3),0FFH	;Mark as empty since contains junk
	RET

nxtsec:	LD	A,(rwpage)
	ADD	A,2		;Sector is 2 pages long
	LD	(rwpage),A
	INC	HL		;Next sector
	CALL	rwdisc
	INC	C
	DEC	C
	JR	NZ,blkdud

	IF	t.on
	mcond	blkm
	CALL	pcrlf
	PU


	IF	0			;'IF t.on'
	mcond	l2
	PUSH	AF
	PUSH	DE
	PUSH	HL
	PUSH	HL
	PUSH	AF
	LD	DE,rdtxt
	JR	NZ,l1
	LD	DE,wrtxt
l1:	CALL	pmess
	POP	AF
	CALL	cahex
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	HL,(dma)
	CALL	dhxout
	CALL	pcrlf
	POP	HL
	POP	DE
l2:	POP	AF
	ENDIF



;RWBLK
;Read/Write block to/from disk
;
;
;On entry:
; D	Read flag (&FF -> read, 0 -> write)
; IY	Points to map entry
;(page)	**NOT USED** (hence we can write blocks not at head of chain)
;
;On exit:
; C	Error code (0 ²Z-ñ(f€    2c/à‘!IJ2IP”ã)€‘1%5>:ISÑ#  ‘15=2BI‘Qç   …SP RDÄD•i@ Õ€.Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í Àë•êÅ~¸Ø'…ŠÈ@Y²ª€ø ?\¬‹,XË²Ã°È`Í  -×+…úå`…Û”hºád´Z#âP8Í      dÆUÀ)"B*’”e &"$¦§Ç@ )"b"J´e,’&'"£Î   …S“P bDÄD”Ôù@ ÔìÊ|ZŠ ãá „  Áëºár¿E!vè¥Æí58İ¦ øÀİ¸ÖîÒ“ÚByS@eÆí% OÑô@Úx²c  ‘1%5>p  …UÍP REtD•h‘]%YVP 5Z u¸X.SÂ©Ì€7ï*( /#Eäğénò¤àò¹ì^_	† Î·Ê. 9OKq 5f(¿€B 3,pË† lĞ ¢`4²ÎlYí„  2ÏŒñ<0p‰@à4  €@˜Ê $HERRŒ bEtD”Ôøè $WDIV€bEtD•eXÊ($WNEH„Œ‰ ¤ˆHÈŠ±Ğ H„Œ© ¤ˆHÊŠ³€  …PŒ“P RD$D•h‘	%YVP 5W p¸ÁÄx`0áqƒ€w• e¾]¤C{,ø(]Èz](g>­Å£âİZÀ! –<Òì± ]z8%D±ñ–q`2Ï" 2İà>'† ®Ò#$|J ™   øÉƒ€RD$D•hè $BDIVUŒ© RD„U%)À  …PŒSP RD$ÕTÈ‘	5U1VP 5@ p¸ÁÀx`(áq“Öï*  í"Ï*Â{,ø(¥Ò†sêÜP>-Å0!.·e‘E  }–=Lì³Ë ^g>‹Íâ6H„  dÇAÀ)"jªdt !&ª¦*Î   …UM“P REUõ9@ Õ$úá€ ’pÖ& C$aán(R€É<_îV«
(Äa¥ğ¡îÁh¸B`Ñ¥.0Z.‹Tö$G``2ù'€CõÓ  ¤Šª	ês€  …UMSP RET4Õ‘U5AJP 5H  C »õÂ!  $çX˜ iˆÈÏW+ Dlån(â€XLFK`Ñ@ õ[†a C…ò¯~ºVGœ   …UÌÓP REtÕTÈ‘]5U1VP 55 u¸X.SÂ¨Şx[¼¨ ¼y“Àg¥»Ê€Êç±y|&åf€ ƒ  u¸X.Qp›GÀgÆC  Œ™€RDÄU%(É $LNEG€ REtÕTÈé0$WMULUŒ–€bEuTÕTÉÀ  …UÌ“P bEtD”Ôù@ Ô„ B   Á¸€y €±,.Ë
²ÂÒÀ Aq“  ÄŠè‰)©ó€  …SP RDÄDH‘1MU
$LABSI‘QàRDÄ”ä8‘1$LCMP‰ÓT BDÄ$‘1]$LWTIÕ`RDÄU%)@ Öüúáq‚H„Ö‹…ÚZuVpë¥úáq­İ¤"!5¢áv”Uœúé'…Óäsy’D&²ÂÓ%úáu¸\¬°£´Äãrºß®—ë„"  :ÜnW[õÒË>2b ní!	¢ ÚRp8Ø®Qñ<f€ ’ır†ÀÆ €,`	‡!å¬'À8D  v”UdbµZ2_®İÚBh¸^®Ò“EÕh  FZíªñ~ºGÄÕ¦ ­ß®—ë…Ö`4°VîÒêëvš.«@ ‡ÀİÂÑÂê ûåúé€ RET4Õè $UCMPRœ   …UL“P RET4ôé@ Õ„úá€ “ó¬L 7Dhg[r® :ÃKq@|F\¢gû´ˆo¾]g„ O€İ«  9'İ«»åúéu‰Ÿç‡iŞ9|ºÏ»”  İ«XmÂ+'€ 7jáÖ#|¿]!¡{  € RET4ôèÊø$UERTœ   …ULSP REU55h‘UMYB$USSWISS RETU%I@ Ö úáuˆ@ Êù¹S  ÀpÚ°|¿]/×„  “€À $¼#+5]f#X¬V»Wë¥úá€ •ór¦ %… â¡t '­İ¤'Ë¬œv¬®–«ÕÊırŠ€à4  ~¸\/qİÊ ]nx$í\:Ú,åŠÉ~¸X,Q0 Ò9¾@À¡úéŒ« RD„U%(ê`$UERT¸ RETÄTèè $USSVŠ REU55xéx$USVPœ   …’MSP bD„”åe8‘!	iJ$HBNZI“‘àRD„%9@ Ô„Z  > >¨0 ]nÉ YÖHøÀ²GÀÀõ’> ¼¬•»Á(n¿]1–
HŠ¤¥G ¤‰ˆ(JqĞ 
H˜‚ˆ‰  „‰ˆH1Ø
H˜†š¡© Ä‰ˆiª
Q×P
H˜ˆŠ‡Y ¤‰ˆªJQÖ°
H˜’œ‡J ¤‰‰È¨ñĞğ
H˜¦ª…' „‰Šè1ÒàH˜®©< ¤‰ŠêŠ³€  …UÌSP BEteH‘]$WFTUIÑ‘`REt%8‘]9$WBT‰ÕÓUS bEuTÕTÉ@ ÖTÊÅhºÖîÒ`å[»HDBk²–€ Ïw%Ö`4­İ¥ À¨][»HDBhÖÉ>=ïX„  [»JL—ë…¢Z g±@*Õ~º]b  òKeÆ Ë,FË	-ÄCÂİQ cñ€2Ë-ÄfH„  <-Å00AnË Š !–Xq–²Ã!‰’-Ùd@2Ë2Ã¬°ÈAäE6	€˜éH$WABSš€BEt%HèH$WFD€REtdEXè $WFT‹€REteEXéh$WNEG³ bEuTÕTÈê$WWMULœ   …PP BD$eH‘	QV$BFDI‘‘e  Qàyá"Òw v‘#wÀnÉ'!€= GY1ĞPqÀ ’œ¨Œ üÉ)ÊŠÈ¨qÀÏÌ¤ˆ‚¬Š‡üÊjHjÈ¨qÀÌ¨„Š¬Š‡8  …SÓP RDÄÕTÉ@ Õ .Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À«ªÅ~¹O‹Q@9‚xX°ª°ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …”ÌLSP RE4$4‰@ Õ”Z  Õbˆ@ÀÉ8‚  gå¸€>-K¬R)‡Ç 1aôÑ[»JC„ € Yùn ŠÃƒ¤F)ŠEaqƒñÖá[»JC€%¢>!‚ àFª€3@ ILÊtçSqæ 2œFó”eH’$"©)G@ )"šDà  …”ÌLP bE5dÅ	@ ÔÈZ  Í  ®Ê@Pn±0 Ğ9$€ÕÃ­ò3~ºDÏóxŒrùu€Õƒ¬l §ë•†  FL )"Bšzt )« ¦(F@@)"š²Dà  …TÎSP BE4•8‘M%JP €ËúésÇ„uxÜ.~²c  ‘MAHÆ:IÔŒ££€‘MAHÎp  …TÌSP RE4ÄEh‘M1$ULSVISÓ%  S 	h õÂ ?IÀèŒ0
p€á•úá~‚]bgùä^o¾N"7[µ`ır°À ë…Âk?\'á O[ˆïQ›õÓ% ¤‰
ièqĞ°
H¦˜ˆ‡  ¤ŠiˆŠÑÒp
Hª˜¦™, ¤Š©ŠjÓ€  …“LMÓP REô´Y@ Ô$úáh°\,›õÓ  ¤Š	éh³€  …QÓP RDD%t‘]1$DBRCK‰ÔÒàbDDÅ$4¸‘	]V$DWLUI•ÔàbDD%$5X‘]IV$DBERR”  Mp€…ÖXMœ >²ƒë™ ´>²âÜúÈpˆ  í-,‡ÕŠåÀ&h  á`¼\l“âÔÀid+‡UJ }R ¹åtzuTğ€a°ú¨ †›à0Ğ\¤sÊàğĞ1œ«wi	Âê®@ªD ë[»JN·UO xªÎ U¹VîÒ„p¤u­İ¥'[@0œ~¸\¬W+ú^?JÀ6«ô¼ ~•€-Wéxı+Ú¯Òğ5{ –€ 8X,V+•ÂÁh¹L•»´¤ø¹O'Õr ‚ ‘ÁYª! 'âe›Y@dô˜À:s  p $ˆM€ —X™şo¾]nÕƒ¬l ¦‹š  Ù  U›Y@ P dr¶;´B`³ÂÄ@êd²ÇL°Û,tË²ÇL°Û%¢>+€LĞ “x ¤‰ªJQ”À
H¦‡ „Ši*QĞ H¦’§P ¤Šj
Fs€  …TÎP bE4ÔTÔ(‘M55V$SMEMW‰ÓQSS%  U 	h 4  Ÿ„eğº\®3h Œ¼# fm /ÊÂ0À5›EÀÂ2°Œü#[Ä)íš  €l±Ó,6}	€‘ZİÚRD P ä2¦p† N{õÂù~ºc  ‘M55
:>‰ÓQSS#¡€‘M55V:,‰ÓQSUã$ ‘MAHÆ2^IÔŒç   …TÍÓP RE44ÄX‘MP 5M –€ /QÀ‚ …êa ”4® À˜Œ ñx² ’8in „Â–K´ˆG?-Ä AòÉ Y-sı’Í   vm7 u$öm  p¿\/“Êİúé› RE44tXéØúVµY  êÜ€0\,ÛR Áp¼tˆ¢Ñh´X." ‘ bDD$U%(éÈ$DBRCK© bDD%$5Xè $DBWA… RDD%u8è$DBWUÃ bDDÅ$4¸èÀ$DWLA™ RDEtÅXêà$DWRCK»€bDEu$5XÉX$HERRŒØ€RDÄ4Õ	À  …Q“P bDE4„¸‘=YJ$DWINC‰ÑPå  TàX¨  [»JC€P¨  »JC ­’ëq¹GÅ p	š  8\l–‹ÕÊÅj‰àà6€4X.‹U’ €îÒÓ€0€@wiIÀãr‰àà6• 8\l˜é $DOVER€ bDE4„¸éØ$DWDEC™ bDEt”ä8ÊH$HERRŒ RD…ÄØÈP$MEMRYœ   …SSP RDÄÔôH‘15=P 5ˆ f€ ×EÆıqˆ€añúáh¸ß®5»ê½ %Ø¤"[,ø(³@ ²¢İr½X¯×ğ±Y+6Ux  „ë•ÂËˆ@ XUâå€ €K4  z¿\/ë”.0…Æ P  P,®5¢ÕÆ(ºØ¯×ní!?\®7iI‚İp$SCLEŒ RE5#)À  …TÍ“P RE4D”i@ Ô„Z  Í  g…ÈàAÔÇp˜Œ{Vâ€ L ~:Ú/×åúé€ RE4D”hÈ$SPR2œ   …TÍSP RE4”åI@ ÔÄZ  Í  +À5Öå)á1Aòá†ìPÒ˜îA¢¸L ı`€ 0Ø­Ú¸uˆÚ/×åúé€ RE4”åHÈ$SPR2œ   …TÍP RE5Tä™@ ÔÈZ  Í  ‘À9ªë †–Çp˜Œ ùpŠÃv(ilw	ˆÁ¡ÀŒ ~0@À lVí\:Ämë…òıtÆ@@)"š‚‘”t ’)ª§$Î   …TÌÓP BE55H‘MY"P 5R –€ 3iõÂÕ/ÊÂ7á"0à`µ`·İdq° F}¸_/×KõÂÍ  daŒğ¹):¼V¶?®5¸ ırŠÀà4  ~¸Y´˜úF¿\o×Le’$"©)FR@)"š‚‘Œt )©ªGHÀ)"š²Dà  …TÌ“P RE5#‘MAHÊ$SPR3”  MI€%    r „eBè%’ıp³h TŒ#u‰€¶Æ.`¡ôíQ6A“Ì|=iŒGÎ¶˜Ä|}´Æ,ÛB ¶D8`š  „gá‹ -ÄCÃùÊ®à#vh   ¬Û ¶D/÷û4  lí—(«  pà  v¬¡– f€ ø« 3h(‹ 6GÁğš  3l`Ä>"3i€¶Ù``Xl6àPj¡Ú¨†Ãa± vªª vªª†È!²Íª€‹âÙ<_l–my y³n¨aÜ!  8h  ;V‘ñ!›N€DğÃPu‚ÀÀölhÁ˜Å¶1e™ÄÖ sÄ†ØĞ> í±ˆ`í ^£¬ æ'Šƒ1›˜Éf€ à
İ’Í¸€/»%ömŒÒkìÙmŒ`Q@²v“Yµä |	ß`†Ël`¾ˆ Q@)¶1¶¯pdí&€­1ˆë 4Æ.Ò¶ ` á0` È!ÚM†X,›rÀC wØ!²íQ
 C´š=>@7\ÚC¡€@`dí&¾ÁàLbÛ¿â ¨ø€2Á`±ƒdV"À€á‹Lb¯iŒC±ğ0é—  K€€%À€à`	p@¸$\. — #µfÙ}¼]¤Ğ©  l¾Ã—›dğ·#Ağµ¦1:ZcØ†ì €AàYØ@mŒAã€¸0Ë3@ @"  2ÍÂ€(ùÒ2  Èˆø"Óc8-—i63> Ğ‘Qã  	U92ú•Q‘‘T£% 	U%134ĞQ£.`QI20  ÑS‘#  II1=;l‘VS•#  aQY2îSQQ#  %9QY2ğ“S‘Õ#«€91Q}>:¢““×ÒS•#)€5A!J2ÚÔ•#> I5B2(”‘RS•## YIM.3è”‘U‘Pã$@QIÖ3„T–S‘#1 Ia%9%R0 ”ÔÕ‘Pã  QMQR0  ÔÕ£%àYMQ91=:Ê•‘R£. 9Q	Y3t•SĞ£? Qa	U:DUS‘#»ÀQa!J: ã» QaMRp  …QT• dDT4”DXQI9
RBFSETP•RS%  X {¬B  „kq |²Ygñ Øü#[Š k‘ ¼ü#[Š k±  ü#[Š k¡ „"  ;TÕK… %ÂÀá€	pĞ¸l\8.  — K‰€#Ã€	<<‘QÔ£À€	U9< •Q‘‘T£< 	U%1<ĞQ£Ã@QI22J‘PÒQcÄ 9<D‘S‘£Á€II1=3$‘VS•#  aQY2‘ÔÕ’Q#Á !1Q1Z3êSQQ#(À%9Q=2(’S•‘PãÀ@19Q"2:“UÑÓã  1=%9%R2ğSĞQ#Á@5M-1>2D““×ÒS•#Ã`A=IR;Ö”‘PÓT#¤ÀYI%9R; ”‘TĞÒã' YIY<‘QÍc±€5Ia9:¨”–S’U#³ MQ%9R:‚”ÔÒS•#  MIY<ÕU#Ã MQ:<(”Õ“Ğã2 Q	!J2°•‘U‘PãÂÀQa	U0 US‘#0À5QaMRp  …US dU…D”åHQ	!JTXLOUĞÕ UE„„E(Qa9NO_INT“UÑÓå  Sp ğ–~eX`Œü·eX`X¬<cØÅ–_e ŒFí%Ò°ğ"	Ÿ„ º`xˆÄkvHŒF#ˆÄb1ŒF#,´¨ "   @€jÀT  Vâ€•Ú[« ‘  *   ˆ  d„@ jÚ v–À iL  dÆZ€*<eÄ!"£¨&FM@2ª22*”uè¡*¤¦"F@À2
š,t ""¡¤¢"Æ[€*r$eÜ"§"(&FX@2b*r:¢DuT)!#)¢ªFaÀš¢tf)ª'&'¡ÇJ€2¢’
reì*,!*£#N   …ÓQ“ d4ÔED$É@ Ô,…7Œ "CğŒÌodÇ@ 2j"¢dà  …]`TÅ´I@ Ôüÿ  # @!aYJ: SĞQ'   …”İ]Z`du5Dä”I@ Ô 7v¨†ÀLt #©ª'$¢N   …›Z\ØÙ[ 5d„˜Y1>HEXVER‘S‘PÓàdTäDDI@ ¸ < ‘S‘U#  9>8d’V‘T£†eÍY!&8f„Õ“ç   …’S•Qàd”åEdT8Q	YEXTVEC”‘U‘Pàe5$5dT8%9Q=P 
üÈ«
ŠÈ¨X`mQ€ Õµ@Í  @ 6® ‡€ pCc€Â‡›lnÛÆ À¨ğûVkÃ †.ÕµFíQ»H³Cí•M [cwjÚ£6^¬V«•²  q „uH@,Ğ  @ —E‚ñl‚ç·«4  x¾Ù!SX@
ë  3êĞUJÀˆ   «ñ9›v  Ã0|fİ€h   b3@ ğÑ›w€¶Ô Pµ E gğP+GÀÂ¤|)Aà 0+ÁW1Àd  6Æ€ñâæ¶D   ˆ  ÖP  !²€GcàƒLb>H´Æ#àLbíQ¶Æ,²¸¡ôíQ˜—ÛLb:¼ dx¡òæ²^#àXÊ‘€†¬Ú¸:   ÆE¸Aú<>  ñj(‡ŒlÚ†Ã¥ 1ğE¦1 cÛ$|iŒGÆ†˜Å’û6]ª1@²v“G¢+´§~€@ ¸*  c0ö ¶AÒkìÙv¨Å FÈ!ÚMˆ#àLb>l´Æ#àƒLbÛ6Æ±€øbÓƒ-1‹dí&¾Ş­±‹,¾(
²Íâ€k˜ˆş 
ãàƒLbñv“GÈ€À|y¶FTÀCyÀ@#°¯F ‰©(Šqİà8š’œ‰Ô‰©)ÊñÖ & ‚‰ªªi*Qšğ †¤˜ Š
ªŠqĞ  ª¨¦†¥Êhªˆ*Š“€  …P bD„”ä•H‘1:$MEMRYIS’V bEdÄx‘AIJ$HERR‰T“`UÔU58!bWRTUÔ• D„T‘!A16$STKLM‰TQ%@]	p ¸\. — K‚€%     ˆMĞ°  ë|±DXº!@ £–è‹  
¨  ‹  @ H‹ 2\,´·€€b3“¬s½Aàğx=›P .`{ 'gåö  áxƒ€NVmU d²Ã# C¬¼#fÔ  ƒä#pÀ¶, ¾Í« ˜ Í±`•ªys … 1V >3i¸õ›MÀ    zµ\®±ğ¼»bVğáh¼Y/×6Ù€J Ëåúé~¸Y¶Ì›a€ñ 9?-Ù2ó6Ê D†H4E9ç! @a:‘à€
Hˆ†˜ Ä‰ªH(‘ÕP
HŠ¤¥ Ä‰	)É*‘à 
H ˜›ˆ Ä‰
ˆªI±à 
H’– e%„õ$HIaA=12RXDEL”•T‘àdÔ•44u8Ia=A:TXSET•Ó% Q à@  íX` C‚ Ï ÈAö6 2X` İ’[ŠVmı eŸ…ğ›µ@+<nÕ‚½ÂÉjˆp@   OÏç€ ­Ägİ’zhµBA7+¬F»V±ıÂ·dßÀ‘€1›@Ïç€ ·|Ù*ñ»$öşÛÛú 6x+Ù" Ú v¨¤°   v¬! ›øÒ¡@"< Í  6Èİ€\@’sÀ. Ù ¼@°ú 
° ¬æ#9:Ù.° v¨ªH« ° <@  I’] H‡   @`jÁ’ëà   íX2CMVh  Ñ	2D6$  ;V‘  ƒ Ö@$z ~2GÏñ»%ü u€%À à	p¸\. — Kš %Í € ‚¤„ªõ È*Héˆ©Ñ˜†‚˜˜Š¥ ÈhHH*h±™°†šˆ¨„™  ÈªJI‰èqĞ ’œ’¨š‰ì ‰‰èËğ˜’œ’©Ö É¨*ii‰ñÙ š’¦†§ ª
jœ’±  Ä‰¨©ªK1ÔÀ
H Š¤¥ ÄŠÉˆ(ñà@H¦¨–˜›7 ¨h)«˜Œ¦Š°’©	 Èèª‰¨©±ÒŠ‚¡½ ªi*Qšğ
 †¤˜‹ ª	¨ªjqÙĞ®¤©© ªêJ‰‰Ó€  …‘”ÓÓ“`dT4ô”ä˜IaMRRXREADQS– TT4õEˆ%5ARGBUFT‘ÓS E$ôdh11JEVENTV”ÕTÒ däõôäUH DEBUG”€MtÀ!ÄU%ˆy1=]1%	š  +Ø` 6â 0Z. ˆ°H„E€À#, ¯à  “š  8\gvH„ Ÿ†X  ¾Í   ‡‚Á`°Uî  fÒ0«€;Kxní):Ü'1ÉÚ[À`˜Œä!À@ğHVÑ?œ,Qğ’áq—` 6â 8X-‹€DX$¢á`0ˆ‡ Åo[üîÕb‚ÊÅf€ »êİ€=GPj"*ª?  [ˆ ‡è€~—Ù  ø {LÛ^ ñp¾® A¤Ñ	2D   ‹€°X%²>-Ù2ğ 	x¸ \. —€K@%Á j‰ÑØ ¤¨œ‚¤t ªKˆ©‘Ó€¤° Š  ÊK	ê
H‘Ö ¤° ˜™ Š‹	‰ñÑà¨° ˜™ ª‹
hª“€  …T–S e%„”ä•H1=%9%RRXEND”ĞÕS• e$D”åHIM.RDACMP”ÔÒS• E5DH	UJLENGTH•Q‘S‘ dU%$Äô8	JSTNLOC••Q‘ 55DèQI2PORT€Ğ‘Qàd$TuÃ(9ENDPL2“PTÒÓàd„ÅDÄUhIÖPL5f‡US!Ô”ÔÅHuAIQ:RXPROC‡ÓQ“!µ¥¥¡ f€ à lş
ËvÍÚ^€ §iB  °H †£  F`GjÌ1;Vc¬( í<³j í¶1[²Ëã¬( À²GÁ†˜Ä0î    @À@?M W@Cd     v¬ã, >uŒ°@Í›^@5Ô 1;Vl+¤ Úcóu¦1cØÁ¶0mŒÃ˜Å’    ` >Ş­±ƒùşl½X­W(`mŒ\ÀCéÚxaVà&  0 ÛàĞğ ARGBUF  d$tÄTèğ CALLER¶ TDTÅ%ˆè ECOINI¹ TT4õEˆğ EVENTVç D”ÔTHÈINITMDŒ‚€dÄô”ä•HîNO_NETŒÜ U4„(îROFFŒ¸ U%„DTÈÊRXOPRDŒ™€e%…ôÄÈéHRXREADƒ€U%…4UHğ STARCHŒÌ€eE„„”„ÉÀ  …`EE„„˜Qa!%!2DO_ERR‘×Õ“%  ZĞë•Âåj³lØEÂ·|9â€[ø(¿€‚€t@aÒ€m¤ =-Åà a¶æ¿€£ p†§ ÀÀ H$Œ#3ì‘ z¹ìd€œ@Œ¬ÈÄnÉ« · WÀ
 L4›Œ¢Q„Úm2™¤ãyĞ@t4NFPi8Şt'3¡”Üi7Á¤ãx€Æl7˜Í`Ò„È *f i8ÊtNG#yÈ@# Y  4  >Ù$ sè ~„,˜é@DO_ERR˜€dDõõD$Èè TXHI€eE„„”„ÈÌøTXPOLLŒÎ UE…4UIÀ  …“ÔÕÓÔĞ U55Dè		MINITMDÑP…‡ğ”P… ƒ@òşŒ/‹ø0€,—Š]’á`´\gå¸€?£à zÉl€@    àÊ\õbŸ„dw+|1À °µb>¤X.{­›o@À x¿p½FÀXX¶;¼AC$4ş
@Àhİğşˆ‡æÈH€-@`,Å'¹‹ïâàş-Œ Äóó˜¾ Ÿ—, L#3àÆH |r¶]n7XŒæ#9ÆÀ #E²	D sËdxwl¯Ù,V«•²Åj¹[,Ûz Ùp´D A˜Ì0`¶\- FÙ6A£wÀaº—A¨ªJIê\ Â"Å Úâ Ñj¿\/Ñ°  p­ÅB1án ™Œ;XÙà  
 lˆÏÏáP€PÕl_V Æëb“„daøFå4˜â€X O~¡€Ó¸Ú°p°]n6ËD0Ä †ÉøFl¾­PIú4 ÂöÉábÙ wd|p ğUŠ 2ğ 	x¸ \.( — G@ *b*:
duÄ¦ ª!¤GM@r¢š¢’*tà  …”•ÓÔ dtUD4Ä¸%9%1.SETCLK”‘PQÒàeu$•D4¸ (NOWŠ €T ïá` ='”|Z¡§ğ¸P(W9‹â C,ü ˆÂas6à ²ÏÁ†hP	†œÅ÷ñpÇ Óø@ „Â†mÀp¸IWğP=qÔšŠ¦¦‚À â€‹UÊÅ#ËÌĞ   ùf€ EâqƒAŒ€0ÖíX2Ygá¡ö~²Hd ¦A+1@$Âyˆ$“ˆÌğ!$@AfJdBIM†)‘	%6XˆIiÉ„–$ˆE&JŒWñ²Å~È„–“ğ„A'ˆ­'Ù@¤Å}	å6£äŠN"¥†£àœO!IÄâ+IîA!È¥6›Ø‚C!“Ê¤æ£Ô A)´Ş…")8‚Mb¼È„R1†C"”Úo"HŠD$µ$B)’Ôx?Ü-õFo>(Œì—ÅÆ à”‹aGgpƒñ’áq1£%Âã2\.3ğÕnÀY.Õ’áh¸ÇÌñ”Š¤¤¥À   "ÿ 6HÇ…¸ ˜#?3h°#ø@( ¶D5Š€«Ë€ê¸@G•» 
_ÀqÀ  @À Àur8ŒR:\n?X WÕãYÃ q{ÕF_x¨ŠàFÈAhë?6@¢ y@£Y6Iêç2€@	<²Íâ€S˜(U%$õ)@ Ô  b³h¨€|`´äõ~  €0ƒí’ÛÜÀ&Clxöx` ‡‚ €lÚ¤ +
"¶mR 
ÙµH fÕ ±Dîxv›Ä< Œ 3jA…E@Œ–mk ?1Iàğx<æ¡Èèt: ysĞ»%æÍ¯@Ò‹´ğwv¦÷Û$<vÏà¡ò>D×iáìğ
¬–EŠ!ƒQT”“Ô¸  Ù 	­Ùá@4æ„Öì‡ğ5 	¿ƒ ĞMü<hŸÃÆ€Ø ëÁiÉêü  ;W6ØÑ–O‚Àñğ›D BÀ6mÿ …Çç0=›€Šóƒ´ŞÆ(³oğ X#fßğ «Êô€€,: !à@ `‡€Øª÷i¼C‰ÂÂ:½Úo@	Ø,R;Í›^€¥À<»O.Òì(?˜,™x ¼^/ —‚ KÁ@ ÔU%$õ)x ¼:*‘ÑUÓã  %9%1.:Ö”‘PQÒã² MQ1.: •Ô’UÒç   …Q”Ô• eUE45(AUQNGETSCR€ĞÓ`DÔ”E819LO€’`5H%9^INCBPÕàˆÃ.  É8¥Æ\ ’ál´@ÀËŒ0Òp´\mWë…ú6  €`H†¡ƒÁãp¸\.0=OÁ7èĞ xˆÂ&H¬ZX(	…r¼®Rp°\b1x~f×01Xt@ød¸X-6´ºÃ 7ÆÍ®@gĞÀÂÁqŸ ğx<Í¯€o0=Œ³ˆp’Áp¼X a{X>Î60èîÉ`¸^,W(x#Ãm²™¶ÈŒ0;¸Nlp¼?sÊèğÈ8ˆÃVK…‚ã €@0Â™ÂÁKÂáë¥ÂÑq¯İ¥'[@2É~¸X-~í)
 Ã €e‚ıt†\k÷i`¸Ø/×K…Öıt¸X-ÄFpœÙ/×…¢€«¸Iúé[ãÛAÌ_dËÀ %à rj*šš
<¼ ^)hi‰1Ø(ˆŠ†…˜ˆˆ¨jqØ (ˆŠ†¯È«
*Š‘ÒŠ¨¦†¥d ÈêjH¨(‘ÜÀ<‚œˆ˜‹Ã©«JqÒ “É)ª*Š‘×À(’œ†…u‰)ÈjñÕ€(˜‚œ‰%I‰ñßğ:š‚–Šg	©¨)h¦‘Øp:šˆŠ†…o©©«QÕÀ:šŠ°‰L©©«
‘Ö`:šŠDDT4(aAQRSETATT’STU TÔ„U„(5!a^MHEXTSRV TÔDT4(NHANDLERV”àdu5$TH5%9^MINDSPRÑLàTÔ´SH ERRORŠ €dÔU54y@ Ô|ÂÁh¸İdƒòÜP\Œ $qø$„ Àk |	2\-­.G',Y7jÁ’áh°\d„¹ªıp¿Nà šÅ>¯™Ñ Ú uS°K…âÁq“Ğ 
}|8 Ÿ’ 
\îÈ$€2¡tOv¬.EÆ—A¨ªJIê\  $Õ~¸Bd‚1ánÈrˆÏÏá €|¸Y/á€Ël†ÇæYDPe¤_Â!A9–A#çèË€ 2Yf@e–¡fÑ`Gğüp F1ÌD¦[$03„ †YdPe´Cwñğ@e¸C÷ğ°P ¦Yd@eDÀÀ–IoöZ$$~ 0‚\+e–E FYDPœe˜D	†Y$@”OÏá €
#> gğ°@Z'…¸IH nÕƒ%Âñt¸Z'·K…Æå#â€@Œüş áÃ„à>2\¤È_´H"€«T4ş
hªJQ—à
HŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à   „ e– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à   „ , @– "€- !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞP to us
wi1:	IN	A,(winst)
	AND	3
	CP	1
	JR	NZ,wi1
	POP	AF
	RET


	ELSE		;NOT nascom

rwdisc:	SUB	A
	LD	(rcount),A	;Set retry count to zero

	PUSH	DE		;Save disk & read flag

;Convert sector number (HL) into track/sector (DE)

	IF	large

;Divide by eight

	LD	A,L
	AND	7		;Remainder MOD 8
	LD	E,A
	ADD	HL,HL		;*2
	ADD	HL,HL		;*4
	ADD	HL,HL		;*8
	ADD	HL,HL		;*16
	ADD	HL,HL		;*32
	LD	D,H		; div 8 <=> *32 DIV 256

	ELSE

;Divide by five - Leaves result in A & remainder 

	LD	DE,H„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰hªJQ—à
HŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à   „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãe†‡ ÖXhpe†‡ÒğŒ¬ëd²ÃC;, !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞP%à r2’**d¼ ^.  —  Ë€@eÀ@2à0p ¸\.®ŒÏ€ÒD…ÄØÀ $MEMRY–ÔÄÄô8Èà-CAHEXÖd4TÕE˜ì0CIDLEúdDÄÄô8í°DISCRD‰äD•45u(íè,FBLKŒÓäe4U„•HïhINIDSKö d”ä”ÄõxéğPCRLFŒÑ‚ÕÔU58è0VERADRŒ– UdU$„˜èPVERLENŒ— UdU$Äøè VERMSGœ   …‘”ÓQT de4U„•H1%MQ=RINKEY‘ÑUQS`U4„(1%MQMRP 5" p¼^àWK…Æ÷=Ã¬ƒ¸øÉ{ŒœÀK´¶ :^§·¸âÉ{€#¤ Ma%R:*‘ÑUQSc  %9-f: “TÕÕ#¢ 1%MQMR:4TÒT§   …SPUÒ TÔD4ˆ12TSTRENŠ €TU%$õ)APÖÔÂıp´\j÷éÜ ¾ ÂCÆK”F~sÚÄÀ%üYcñà`~GÀ‘€.pŸ¤pp F~„ 1ğ¨îş
  ÇğŒ@~€ ñü`$Gğed RAM
	LD	H,A
	LD	L,B		; L:=0 (B has 0 already)
	CALL	waitot

	LD	A,paread	;Value to be sent to (paport)
	CALL	CtoWIN		;Code in Safe RAM (DI,OTIR,OTIR,EI,RET)

	CALL	waitin
	IN	C,(C)		;return code
	RET	Z		;Done if OK
	LD	HL,errloc
	LD	(HL),199
	RET



wput:	CALL	waitot		;This rtn sends a byte to win, with h/shake
	OUT	(windat),A
	RET

waitot:	PUSH	AF		;Wait till win is ready for us to output
wo1:	IN	A,(winst)
	AND	3
	JR	NZ,wo1
	POP	AF
	RET

waitin:	PUSH	AF		;Wait for win to talkck:	DB	0
dsec:	DB	0
	DB	022H		;2* 256 byte sector
derror:	DB	0		;=0 on exit if no error



	COMMON	/debug/

mesflg:	DEFS	1


	COMMON	/error/

errloc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2


	DSEG

cacmap:	DEFS	noblks*4	;Cache sector map


page:	DEFS	1		;Current cache page

rwpage:	DEFS	1		;Parameter to RWDISC

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

zeros:	DEFS	1024		;Contains 0s !!

;	******* MAPMAN AREAS ****
	AND	03H		;Now back in right place
	LD	E,A

	PUSH	HL
	PUSH	DE
	CALL	rwdisc		;Get first
	POP	DE
	POP	HL
	INC	C		;Error => return now
	DEC	C
	JR	Z,nxtsec

blkdud:	DEC	D		;Test for read operation
	RET	Z		;Write, so no need to zap blockno.
	LD	(IY+2),0FFH
	LD	(IY+3),0FFH	;Mark as empty since contains junk
	RET

nxtsec:	LD	A,(rwpage)
	ADD	A,2		;Sector is 2 pages long
	LD	(rwpage),A
	INC	HL		;Next sector
	CALL	rwdisc
	INC	C
	DEC	C
	JR	NZ,blkdud

	IF	t.on
	mcond	blkm
	CALL	pcrlf
	PU*****

lstadr:	DEFS	2		;Address of last block found

mapptr:	DEFS	maxdrv*4	;( length (2) + mapptr (2) ) * maxdrv

myheap:	DEFS	heapln


	END
 ache sector map


page:	DEFS	1		;Current cache page

rwpage:	DEFS	1		;Parameter to RWDISC

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

zeros:	DEFS	1024		;Contains 0s !!

;	******* MAPMAN AREAS ****SH	AF		;To allow for the compulsory POP following
blkm:	POP	AF		;Jumped to from mcond.
	ENDIF

	RET




;RWDISC
;Read/Write sector to/from disk
;
;On entry:
;    (rwpage)	Page number to write to/get from
;	 D	Read flag (FF-read,0-write)
;	 E	Disk number
;	 HL	sector no.
;
;On exit:
; C	Error code (0 = OK)
;	(errloc) also updated


	IF nascom

rwdisc:	
	IF	t.on
	LD	A,(rwpage)
	tmess	<dtsmsg,HL,atmsg,AF>
	ENDIF

	LD	C,D		;Save r/w flag
	LD	A,E		;Test for drive 1
	OR	A
	JR	Z,d= OK)
;	(errloc) also updated
; (IY)	Needs writing flag cleared always. Blockno zapped if read error

rwblk:	LD	(IY+1),0FFH	;Clear needs writing flag

	PUSH	IY
	POP	HL		;Calculate page no. from table offset
	LD	BC,cacmap	;Start of table
	OR	A		;Clear carry
	SBC	HL,BC
	LD	A,L		;the answer

	LD	(rwpage),A	;Entry param for RWDISC

	LD	L,(IY+2)	;blockno.
	LD	A,(IY+3)	; Hi byte also holds drive
	AND	3FH		;not any more
	LD	H,A
	ADD	HL,HL		;Block * 2 = Sector

	LD	A,(IY+3)	;Drive
	RLCA
	RLCAHL)
	LD	H,A
	CP	A
	SBC	HL,DE
	JP	C,ranerr

	POP	HL
	POP	AF

	ENDIF			;** End of range check **

	EX	DE,HL
	ADD	HL,BC
	POP	BC
	LD	B,C
	RET


	IF	c.on

;Bad map number / map not initialized

maperr:	error	'Bad map number'

;Block number out of range

ranerr:	error	'Duf block number'

	ENDIF




;PROCEDURE fblk (VAR block: block_descrip; VAR no_block: WORD);
;
;Attempt to find up to no_block blocks starting from block_descrip

fblk:	POP	HL		;Return address
	POP	BC		;no_blo,A
	DEC	HL
	DEC	HL
	JP	fstart



;Found it

fblk2:	EX	DE,HL
	POP	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	POP	HL
	PUSH	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	CP	A
	LD	E,A
	JP	fblk12

;Find how many free & allocate them

fblk7:	INC	IX
	LD	E,(IX+0)
	LD	B,C
fblk9:	CP	A
	RR	E
	JR	NC,fblk11
fblk12:	DEC	HL
	LD	A,H
	OR	L
	JR	Z,fblk11
	DJNZ	fblk9
	RR	E
	LD	(IX+0),E
	JP	fblk7

;Wind up

fblk11:	RR	E		;Allocate out of last byte
	DJNZ	fblk11
	LD	(IX+0),E
	EX	DE,HL

	POP	HLck
	EX	(SP),HL		;block_descrip
	PUSH	IX
	PUSH	BC

fstart:	LD	A,(HL)		;Drive
	INC	HL
	PUSH	HL		;Save address of block number
	LD	E,(HL)		;get block number
	INC	HL
	LD	D,(HL)

	EX	DE,HL
	PUSH	HL
	CALL	getblk
	LD	C,8
	CP	A		;Clear carry for RRA
	DEC	B
	LD	A,(HL)
	JR	Z,fblk1
fblk0:	RRA
	DEC	C
	DJNZ	fblk0
fblk1:	LD	B,C
	PUSH	AF
	PUSH	BC
	PUSH	HL
	EX	DE,HL
	INC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	DEC	HL
	LD	B,(HL)
	DEC	HL
	LD	C,(HL)
	EX	DE,HL
	ADD	HL,BC
	POP	BC
	PUSH	BC
	POP			;Fill in blocks found
	LD	(HL),E
	INC	HL
	LD	(HL),D

	POP	IX
	RET
;
; ****** END OF MAPMAN ******
;

;
; Osword block for osword &FF - r/w of i/o processor RAM
;

cblock:	DB	0DH,1
ioaddr:	DB	0,0,0,0
zaddr:	DB	0,0,0,0
clen:	DB	0,0
crdwr:	DB	0		;0=write to i/o proc, 1=read from i/o proc

;
; Osword block for disc r/w
;

dblock:
ddrive:	DB	0
daddr:	DB	0,0,0FFH,0FFH	;Address - hi bytes &FFFF since always i/o proc
	DB	3		;No. of params
drdwr:	DB	04BH		;&53 = read, &4B = write
dtraIX
	CP	A
	SBC	HL,BC
	EX	DE,HL
	POP	BC
	POP	AF
	POP	HL
	LD	C,8
	JP	fblk3

;Main find loop
;
;On entry:
; BC	8
; DE	number of bytes to search before giving up
; HL	start block number
; IX	pointer to current byte to search

fblk4:	LD	A,(IX+0)
	OR	A
	JR	NZ,fblk6
	ADD	HL,BC
	JP	fblk5
fblk6:	LD	B,C
fblk3:	RRA
	JR	C,fblk2
	INC	HL
	DJNZ	fblk3
fblk5:	INC	IX
	DEC	DE
	LD	A,E
	OR	D
	JP	NZ,fblk4

;NOT found at all so retry starting at block zero

	POP	HL
	LD	(HL),A
	INC	HL
	LD	(HL)	LD	HL,dsflag
	AND	(HL)		;Test for double sided
	JR	Z,onesid
	LD	A,D		;Track
	CP	80
	JR	C,onesid	;Side 0 if trk 0..79
	LD	A,159		;tracks 80..159 map onto 79..0 on side 1
	SUB	D
	LD	D,A
	SET	1,C		;Add 2 to drive no.
onesid:


;On entry to here:
; D	track
; E	sector
; B	read flag
; C	drive/side

	LD	A,C
	LD	(ddrive),A	;Set up osword block
	LD	A,D
	LD	(dtrack),A
	LD	A,E
	SLA	A		;*2 for use with 256 byte sectors
	LD	(dsec),A

	LD	A,B
	OR	A		;Read flag
	LD	A,04BH		;Write op-code
	JRet drive
	INC	HL
	LD	B,(HL)		; & block number
	INC	HL
	LD	H,(HL)
	LD	L,B

;	tmess	<alblk0,HL,alblk1,AF,crlf>

	CALL	getblk
	CPL
	AND	(HL)
	LD	(HL),A
	SUB	A
	RET



;GETBLK
;Converts Map number & Block Number into address and bit number
;
;On entry:
; A	Map number
; HL	Block number
;
;On exit:
; A	Byte with bit set
; B	1 - 8 => Bit number
; DE	Points to low byte of address in MAPPTR (length @(DE-2))
; HL	Address of byte

getblk:	PUSH	HL

	CP	maxdrv
	JP	NC,maperr

	ADD	A,A	Z,notrd
	LD	A,053H		;Read op-code
notrd:	LD	(drdwr),A

	IF	t.on
trace:	mcond	l4
	PUSH	AF
	PUSH	DE
	PUSH	BC
	mess	dtsmsg
	POP	HL
	CALL	dhxout
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(rwpage)
	CALL	cahex
l4:	POP	AF
	ENDIF

	LD	HL,ramlow	;Cache base
	LD	A,(rwpage)	;Page offset
	ADD	A,H
	LD	H,A
	LD	(daddr),HL

	LD	A,07FH		;Disc osword number
	LD	HL,dblock
	CALL	osword

	LD	A,(derror)
	LD	C,A		;Result reg
	OR	A
	RET	Z

	LD	HL,errloc
	LD	(HL),0C7H	;Disc error

	PUSH	BC
	mess
	ADD	A,A
	LD	C,A
	LD	B,0
	LD	HL,mapptr+3
	ADD	HL,BC
	EX	(SP),HL

	LD	A,L		;HL/8, A=Remainder
	AND	7
	SRL	H
	RR	L
	SRL	H
	RR	L
	SRL	H
	RR	L

	LD	B,A		;Set bit A in A
	INC	B
	LD	C,B
	SUB	A
	SCF
getbl1:	RLA
	DJNZ	getbl1

	POP	DE
	PUSH	BC
	EX	DE,HL
	LD	B,(HL)		;BC:= address of map
	DEC	HL
	LD	C,(HL)

	IF	c.on		;** Range check block **

	PUSH	AF		;Check map exists
	LD	A,B
	AND	C
	INC	A
	JP	Z,maperr

	PUSH	HL		;Check valid block number
	DEC	HL
	LD	A,(HL)
	DEC	HL
	LD	L,(	errmsg
	POP	BC
	RET


;
;  ****** BIT MAP MANAGEMENT CODE STARTS HERE *************
;
;


;PROCEDURE dalloc (blk: block_descrip);

dalloc:	POP	HL		;Return address
	EX	(SP),HL		;Blk address

	LD	A,(HL)		;Get drive
	INC	HL
	LD	B,(HL)		; & block number
	INC	HL
	LD	H,(HL)
	LD	L,B

	tmess	<frblk0,HL,alblk1,AF,crlf>

	CALL	getblk
	OR	(HL)
	LD	(HL),A
	SUB	A
	RET



;PROCEDURE alloc (blk: block_descrip);

alloc:	POP	HL		;Return address
	EX	(SP),HL		;Blk address

	LD	A,(HL)		;GHL=^previous ent

setpag:	LD	HL,cacmap
	LD	B,0			;BC now = previous page no.
	ADD	HL,BC

	LD	A,(IY+0)
	LD	(HL),A			; previous^.next:=new_ent^.next
	LD	A,(page)
	LD	(IY+0),A		; new_ent^.next:=head_ptr
	LD	A,E
	LD	(page),A		; head_ptr:=new_ent

	SCF
	RET




;RWBLK
;Read/Write block to/from disk
;
;
;On entry:
; D	Read flag (&FF -> read, 0 -> write)
; IY	Points to map entry
;(page)	**NOT USED** (hence we can write blocks not at head of chain)
;
;On exit:
; C	Error code (0 = OK)
;To allow for the compulsory POP following
blkm:	POP	AF		;Jumped to from mcond.
	ENDIF

	RET




;RWDISC
;Read/Write sector to/from disk
;
;On entry:
;    (rwpage)	Page number to write to/get from
;	 D	Read flag (FF-read,0-write)
;	 E	Disk number
;	 HL	sector no.
;
;On exit:
; C	Error code (0 = OK)
;	(errloc) also updated


rwdisc:	PUSH	DE		;Save disk & read flag

;Convert sector number (HL) into track/sector (DE)

	IF	large

;Divide by eight

	LD	A,L
	AND	7		;Remainder MOD 8	(errloc) also updated
; (IY)	Needs writing flag cleared always. Blockno zapped if read error

rwblk:	LD	(IY+1),0FFH	;Clear needs writing flag

	PUSH	IY
	POP	HL		;Calculate page no. from table offset
	LD	BC,cacmap	;Start of table
	OR	A		;Clear carry
	SBC	HL,BC
	LD	A,L		;the answer

	LD	(rwpage),A	;Entry param for RWDISC

	LD	L,(IY+2)	;blockno.
	LD	A,(IY+3)	; Hi byte also holds drive
	AND	3FH		;not any more
	LD	H,A
	ADD	HL,HL		;Block * 2 = Sector

	LD	A,(IY+3)	;Drive
	RLCA
	RLCA
	AND	0
	LD	E,A
	ADD	HL,HL		;*2
	ADD	HL,HL		;*4
	ADD	HL,HL		;*8
	ADD	HL,HL		;*16
	ADD	HL,HL		;*32
	LD	D,H		; div 8 <=> *32 DIV 256

	ELSE

;Divide by five - Leaves result in A & remainder in L

	XOR	A
	LD	DE,-500H
tscon1:	ADD	HL,DE
	JR	C,tscon0
	SBC	HL,DE
tscon0:	RLA
	SRA	D
	RR	E
	JP	NC,tscon1

	LD	D,A		;Swap regs to match 8" vers
	LD	E,L

	ENDIF

	POP	BC		;drive now in C (0..1)

	LD	A,C
	OR	A		;Drive 0 or 1?
	LD	A,1		;flags unchanged
	JR	Z,drv0
	RLCA			;Carry clear, so A:=2
drv0:3H		;Now back in right place
	LD	E,A

	PUSH	HL
	PUSH	DE
	CALL	rwdisc		;Get first
	POP	DE
	POP	HL
	INC	C		;Error => return now
	DEC	C
	JR	Z,nxtsec

blkdud:	DEC	D		;Test for read operation
	RET	Z		;Write, so no need to zap blockno.
	LD	(IY+2),0FFH
	LD	(IY+3),0FFH	;Mark as empty since contains junk
	RET

nxtsec:	LD	A,(rwpage)
	ADD	A,2		;Sector is 2 pages long
	LD	(rwpage),A
	INC	HL		;Next sector
	CALL	rwdisc
	INC	C
	DEC	C
	JR	NZ,blkdud

	IF	t.on
	mcond	blkm
	CALL	pcrlf
	PUSH	AF		;lock to zero to give correct value in areas not initialised
;	by the user

clrblk:	LD	A,B
	SUB	4		; 0400H <=> 1K <=> block size
	OR	C
	JR	Z,rdywr		;ready to write

	PUSH	BC
	PUSH	HL
	PUSH	DE

	LD	HL,0400H
	LD	(clen),HL	;Length
	LD	HL,zeros	;RAM containing 1K of 0s
	LD	(zaddr),HL
	LD	HL,ramlow	;Base of cache
	LD	A,(page)
	ADD	A,H		;Add in entry offset
	LD	H,A
	LD	(ioaddr),HL

	XOR	A		;Write op-code =0
	LD	(crdwr),A

	DEC	A		;A=0FFH
	LD	HL,cblock
	CALL	osword

	POP	DE
	POP	HL
	Paddress of cacmap entry
	ADD	IY,DE

	LD	A,(IY+2)
	CP	L
	JR	NZ,filop1		;No good
	LD	A,(IY+3)		;Test hi byte
	CP	H
	JR	Z,found			;Both agree

filop1:					;Get here if this block no good
	DJNZ	filoop			;Fall through if we have tried all ents

; Now have tail of chain

	PUSH	HL			;Save blockno.
	CALL	setpag			;Make this into head of chain
	LD	A,(IY+1)		;Needs writing flag
	OR	A			; sets Zf, also clears Cf
	JR	NZ,setblk		;Not required, so just insert blkno.
	LD	D,0			;r/w flag set to write
	OP	BC
	JR	rdywr


;fiblk
;
;Find block in cache.
; If block not found, return the tail of the chain, making it the head
; then writing out if necessary & inserting the new info in the map.
;
;On entry:
; HL	address of block descriptor (drive then block)
;
;On exit:
;(page)	updated
; IY	points to entry in cacmap
; cf	set	Found
;	clear	Not found
;
; HL,DE,BC registers all used
;

fiblk:

;Put drive in top 2 bits of block number

	LD	A,(HL)			;Drive
	RRCA
	RRCA				;Put in top 2 bitsCALL	rwblk
setblk:	POP	HL			;Get back blockno.
	LD	(IY+2),L
	LD	(IY+3),H		;Store in map
	OR	A			;Clear carry <=> not found
	RET


;	Found already in cache, so set carry for return & drop through
;	to move to head of chain if not already there.

found:	LD	A,(page)
	CP	E			;Test for already head of chain
	SCF
	RET	Z			;Return to save looping up chain

;	Move the new entry to the top of the chain
;	IY points to new entry, C is previous page, E is new page
;	On exit, carry set, A=(page), B=0, 
	INC	HL
	LD	E,(HL)			;Lo(block)
	INC	HL
	OR	(HL)			;Hi byte add to drive bits
	LD	D,A
	EX	DE,HL

;	fudge to get started - note that link pointer is at start of map entry

	LD	IY,page			;Start of chain - IY usually points to
					; the previous entry
	LD	D,0

;	HL=block/drive no, D=0
;	In loop, DE=page no, C=previous page no.

	LD	A,(csize)		;Number of entries to search
	LD	B,A			;For DJNZ

filoop:	LD	C,E			;Save previous pageno
	LD	E,(IY+0)		;Advance to next
	LD	IY,cacmap		;Calculate OP	BC
	EX	(SP),HL
	EX	DE,HL

;	Now have: HL=source offset, BC=length, DE=destination address

	IF	t.on
	mcond	rdm1
	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL
	PUSH	DE
	mess	rdmess
	LD	L,(IY+2)	;Blockno.
	LD	H,(IY+3)
	CALL	dhxout
	mess	adrmsg
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(page)
	CALL	cahex
	CALL	pcrlf
	POP	HL
	POP	DE
	POP	BC
rdm1:	POP	AF
	ENDIF

	LD	(clen),BC	;Set up control block for Osword
	LD	(zaddr),DE

	LD	A,(page)	;Add page offset to user's offset
	ADD	A,H
	LD	H,AL
	PUSH	HL
	mess	wrmess
	LD	L,(IY+2)	;Blockno.
	LD	H,(IY+3)
	CALL	dhxout
	mess	adrmsg
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(page)
	CALL	cahex
	CALL	pcrlf
	POP	HL
	POP	DE
	POP	BC
wrm1:	POP	AF
	ENDIF

	JR	NZ,clrblk	;No pre-read means zap to =0
	JR	C,rdywr		; Carry => it's been pre-read anyway

	PUSH	BC
	PUSH	DE
	PUSH	HL

	LD	D,0FFH		; r/w flag (read)

	LD	A,B		;Now test for BC=0400H => don't read
	SUB	4		;because the whole blk will be over-written
	OR	C
	CALL	NZ,rwblk	;IY cont
	LD	BC,ramlow	;Start of cache RAM
	ADD	HL,BC
	LD	(ioaddr),HL

	LD	A,1		;Read op-code
	LD	(crdwr),A

	LD	A,0FFH		;Processor to processor RAM copy
	LD	HL,cblock
	JP	osword

;	RET			;Finished





;PROCEDURE disc_wr(addr,length,offset:Word;pre_read:Boolean;blk:block_descrip);
;
; Write up to 1 block from specified address. <offset> is offset in block.
; Errors are returned in common area <error>
;


discwr:	POP	HL		;Return address
	EX	(SP),HL		; addr of block descriptor


	CALL	fibains all other info

	POP	HL
	POP	DE
	POP	BC

;	Now ready to write (into cache)
;	HL=source, DE=offset to dest., BC=byte count
rdywr:
	LD	(IY+1),0	;Needs writing (or soon will!)

	LD	(zaddr),HL	;Set up Osword control block
	LD	(clen),BC

	LD	HL,ramlow	;Base addr of cache
	ADD	HL,DE		;Add user's offset
	LD	A,(page)	;Now add entry offset
	ADD	A,H
	LD	H,A
	LD	(ioaddr),HL

	XOR	A		;Reason code - Write
	LD	(crdwr),A

	DEC	A		;A=&FF
	LD	HL,cblock
	JP	osword		;Call & return


;	Clear blk		;Takes ^blk in HL, returns IY ^map entry,
				;Cf set if found, Else we have the former tail

	LD	HL,errloc 	;This user is not interested in any error
	LD	(HL),0  	; to do with previous contents of page

	POP	HL		;Return address
	POP	BC		;Pre_read flag
	DEC	B		;Pre_read now in Z flag, carry unchanged
	POP	DE		;Offset
	POP	BC		;Length
	EX	(SP),HL		;Source addr to HL

;	Now have Z <=> pre-read, NZ=> no read, C=> already in cache
;
	IF	t.on
	mcond	wrm1
	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	H0

;	HL=block/drive no, D=0
;	In loop, DE=page no, C=previous page no.

	LD	A,(csize)		;Number of entries to search
	LD	B,A			;For DJNZ

filoop:	LD	C,E			;Save previous pageno
	LD	E,(IY+0)		;Advance to next
	LD	IY,cacmap		;Calculate address of cacmap entry
	ADD	IY,DE

	LD	A,(IY+2)
	CP	L
	JR	NZ,filop1		;No good
	LD	A,(IY+3)		;Test hi byte
	CP	H
	JR	Z,found			;Both agree

filop1:					;Get here if this block no good
	DJNZ	filoop			;Fall through if we have tried all ents

; Now have tail A
	JR	NZ,idl1		;Doesn't need it

	PUSH	BC
				;D already contains 0 (meaning write)
	CALL	rwblk

	POP	BC
	DEC	B
	RET	Z		;Written as many as we want to

idl1:	LD	E,(IY+0)	;pointer to next entry in chain
	DEC	C		;Counter to prevent checking more entries
	JR	NZ,idloop	;than there are cache entries

	RET




;PROCEDURE cempty
;
;Write out any part of the cache which still has things in.

cempty:	LD	B,noblks	;Max number of blks that could possibly
mtloop:	PUSH	BC		;need writing
	CALL	ciof chain

	PUSH	HL			;Save blockno.
	CALL	setpag			;Make this into head of chain
	LD	A,(IY+1)		;Needs writing flag
	OR	A			; sets Zf, also clears Cf
	JR	NZ,setblk		;Not required, so just insert blkno.
	LD	D,0			;r/w flag set to write
	CALL	rwblk
setblk:	POP	HL			;Get back blockno.
	LD	(IY+2),L
	LD	(IY+3),H		;Store in map
	OR	A			;Clear carry <=> not found
	RET


;	Found already in cache, so set carry for return & drop through
;	to move to head of chain if not already there.

found:	LD	A,(dle
	POP	BC
	DJNZ	mtloop
	RET



;PROCEDURE disc_rd(addr,length,offset:Word;VAR blk:block_descrip);
;
; Read in up to 1 block to specified address. <offset> is offset in block.
; Errors returned in common area <error>
;

discrd:	XOR	A
	LD	(errloc),A	;No error yet

	POP	HL
	EX	(SP),HL		;Get blockno. address

	CALL	fiblk		;Returns HL pointing to map entry
	JR	C,incach	;Carry => block already in cache

	LD	D,0FFH		;r/w flag =READ.
	CALL	rwblk

incach:	POP	HL		;Return addr.
	POP	DE
	Ppage)
	CP	E			;Test for already head of chain
	SCF
	RET	Z			;Return to save looping up chain

;	Move the new entry to the top of the chain
;	IY points to new entry, C is previous page, E is new page
;	On exit, carry set, A=(page), B=0, HL=^previous ent

setpag:	LD	HL,cacmap
	LD	B,0			;BC now = previous page no.
	ADD	HL,BC

	LD	A,(IY+0)
	LD	(HL),A			; previous^.next:=new_ent^.next
	LD	A,(page)
	LD	(IY+0),A		; new_ent^.next:=head_ptr
	LD	A,E
	LD	(page),A		; head_ptr:=new_ent

	SCF
	RET
ins all other info

	POP	HL
	POP	DE
	POP	BC

;	Now ready to write (into cache)
;	HL=source, DE=offset to dest., BC=byte count
rdywr:
	LD	(IY+1),0	;Needs writing (or soon will!)

	IF	RM

	LD	A,(page)
	INC	D		;Hi of offset - ie. page offset

wr1:	DEC	D
	JR	Z,wr2
	INC	A		;Adjust start page
	JR	wr1

wr2:	LD	D,HIGH secbuf	;secbuf is the address where the cache appears
	DEC	BC
	INC	C		;For DJNZ onB,C separately
	INC	B

	OUT	(pagon),A
	PUSH	AF

wr3:	LD	A,(HL)
	LD	(DE),A		;Move data
		LD	H,A
	XOR	A
	LD	L,A		;HL=address of start of page
	LD	B,4		;page count

	DI
	LD	A,pawrit
	OUT	(paport),A

clrbl0:	LD	(HL),0
	INC	L
	JR	NZ,clrbl0
	INC	H
	DJNZ	clrbl0

	LD	A,panorm
	OUT	(paport),A
	EI

	ENDIF

	POP	HL
	POP	BC
	JR	rdywr


;fiblk
;
;Find block in cache.
; If block not found, return the tail of the chain, making it the head
; then writing out if necessary & inserting the new info in the map.
;
;On entry:
; HL	address of block descriptor (drive then block)
;
INC	HL
	INC	E
	JR	NZ,wr4		;Not crossing a page boundary
	POP	AF
	INC	A
	OUT	(pagon),A
	PUSH	AF

wr4:	DEC	C
	JR	NZ,wr3		;Inner loop
	DJNZ	wr3		;Outer

	POP	AF		;Scrap page counter
	OUT	(pagoff),A	;Finished, so page off (value immaterial)

	ELSE		;NASCOM

	DI			;Stack does not work when page open!!
	LD	A,pawrit	;Enable page for writing
	OUT	(paport),A

	LD	A,(page)	;Add page number to offset
	ADD	A,D
	LD	D,A
	LDIR			;Do the transfer

	LD	A,panorm
	OUT	(paport),A	;Reset paging to nor;On exit:
;(page)	updated
; IY	points to entry in cacmap
; cf	set	Found
;	clear	Not found
;
; HL,DE,BC registers all used
;

fiblk:

;Put drive in top 2 bits of block number

	LD	A,(HL)			;Drive
	RRCA
	RRCA				;Put in top 2 bits
	INC	HL
	LD	E,(HL)			;Lo(block)
	INC	HL
	OR	(HL)			;Hi byte add to drive bits
	LD	D,A
	EX	DE,HL

;	fudge to get started - note that link pointer is at start of map entry

	LD	IY,page			;Start of chain - IY usually points to
					; the previous entry
	LD	D,mal
	EI

	ENDIF

	RET



;	Clear block to zero to give correct value in areas not initialised
;	by the user

clrblk:	LD	A,B
	SUB	4		; 0400H <=> 1K <=> block size
	OR	C
	JR	Z,rdywr		;ready to write

do:	PUSH	BC
	PUSH	HL		;save working registers

	IF	rm
	
	LD	A,(page)
	LD	B,4
	LD	HL,secbuf

clrbl0:	OUT	(pagon),A
clrbl1:	LD	(HL),0
	INC	L
	JR	NZ,clrbl1
	INC	A
	DJNZ	clrbl0		;Secbuf is 256 byte window, so L wraps round
				;for next physical page

	ELSE		;NASCOM

	LD	A,(page)
/w flag =READ.
	CALL	rwblk

incach:	POP	HL		;Return addr.
	POP	DE
	POP	BC
	EX	(SP),HL
	EX	DE,HL

;	Now have: HL=source offset, BC=length, DE=destination address

	IF	t.on
	mcond	rdm1
	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL
	PUSH	DE
	mess	rdmess
	LD	L,(IY+2)	;Blockno.
	LD	H,(IY+3)
	CALL	dhxout
	mess	adrmsg
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(page)
	CALL	cahex
	CALL	pcrlf
	POP	HL
	POP	DE
	POP	BC
rdm1:	POP	AF
	ENDIF

	IF	RM

	DEC	BC
	INC	C		;DJNZ on B,C separately
	INC	Bk		;Takes ^blk in HL, returns IY ^map entry,
				;Cf set if found, Else we have the former tail

	LD	HL,errloc 	;This user is not interested in any error
	LD	(HL),0  	; to do with previous contents of page

	POP	HL		;Return address
	POP	BC		;Pre_read flag
	DEC	B		;Pre_read now in Z flag, carry unchanged
	POP	DE		;Offset
	POP	BC		;Length
	EX	(SP),HL		;Source addr to HL

;	Now have Z <=> pre-read, NZ=> no read, C=> already in cache
;
	IF	t.on
	mcond	wrm1
	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL

	INC	H
	LD	A,(page)	;Adjust for whole pages of offset
rd1:	DEC	H
	JR	Z,rd2
	INC	A
	JR	rd1

rd2:	OUT	(pagon),A
	PUSH	AF
	LD	H,HIGH secbuf	;Page number in memory map where cache appears

rd3:	LD	A,(HL)
	LD	(DE),A
	INC	DE
	INC	L		;Wrap round at end of page
	JR	NZ,rd4		;Not crossing page boundary

	POP	AF
	INC	A
	OUT	(pagon),A	;Adjust value & stacked pointer
	PUSH	AF

rd4:	DEC	C
	JR	NZ,rd3		;Lo byte of loop counter
	DJNZ	rd3		;Hi

	POP	AF		;Scrap value
	OUT	(pagoff),A	;Finished, so
	PUSH	HL
	mess	wrmess
	LD	L,(IY+2)	;Blockno.
	LD	H,(IY+3)
	CALL	dhxout
	mess	adrmsg
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	A,(page)
	CALL	cahex
	CALL	pcrlf
	POP	HL
	POP	DE
	POP	BC
wrm1:	POP	AF
	ENDIF

	JR	NZ,clrblk	;No pre-read means zap to =0
	JR	C,rdywr		; Carry => it's been pre-read anyway

	PUSH	BC
	PUSH	DE
	PUSH	HL

	LD	D,0FFH		; r/w flag (read)

	LD	A,B		;Now test for BC=0400H => don't read
	SUB	4		;because the whole blk will be over-written
	OR	C
	CALL	NZ,rwblk	;IY conta page off

	ELSE	;****** NASCOM

	LD	A,(page)	;Add page offset to user's offset
	ADD	A,H
	LD	H,A

	LD	A,paread	;Set up to call a LDIR in 'safe' RAM
	CALL	CtoRAM

	ENDIF

	RET			;Finished





;PROCEDURE disc_wr(addr,length,offset:Word;pre_read:Boolean;blk:block_descrip);
;
; Write up to 1 block from specified address. <offset> is offset in block.
; Errors are returned in common area <error>
;


discwr:	POP	HL		;Return address
	EX	(SP),HL		; addr of block descriptor


	CALL	fiblD	HL,BC		;HL+:= A * 4
	ADD	HL,BC

	EXX			;Current heap address
	PUSH	HL
	EXX
	POP	BC

	LD	(HL),B		;Save current heap address in pointer table
	DEC	HL
	LD	(HL),C
	DEC	HL
	LD	(HL),D		;Also save length
	DEC	HL
	LD	(HL),E

	PUSH	DE		;Add length to heap
	EXX
	EX	DE,HL
	EX	(SP),HL
	ADD	HL,DE
	JP	C,heaped	;cf => heap > 0FFFFH !
	PUSH	HL
	LD	DE,myheap+heapln	;Check past end of heap
	SBC	HL,DE
	POP	HL
	JP	NC,heaped
	POP	DE
	EXX

	PUSH	BC
	PUSH	DE
	POP	BC		;Note: BC <-> DE
	POP	DE

	OR	A
	JR	NZ,idl1		;Doesn't need it

	PUSH	BC
				;D already contains 0 (meaning write)
	CALL	rwblk

	POP	BC
	DEC	B
	RET	Z		;Written as many as we want to

idl1:	LD	E,(IY+0)	;pointer to next entry in chain
	DEC	C		;Counter to prevent checking more entries
	JR	NZ,idloop	;than there are cache entries

	RET




;PROCEDURE cempty
;
;Write out any part of the cache which still has things in.
; Not called very often, so implemented compactly rather than fast.

cempty:	LD	B,noblks	;Max num	LD	H,D		;Get start
	LD	L,E
	INC	DE		;Clear map
	DEC	BC
	LD	(HL),-1

	tmess	<naloc0,BC,naloc1,HL,crlf>

	LDIR

	POP	DE		;Reset bits in last byte to indicate
	LD	A,E		; if not all availible
	AND	7
	JR	Z,inidk0
	LD	B,A
	SUB	A
inidk1:	SCF
	RLA
	DJNZ	inidk1
inidk0:	LD	(HL),A

	RET




;Heap error (overflow)

heaped:	error	'Heap oflow'





;PROCEDURE cidle
;
; Use FS idle time to write out any of the cache that needs it.
; Starts from the head, which means that under heavy lber of blks that could possibly
mtloop:	PUSH	BC		;need writing
	CALL	cidle
	POP	BC
	DJNZ	mtloop
	RET



;PROCEDURE disc_rd(addr,length,offset:Word;VAR blk:block_descrip);
;
; Read in up to 1 block to specified address. <offset> is offset in block.
; Errors returned in common area <error>
;

discrd:	XOR	A
	LD	(errloc),A	;No error yet

	POP	HL
	EX	(SP),HL		;Get blockno. address

	CALL	fiblk		;Returns HL pointing to map entry
	JR	C,incach	;Carry => block already in cache

	LD	D,0FFH		;roading the items
; near the tail will never be written. However, these items will tend
; to get written anyway as the entries are either used & brought back
; to the top of the cache, or get thrown out to make space for new entries.

cidle:	LD	A,(page)
	LD	E,A		;place to start
	LD	A,(csize)	;Maximum no. of ents worth looking at
	LD	C,A
	LD	B,3		;Maximum no. of blocks we have time to write

idloop:	LD	IY,cacmap
	LD	D,0		;Turn E into 16-bit value
	ADD	IY,DE
	LD	A,(IY+1)	;Get needs writing flag

	INC	H
	INC	H
	JR	NZ,cilop0

	IF	RM
	OUT	(pagoff),A
	ENDIF

	XOR	A
	LD	(page),A	;Head of chain pointer

	EI


; B=number of blocks in cache

	LD	A,B
	LD	(csize),A


	IF	t.on
	XOR	A
fudge1:	INC	A
	DAA			; Simple convert binary to BCD!
	DJNZ	fudge1
	CALL	cahex
	mess	cfrmes
	ENDIF

	POP	AF		;drive

	EXX			;Init heap
	LD	HL,myheap
	EXX

; this loop occurs once for each disk

inilp0:	PUSH	AF		;drive
	LD	(b0tab),A	;Put drive in block descriptor

;	Set up parameters on stacY+blkoff+1)

	ELSE			;Test option

	PUSH	AF
	mess	t200ms
	POP	AF

	LD	HL,200

	ENDIF

	POP	AF		;drive 0..4
	PUSH	AF
	CALL	inione		;Do that drive
	POP	AF
	DEC	A		;Repeat until finished
	JP	P,inilp0

	RET

;	Error exit. iabort is entry if errloc already set.

inierr:	LD	A,1		;Duff data in blk 0
	LD	(errloc),A
iabort:	POP	HL		;old drive no(rubbish)
	RET			;(errloc) set by rwdisc

b0tab:	DEFB	0		;This is a block descriptor for blk0
	DEFW	0		; the drive will be poked at run time

k for <discrd>

	IFF	t200		;Test --- Makes drive 200 blocks

	LD	HL,($hplm)	;Read this block above the system heap
	PUSH	HL
	LD	HL,0400H	;Length
	PUSH	HL
	LD	H,0		;Offset
	PUSH	HL
	LD	HL,b0tab	;Block descriptor set up to be blk0
	PUSH	HL
	CALL	discrd

	LD	A,(errloc)	;Had error ?
	OR	A
	JR	NZ,iabort


iniok:	LD	HL,($hplm)	;Where we put the block
	LD	BC,sjoff	;Offset of SJ string
	ADD	HL,BC
	LD	DE,sjmess	;Check it's an SJ disk
	LD	BC,23*256+1	;B:= len SJstring , C:= error not SJ
csjlop
;INIONE
;Initialise one drive
;
;On entry:
; A	Drive number
; HL	Number of blocks to allocate

inione:
	tmess	<almsg0,AF,almsg1,HL>

	PUSH	HL		;Save number of blocks
	EX	DE,HL		;DE:= no_of_blocks

	ADD	A,A		;Get address in mapptr
	LD	C,A		;BC:= A * 2
	LD	B,0

	LD	HL,dsksiz	;Put into disk size table
	ADD	HL,BC
	LD	(HL),E
	INC	HL
	LD	(HL),D

	SRÌ	D		;Converô Blockó tï Byteó tï allocate
	RÒ	E
	SRL	D
	RR	E
	SRL	D
	RR	E
	INC	DE

	LD	HL,mapptr+3	;+3 => point to map address (H)
	AD:	LD	A,(DE)
	CP	(HL)
	JR	NZ,inierr
	INC	HL
	INC	DE
	DJNZ	csjlop

	POP	BC		;B:= drive
	PUSH	BC
	INC	B		;1..5

;set bit B in A

	LD	A,80H
sbilop:	RLCA
	DJNZ	sbilop
	LD	C,A		;has 1 one
	CPL			;has 1 zero

;Set/Reset bit in dsflag

	LD	IY,($HPLM)	;Where the block was put
	LD	HL,dsflag
	AND	(HL)		;first reset bit
	LD	B,A
	LD	A,(IY+dsfoff)	;double sidedness
	AND	C		;leave relevant bit
	OR	B		;add in rest of drives
	LD	(HL),A

	LD	L,(IY+blkoff)	;HL:= number of blocks on disk
	LD	H,(Irrent track table
	LD	B,maxdrv	;length of it
lowlp1:	LD	(HL),-1		;Zap to indicate drive not yet used
	INC	HL
	DJNZ	lowlp1
	
	ENDIF

	RET


;	This code only present on NASCOM,
;	where it is copied to a piece of STATIC RAM, so that it remains
;	in the memory map even if paging is active

	IF	nascom

	;Cache to main RAM

pcod1:	DI
	OUT	(paport),A	;Turn on paging
	LDIR
	LD	A,panorm	;Set back to normal
	OUT	(paport),A
	EI			;Interrupts are off while cache open
	RET

	;Cache to winchestLSE
	LD	BC,0100H	;No test if Nascom
	ENDIF
	LD	H,4		;Pageno. under test
	LD	IY,cacmap	;IY points to the block which will point here
				;if this one is any good.
	DI

cilop0:
	IF	RM		;Different tests on RM & N2
				;Ends up at cilop1 if dud, cilop2 if OK
	LD	A,H
	CP	hitest
	JR	NC,cilop2	;Last few blocks always there

	OUT	(C),H
	LD	A,(DE)
	CP	(HL)
	JR	NZ,cilop2	;Not the same piece of ram, so OK

; two versions of byte the same: try other way up.

	CPL
	LD	(DE),A
	CP	(HL)
	JR	NZ,ciloer

pcod2:	DI
	OUT	(paport),A	;Same logic as above
	OTIR
	OTIR			;Only to disc this time.
	LD	A,panorm
	OUT	(paport),A
	EI
	RET

CtoWIN	EQU	pacode+pcod2-pcod1	;Where it ends up
CtoRAM	EQU	pacode

	ENDIF





;PROCEDURE inidsk (max_drive: BYTE);
;
;This procedure allocates heap for the map for all drives

inidsk:	POP	HL		;Return address
	EX	(SP),HL		;Max_Drive
	PUSH	HL		;Save drive again


	LD	HL,mapptr	;Init bit map pointers & track stores
	LD	DE,mapptr+1
	LD	BC,maxdrv*5-1
	Lp2

; same again so this page IS being used as main RAM

	CPL
	LD	(DE),A		;restore RAM
	JR	cilop1		;Don't link in block

	ELSE			;******* ASSUME NASCOM *********

	LD	A,H
	CP	0C0H		;Only 48k available
	JR	NC,cilop1

	ENDIF

cilop2:	INC	B		;We have a good block
	LD	(IY),H		;Link it to the last good one
	LD	IY,cacmap
	PUSH	BC		;Save to make a spare register
	LD	B,0
	LD	C,H
	ADD	IY,BC		;Set IY to point to the block 
	POP	BC		; just tested

cilop1:	INC	H		;Proceed to next block
	INC	HD	(HL),-1
	LDIR

	LD	HL,cacmap	;clear cache map
	LD	DE,cacmap+1
	LD	BC,noblks*4-1
	LD	(HL),-1		;all blocks free
	LDIR


;Work out how much cache is actually available & set up chain
;
; On NASCOM, always 1st 48K
;
; block 0 assumed to be OK.
; Note: when testing this page the code is safe due to LD HL,$ fudge

	LD	HL,$		;Load L with low byte of here
	LD	D,HIGH secbuf	;where paged RAM appears
	LD	E,L		;ensure same offset for test
	IF	rm
	LD	BC,pagon+256	;B:=1; (size counter) C:=pagon
	Eng the items
; near the tail will never be written. However, these items will tend
; to get written anyway as the entries are either used & brought back
; to the top of the cache, or get thrown out to make space for new entries.

cidle:	LD	A,(page)
	LD	E,A		;place to start
	LD	A,(csize)	;Maximum no. of ents worth looking at
	LD	C,A
	LD	B,3		;Maximum no. of blocks we have time to write

idloop:	LD	IY,cacmap
	LD	D,0		;Turn E into 16-bit value
	ADD	IY,DE
	LD	A,(IY+1)	;Get needs writing flag
	OR	‰©(Šqİà8š’œ‰Ô‰©)ÊñÖ & ‚‰ªªi*Qšğ †¤˜ Š
ªŠqĞ  ª¨¦†¥Êhªˆ*Š“€  …P bD„”ä•H‘1:$MEMRYIS’V bEdÄx‘AIJ$HERR‰T“`UÔU58!bWRTUÔ• D„T‘!A16$STKLM‰TQ%@]	p ¸\. — K‚€%     ˆMĞ°  ë|±DXº!@ £–è‹  
¨  ‹  @ H‹ 2\,´·€€b3“¬s½Aàğx=›P .`{ 'gåö  áxƒ€NVmU d²Ã# C¬¼#fÔ  ƒä#pÀ¶, ¾Í« ˜ Í±`•ªys … 1V >3i¸õ›MÀ    zµ\®±ğ¼»bVğáh¼Y/×6Ù€J Ëåúé~¸Y¶Ì›a€ñ 9?-Ù2ó6Ê D†H4E9ç! @a:‘à€
Hˆ†˜ Ä‰ªH(‘ÕP
HŠ¤¥ Ä‰	)É*‘à 
H ˜›ˆ Ä‰
ˆªI±à 
H’œ’± …”•ĞàdtUD4Ä¸%9%1.SETCLKŠ€4äõx ERROR”  MQ€0Zrz¿  FÀAöÉd°Z,QŠ¤¤¥À É ĞMnÈ§0<&·d?­ ĞMüh‚oáã@4ş4ÀXFNOWà€ (Ú¸ˆx Ã  ğ 	x¼^/ —‚€A¨ªJIêRğ 	xt,#¢ª!¦%Ç@ 2JrJb\t0)¢ª!¦%Î                                                 L),0

	EX	DE,HL		;HL points to (end of) new time
	LD	DE,rsec
	LD	BC,5
	LDDR
	INC	HL		;points to VAR parameter block RDATE



setcl3:

;noclock present so set hms to zero

	LD	HL,rhour
	LD	B,3
	JP	filzer



	COMMON	/now/

rdate:	DS	1		 Ä‰¨©ªK1ÔÀ
H Š¤¥ ÄŠÉˆ(ñà@H¦¨–˜›7 ¨h)«˜Œ¦Š°’©	 Èèª‰¨©±ÒŠ‚¡½ ªi*Qšğ
 †¤˜‹ ª	¨ªjqÙĞ®¤©© ªêJ‰‰Ó€  …‘”ÓÓ“`dT4ô”ä˜IaMRRXREADQS– TT4õEˆ%5ARGBUFT‘ÓS E$ôdh11JEVENTV”ÕTÒ däõôäUH DEBUG”€MtÀ!ÄU%ˆy1=]1%	š  +Ø` 6â 0Z. ˆ°H„E€À#, ¯à  “š  8\gvH„ Ÿ†X  ¾Í   ‡‚Á`°Uî  fÒ0«€;Kxní):Ü'1ÉÚ[À`˜Œä!À@ğHVÑ?œ,Qğ’áq—` 6â 8X-‹€DX$¢á`0ˆ‡ Åo[üîÕb‚ÊÅf€ »êİ€=GPj"*ª?  [ˆ ‡è€~—Ù  ø {LÛ^ ñp¾® A¤Ñ	2D   ‹€°X%²>-Ù2ğ 	x¸ \. —€K@%Á àĞğ  É8¥Æ\ ’ál´@ÀËŒ0Òp´\mWë…ú6  €`H†¡ƒÁãp¸\.0=OÁ7èĞ xˆÂ&H¬ZX(	…r¼®Rp°\b1x~f×01Xt@ød¸X-6´ºÃ 7ÆÍ®@gĞÀÂÁqŸ ğx<Í¯€o0=Œ³ˆp’Áp¼X a{X>Î60èîÉ`¸^,W(x#Ãm²™¶ÈŒ0;¸Nlp¼?sÊèğÈ8ˆÃVK…‚ã €@0Â™ÂÁKÂáë¥ÂÑq¯İ¥'[@2É~¸X-~í)
 Ã €e‚ıt†\k÷i`¸Ø/×K…Öıt¸X-ÄFpœÙ/×…¢€«¸Iúé[ãÛAÌ_dËÀ %à rj*šš
<¼ ^)hi‰1Ø(ˆŠ†…˜ˆˆ¨jqØ (ˆŠ†¯È«
*Š‘ÒŠ¨¦†¥d ÈêjH¨(‘ÜÀ<‚œˆ˜‹Ã©«JqÒ “É)ª*Š‘×À(’œ†…u‰)ÈjñÕ€(˜‚œ‰%I‰ñßğ:š‚–Šg	©¨)h¦‘Øp:šˆŠ†…o©©«QÕÀ:šŠ°‰L©©«
‘Ö`:šŠ°¯F it's an SJ disk
	LD	BC,23*256+1	;B:= len SJstring , C:= error not SJ
csjlop:	LD	A,(DE)
	CP	(HL)
	JR	NZ,inierr
	INC	HL
	INC	DE
	DJNZ	csjlop

	POP	BC		;B:= drive
	PUSH	BC
	INC	B		;1..5

;set bit B in A

	LD	A,80H
sbilop:	RLCA
	DJNZ	sbilop
	LD	C,A		;has 1 one
	CPL			;has 1 zero

;Set/Reset bit in dsflag

	LD	IY,($HPLM)	;Where the block was put
	LD	HL,dsflag
	AND	(HL)		;first reset bit
	LD	B,A
	LD	A,(IY+dsfoff)	;double sidedness
	AND	C		;leave relevant bit
	OR	B		;add in rest of dri,BC		;HL+:= A * 4
	ADD	HL,BC

	EXX			;Current heap address
	PUSH	HL
	EXX
	POP	BC

	LD	(HL),B		;Save current heap address in pointer table
	DEC	HL
	LD	(HL),C
	DEC	HL
	LD	(HL),D		;Also save length
	DEC	HL
	LD	(HL),E

	PUSH	DE		;Add length to heap
	EXX
	EX	DE,HL
	EX	(SP),HL
	ADD	HL,DE
	JP	C,heaped	;cf => heap > 0FFFFH !
	PUSH	HL
	LD	DE,myheap+heapln	;Check past end of heap
	SBC	HL,DE
	POP	HL
	JP	NC,heaped
	POP	DE
	EXX

	PUSH	BC
	PUSH	DE
	POP	BC		;Note: BC <-> DE
	POP	DE

	LD	ves
	LD	(HL),A

	LD	L,(IY+blkoff)	;HL:= number of blocks on disk
	LD	H,(IY+blkoff+1)


	POP	AF		;drive 0..4
	PUSH	AF
	CALL	inione		;Do that drive
	POP	AF
	DEC	A		;Repeat until finished
	JP	P,inilp0

	RET

;	Error exit. iabort is entry if errloc already set.

inierr:	LD	A,1		;Duff data in blk 0
	LD	(errloc),A
iabort:	POP	HL		;old drive no(rubbish)
	RET			;(errloc) set by rwdisc

b0tab:	DEFB	0		;This is a block descriptor for blk0
	DEFW	0		; the drive will be poked at run time


;INH,D		;Get start
	LD	L,E
	INC	DE		;Clear map
	DEC	BC
	LD	(HL),-1

	tmess	<naloc0,BC,naloc1,HL,crlf>

	LDIR

	POP	DE		;Reset bits in last byte to indicate
	LD	A,E		; if not all availible
	AND	7
	JR	Z,inidk0
	LD	B,A
	SUB	A
inidk1:	SCF
	RLA
	DJNZ	inidk1
inidk0:	LD	(HL),A

	RET




;Heap error (overflow)

heaped:	error	'Heap oflow'





;PROCEDURE cidle
;
; Use FS idle time to write out any of the cache that needs it.
; Starts from the head, which means that under heavy loadiIONE
;Initialise one drive
;
;On entry:
; A	Drive number
; HL	Number of blocks to allocate

inione:
	tmess	<almsg0,AF,almsg1,HL>

	PUSH	HL		;Save number of blocks
	EX	DE,HL		;DE:= no_of_blocks

	ADD	A,A		;Get address in mapptr
	LD	C,A		;BC:= A * 2
	LD	B,0

	LD	HL,dsksiz	;Put into disk size table
	ADD	HL,BC
	LD	(HL),E
	INC	HL
	LD	(HL),D

	SRÌ	D		;Converô Blockó tï Byteó tï allocate
	RÒ	E
	SRL	D
	RR	E
	SRL	D
	RR	E
	INC	DE

	LD	HL,mapptr+3	;+3 => point to map address (H)
	ADD	HL	LD	HL,(drvsav)
	BIT	4,C		;T/S not found ?
	JP	Z,retrys	;No => CRC error only => No reseek
	CALL	seekz		;If T/S not found reseek trk zero
	JP	retryt


; NB this is not necessarily an error return
;
; On entry, C=error code (=0 for OK)

giveup:
	LD	A,C
	OR	A
	JR	Z,timrt0
	LD	HL,errloc
	LD	(HL),199

	IF	t.on
	PUSH	BC
	mess	errmsg		;'Fatal error' message
	POP	BC
	PUSH	BC
	LD	A,C
	CALL	cahex
	CALL	pcrlf
	POP	BC
	ENDIF
timrt0:

	CALL	drvoff		;Turn of drive motor after ~10 secs

	Eto make a spare register
	LD	B,0
	LD	C,H
	ADD	IY,BC		;Set IY to point to the block 
	POP	BC		; just tested

cilop1:	INC	H		;Proceed to next block
	INC	H
	INC	H
	INC	H
	JR	NZ,cilop0


	XOR	A
	LD	(page),A	;Head of chain pointer



; B=number of blocks in cache

	LD	A,B
	LD	(csize),A


	IF	t.on
	XOR	A
fudge1:	INC	A
	DAA			; Simple convert binary to BCD!
	DJNZ	fudge1
	CALL	cahex
	mess	cfrmes
	ENDIF

	POP	AF		;drive

	EXX			;Init heap
	LD	HL,myheap
	EXX

; this loop occurs I

	RET			;C=error number




;outcom
;Output command - getting the SSel/Dir multiplexor right
; top bit =0 indicates read or write => use side sel ELSE use direction
;
;On entry:
; A	command byte
;
;On exit:
; A	knackered
; Rest	preserved

outcom:	PUSH	AF
 	RLCA
	LD	A,(lmask)
	RES	5,A		;b5=0 gives SSel
	JR	NC,outcm0
	SET	5,A
outcm0:	LD	(lmask),A
	OUT	(latch),A
	POP	AF
	OUT	(comand),A	;Send command
	LD	A,20		;100 microsecond delay
outcm2:	DEC	A		; for WD to have valid status
	Jonce for each disk

inilp0:	PUSH	AF		;drive
	LD	(b0tab),A	;Put drive in block descriptor

;	Set up parameters on stack for <discrd>


	LD	HL,($hplm)	;Read this block above the system heap
	PUSH	HL
	LD	HL,0400H	;Length
	PUSH	HL
	LD	H,0		;Offset
	PUSH	HL
	LD	HL,b0tab	;Block descriptor set up to be blk0
	PUSH	HL
	CALL	discrd

	LD	A,(errloc)	;Had error ?
	OR	A
	JR	NZ,iabort


iniok:	LD	HL,($hplm)	;Where we put the block
	LD	BC,sjoff	;Offset of SJ string
	ADD	HL,BC
	LD	DE,sjmess	;Check R	NZ,outcm2	; and side sel to take effect on drive
	RET



;Seek track zero - waits for completion
;
;On exit:
; A	zero
; Rest	preserved

seekz:	PUSH	HL
	LD	A,getzer	;with verify

; NB verifying operations are generally dangerous since SideSel is
; multiplexd with StepDirection: but on a 'Restore' cmd, Dir is defined
; before any step pulses are sent, such as to select side 0.

	CALL	outcom
	CALL	wairdy
	LD	HL,(curtrk)
	SUB	A
	LD	(HL),A
	POP	HL
	RET	


;Wait for not busy
;
;On ember / map not initialized

maperr:	error	'Bad map number'

;Block number out of range

ranerr:	error	'Duf block number'

	ENDIF




;PROCEDURE fblk (VAR block: block_descrip; VAR no_block: WORD);
;
;Attempt to find up to no_block blocks starting from block_descrip

fblk:	POP	HL		;Return address
	POP	BC		;no_block
	EX	(SP),HL		;block_descrip
	PUSH	IX
	PUSH	BC

fstart:	LD	A,(HL)		;Drive
	INC	HL
	PUSH	HL		;Save address of block number
	LD	E,(HL)		;get block number
	INC	HL
	LD	D,(HL
	LD	E,A
	JP	fblk12

;Find how many free & allocate them

fblk7:	INC	IX
	LD	E,(IX+0)
	LD	B,C
fblk9:	CP	A
	RR	E
	JR	NC,fblk11
fblk12:	DEC	HL
	LD	A,H
	OR	L
	JR	Z,fblk11
	DJNZ	fblk9
	RR	E
	LD	(IX+0),E
	JP	fblk7

;Wind up

fblk11:	RR	E		;Allocate out of last byte
	DJNZ	fblk11
	LD	(IX+0),E
	EX	DE,HL

	POP	HL		;Fill in blocks found
	LD	(HL),E
	INC	HL
	LD	(HL),D

	POP	IX
	RET
;
; ****** END OF MAPMAN ******
;




	COMMON	/debug/

mesflg:	DEFS	1


	COMMON	/error/

err)

	EX	DE,HL
	PUSH	HL
	CALL	getblk
	LD	C,8
	CP	A		;Clear carry for RRA
	DEC	B
	LD	A,(HL)
	JR	Z,fblk1
fblk0:	RRA
	DEC	C
	DJNZ	fblk0
fblk1:	LD	B,C
	PUSH	AF
	PUSH	BC
	PUSH	HL
	EX	DE,HL
	INC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	DEC	HL
	LD	B,(HL)
	DEC	HL
	LD	C,(HL)
	EX	DE,HL
	ADD	HL,BC
	POP	BC
	PUSH	BC
	POP	IX
	CP	A
	SBC	HL,BC
	EX	DE,HL
	POP	BC
	POP	AF
	POP	HL
	LD	C,8
	JP	fblk3

;Main find loop
;
;On entry:
; BC	8
; DE	number of bytes to search before giving up
; HL	stariveup
	INC	A
	LD	(rcount),A

	IF	t.on
	PUSH	BC
	mess	rtrmsg

	POP	BC
	LD	A,C
	CALL	cahex

;print 1771 Trk, Sec registers

	IN	A,(track)
	CPL
	CALL	cahex
	IN	A,(sector)
	CPL
	CALL	cahex

; and expected Trk, Sec values

	LD	A,(trksav)
	CALL	cahex
	LD	A,(secsav)
	CALL	cahex

	IF	rm
	LD	A,(mesflg)
	OR	A
	JR	Z,debug1

;set HLD bit for next time around

	LD	A,settle
	LD	(rwmask),A

	emt	kywait		;doesn't zap registers
debug1:
	ENDIF
	ENDIF

	LD	DE,(secsav)	;Reload HL,DE
t block number
; IX	pointer to current byte to search

fblk4:	LD	A,(IX+0)
	OR	A
	JR	NZ,fblk6
	ADD	HL,BC
	JP	fblk5
fblk6:	LD	B,C
fblk3:	RRA
	JR	C,fblk2
	INC	HL
	DJNZ	fblk3
fblk5:	INC	IX
	DEC	DE
	LD	A,E
	OR	D
	JP	NZ,fblk4

;NOT found at all so retry starting at block zero

	POP	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	DEC	HL
	DEC	HL
	JP	fstart



;Found it

fblk2:	EX	DE,HL
	POP	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	POP	HL
	PUSH	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	CP	AÙAÖfÕ 7‹Ôu€@ZcG0ìğ_ G‹uÊİŞàE»ÌP{†Ã '¸iöİp´Æ¢€¨†ERRORà f;Ô#\€¶¤âõfÚğFm> x“Ù      p¸ÏÂ20ŒÌhz ÔDT%T~  ·^/V+UÊõr„nˆ6ğ‚8Y´Ø #q€´4âÍ¼ÀŒÚ| áh°^,Úv
¶;¥Ù.øFF™Úv
/SÒì—+øÒ°@¨t9< àKŒúæ²ÇŒ°ë,xË²ÇŒ°éHKÂáëEŠë#
ÉÏSÂ„xÊ°@®QYøVn3¯İ¥&Õp¼]`–	’±`¬Ú.
Ã® @ĞQÂdL'¸êm1N@ĞP#iÁY¶‡bAA ¢!ÔÌ 1æ3X€Üu6˜Œ§ h(Há`¸Û®V)øFå/ÊÎ·+6‚ƒğ)øPƒBÂÕŠåuˆÊÂ²ğ¬Œ+':Á,+uÂ¿vl‹„aĞ féø ·,:A‚0ƒéº#ÖL+î
á;ˆÎâ±[áºÜ'1ÉÂå/ÊÎµù}‡M›¢6éx A_²Ãc x¬øµ‚FXmºs 0éH3,6~7N`[„æ#97\,™x ¼ERROR—€ KU%$õ)@ Ô b³h¨€|`´äõ~  €0ƒí’ÛÜÀ&Clxöx` ‡‚ €lÚ¤ +
"¶mR 
ÙµH fÕ ±Dîxv›Ä< Œ 3jA…E@Œ–mk ?1Iàğx<æ¡Èèt: ysĞ»%›^ ¥iàîí<;MìpñÚx{<‚‡Èø=?]§‡³Àx(v²X-(†ERRORà d€h&·d?„ Ó˜[²ÀÖ€h&ş4A7ğñ `¬#§'«ğ@  í\ÛcFY<@.ÇÀm Ù·ô F#œÀömü 
+ÎÓ{¢Í¿€`›@¯+Î > °èp‡ €l: wb«İ¦ğ0'?ê÷i½ '`±HìÚğ í(àğx=Úyv@Â€ƒù‚É—€ KÀ@%à@ğ0	x ¼ERROR—€ KÀ@#¢ Q1.: ’S’PÓã­`I.;”ÑUÓã¡À9]I%Q.p  …Q”Ô• eUE45(AUQNGETSCR€ĞÓ`DÔ”E819LO€’`5H%9^INCBPÕàDDT4(„Ô•àdtUD4Ä¸%9%1.SETCLK”‘PQÒàeu$•D4¸ (NOWŠ €TU%$õ)@ Ô( b³hX€|2[cÇ³ÀxÈ 0Zrz¿  Ùµ V>ElÚ„ ³j(Í¨@b‰Üğí7ˆx , fÔ ƒ
…€,Ú¶ ~b“Áàğx=ÌC‘Ğètòæ 'vKÍ›Z€¥iàîí<;Mï¶H8xí<=ÁCä|ˆ®ÓÃÙà<;Y,‹C¢©)'©p ²@4[²Â€iÌ	­Ùàk@4 ›øxĞ?‡°Ö‚Ó“Õø  
 v®a`xø Í¾@`6ğ€Â„có˜Í¼ EyÁÚocY·€ ,³o UåtÀÀò ;±UîÓx‡„„u{´Ş€°X¤w›6µ ;J'€x<v]¤ØP0Y2ğ 	x¼^/ —‚€A¨ªJIêRğ 	xt,#¢ª!¦%Ç@ 2JrJb\ul)" ¢!¥Ç` 2š*¢b\wÈ+©$ª!¥Î   <;Y,‹C¢©)'©p ²@4[²Â€iÌ	­Ùàk@4 ›øxĞaAQRSETATT’STU TÔ„U„(5!a^MHEXTSRV TÔDT4(NHANDLERV”àdu5$TH5%9^MINDSPRÑLàTÔ´SH ERRORŠ €dÔU54y@ Ô|ÂÁh¸İdƒòÜP\Œ $qø$„ Àk |	2\-­.G',Y7jÁ’áh°\d„¹ªıp¿Nà šÅ>¯™Ñ Ú uS°K…âÁq“Ğ 
}|8 Ÿ’ 
\îÈ$€2¡tOv¬.EÆ—A¨ªJIê\  $Õ~¸Bd‚1ánÈrˆÏÏá €|¸Y/á€Ël†ÇæYDPe¤_Â!A9–A#çèË€ 2Yf@e–¡fÑ`Gğüp F1ÌD¦[$03„ †YdPe´Cwñğ@e¸C÷ğ°P ¦Yd@eDÀÀ–IoöZ$$~ 0‚\+e–E FYDPœe˜D	†Y$@”OÏá €
#> gğ°@Z'…¸IH nÕƒ%Âñt¸Z'·K…Æå#â€@Œüş áÃ„à>2\¤È_´H"€«T4ş
 ïá` P…‡ğ”P… ƒ@òşŒ/‹ø0€,—Š]’á`´\gå¸€?£à zÉl€@    àÊ\õbŸ„dw+|1À °µb>¤X.{­›o@À x¿p½FÀXX¶;¼AC$4ş
@Àhİğşˆ‡æÈH€-@`,Å'¹‹ïâàş-Œ Äóó˜¾ Ÿ—, L#3àÆH |r¶]n7XŒæ#9ÆÀ #E²	D sËdxwl¯Ù,V«•²Åj¹[,Ûz Ùp´D A˜Ì0`¶\- FÙ6A£wÀaº—A¨ªJIê\ Â"Å Úâ Ñj¿\/Ñ°  p­ÅB1án ™Œ;XÙà  
 lˆÏÏáP€PÕl_V Æëb“„daøFå4˜â€X O~¡€Ó¸Ú°p°]n6ËD0Ä †ÉøFl¾­PIú4 ÂöÉábÙ wd|p ğUŠ 2ğ 	x¸ \.( — G@ *b*:
duÄ¦ ª!¤GM@r¢š¢’*tà  …”•ÓÔ dtUD4Ä¸%9%1.SETCLK”‘PQÒàeu$•D4¸ (NOWŠ €Tà
H¦‡8  …’LSP bD„ÄCEˆ‘!1Ñf$HST4X‰Õ`RE4¸‘U9A.P 59 –€ ?\¡€uÊÑpŸ„nWY|.Ÿ+†X` õÊ7\­øFãr›Âéó8e¢qœg1ÈFëd¿\,‹…Ú°~ºc"@‘!1Ñ":‰#  ‘!1Ñf:0‰Õ#¢€‘!MPÑf:`IPÒã¦ ‘U9A.p  …RP bD„•%5I@ ×0Z  *¤à € UJ@A  ª•€‚€ód „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãe†‡ ÖXhpe†‡ÒğŒ¬ëd²ÃC;,48"ºÜ.3˜ŒäÉe†›W êzsÛ®Wë„zú² Ò²ú^@5C‹%–
Ş§§0=ºåh­Å Æ«õÂı+ _¥ä ô@ô¼Y&ğº|ÎÉu˜+wiI’O †Iš!  1•p
Hˆ†˜  Ä‰	*Jj“€  …RÓP bD„TåE8‘!M=$HEXIT”  MN@% Úx » Ú„ ñlˆppeê2¸€"  Ê! ¢`”Cq \¬Ûl:ƒQT”“Ô¸ Ü@DVp	  	Ñ  ._Â0˜AğÁbÈ 8AúO¿EUüC€ÀTÄwéøÂ¡Xß¦ãôÌcx½Y·â=yV Hø2à H   z ÔDT%T~  ·/V+UÊåz„lX6­ ¼YµP#e@·dÂÍ¦À‹âåu¡Éà` †FREEBLà  “˜ŒäË2Ãl±Ó,6Ë2Ãa1	‚[.VËà+8ŠÎB³›U²ëq†[U¸	ÊÕÀ.Ò“…¥[€š-–+U‚Ñ1Â`±³ıê:ƒQP•Qø ÜP!x½X­W+•Š´ ÛÆáfÓ` © fÔp'6› 3iğ…¢Áx»VÛ˜(Òãp¸Aøwd„k¸6¨0À  h(e0œó1°Şw‚„ƒ¬ _` xıà  °ú~Ÿ€+q ŠÍ¿àl+!ú^ DVH€ÅfØ`&AòÉWŒ ÔU%$õ.  áq³m à
³oø…¢ÁqºŞ£¨5	U€ -Å‹ÕŠÕrµB5D›\€Ÿ¦àôÌfÓ` ] fİÀ'6› k 	xFÖâ 	]Ö9|¿\­×+º!B £—YxF :Ç.V¨¨  ¶Å6¨8 Í  në…ºá|ºß®˜è $HENTSŒ–€RD„U%(éx$HEXIT‘ RD…4ô8É$STKLMœ   …R“P bD„ÄCDx‘!1Ñ"$HST4G‰Õ RD…5sI@ ÔÀZ  á/ÊÂ7+¬œ##ËÂ2°ÖÉq—„eaÖºÜ.3ˆŒà#9ˆÎB7[%úáh¸Ø¤"[õÓ  Ä‰	ˆ†ˆñĞpH˜ˆh‘ Ä‰
j†ˆñÑ H¦¨h©' ¤‰
jæ“€  …RSP bD„$48‘!]N$HCERRIÕ`RD…t5X‘!	MA$HWSPC”  M`€ H`uQ€Õ \¶¨ˆäŞ& !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPH„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰p6õ° 6î€³iğ…¢Áx° Lh|c<îÕƒLjÉp¸Ù¶€C¢©)'©p °ÂÁ´X.7¨êDEBUGà q@Åâõbµ\®PD fßP'é¸ı3 Ù´Ø #W@´ÌÂÍ¦ÀÜ Í¨@c¬ Í¿`LÚ| áh°^"àÅj¹BÏóÃX±b_ğ7E‚ı @¬ Ó˜Ï»µ`Ó²O`"ÄPèbµ\£¬ Ó _à1à ¼ÀjÁÂÑ`†Çàx<F^­Šî·è‡  …€¬G%¿KÀè‡  ?C/Óğ	z ?OÀ5à 4t9Y·¤ú~ ­Ä P°›ÀÜ/Ó¨	út­Ù#¬ »²8   ¿OÀ¸ë  ¿NàØË  Ù/Ñ°şır¸@8 ní!FXún?OÀ70üÎ)~Ÿ€`p;˜_rµYµX¢áE °«!ú6?ß£`ı’:À ,`Ë €ˆÙµX9^£®  ·^,Ú| õx²Zªğˆö ¥ »,TË´ªØ!\ú2¾ ¹7„¤qÖPE fXè`c †W¸Şz^ğCãÔuÀ â€óÅÊ¬àÚ˜áfÓ`UïfÓ` n f„Ô•àdtUD4Ä¸%9%1.SETCLK”‘PQÒàeu$•D4¸ (NOWŠ €TU%$õ)@ Ô b³hX€|2[cÇ³ÀxÈ 0Zrz¿  Ùµ V>ElÚ„ ³j(Í¨@b‰Üğí7ˆx , fÔ ƒ
…€,Ú¶ ~b“Áàğx=ÌC‘Ğètòæ 'vK6´ ;J.ÓÁİÚxv›Ù áã´ğöx‘ğ4z ~»Og€ğPíd°Z,QŠ¤¤¥À É ĞMnÈ§0<&·d?­ ĞMüh‚oáã@4ş4ÀXFNOWà€ (Ú¸…ãà6ø €lÛ¾ #
Î`{6ï çi½ŒQfİà °FÍ»àW•Ñ  XwÀ îÅW»Mà`"N~ÕîÓz NÁb‘Ùµ ÚQ<Áàğ{´òí …ó“/  —€€KÀ€%à`ğ@	x(Š¤¤¥/  —€€GBÀ2:*¢b\t $§$¡¦%ÇVÀ2’*
"\uø)¢ª!¦%Ç| 2º’J¢\à  g€ğPíd°Z,QŠ¤¤¥À É ĞMnÈ§0<&·d?­ ĞMüh‚oáã@4ş€+€Í Àë•êÅ~¸Ø'…ŠÈ@Y²ª€ø ?\¬‹,XË²Ã°È`Í  -×+…úå`…Û”hºád´Z#âP8Í      dÆUÀ)"B*’”e &"$¦§Ç@ )"b"J´e,’&'"£Î   …S“P bDÄD”Ôù@ ÔìÊ|ZŠ ãá „  Áëºár¿E!vè¥Æí58İ¦ øÀİ¸ÖîÒ“ÚByS@eÆí% OÑô@Úx²c  ‘1%5>p  …UÍP REtD•h‘]%YVP 5Z u¸X.SÂ©Ì€7ï*( /#Eäğénò¤àò¹ì^_	† Î·Ê. 9OKq 5f(¿€B 3,pË† lĞ ¢`4²ÎlYí„  2ÏŒñ<0p‰@à4  €@˜Ê $HERRŒ bEtD”Ôøè $WDIV€bEtD•eXÊ($WNEGœ   …UÌÓP REtÕTÈ‘]5U1VP 55 u¸X.SÂ¨Şx[¼¨ ¼y“Àg¥»Ê€Êç±y|&åf€ ƒ  u¸X.Qp›GÀgÆC  Œ™€RDÄU%(É $LNEG€ REtÕTÈé0z8%D±ñ–q`2Ï" 2İà>'† ®Ò#$|J ™   øÉƒ€RD$D•hè $BDIVUŒ© RD„U%)À  …PŒSP RD$ÕTÈ‘	5U1VP 5@ p¸ÁÀx`(áq“Öï*  í"Ï*Â{,ø(¥Ò†sêÜP>-Å0!.·e‘E  }–=Lì³Ë ^g>‹Íâ6H„  dÇAÀ)"jªdt !&ª¦*Î   …UM“P REUõ9@ Õ$úá€ ’pÖ& C$aán(R€É<_îV«
(Äa¥ğ¡îÁh¸B`Ñ¥.0Z.‹Tö$G``2ù'€CõÓ  ¤Šª	ês€  …UMSP RET4Õ‘U5AJP 5H  C »õÂ!  $çX˜ iˆÈÏW+ Dlån(â€XLFK`Ñ@ õ[†a C…ò¯~ºV‡ÀİÂÑÂê ûåúé€ RET4Õè $UCMPRœ   …UL“P RET4ôé@ Õ„úá€ “ó¬L 7Dhg[r® :ÃKq@|F\¢gû´ˆo¾]g„ O€İ«  9'İ«»åú$WMULUŒ–€bEuTÕTÉÀ  …UÌ“P bEtD”Ôù@ Ô„ B   Á¸€y €±,.Ë
²ÂÒÀ Aq“  ÄŠè‰)©ó€  …SP RDÄDH‘1MU
$LABSI‘QàRDÄ”ä8‘1$LCMP‰ÓT BDÄ$‘1]$LWTIÕ`RDÄU%)@ Öüúáq‚H„Ö‹…ÚZuVpë¥úáq­İ¤"!5¢áv”Uœúé'…Óäsy’D&²ÂÓ%úáu¸\¬°£´Äãrºß®—ë„"  :ÜnW[õÒË>2b ní!	¢ ÚRp8Ø®Qñ<f€ ’ır†ÀÆ €,`	‡!å¬'À8D  v”UdbµZ2_®İÚBh¸^®Ò“EÕh  FZíªñ~ºGÄÕ¦ ­ß®—ë…Ö`4°VîÒêëvš.«@ (n¿]1–
HŠ¤¥G ¤‰ˆ(JqĞ 
H˜‚ˆ‰  „‰ˆH1Ø
H˜†š¡© Ä‰ˆiª
Q×P
H˜ˆŠ‡Y ¤‰ˆªJQÖ°
H˜’œ‡J ¤‰‰È¨ñĞğ
H˜¦ª…' „‰Šè1ÒàH˜®©< ¤‰Šéu‰Ÿç‡iŞ9|ºÏ»”  İ«XmÂ+'€ 7jáÖ#|¿]!¡{  € RET4ôèÊø$UERTœ   …ULSP REU55h‘UMYB$USSWISS RETU%I@ Ö úáuˆ@ Êù¹S  ÀpÚ°|¿]/×„  “€À $¼#+5]f#X¬V»Wë¥úá€ •ór¦ %… â¡t '­İ¤'Ë¬œv¬®–«ÕÊırŠ€à4  ~¸\/qİÊ ]nx$í\:Ú,åŠÉ~¸X,Q0 Ò9¾@À¡úéŒ« RD„U%(ê`$UERT¸ RETÄTèè $USSVŠ REU55xéx$USVPœ   …’MSP bD„”åe8‘!	iJ$HBNZI“‘àRD„%9@ Ô„Z  > >¨0 ]nÉ YÖHøÀ²GÀÀõ’> ¼¬•»ÁÚDdÇD€)"Br<t4’$!'-GEÀ)"B‚œt ’$!-)G@ 1"BJr²œà  …’L“P RD„TåI@ Ô€Z  á`—„ea¬rù~¹[®V+tB„ 7G.²ğŒ¬#u\­V   ¤‰©Ê‘‘êŠ³€  …UÌSP BEteH‘]$WFTUIÑ‘`REt%8‘]9$WBT‰ÕÓUS bEuTÕTÉ@ ÖTÊÅhºÖîÒ`å[»HDBk²–€ Ïw%Ö`4­İ¥ À¨][»HDBhÖÉ>=ïX„  [»JL—ë…¢Z g±@*Õ~º]b  òKeÆ Ë,FË	-ÄCÂİQ cñ€2Ë-ÄfH„  <-Å00AnË Š !–Xq–²Ã!‰’-Ùd@2Ë2Ã¬°ÈAäE6	€˜éH$WABSš€BEt%HèH$WFD€REtdEXè $WFT‹€REteEXéh$WNEG³ bEuTÕTÈê$WWMULœ   …PP BD$eH‘	QV$BFDI‘‘e  Qàyá"Òw v‘#wÀnÉ'!€= GY1ĞPH„Œ‰ ¤ˆHÈŠ±Ğ H„Œ© ¤ˆHÊŠ³€  …PŒ“P RD$D•h‘	%YVP 5W p¸ÁÄx`0áqƒ€w• e¾]¤C{,ø(]Èz](g>­Å£âİZÀ! –<Òì± ]°ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …”ÌLSP RE4$4‰@ Õ”Z  Õbˆ@ÀÉ8‚  gå¸€>-K¬R)‡Ç 1aôÑ[»JC„ € Yùn ŠÃƒ¤F)ŠEaqƒñÖá[»JC€%¢>!‚ àFª€3@ ILÊtçSqæ 2œFó”eH’$"©)G@ )"šDà  …”ÌLP bE5dÅ	@ ÔÈZ  Í  ®Ê@Pn±0 Ğ9$€ÕÃ­ò3~ºDÏóxŒrùu€Õƒ¬l §ë•†  FL )"Bšzt )« ¦(F@@)"š²Dà  …TÎSP BE4•8‘M%JP 5{ –€ 8X,V+•ÂÁh¹L•»´¤ø¹O'Õr ‚ ‘ÁYª! 'âe›Y@dô˜À:s  p $ˆM€ —X™şo¾]nÕƒ¬l ¦‹š  Ù  U›Y@ P dr¶;´B`³ÂÄ@"7[µ`ır°À ë…Âk?\'á O[ˆïQ›õÓ% ¤‰
ièqĞ°
H¦˜ˆ‡  ¤ŠiˆŠÑÒp
Hª˜¦™, ¤Š©ŠjÓ€  …“LMÓP REô´Y@ Ô$úáh°\,›õÓ  ¤Š	éh³€  …QÓP RDD%t‘]1$DBRCK‰ÔÒàbDDÅ$4¸‘	]V$DWLUI•ÔàbDD%$5X‘]IV$DBERR”  Mp€…ÖXMœ >²ƒë™ ´>²âÜúÈpˆ  í-,‡ÕŠåÀ&h  á`¼\l“âÔÀid+‡UJ }R ¹åtzuTğ€a°ú¨ †›à0Ğ\¤sÊàğĞ1œ«wi	Âê®@ªD ë[»JN·UO xªÎ U¹VîÒ„p¤u­İ¥'[@0œ~¸\¬W+ú^?JÀ6«ô¼ ~•€-Wéxı+Ú¯ÒğúVµY  êÜ€0\,ÛR Áp¼tˆ¢Ñh´X." ‘ bDD$U%(éÈ$DBRCK© bDD%$5Xè $DBWA… RDD%u8è$DBWUÃ bDDÅ$4¸èÀ$DWLA™ RDEtÅXêà$êd²ÇL°Û,tË²ÇL°Û%¢>+€LĞ “x ¤‰ªJQ”À
H¦‡ „Ši*QĞ H¦’§P ¤Šj
Fs€  …TÎP bE4ÔTÔ(‘M55V$SMEMW‰ÓQSS%  U 	h 4  Ÿ„eğº\®3h Œ¼# fm /ÊÂ0À5›EÀÂ2°Œü#[Ä)íš  €l±Ó,6}	€‘ZİÚRD P ä2¦p† N{õÂù~ºc  ‘M55
:>‰ÓQSS#¡€‘M55V:,‰ÓQSUã$ ‘MAHÆ2^IÔŒç   …TÍÓP RE44ÄX‘MP 5M –€ /QÀ‚ …êa ”4® À˜Œ ñx² ’8in „Â–K´ˆG?-Ä AòÉ Y-sı’Í   vm7 u$öm  p¿\/“Êİúé› RE44tXéØ$SCLEŒ RE5#)À  …TÍ“P RE4D”i@ Ô„Z  Í  g…ÈàAÔÇp˜Œ{Vâ€ L ~:Ú/×åúé€ RE4D”hÈ$SPR2œ   …TÍSP RE4”åI@ ÔÄZ DWRCK»€bDEu$5XÉX$HERRŒØ€RDÄ4Õ	À  …Q“P bDE4„¸‘=YJ$DWINC‰ÑPå  TàX¨  [»JC€P¨  »JC ­’ëq¹GÅ p	š  8\l–‹ÕÊÅj‰àà6€4X.‹U’ €îÒÓ€0€@wiIÀãr‰àà6• 8\l˜é $DOVER€ bDE4„¸éØ$DWDEC™ bDEt”ä8ÊH$HERRŒ RD…ÄØÈP$MEMRYœ   …SSP RDÄÔôH‘15=P 5ˆ f€ ×EÆıqˆ€añúáh¸ß®5»ê½ %Ø¤"[,ø(³@ ²¢İr½X¯×ğ±Y+6Ux  „ë•ÂËˆ@ XUâå€ €K4  z¿\/ë”.0…Æ P  P,®5¢ÕÆ(ºØ¯×ní!?\®7iI‚İp²Z-ñ(f€    2c/à‘!IJ2IP”ã)€‘1%5>:ISÑ#  ‘15=2BI‘Qç   …SP RDÄD•i@ Õ€.Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚ Í  +À5Öå)á1Aòá†ìPÒ˜îA¢¸L ı`€ 0Ø­Ú¸uˆÚ/×åúé€ RE4”åHÈ$SPR2œ   …TÍP RE5Tä™@ ÔÈZ  Í  ‘À9ªë †–Çp˜Œ ùpŠÃv(ilw	ˆÁ¡ÀŒ ~0@À lVí\:Ämë…òıtÆ@@)"š‚‘”t ’)ª§$Î   …TÌÓP BE55H‘MY"P 5R –€ 3iõÂÕ/ÊÂ7á"0à`µ`·İdq° F}¸_/×KõÂÍ  daŒğ¹):¼V¶?®5¸ ırŠÀà4  ~¸Y´˜úF¿\o×Le’$"©)FR@)"š‚‘Œt )©ªGHÀ)"š²Dà  …TÌ“P RE5#‘MAHÊ$SPR3”  MI€%    r „eBè%’ıp³h TŒ#u‰€€ËúésÇ„uxÜ.~²c  ‘MAHÆ:IÔŒ££€‘MAHÎp  …TÌSP RE4ÄEh‘M1$ULSVISÓ%  S 	h õÂ ?IÀèŒ0
p€á•úá~‚]bgùä^o¾NÒ°ğ"	Ÿ„ º`xˆÄkvHŒF#ˆÄb1ŒF#,´¨ "   @€jÀT  Vâ€•Ú[« ‘  *   ˆ  d„@ jÚ v–À iL  dÆZ€*<eÄ!"£¨&FM@2ª22*”uè¡*¤¦"F@À2
š,t ""¡¤¢"Æ[€*r$eÜ"§"(&FX@2b*r:¢DuT)!#)¢ªFaÀš¢tf)ª'&'¡ÇJ€2¢’
reì*,!*£#N   …ÓQ“ d4ÔED$É@ Ô,…7Œ "CğŒÌodÇ@ 2j"¢dà  …]`TÅ´I@ Ôüÿ  # @!aYJ: SĞQ'   …”İ]Z`du5Dä”I@ Ô 7v¨†ÀLt #©ª'$¢N   …›Z\ØÙ[ 5d„˜Y1>HEXVER‘S‘PÓàdTäDDI@ ¸ < ‘S‘U#  9>8d’V‘T£†eÍY!&8f„Õ“ç   …SÓP RDÄÕTÉ@ Õ .Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À«ªÅ~¹O‹Q@9‚xX°ª«•²  q „uH@,Ğ  @ —E‚ñl‚ç·«4  x¾Ù!SX@
ë  3êĞUJÀˆ   «ñ9›v  Ã0|fİ€h   b3@ ğÑ›w€¶Ô Pµ E gğP+GÀÂ¤|)Aà 0+ÁW1Àd  6Æ€ñâæ¶D   ˆ  ÖP  !²€GcàƒLb>H´Æ#àLbíQ¶Æ,²¸¡ôíQ˜—ÛLb:¼ dx¡òæ²^#àXÊ‘€†¬Ú¸:   ÆE¸Aú<>  ñj(‡ŒlÚ†Ã¥ 1ğE¦1 cÛ$|iŒGÆ†˜Å’û6]ª1@²v“G¢+´§~€@ ¸*  c0ö ¶AÒkìÙv¨Å FÈ!ÚMˆ#àLb>l´Æ#àƒLbÛ6Æ±€øbÓƒ-1‹dí&¾Ş­±‹,¾(
²Íâ€k˜ˆş 
ãàƒLbñv“GÈ€À|y¶FTÀCyÀ@##µfÙ}¼]¤Ğ©  l¾Ã—›dğ·#Ağµ¦1:ZcØ†ì €AàYØ@mŒAã€¸0Ë3@ @"  2ÍÂ€(ùÒ2  Èˆø"Óc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                8-—i63> Ğ‘Qã  	U92ú•Q‘‘T£% 	U%134ĞQ£.`QI20  ÑS‘#  II1=;l‘VS•#  aQY2îSQQ#  %9QY2ğ“S‘Õ#«€91Q}>:¢““×ÒS•#)€5A!J2ÚÔ•#> I5B2(”‘RS•## YIM.3è”‘U‘Pã$@QIÖ3„T–S‘#1 Ia%9%R0 ”ÔÕ‘Pã  QMQR0  ÔÕ£%àYMQ91=:Ê•‘R£. 9Q	Y3t•SĞ£? Qa	U:DUS‘#»ÀQa!J: ã» QaMRp  …QT• dDT4”DXQI9
RBFSETP•RS%  X {¬B  „kq |²Ygñ Øü#[Š k‘ ¼ü#[Š k±  ü#[Š k¡ „"  ;TÕ ŒFí%Ò°ğ"	Ÿ„ º`xˆÄkvHŒF#ˆÄb1ŒF#,´¨ "   @€jÀT  Vâ€•Ú[« ‘  *   ˆ  d„@ j22J‘PÒQcÄ 9<D‘S‘£Á€II1=3$‘VS•#  aQY2‘ÔÕ’Q#Á !1Q1Z3êSQQ#(À%9Q=2(’S•‘PãÀ@19Q"2:“UÑÓã  1=%9%R2ğSĞQ#Á@5M-1>2D““×ÒS•#Ã`A=IR;Ö”‘PÓT#¤ÀYI%9R; ”‘TĞÒã' YIY<‘QÍc±€5Ia9:¨”–S’U#³ MQ%9R:‚”ÔÒS•#  MIY<ÕU#Ã MQ:<(”Õ“Ğã2 Q	!J2°•‘U‘PãÂÀQa	U0 US‘#0À5QaMRp  …US dU…D”åHQ	!JTXLOUĞÕ UE„„E(Qa9NO_INT“UÑÓå  Sp ğ–~eX`Œü·eX`X¬<cØÅ–_eX`mQ€ Õµ@Í  @ 6® ‡€ pCc€Â‡›lnÛÆ À¨ğûVkÃ †.ÕµFíQ»H³Cí•M [cwjÚ£6^¬Vğ      ÅÕ· ÍÆ<Æ@Í‰>:Í‰Í7>.Í‰Í7xÑÁÉş (	Í‰ óÉ üÉÍÿÍëÈÅÕë!€ ÍÆÑÍÆ·Á(êÕ€ÿÑÍæ>Éş (@ëÅå >?í±áÁë(1ÍúÍÿÍõÈx±(ÅÕë!€ ÍÆÑÍÆ·Á>şÀx± äÍæ>É>ıÉÅÍÆÁşÿÈoxy}(ÅÍ ÁşÿÈ}xyo ïo`>ÉÅÅÍÆÁşÿÉÅôÅïõÕå! >6 #= úáÑñÉş=Èş Èş,Èş/Èş7È·À7Éş (úïşa?Ğş{Ğæ_7ÉşAØş[?É|ÍF}õÍUñõÍUñÉæÆ'Î@'Ã‰#~ÍF+~İã¯ÍpãÉÅG~#¸(Í‰öÁÉ>Í‰>
> õÅÕå_ÍÎáÑÁñÉÍ&?Ğ!  Í/Í(Ö0Øş
8Öş?Ø))))µoáÅ ·ÁÉÕåÍÎáÑÉÃ UñÉæÆ'Î@'Ã‰#~ÍF+~İã¯ÍpãÉÅG~#¸(Í‰öÁÉ>€ Õµ@Í  @ 6® ‡€ pCc€Â‡›lnÛÆ À¨ğûVkÃ †.ÕµFíQ»H³Cí•M [cwjÚ£6^¬V«•²  q „uH@,Ğ  @ —E‚ñl‚ç·«4  x¾Ù!SX@
ë  3êĞUJÀˆ   «ñ9›v  Ã0|fİ€h   b3@ ğÑ›w€¶Ô Pµ E gğP+GÀÂ¤|)Aà 0+ÁW1Àd  6Æ€ñâæ¶D   ˆ  ÖP  !²€GcàƒLb>H´Æ#àLbíQ¶Æ,²¸¡ôíQ˜—ÛLb:¼ dx¡òæ²^#àXÊ‘€†¬Ú¸:   ÆE¸Aú<>  ñj(‡ŒlÚ†Ã¥ 1ğE¦1 cÛ$|iŒGÆ†˜Å’û6]ª1@²v“G¢+´§~€@ ¸*  c0ö ¶AÒkìÙv¨Å FÈ!ÚMˆ#àLb>l´Æ#àƒLbÛ6Æ±€øbÓƒ-1‹dí&¾Ş­±‹,¾(
²Íâ€k˜ˆş 
ãàƒLbñv“GÈ€À|y¶FTÀCyÀ@##µfÙ}åååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååå¼]¤Ğ©  l¾Ã—›dğ·#Ağµ¦1:ZcØ†ì €AàYØ@mŒAã€¸0Ë3@ @"  2ÍÂ€(ùÒ2  Èˆø"Óc8-—i63> Ğ‘Qã  	U92ú•Q‘‘T£% 	U%134ĞQ£.`QI20  ÑS‘#  II1=;l‘VS•#  aQY2îSQQ#  %9QY2ğ“S‘Õ#«€91Q}>:¢““×ÒS•#)€5A!J2ÚÔ•#> I5B2(”‘RS•## YIM.3è”‘U‘Pã$@QIÖ3„T–S‘#1 Ia%9%R0 ”ÔÕ‘Pã  QMQR0  ÔÕ£%àYMQ91=:Ê•‘R£. 9Q	Y3t•SĞ£? Qa	U:DUS‘#»ÀQa!J: ã» QaMRp  …QT• dDT4”DXQI9
RBFSETP•RS%  X {¬B  „kq |²Ygñ Øü#[Š k‘ ¼ü#[Š k±  ü#[Š k¡ „"  ;TÕ ŒFí%Àá€	pĞ¸l\8.  — K‰€#Ã€	<<‘QÔ£À€	U9< •Q‘‘T£< 	U%1<ĞQ£Ã@QI22J‘PÒQcÄ 9<D‘S‘£Á€II1=3$‘VS•#  aQY2‘ÔÕ’Q#Á !1Q1Z3êSQQ#(À%9Q=2(’S•‘PãÀ@19Q"2:“UÑÓã  1=%9%R2ğSĞQ#Á@5M-1>2D““×ÒS•#Ã`A=IR;Ö”‘PÓT#¤ÀYI%9R; ”‘TĞÒã' YIY<‘QÍc±€5Ia9:¨”–S’U#³ MQ%9R:‚”ÔÒS•#  MIY<ÕU#Ã MQ:<(”Õ“Ğã2 Q	!J2°•‘U‘PãÂÀQa	U0 US‘#0À5QaMRp  …US dU…D”åHQ	!JTXLOUĞÕ UE„„E(Qa9NO_INT“UÑÓå  Sp ğ–~eX`Œü·eX`X¬<cØÅ–_eX`mQ	DEFM	' @ $'
errmsg:	DEFM	' fatal disc error $'
almsg0:	DEFM	'Init map $'
almsg1:	DEFM	' - length $'
naloc0:	DEFM	cr,lf,'Clear $'
naloc1:	DEFM	' bytes from $'
alblk0:	DEFM	'Allocate block $'
alblk1:	DEFM	' from map $'
frblk0:	DEFM	'Free block $'

cfrmes:	DEFM	'k Cache size',cr,lf,'$'

	ENDIF






;PROCEDURE inilow
;
;Initialize everything that needs initing:
; <zeros> is initialised to all zero.

inilow:	LD	BC,1023		;Len-1
	LD	DE,zeros+1
	LD	HL,zeros
	LD	(HL),0
	LDIR

	LD	DE,mÃÑ                                          áÃÕõÍH:}<·ÄÀ,:":·Äñ,ñ!:4~=Â«+!ì;~·Â4+!J;~·Â4+!X=# ì;~#ş ÊV+ş	ÊV+·ÊV+şÊV+Â:+!æ;p"n:ÍHÍÚ$!•K"<ÍÆÚ’+"n:~æw#~æ@Â´,~æÊk+#^#V ÍHÃk+*;ë
 ÍH*;ë{²ÄHÃl*u:õÔÿÕÅÍÍ!ÿÿ"c:"e:Í!=-Íw!<>ÍÕ8Íü:b:şá"1Í9*é>ÃpÍiI couldn't find  l Ã
	Ã LÍ4JÍ |µ eç ÍÏ8À"2">!‚ Í&Í8ş/ õÍ/şI(%í[Í l Í <Êİ!0Í	Ø!€°"<"<ş: Í˜Ú ! "H*"@l   ÍJşÂ"DåxÍ4áí[·íRÍA+$|õ!ÍŒ6$Íi: ie  Í4Íi page ñÍode7	;Force mode 7 as i/o proc RAM used as cache
	JP	pmess		;&return





;PROCEDURE inidsk (max_drive: BYTE);
;
;This procedure allocates heap for the map for all drives

inidsk:	POP	HL		;Return address
	EX	(SP),HL		;Max_Drive
	PUSH	HL		;Save drive again


	LD	HL,mapptr	;Init bit map pointers & track stores
	LD	DE,mapptr+1
	LD	BC,maxdrv*5-1
	LD	(HL),-1
	LDIR

	LD	HL,cacmap	;clear cache map
	LD	DE,cacmap+1
	LD	BC,noblks*4-1
	LD	(HL),-1		;all blocks free
	LDIR


;Work out how mucÍ~İ!<@@Í ĞÍ7ÉşÈ>sÃ‰ÍiBad number
 É€±  m   x                  SRL's SEND version 0.6
$Econet not active.$The file size was &$õÅÕ  d0Íª 
ÍªÆ0w#{ÑÁGñÉ0ü€õ>/º(w#ÿñÉÃw-ÍÀ~·<ğ=õæÊ»-Í¡8@Ö>È>!à7ÉYou have not specified the local station number.
 $ÊzÕ!½ í°ëÑÍ((w#ô>!<7ÉStation zero is illegal.
 $6ı!½ıpÕİ!½GÍ Ñ·7À*À,-(¿>·É>!7ÉComplete lack of parameters.
 $Í& ØÍÏØ7ÈõÍğo& ñş. eåÍÏÍğá·o(>·É>É!  Dş.ÈÍ7?Èş0Øş:?Ø))))æ…oã¯„& È))))‡O‡‡h cache is actually available & set up chain
;
; On BBC, always 1st <ramsiz>K
;
; block 0 assumed to be OK.
; Note: when testing this page the code is safe due to LD HL,$ fudge

	LD	BC,0100H
	LD	H,4		;Pageno. under test
	LD	IY,cacmap	;IY points to the block which will point here
				;if this one is any good.

cilop0:
	LD	A,H
	CP	ramsiz*4	;Only <ramsiz>k available
	JR	NC,cilop1


cilop2:	INC	B		;We have a good block
	LD	(IY),H		;Link it to the last good one
	LD	IY,cacmap
	PUSH	BC		;Save or	MACRO	string
	LOCAL	stradr

	LD	DE,stradr
	CALL	pmess

	JP	fsexit

stradr:	DEFM	cr,lf,string,cr,lf,'$'
	ENDM




;Macro for message condition

mcond	MACRO	addr
	PUSH	AF
	LD	A,(mesflg)
	OR	A
	JR	Z,addr
	POP	AF
	ENDM



;Trace message macro

tmess	MACRO	list
	LOCAL	nomess

	IF	t.on

	mcond	nomess

	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL

count	DEFL	0

	IRP	param,<list>	;Count:= number of params
count	DEFL	count + 1
	ENDM

i	DEFL	count		;i:= count

	REPT	count
	Id FS version'
;				FS call.
; FUNCTION Ver_len:Word;	Returns length of block.
;


vermsg:	LD	DE,sjmess		;Print version on screen
	JP	pmess

veradr:	LD	HL,verblk		;Address of version text to
	RET				;Transmit for *VERS

verlen:	LD	HL,crlf-verblk+1	;Length of transmitted text
	RET

verblk:	DEFW	0			;Std. Tx Header

sjmess:	DEFM	'SJ Research File Server ver '
	DEFW	verhi,verlo

	IF	large
	DEFM	'/8" BBC'
	ELSE
	DEFM	'/5" BBC'
	ENDIF

; NB this label must be defined before any referenceFF	i AND 1		;ie I is even
j	DEFL	0

	IRP	param,<list>
j	DEFL	j+1
	IF	(j EQ i)
	PUSH	param
	ENDIF
	ENDM			;of IRP param....

	ENDIF
i	DEFL	i-1
	ENDM			;of REPT count

i	DEFL	0

	IRP	param,<list>
	IFNB	<param>
i	DEFL	i+1
	IF	i AND 1		;ie I is odd (and param points to a string)
	mess	param
	ELSE
	IF	'&param' EQ 'AF'
	POP	AF
	CALL	cahex
	ELSE
	POP	HL
	CALL	dhxout
	ENDIF
	ENDIF
	ENDIF
	ENDM

	POP	HL
	POP	DE
	POP	BC

nomess:	POP	AF

	ENDIF

	ENDM



pstat	MACRO	sw,mes1s to the MESS
; macro is made.
; NB2 also forms part of the above string.

crlf:	DEFM	cr,lf,'$'


	IF	t.on

;dhxout
;Print hex of HL

dhxout:	LD	A,H
	CALL	cahex
	LD	A,L
				;DROP THROUGH
;cahex
;Print hex of A
;
;On entry:
; A	number to be printed

	JP	cahex		;Now lives in h2lib or some such place
;
; Print a crlf!
pcrlf:	LD	DE,crlf
	JP	pmess


mode7:	DB	22,7,'$'
wrmess:	DEFM	'Write block $'
rdmess:	DEFM	'Read block $'
adrmsg:	DEFM	' address $'
dtsmsg:	DEFM	' RDTS=$'
atmsg:,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	large,<8 inch disk version>,<5 inch disk version>
	pstat	t.on,<Tracing ON>
	pstat	c.on,<Bounds checking ON>





; Various version string related routines :
;
; PROCEDURE ver_msg;		prints SJ FS ver etc. on screen
; FUNCTION ver_adr:Word;	Returns address of a block containing the
;				version string with a std. Tx header on the
;				front, suitable for the 'rea¡ôíQ6A“Ì|=iŒGÎ¶˜Ä|}´Æ,ÛB ¶D8`š  „gá‹ -ÄCÃùÊ®à#vh   ¬Û ¶D/÷û4  lí—(«  pà  v¬¡– f€ ø« 3h(‹ 6GÁğš  3l`Ä>"3i€¶Ù``Xl6àPj¡Ú¨†Ãa± vªª vªª†È!²Íª€‹âÙ<_l–my y³n¨aÜ!  8h  ;V‘ñ!›N€DğÃPu‚ÀÀölhÁ˜Å¶1e™ÄÖ sÄ†ØĞ> í±ˆ`í ^£¬ æ'Šƒ1›˜Éf€ à
İ’Í¸€/»%ömŒÒkìÙmŒ`Q@²v“Yµä |	ß`†Ël`¾ˆ Q@)¶1¶¯pdí&€­1ˆë 4Æ.Ò¶ ` á0` È!ÚM†X,›rÀC wØ!²íQ
 C´š=>@7\ÚC¡€@`dí&¾ÁàLbÛ¿â ¨ø€2Á`±ƒdV"À€á‹Lb¯iŒC±ğ0é—  K€€%À€à`	p@¸$\. — K… %Â in 2 hi bits

Empty blocks have the block no. set to &FFFF, so we can have one disc of 64K-1
blocks, 3 discs of 16K blocks, or 4 discs of 16K-1 blocks.

Blocks are marked as empty if an error occured while trying to read into them.

	*

PUBLIC	discrd,discwr, inidsk, dalloc, alloc, fblk, inilow
PUBLIC	cidle, cempty, Veradr, Verlen, Vermsg, pcrlf

EXT	$hplm, $memry, fsexit, pmess, cahex, verhi, verlo


;Cache equates

noblks	EQU	64		;maximum number of k in cache (?)


;Heap

heapln	EQU	.Z80
TITLE	Disk & Map managing routines for VARIOUS DISCS
NAME	('DkMan')

; modifications:
; 26/7/84 BBC version

true	EQU	-1
false	EQU	0

t.on	EQU	true	;Trace
c.on	EQU	true	;Parameter checking

large	EQU	FALSE	;8"disc version ?

ramsiz	EQU	20	;Size of available RAM in K
ramlow	EQU	02800H	;Start of i/o processor free RAM

osword	EQU	0FFF1H

	.COMMENT	*

HOW THE CACHE WORKS

The cache stores 1K blocks, up to 64 in all. Each block is held in 4 physical
pages, and all page numbers are 160		;Max 1280K total


;Misc equates

lf	EQU	10
cr	EQU	13

maxdrv	EQU	2


;Block 0 offsets

sjoff	EQU	64		;Offset to 'SJ Research File Server'
dsfoff	EQU	97		;offset of double-sided flag: 0-s,FF-d
blkoff	EQU	98		;offset of number of blocks on disk (16 bits)



; Various Macros



;Macro to print string @ messadr

mess	MACRO	messadr

	IF	messadr EQ crlf
	CALL	pcrlf
	ELSE
	LD	DE,messadr
	CALL	pmess
	ENDIF

	ENDM




;Macro to print error string & crash back to OS

errin this form - ie. 0,4,8,12 are successive
pages. (page) holds the current page number and also acts as a head of
chain pointer. The map has 4 bytes per entry (hence physical page can be used
as an index) and the entries form a linked list. There is no tail pointer,
but (csize) contains the total number of active entries and hence a loop
can easily scan down to the tail of the list.

entry format :

	offset	0	Page no. of next entry
		1	Needs writing if =0, else =&FF
		2,3	Block no. with drive no.s of the following:
;If on entry M3000 is busy, return immediately
; read all data
; read seconds again, if different do it all again
;
; On exit, zf set if time NOT got.

getclk:	IN	A,(idle)
	CPL
	AND	2		;Test bit 1
	RET	Z		;No clock fitted

	IN	A,(clock)
	OR	0F0H
	INC	A
	RET	Z		;return FALSE if done nothing

	LD	D,second
	LD	HL,rsec
	LD	B,3		;read 1st 3 regs directly into RAM

gethms:	CALL	read
	DEC	HL
	INC	D
	DJNZ	gethms

;date: D=date reg.

	DEC	HL		;=rdate
	CALL	read

; mõ$HIaA=12RXDEL”•T‘àdÔ•44u8Ia=A:TXSET•Ó% Q à@  íX` C‚ Ï ÈAö6 2X` İ’[ŠVmı eŸ…ğ›µ@+<nÕ‚½ÂÉjˆp@   OÏç€ ­Ägİ’zhµBA7+¬F»V±ıÂ·dßÀ‘€1›@Ïç€ ·|Ù*ñ»$öşÛÛú 6x+Ù" Ú v¨¤°   v¬! ›øÒ¡@"< Í  6Èİ€\@’sÀ. Ù ¼@°ú 
° ¬æ#9:Ù.° v¨ªH« ° <@  I’] H‡   @`jÁ’ëà   íX2CMVh  Ñ	2D6$  ;V‘  ƒ Ö@$z ~2GÏñ»%ü u€%À à	p¸\. — Kš %Í € ‚¤„ªõ È*Héˆ©Ñ˜†‚˜˜Š¥ ÈhHH*h±™°†šˆ¨„™  ÈªJI‰èqĞ ’œ’¨š‰ì ‰‰èËğ˜’œ’©Ö É¨*ii‰ñÙ š’¦†§ ª
jj‰ÑØ onth and year are packed as nibbles into a single byte: month - lo

	INC	D		;=month reg
	INC	HL		;=rmonth
	CALL	read
	LD	B,A		;month in B
	INC	D
	CALL	read		;year origin 1900 in A
	SUB	81		;we require origin 1981
	LD	(HL),A		;year to lo-nibble
	LD	A,B
	RLD			;month to lo-nibble, year to hi

; now check seconds again

	LD	HL,rsec
	LD	B,(HL)
	LD	D,second
	CALL	read
	SUB	B
	JP	NZ,getclk	;go round again if failed

	INC	A		;A=1 ie TRUE
	RET			;OK






;read
;read an M3000 register¤¨œ‚¤t ªKˆ©‘Ó€¤° Š  ÊK	ê
H‘Ö ¤° ˜™ Š‹	‰ñÑà¨° ˜™ ª‹
hª“€  …T–S e%„”ä•H1=%9%RRXEND”ĞÕS• e$D”åHIM.RDACMP”ÔÒS• E5DH	UJLENGTH•Q‘S‘ dU%$Äô8	JSTNLOC••Q‘ 55DèQI2PORT€Ğ‘Qàd$TuÃ(9ENDPL2“PTÒÓàd„ÅDÄUhIÖPL5f‡US!Ô”ÔÅHuAIQ:RXPROC‡ÓQ“!µ¥¥¡ f€ à lş
ËvÍÚ^€ §iB  °H †£  F`GjÌ1;Vc¬( í<³j í¶1[²Ëã¬( À²GÁ†˜Ä0î    @À@?M W@Cd     v¬ã, >uŒ°@Í›^@5Ô 1;Vl+¤ Úcóu¦1cØÁ¶0mŒÃ˜Å’    ` >Ş­±ƒùşl½X­W(`mŒ\ÀCéÚxaVà&  0 Û¶Æ.` ARGBUF  d$tÄTèğ CALLER¶ TDTÅ%ˆè ECOINI¹ TT4õEˆğ EVENTVç D”ÔTHÈINITMDŒ‚€dÄô”ä•HîNO_NETŒÜ U4„(îROFFŒ¸ U%„DTÈÊRXOPRDŒ™€e%…ôÄÈéHRXREADƒ€U%…4UHğ STARCHŒÌ€eE„„”„ÉÀ  …`EE„„˜Qa!%!2DO_ERR‘×Õ“%  ZĞë•Âåj³lØEÂ·|9â€[ø(¿€‚€t@aÒ€m¤ =-Åà a¶æ¿€£ p†§ ÀÀ H$Œ#3ì‘ z¹ìd€œ@Œ¬ÈÄnÉ« · WÀ
 L4›Œ¢Q„Úm2™¤ãyĞ@t4NFPi8Şt'3¡”Üi7Á¤ãx€Æl7˜Í`Ò„È *f i8ÊtNG#yÈ@# Y  4  >Ù$ sè ~„,˜é@DO_ERR˜€dDõõD$Èè TXHI€eE„„”„ÈÌøTXPOLLŒÎ UE…4UIÀ  …“ÔÕÓÔĞ U55Dè		MINITMDÑ– e%„CIDLE¦dDÄÄô8î DISCRDšäD•45u(è¨<FBLKŒÿde4U„•Hï¸INIDSKö d”ä”ÄõxéğPCRLFŒıƒUÔU58è0VERADRŒ– UdU$„˜èPVERLENŒ— UdU$Äøè VERMSGœ    äe$TT$Éx ¼\ . — €Ë€€eÀ`2à@p(¸\.	— Ë‚ÀeÁ 2ààpx¸D\2.¹ŒÔ€ÒD…ÄØÀ $MEMRYÂTÄÄô8Ë 5CAHEXÛd4TÕE˜ì€Z,addr
	POP	AF
	ENDM



;Trace message macro

tmess	MACRO	list
	LOCAL	nomess

	IF	t.on

	mcond	nomess

	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL

count	DEFL	0

	IRP	param,<list>	;Count:= number of params
count	DEFL	count + 1
	ENDM

i	DEloc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2


	DSEG

cacmap:	DEFS	noblks*4	;Cache sector map

secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

page:	DEFS	1		;Current cache page

rwpage:	DEFS	1		;Parameter to RWDISC

csize:	DEFS	1		;Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4
FL	count		;i:= count

	REPT	count
	IFF	i AND 1		;ie I is even
j	DEFL	0

	IRP	param,<list>
j	DEFL	j+1
	IF	(j EQ i)
	PUSH	param
	ENDIF
	ENDM			;of IRP param....

	ENDIF
i	DEFL	i-1
	ENDM			;of REPT count

i	DEFL	0

	IRP	param,<list>
	IFNB	<param>
i	DEFL	i+1
	IF	i AND 1		;ie I is odd (and param points to a string)
	mess	param
	ELSE
	IF	'&param' EQ 'AF'
	POP	AF
	CALL	cahex
	ELSE
	POP	HL
	CALL	dhxout
	ENDIF
	ENDIF
	ENDIF
	ENDM

	POP	HL
	POP	DE
	POP	BC

nomess:	POP	AF

	EN
rwmask:	DEFS	1		;Contains either FF or mask for settle time bit

lmask:	DEFS	1

;	******* MAPMAN AREAS *********

lstadr:	DEFS	2		;Address of last block found

mapptr:	DEFS	maxdrv*4	;( length (2) + mapptr (2) ) * maxdrv

myheap:	DEFS	heapln


	END
 Number of usable blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4
DIF

	ENDM



pstat	MACRO	sw,mes1,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	rm,<Research machines version>
	IF	rm
	pstat	large,<8 inch disk version>,<5 inch disk version>
	ENDIF
	pstat	nascom,<Nascom version>
	pstat	t200,<Fixed 200K disk size (test)>,<Variable disk size (normal)>
	pstat	t.on,<Tracing ON>
	pstat	c.on,<Bounds checking ON>





; Various version string related routines :
;
; PROCE…QÓPS dD•45$H%M]JINIDSK‘SĞàTÄÄô8	1.INILOWPÒQ`d4TÕE˜YIJVERLEN•‘T“TÑàU5$Äh DEBUGŠ €TU%$õ(  FREEBL”\€ÍjÁÂ4@†  hp$B& 2@ ™(@R2œÌ¦‘ŒĞ #M†QLÊr;NB±”ä     xàD	ŒĞ  úÃ§ f Ã €s‘¤èe†ó¬@$)L&AˆØo1šÄA„Èd9Ng1 @R"
cÑ €€ Æ¡„Ø 2Nf1”är7œ„AˆÂd		&ãIĞ@m0œA ´@l2›ŒçC@€HÍ†S	È@$'C)Ì@f9Í¢!Øl7˜Ì'C(€Äl7˜Íb €Ìr7›DÓ	À@$#Œ¦QˆØo1šÄCX€†a1š¢™¤ôe‚„‚Ÿâ0ƒí’áq¹D8D#„€@  ÙşíXp  G € _à³ıÚ°Ñ@³Àº DÀGè‡  <Ïç Àí0†—Â H¼$¾á À<ı: ¢  Å 	ĞKH$	v˜Õ^2Àà/ŸE fXè`{ïdC”eƒ€[nYıê:ÁÀ-7#˜OxˆpX 	?°(
İùJ…í7…ê:à q@‰âõj¹Z®Pg fÖà76› 8Y´Ø #[€·¬u‚ YµĞÂÑx»Jx E€€]¤¼

]=GÏñ@|û`ĞĞ^ÓqœÌÚ"Í§@Í·˜@ }<GÀ@0  şˆ'±{MÄó`€ø8h|àĞ¸ B>;©™´DB x“ÒËmÀã‡ÃmÆ/;‹U\8Ãª £âº™›DA„ €Yøí,Ÿ…ävÛ€8ÇƒÃMÆ,aW€Pã»½@'ğ ,ğ±>Ş v˜Ô^¢'Š
Ng8€œ:À€/àÀ<`@(FÂ€3oÈ#òÍ¿à·½›nA[n!{6ß‚°6â‚° 6å‚¸ ÜP>ÆX4î"v–ğ « ²Ì,ªz
Í¥@Ì:
y[ŠÂ5II=K€ ˜ìPr fÛ@VòÍº ¬Ú| ÁfÔgÛ%ê`àZ¼`e»ÆX8¦äx´Üà ô@ıd¹GÏ&mfÓ aVKÜ,–Û–G>™#¬ö °pMÈÉp¸ÏÂ20ŒÌhz ÔDT%T~  ·^/V+U³ÀË€«Ç‚pƒñ›O 7t›P€-‘l½FW8T  9D  #”L rˆnp•›p ‡Pj*’’z—  [ˆ‚ªâ  !   …ÃKá ¸F>,P ù ?Iâ÷èªÄ€ˆpP
˜ı?T+»ôÜb~™Œo«6è€¼G¯*ØÉ F\ ÂÉ   QÔˆŠ„ªÀ â€óÅêÅj¹\¯P‹ fÖ@‹6¯ „l¨6ñ€¸Y´ØÂÑ`¼\®´9< ÁÈÊH¨¨Iœ  sœ™c¦Xm–:e†Ùc¦Xl&!Â€ KeÊÙ`œgYÈVsj¶]n0Ëj¼9B:äÚRp´«ÀE²Åj°Z&#XL6½GPj"*ª?  [Š/«ªår±B6€›{@\,Úl µ Ú¢áfÓ`m> p´X/jÁ¢{sÅ b:\n?ìfÕ°&  ¦€€Şf6ÎàĞPuÀKã¬O ß¢   ?C/Óğn ±Y´Ü‚d?KÀ hÊÉ¬Û Á>Y*ñ”Š¤¤¥À .6mØBÏöm7p´X.7[Ôu¢"¡*£ğ ¸ bñz±Z®V¨F¨€3kàôÜ~™€lÚl «Êõr„nˆ6€8Y´Ø #q€µ˜âÍ ÀÌÚ| áh°^,Û(¶;¥Ù.øFF™Û(/SÒì—+øÒ»`Èt9< á@KŒúæ²ÇŒ°ë,xË²ÇŒ°éHKÂáëEŠë#
ÉÏSÂ„xÊ»`ÎQYøVn3¯İ¥&Õ÷p¼]`–	’¼€ÌÚàÃ¯à@ĞQÂdL'¸êm1N@ĞP#@Ù·|‡x ¢!ÔÌ 1æ3X€Üu6˜Œ§ h(Há`¸Û®V)øFå/ÊÎ·+6Êğ)øPƒBÂÕŠåuˆÊÂ²ğ¬Œ+':Á,+uÂ¿vl‹„aÕ°véø ·,:ÂA‚0ƒéº#ÖL* á;ˆÎâ±[ƒºÜ'1ÉÂå/ÊÎµù}‡cAÛ¢6éx A_²Ãc x¬øµ‚FXmºs 0ì;,6~7N`[„æ#97\,™x ¼ERROR—€ KÀ@ äe$TT$Éx ¼\ . — €Ë€€eÀ`2à@p(¸\.	— Ë‚ÀeÁ 2ààpx¸D\2.¹ŒÔ€ÒD…ÄØÀ $MEMRYÂTÄÄô8Ë 5CAHEXÛd4TÕE˜ì€ ÛÌáfÓ` n fßP!ÖfŞpm> p´X/X0$`p( <>šcG¨™à~	Å‚ +ÄxÓ=A¢AàñiY.6ìˆ`ÔU%$õ.  6 8X V‹ÆõA¨ˆ¨J¨ü n(¼^¬V«•Ê¨€Ûşı7 Ÿ¦`6› jè6ª¸Y´Ø #[€µuÀY´›O€-Ä@;Ø­W(Yşxk,Jnáh°_£` uÀBQ@x} °`¦4zŸ‚B0à€
ñ4ÆPhäx<ZcVIá¬XŠW(ë€€‚Á¦4 ‚Øğ öp°Cƒğ<#/ÖÅw[ôCÀBÀÖ	#’ß¥àôC€ ¡—éø½Ÿ§àğP:¬ÚBı? Vâ (X Í¦àéÔı: Öì‘Ö]Ù   _§àÜuÀ_§pìeÀFì—èØÿ~¹\   ·v£,ı7 Ÿ§à˜~g¿OÀ08Ì/¹Z¬ÛÑpƒ¢€XUı ŸïÑ°şÉ`€0e‚ DlÛˆ¯Q×  [Š ¯m> z¼Y)q–jŸ\Àrø¤R)ŠJ¹7„¦ñÖ
RŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à  …SÓP RDÄÕTÉ@ Õ .Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À«ªÅ~¹O‹Q@9‚xX°ª°ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üFUSH	AF

	CALL	wait65		;Hardware status (ignored here)

	POP	AF
	OR	A
	JP	Z,exitNZ	;Busy, so do nothing

	LD	HL,(sersp)	;Lo two bytes of pri_spa
	LD	A,(sersp+2)
	SRL	A
	RR	H
	RRA			;Building page in H, two spare bits in
	RR	H		;lo of A

	LD	C,0
	RL	C
	RLA
	RL	C	
	LD	A,H
	LD	H,C
	LD	C,A		; HL=offset, C=page


	LD	DE,(serptr)	;Lo two bytes of pri_ptr
	LD	A,(serptr+2)
	SRL	A
	RR	D
	RRA			;Building page in D, two spare bits in
	RR	D		;lo of A

	LD	B,0
	RL	B
	RLA
	RL	B
	LD	A,D
¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à  „Ô•àdtUD4Ä¸%9%1.SETCLK”‘PQÒàeu$•D4¸ (NOWŠ €TU%$õ( TIMOUT”€MY C D ‚t @¢P "  4  3»VlÚÒ !À -9=_€  @ ›µ`ûd¾Ş­±›,¾ 1Z®Q  ÃÇğğ@WÅa©øxş ¬ÚÒ  Ä0r¢Jjzª§  fÖ06±€8Z,ğA¦3x»I§å»!ğ5d…€ ³lĞ ¬(|ŠÙ¶h (#fÙ 8Q›f€Å¹áÚoà@0X Í³@	 2Y¶Ì üÅ'ƒÁàğ{˜‡#¡Ğè9åÌ@0Nì–mÁ v”]§ƒ»´ğûv›Ù áãì óvÏà¡ì>D×iáìğ
L—Œ¢©)'©p ò@~­Ùá@üæˆÖì‡ğ5 ~¿ƒğü<hŸÃÆ‚¼À€ (æí\>Äa`xø Í© !`	LD	D,B
	LD	B,A		; DE=offset, B=page (also in A)

; Compare pointers

	CP	C		;Compare pages
	JR	Z,samep1
	LD	HL,0400H	;Print to end of page
samep1:	OR	A
	SBC	HL,DE		;HL now holds length
	RET	Z		; Zero bytes !

	LD	A,11		;Print data from cache op-code
	CALL	to6502
	LD	A,B		;Page no.
	CALL	to6502
	LD	A,E		;Offset
	CALL	to6502
	LD	A,D
	CALL	to6502
	LD	A,L		;Length
	CALL	to6502
	LD	A,H
	CALL	to6502

; Now update pointer

	EX	DE,HL		;Length now in DE
	LD	HL,(serptr)
	OR	A		;Clear car6 ˆÂ„cÃ˜Í§`!EyÁÚocY´ì,³iàUåK€GÀM;±UîÓx‡„„u{´Ş€°X¤vmÁ v”O ğx<í<»H/°0  ş`²`´äõyx ¼\ . — K€À%À€àP5II=J^ / ƒ•SSÕU%à ğ	xth#¢ª!¦%ÇB@2JrJb\d4$§*"¬!GlÀ2’*
"\wh)¢ª!¦%ÇS@rº’J¢\à  …QS‘”àdTäDe489MPZ.  @!  üª+ vXM–ná|ôîÂñ€ ‚åz o;J`0&: ‘S‘”ĞãÀ 9Mp  ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERè9åÌ@0Nì–mÁ v”]§ƒ»´ğûv›Ù áãì óvÏà¡ì>D×iáìğ
L—Œ¢©)'©p ò@~­Ùá@üæˆÖì‡ğ5 ~¿ƒğü<hŸÃÆ‚¼À€ (æí\>Äa`xø Í© !`ÌSP BEteH‘]$WFTUIÑ‘`REt%8‘]9$WBT‰ÕÓUS bEuTÕTÉ@ ÖTÊÅhºÖîÒ`å[»HDBk²–€ Ïw%Ö`4­İ¥ À¨][»HDBhÖÉ>=ïX„  [»JL—ë…¢Z g±@*Õ~º]b  òKeÆ Ë,FË	-ÄCÂİQ cñ€2Ë-ÄfH„  <-Å00AnË Š !–Xq–²Ã!‰’-Ùd@2Ë2Ã¬°ÈAäE6	€˜éH$WABSš€BEt%HèH$WFD€REtdEXè $WFT‹€REteEXéh$WNEG³ bEuTÕTÈê$WWMULœ   …PP BD$eH‘	QV$BFDI‘‘e  Qàyá"Òw v‘#wÀnÉ'!€= GY1ĞPH„Œ‰ ¤ˆHÈŠ±Ğ H„Œ© ¤ˆHÊŠ³€  …PŒ“P RD$D•h‘	%YVP 5W p¸ÁÄx`0áqƒ€w• e¾]¤C{,ø(]Èz](g>­Å£âİZÀ! –<Òì± ]z8%D±  …’LSP bD„ÄCEˆ‘!1Ñf$HST4X‰Õ`RE4¸‘U9A.P 59 –€ ?\¡€uÊÑpŸ„nWY|.Ÿ+†X` õÊ7\­øFãr›Âéó8e¢qœg1ÈFëd¿\,‹…Ú°~ºc"@‘!1Ñ":‰#  ‘!1Ñf:0‰Õ#¢€‘!MPÑf:`IPÒã¦ ‘U9A.p  …RP bD„•%5I@ ×0Z  *¤à € UJ@A  ª•€‚€ód „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãe†‡ ÖXhpe†‡ÒğŒ¬ëd²ÃC;,48"ºÜ.3˜ŒäÉe†›W êzsÛ®Wë„zú² Ò²ú^@5C‹%–
Ş§§0=ºåh­Å Æ«õÂı+ _¥ä ô@ô¼Y&ğº|ÎÉu˜+wiI’O †Iš!  1•p
Hˆ†˜  Ä‰	*Jj“€  …RÓP bD„TåE8‘!M=$HEXIT”  MN@%  	xFñ–q`2Ï" 2İà>'† ®Ò#$|J ™   øÉƒ€RD$D•hè $BDIVUŒ© RD„U%)À  …PŒSP RD$ÕTÈ‘	5U1VP 5@ p¸ÁÀx`(áq“Öï*  í"Ï*Â{,ø(¥Ò†sêÜP>-Å0!.·e‘E  }–=Lì³Ë ^g>‹Íâ6H„  dÇAÀ)"jªdt !&ª¦*Î   …UM“P REUõ9@ Õ$úá€ ’pÖ& C$aán(R€É<_îV«
(Äa¥ğ¡îÁh¸B`Ñ¥.0Z.‹Tö$G``2ù'€CõÓ  ¤Šª	ês€  …UMSP RET4Õ‘U5AJP 5H  C »õÂ!  $çX˜ iˆÈÏW+ Dlån(â€XLFK`Ñ@ õ[†a C…ò¯~ºV‡ÀİÂÑÂê ûåúé€ RET4Õè $UCMPRœ   …UL“P RET4ôé@ Õ„úá€ “ó¬L 7Dhg[r® :ÃKq@|F\¢gû´ˆo¾]g„ O€İ«  9'İ«»åúéu‰Ÿç‡iÖâ 	]Ö9|¿\­×+º!B £—YxF :Ç.V¨¨  ¶Å6¨8 Í  në…ºá|ºß®˜è $HENTSŒ–€RD„U%(éx$HEXIT‘ RD…4ô8É$STKLMœ   …R“P bD„ÄCDx‘!1Ñ"$HST4G‰Õ RD…5sI@ ÔÀZ  á/ÊÂ7+¬œ##ËÂ2°ÖÉq—„eaÖºÜ.3ˆŒà#9ˆÎB7[%úáh¸Ø¤"[õÓ  Ä‰	ˆ†ˆñĞpH˜ˆh‘ Ä‰
j†ˆñÑ H¦¨h©' ¤‰
jæ“€  …RSP bD„$48‘!]N$HCERRIÕ`RD…t5X‘!	MA$HWSPC”  M`€ H`uQ€Õ \¶¨ˆäŞ& !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPH„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰hªJQ—à
HŞ9|ºÏ»”  İ«XmÂ+'€ 7jáÖ#|¿]!¡{  € RET4ôèÊø$UERTœ   …ULSP REU55h‘UMYB$USSWISS RETU%I@ Ö úáuˆ@ Êù¹S  ÀpÚ°|¿]/×„  “€À $¼#+5]f#X¬V»Wë¥úá€ •ór¦ %… â¡t '­İ¤'Ë¬œv¬®–«ÕÊırŠ€à4  ~¸\/qİÊ ]nx$í\:Ú,åŠÉ~¸X,Q0 Ò9¾@À¡úéŒ« RD„U%(ê`$UERT¸ RETÄTèè $USSVŠ REU55xéx$USVPœ   …’MSP bD„”åe8‘!	iJ$HBNZI“‘àRD„%9@ Ô„Z  > >¨0 ]nÉ YÖHøÀ²GÀÀõ’> ¼¬•»ÁÚDdÇD€)"Br<t4’$!'-GEÀ)"B‚œt ’$!-)G@ 1"BJr²œà  …’L“P RD„TåI@ Ô€Z  á`—„ea¬rù~¹[®V+tB„ 7G.²ğŒ¬#u\­V   ¤‰©Ê‘‘à
H¦‡85Öå)á1Aòá†ìPÒ˜îA¢¸L ı`€ 0Ø­Ú¸uˆÚ/×åúé€ RE4”åHÈ$SPR2œ   …TÍP RE5Tä™@ ÔÈZ  Í  ‘À9ªë †–Çp˜Œ ùpŠÃv(ilw	ˆÁ¡ÀŒ ~0@À lVí\:Ämë…òıtÆ@@)"š‚‘”t ’)ª§$Î   …TÌÓP BE55H‘MY"P 5R –€ 3iõÂÕ/ÊÂ7á"0à`µ`·İdq° F}¸_/×KõÂÍ  daŒğ¹):¼V¶?®5¸ ırŠÀà4  ~¸Y´˜úF¿\o×Le’$"©)FR@)"š‚‘Œt )©ªGHÀ)"š²Dà  …TÌ“P RE5#‘MAHÊ$SPR3”  MI€%    r „eBè%’ıp³h TŒ#u‰€€ËúésÇ„uxÜ.~²c  ‘MAHÆ:IÔŒ££€‘MAHÎp  …TÌSP RE4ÄEh‘M1$ULSVISÓ%  S 	h õÂ ?IÀèŒ0
p€á•úá~‚]bgùä^o¾N"7[µ`ır°,:Gãp¸AúÑbºÈÂ²sÔğ¡2ª 3”V~›Œë÷iIµ\œ/X%‚Ad„jè36õ‚°ê84B0™Ó	À@n:›LFS4$×fmXaÕ°`h(ˆu3FÃyŒÖ 7M¦#)È
8X.6ë•Š~¹KÂ2³­ÊÍ¡ ÀàBü
~àĞƒğ‚õb¹]b2°¬¼+#
ÉÎ°KŠİp¯İ¤'[âáwPº~ -Ä @KíCã€ Œ únˆÃgµ“
äƒ8Nâ3¸¬VÃ²€Î·	ÌFrp¹KÂ2³­~_aĞ`vèº^ Wì°ØÀ+>-E  ƒÑ–nœÀ;öË„Ó˜Öá9ˆÎM×&^ / ƒQT”“Ô¥à ğ9I	2^ / ƒ•PÒÑT¥à ğ9A=Af^ / —  K€@%À@à@	p@¸$\.— ËƒÀeÂ 2á0qe„’$(&&Çj
bbzg¼¡ ¤"¬G_@²*j‚¢Ìu`
¡¤¢&"ÇqÁr"
bbzv"$©¡©"Gy€²"Jšº”gL"§ ¤§*Gc¢2b\d˜#)¢¬$ªF|ÀbB*
„wX$§$¢)¥Çp 2JrJbz¼fŒ'À ë…Âk?\'á O[ˆïQ›õÓ% ¤‰
ièqĞ°
H¦˜ˆ‡  ¤ŠiˆŠÑÒp
Hª˜¦™, ¤Š©ŠjÓ€  …“LMÓP REô´Y@ Ô$úáh°\,›õÓ  ¤Š	éh³€  …QÓP RDD%t‘]1$DBRCK‰ÔÒàbDDÅ$4¸‘	]V$DWLUI•ÔàbDD%$5X‘]IV$DBERR”  Mp€…ÖXMœ >²ƒë™ ´>²âÜúÈpˆ  í-,‡ÕŠåÀ&h  á`¼\l“âÔÀid+‡UJ }R ¹åtzuTğ€a°ú¨ †›à0Ğ\¤sÊàğĞ1œ«wi	Âê®@ªD ë[»JN·UO xªÎ U¹VîÒ„p¤u­İ¥'[@0œ~¸\¬W+ú^?JÀ6«ô¼ ~•€-Wéxı+Ú¯ÒğúVµY  êÜ€0\,ÛR Áp¼tˆ¢Ñh´X." ‘ bDD$U%(éÈ$DBRCK© bDD%$5Xè $DBWA… RDD%u8è$DBWUÃ bDDÅ$4¸èÀ$DWLA™ RDEtÅXêà$DWRCK»€'¯¤§*GP *‚’b4eĞ¨&¢©©ÆA@rš"*b
Ìd,)©"¦" Æ]Á²šÊš*’”t+"© ¢)FK *²*’BLt(+"©&"§FK€*²*’b|t +"©&©£Î   ¸$\.— ËƒÀeÂ 2á0qeÊÍ¡ ÀàBü
~àĞƒğ‚õb¹]b2°¬¼+#
ÉÎ°KŠİp¯İ¤'[âáwPº~ -Ä @KíCã€ Œ únˆÃgµ“
äƒ8Nâ3¸¬VÃ²€Î·	ÌFrp¹KÂ2³­~_aĞ`vèº^ Wì°ØÀ+>-E  ƒÑ–nœÀ;öË„Ó˜Öá9ˆÎM×&^ / ƒQT”“Ô¥à ğ9I	2^ / ƒ•PÒÑT¥à ğ9A=Af^ / —  K€@%À@à@	p@¸$\.— ËƒÀeÂ 2á0qe„’$(&&Çj
bbzg¼¡ ¤"¬G_@²*j‚¢Ìu`
¡¤¢&"ÇqÁr"
bbzv"$©¡©"Gy€²"Jšº”gL"§ ¤§*Gc¢2b\d˜#)¢¬$ªF|ÀbB*
„wX$§$¢)¥Çp 2JrJbz¼fŒ'bDEu$5XÉX$HERRŒØ€RDÄ4Õ	À  …Q“P bDE4„¸‘=YJ$DWINC‰ÑPå  TàX¨  [»JC€P¨  »JC ­’ëq¹GÅ p	š  8\l–‹ÕÊÅj‰àà6€4X.‹U’ €îÒÓ€0€@wiIÀãr‰àà6• 8\l˜é $DOVER€ bDE4„¸éØ$DWDEC™ bDEt”ä8ÊH$HERRŒ RD…ÄØÈP$MEMRYœ   …SSP RDÄÔôH‘15=P 5ˆ f€ ×EÆıqˆ€añúáh¸ß®5»ê½ %Ø¤"[,ø(³@ ²¢İr½X¯×ğ±Y+6Ux  „ë•ÂËˆ@ XUâå€ €K4  z¿\/ë”.0…Æ P  P,®5¢ÕÆ(ºØ¯×ní!?\®7iI‚İp²Z-ñ(f€    2c/à‘!IJ2IP”ã)€‘1%5>:ISÑ#  ‘15=2BI‘Qç   …SP RDÄD•i@ Õ€.Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À
	LD	(mess),A
	LD	A,(0F801H)
	LD	(debu),A

	DI
	LD	HL,parint	;Insert IRQ vector for parallel
	LD	(intct3),HL

	LD	HL,serint	;SIO interrupt vectors
	LD	(inttbb),HL
	LD	HL,exbint
	LD	(intexb),HL

	LD	A,1
	OUT	(sbctrl),A
	LD	A,7		;ExtIE=on, TXint=on, SAV
	OUT	(sbctrl),A

	EI

	LD	A,L		;Low of int vector address
	AND	0F8H		;Calculate base for CTC
	OUT	(ctc0),A

	LD	A,0EFH		;Enable INT, counter mode, falling edge trigger
	OUT	(ctc3),A	; time constant follows.

	LD	A,1		;Time constant =€K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …”ÌLSP RE4$4‰@ Õ”Z  Õbˆ@ÀÉ8‚  gå¸€>-K¬R)‡Ç 1aôÑ[»JC„ € Yùn ŠÃƒ¤F)ŠEaqƒñÖá[»JC€%¢>!‚ àFª€3@ ILÊtçSqæ 2œFó”eH’$"©)G@ )"šDà  …”ÌLP bE5dÅ	@ ÔÈZ  Í  ®Ê@Pn±0 Ğ9$€ÕÃ­ò3~ºDÏóxŒrùu€Õƒ¬l §ë•†  FL )"Bšzt )« ¦(F@@)"š²Dà  …TÎSP BE4•8‘M%JP 5{ –€ 8X,V+•ÂÁh¹L•»´¤ø¹O'Õr ‚ ‘ÁYª! 'âe›Y@dô˜À:s  p $ˆM€ —X™şo¾]nÕƒ¬l ¦‹š  Ù  U›Y@ P dr¶;´B`³ÂÄ@êd²ÇL°Û,1
	OUT	(ctc3),A

	LD	HL,parasp	;First of the buffer pointers
	LD	B,10		;8 bytes of pointers + 2 active flags
flush1:	LD	(HL),0
	INC	HL
	DJNZ	flush1

	RET







	COMMON	/messag/
mess:	DS	1

	COMMON	/debug/
debu:	DS	1

	COMMON	/pacopy/

copy:	DEFS	1		;RAM copy of paging latch contents

	COMMON	/msgcha/

msgch:	DS	1		;Printer to use for PCHAR output.


	DSEG

;	Pointers to control the two printer buffers.


parasp:	DS	2		;Points to the first free location
sersp:	DS	2		;in…’S• d”åEdT8%9QQ	
INTEXB’S•‘ d”åE5$(Q	YEXTVEC”‘U‘Pàe5$5dT8%9Q=INTCT0’S•Õ`d”åD5C(%9QPÎP Š È«
ŠÈ¨qÉ ’œ¨†¨a’ É)Êˆj†1É@’œ¨†¨e– É)Êˆj†qÈ ’œ¨Š°…€É)Ê‰èÈÑÈ@’œ¨¤ˆ…† É)ÊŠjHQÈ ’œ¨¨„…€ É)ÊŠÈ¨qÈÀ¤ˆ‚¬Š‡ ÊjHjÈ¨qÈ€¨„Š¬Š‡8        ct0	EQU	intvec+16
intct1	EQU	intvec+18
intct2	EQU	intvec+20
intct3	EQU	intvec+22

	END
0FD10H    Nascom
; 0FB00H    Francis ROM
; 0EAD0H    Ithaca
; 00080H    New HDFS, Francis FS code
; Other	    Other

;Side the buffer

parptr:	DS	2		;Points to the first byte to be printed
serptr:	DS	2		;out by IRQ rtn.

paract:	DS	1		;Flags for active - ie. buffer not empty if <>0
seract:	DS	1		;NB. Assumed adjacent & in this order


	END

/

copy:	DEFS	1		;RAM copy of paging latch contents

	COMMON	/msgcha/

msgch:	DS	1		;Printer to use for PCHAR output.


	DSEG

;	Pointers to control the two printer buffers.


parasp:	DS	2		;Points to the first free location
sersp:	DS	2		;innot empty & devices ready.
; Francis I/O is interrupt driven, so do nothing.

dolist:	RET



;PCHAR
;
;Print character in E.  All registers preserved
;Output is to serial printer.

pchar:	PUSH	AF
	PUSH	BC
	PUSH	IY
	PUSH	HL
	PUSH	DE		;NB. E is parameter

pchar1:	LD	A,1
	PUSH	AF		;This will be pointed to as VAR count:Byte

	LD	HL,2
	ADD	HL,SP		;Get address of E on stack

;	Push 6 bytes of parameters to Print:

	PUSH	HL		;Data address
	DEC	HL		;Point to byte value 1 just pushed
	PUSct)
	OR	A
	RET	NZ		;Printer not ready
	INC	A		;A:=1
	LD	(paract),A	;Clear ready flag
	LD	A,(DE)
	OUT	(pprint),A
	INC	(HL)		;Record char	
	RET

;	Temporary non-interrupt serial I/O

prseri:	LD	(HL),0		;Done 0 chars so far
	LD	A,(seract)
	OR	A
	RET	NZ		;Printer not ready
	INC	A		;A:=1
	LD	(seract),A	;Clear ready flag
	LD	A,(DE)
	OUT	(sbdata),A
	INC	(HL)		;Record char	
	RET

;
;	Parallel printer IRQ routine
;

parint:	EI
	PUSH	AF
	XOR	A		;Record ACK pulse
	LD	(paract),A
	POP	AF
H	HL

	LD	A,(msgch)	;Select appropriate printer
	PUSH	AF

	CALL	print

	POP	AF		;The byte count
	OR	A		;Set flags (A value in stack was poked)
	JR	NZ,pchar2	;If =0, the call to print did 0 bytes.

	XOR	A		;Turn off offline LED
	OUT	(leds),A
	CALL	Sdelay
	LD	A,onlin		;Online LED on again
	OUT	(leds),A
	CALL	Sdelay		;Returns Z if operator presses switch
	JR	NZ,pchar1	;Don't wait if so.

pchar2:	POP	DE
	POP	HL
	POP	IY
	POP	BC
	POP	AF
	RET



; PROCEDURE Print(addr:Word;VAR count:Byt	RETI

;
;	RS423 interrupt routines
;

exbint:	EI			;External status interrupt - ack & return
	PUSH	AF
	LD	A,020O
	OUT	(sbctrl),A
	POP	AF
	RETI

serint:	EI
	PUSH	AF
	LD	A,50O
	OUT	(sbctrl),A	;Reset Tx int pending
	XOR	A
	LD	(seract),A
	POP	AF
	RETI



; PROCEDURE FlushP;
; Discard contents of printer buffers

flushP:	RET


; PROCEDURE Char_IO;
;
; Initialise character I/O ports
; Also initialise message and debug flags from user values in (0F800H)


chario:	LD	A,(0f800H)e;channel:Byte);
;
; Insert chars into print buffer.
; <count> indicates how many chars available, & is returned holding number
; actually transferred.

print:	POP	BC
	POP	AF
	POP	HL
	POP	DE
	PUSH	BC

;	DE=^data, A=1 for parallel =2 for serial, HL=^byte count

	DEC	A		;=0 if para, =1 if serial
	JR	NZ,prseri

;***********
;
; REMEMBER TO MODIFY FSEXIT: WHEN RE-WRITING THIS CODE
;
;***********



;
;	Temporary unbuffered parallel output
;
	LD	(HL),0		;No chars sent yet
	LD	A,(paraÜ-‘ğeÀ ÀV( tËÀ %à à 	pP¸ \T  ©ˆ¨è)‘×
š‚¨†‘;ÊŠjŠH©Ó€  …Q”Ô• E44ÕAUQMJPUTS‘ÑUĞÔ 44Ä˜5%NLANDBSS‘à$Äø	!&PADSÕàD”ä4(^DECB‘VU e4UDEH%5AQRMHEXBSRVàTÔ„U…H5!aMDECBPÔàTDDU8!91HEX2S‘ÔÔ‘PQ DÔ”åx5%9MAKE3SPRÑM"€ II=J(“QTÔĞQâ€ 9=^P 5Üp´\``0i\æ/ˆ Â0˜Aì<d«Ù.EÆë$VìƒòÜP\Œ $qø$„ Àk |	2\-­.G',Y7jÁ’áh°\d„¹ªıp¿Nà šÅ>¯™Ñ Ú uUK…âÁq“Ğ 
}|8 Ÿ’ 
\îÈ$€2¡tOv¬.EÆ—A¨ªJIê\  $Õ~¸Bd‚1ánÈrˆÏÏá €|¸Y/á€Ël†ÇæYDPe¤_Â!A9–A#çèË€ 2Yf@e–¡fİ0GğüM, re-enter monitor.
;NB this code must NOT be underneath the ROM ie not in the area 0..3FFFH

doexit:	LD	A,06FH		;Value to disable CTC interrupt
	OUT	(ctc1),A	;Disable 1Hz int
	OUT	(ctc1),A	;Compulsory time constant - value irrelevant
	OUT	(ctc3),A	;Same for parallel printer
	OUT	(ctc3),A

	CALL	no_int		;No net irqs
	DI
	LD	A,01
	OUT	(sbctrl),A	;No side B irqs either
	XOR	A
	OUT	(sbctrl),A

	OUT	(paport),A	;0 is ROM on value

	JP	3		;warm restart monitor






;GETMEM
;
;This roup F1ÌD¦[$03„ †YdPe´Cwñğ@e¸C÷ğ°P ¦Yd@eDÀÀ–IoöZ$$~ 0‚\+e–E FYDPœe˜D	†Y$@”OÏá €
#> gğ°@Z'…¸IH nÕƒ%Âñt¸Z'·K…Æå#â€@Œüş áÃ„à>2\¤Ş_´H"€«T4ş
 ïá` ='”|Z¡§ğ¸P(W9‹â C,ü ˆÂas6ë ²ÏÁ†hP	†œÅ÷ñpÇ Óø@ „Â†mÖp¸IWğP=qÔšŠ¦¦‚À â€‹UÊÅ#ËÌĞ   ùf€ EâqƒAŒ€0ÖíX2Ygá¡ö~²Hd ¦A+1@$Âyˆ$“ˆÌğ!$@AfJdBIM†)‘	%6XˆIiÉ„–$ˆE&JŒWñ²Å~È„–“ğ„A'ˆ­'Ù@¤Å}	å6£äŠN"¥†£àœO!IÄâ+IîA!È¥6›Ø‚C!“Ê¤æ£Ô A)´Ş…")8‚Mb¼È„R1†C"”Úo"HŠD$µ$B)’Ôx‰…R›!Şÿp´\gÕ¼ø¢3²\-tine returns the first unavailible memory location on the
; machine in DE & returns to HL

getmem:	LD	DE,0F800H
	JP	(HL)






; FUNCTION Offlin(channel:Byte):Boolean;
;
; Return hardware status of given printer (1=para,0=serial)
; Francis printers have no hardware status, so return FALSE

offlin:	POP	HL
	EX	(SP),HL		;H:=channel no.
	XOR	A		;Return FALSE
;	RET
;	Drop through to RET


;
; PROCEDURE Dolist;

; Initiate transfers from buffers in RAM to printer devices
; when buffers 	XOR	A		;Turn both LEDs OFF
	OUT	(leds),A
	LD	D,A

	CALL	Srelea		;Wait for switch to be released

;
; TEMP - printers have no buffer, so exit
;
	JR	doexit

exit2:	LD	HL,paract	;Parallel print active if <>0
	LD	A,(HL)
	INC	HL
	OR	(HL)		;Sample serial state also
	JR	Z,doexit	;Neither printer active

	LD	A,D		;LED state
	XOR	onlin		;Flip online bit
	LD	D,A
	OUT	(leds),A
	CALL	Sdelay
	JR	NZ,exit2	;Timed out

	;Drop through if operator pressed switch to exit


; doexit:

; Turn on ROë! í°ıåá>ÉT]h!^~·(5*H~İw#"HÉ]
Íƒ!_"H!]F#~¸(Õ4 _#6İ6
ÍTÄİ^ÍƒÉİËVÈ!^6 ÉÉáÁãí[ws#rÍÉ            İåıåÍ ıáİáÉ*w	"w 	|/g}/o"y9ØÑ>HÍÚÅåÍƒáÁÉOæÆ0ş:úÉÆ_Í­yîÉáñåÍÚÉ·*Íy0ËËØÃoõË0ë^#Í­ùÅ	zÍƒÁñÅ_Í­	ƒÍƒÁÑáåÕÅyæ(*}|Í·}Í·Í­
Í­*ÍyÁËÒo	ÍƒÍƒşY(şy(şNÊoşnÊo¢ş 0İàÍ­
Í­É*{åÍëÃ  é
Error $ at address $Continue ? (Y/N) $ $Gİ~æÈË_(*İË~ $İËF(İËN Åİnİf	åİ6Íêáİ6
ÍêÁİnİfxÍêİ6Ééáã|·Èåİá¯Í¦İnİfî ±ÜJ‚˜˜‡ñ¨h)«Õ,†Šš ¨³3¨i(‰ˆ±Ù Lˆ‚˜˜‡cÈ‰*hjH‘Ş ,ˆ’¦†®¥{ˆÈI‰qİ ’œ’ˆ¦—Ù É)É)‰êñÔ 
 †¤˜aª	¨ªjq–@\¦²¦Š¤¥hÊ‰æÆ¦QĞ`¬Š¤‚ˆ¥, ªÈªI	1Ğ ¬Š¤˜Š. ªÈªI‰ñĞ ¬Š¤š¦sÊè)*†Æ³€  5II=J^ / ƒ‘”‘QP“%à ğ@	p ¸ \.—€Ë eÀ 2àppH¸D\"#O¤‰
	‰bqÔÚb2œ ¡#…‚ãn¹X§á”¼#+:Ü¬Ú
/À§á@>?/V+•Ö#+
ËÂ²0¬œë°X­×
ıÚBu°^.p!‡pA[§àÜ@°î8)>8
Â¦èŒ6{Y0­°+„î#;ŠÅl;
ëpœÄg'”¼#+:×åöónˆÛ¥à~ËŒâ³âÔP
=a¶éÌ Ã½ ¬°ØAøİ9€n˜Œäİp²eà ğ5II=J^ / ƒ‘”‘QP“%à ğ@	p ¸ \.—€Ë eÀ 2àppH¸D\"#O¤‰
	‰D	A,H
hexba:	PUSH	AF		;Save A
	RRCA			;Print high nibb
	RRCA
	RRCA
	RRCA
	CALL	mnib
	POP	AF		;Restore A & drop thro' to print lo-nibb

mnib:	AND	15		;A:= nibb(A)
	ADD	A,90H		;Magic hex producing formula
	DAA
	ADC	A,40H
	DAA
	LD	(BC),A		;Put in memory
	INC	BC		;Point to next byte
	RET






;PROCEDURE mdecb (n:Byte; addr:Word);
;
;Put ASCII of <n> in decimal at addr.
;leading zeroes supplied

mdecb:	POP	BC
	POP	HL		;addr
	POP	AF		;number
	PUSH	BC

	LD	B,'0'-1
mdecb1:	SUB	10TSTRENŠ €TU%$õ)APÖìÂıp´\j÷éÜ ¾ ÂCÆK”F~sÚÄÀ%üYcñà`~GÀ‘€.pŸ¤pp F~„ 1ğ¨îş
  ÇğŒ@~€ ñü`$GğP…‡ğ”P… ƒ@òşŒ/‹ø0€,—Š]’á`´\gå¸€?£à zÉl€@    àÊ\õbŸ„dw+|1À °µb>¤X.{­›o@À x¿p½FÀXX¶;¼AC$4ş
 Àhİğşˆ‡æÈH€-@`8Å'¹‹ïâà
ş-Œ $óó˜¾ş  âØà~\°X0hŒ Æ_ƒ ğÊÙu¸İb3˜Œä#  È &Ï-‘áİ²¿d±Z®VËªål³mèeÂÑc0À‚Ùp´X,dhÙß†ê\e¢©)'©p ‹ 3kˆEªıp¿FÀ  MÂ·Ç…¸€
>f0ídC€ 8(²#??…BCU²}Zà­ŠN‘„gá”Ò`[Š``=ú† ?NàjÁÂÁu¸Û-ÀEü#'á5²ú¶ !'èĞ /Û'…‹d@
	INC	B
	JR	NC,mdecb1

;B=tens in ASCII

	LD	(HL),B
	INC	HL

	ADD	A,10+'0'
	LD	(HL),A
	RET




;PROCEDURE DecS(n:Byte; VAR aS:minstring)
;
;much the same as mdecb except that leading zeroes are stripped
;and numbers are in range 0..255

decs:	POP	BC
	POP	HL		;string address
	POP	AF		;number
	PUSH	BC
	PUSH	HL

	LD	E,1		;count for number of chars poked (at least 1)
	INC	HL		;1st byte is len, text at 2nd byte

	LD	B,100
	LD	D,"0"
	CALL	adivb

	LD	B,10
	CALL	adivb

; always pPROLIB BIGLIB=FS,B:FSP1,B:FSP2,B:FSP3,B:FSDIR,B:FSDATA,B:FSRND,B:FSP4,B:FSWILD,b:fsdel,fsrtn,dkman,h2lib,BIGLIB/S
prolib biglib=biglib[fsrtn..ZZZZZZ]
 FSMDEP  MAC   '(               L       SUB   )                MAKELIB SUB                    ååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååBê"ú·íRÚ!  )BKÑıáÕ^#Vá		ëé0éáÉáıá¾#(##ø^#V#ëéëáıá{¾# z¾# ê##í¡ê<áÕıå>CÍÚÑÉ                                                                                                       ÿí{ ;ıå"}İ!€ İ9İ"¹!G"""Á*Ä"w  Í!  "±!€ "¯"³!¯"µ!³"·!  """{"»"¿ÍJ¯2Ã!P "]Íƒ.ş 8,"½€ ÍƒÉ  !  ÕåÕåÍpåıáı6Ípåıáı6¯2B	ÉáÁã^#V+åz·((*{åıá|µ(íR(ınıfíáå}ı¾ 
|ı¾ ëÑ¯ÉáÅåååH ÅÍiá^#Vbkt#u#F6 #ûÕıá*{ıuıtíS{Áıqıpı6ı6€Áx±(ıqıpıËÆ! ıuıt6 ! ååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååÈÂ31¡ê:ƒQP•Qø ÜP!x½X­W+ÕÊ¹ ÛáfÓ€ Â fÚÀG‹6Ç3j …¢Áx³h*ØîÉp¸ÏÂ20ŒÌhz¸ ÜP!x½X­W+ÕÊ¶@ÛláfÓ€ Â fŞ0G‹6İ3j …¢Áx³h(½Lwd¹_À&•HC¡Éà` ‡ ‚\g×0–<e‡YcÆXu–<e‡HàBB\n?Z,WYVNz#ÆUHrŠÏÂ³q~í)6ªè+…âë°H,QfŞĞF"‚¦€€ÜoƒAB@ffÔÀVO‚ˆF €Äl7˜ÍbqÔÚb2œ ¡#…‚ãn¹X§á”¼#+:Ü¬Ú
/À§á@>?/V+•Ö#+
ËÂ²0¬œë°X­×
ıÚBu°^.p!‡pA[§àÜ@°î8)>8
Â¦èŒ6{Y0­°+„î#;ŠÅl;
ëpœÄg'”¼#+:×åöónˆÛ¥à~ËŒâ³âÔP
=a¶éÌ Ã½ ¬°ØAøİ9€n˜Œäİp²eà ğ5II=J^ / ƒ‘”‘QP“%à ğ@	p ¸ \.—€Ë eÀ 2àppH¸D\"#O¤‰
	‰	İËş>DÍÚDisc fullÑ:Æ·>ÈÁÕÕ! ·(Æ@#w#6:ÍS#6.ÍS +Ñå!e í°áÑ·íRE³H#æwø> ¾À+ úÉNot found:  áıáÁãëıåá6 #6 ûy·Èş   ÷—Éıåá#	Êş (zş:(Lş.(1ş*(yş,(uş;8ş@8mş`8æ_ş[(cş](_w#ÌıË v Jı~	ş (CLıË v FıË öıåáÅ	 	Á¦ıË ~ /xş(ş &>Éı~Ö@8ş0Ëÿıw ı6 Ã‘ı~ æıw >É>É—Ë|(Íw>€ıáÑãıãÅBKË|(ÆÀÍwÑİåõÅıãÁx±² ³Êzş ıåÁñË,ËËË
ÍòñİåáıåÁÜwİáÉÑÑ>JÍÚ!   É—Ë|(Íw>€ıáÑãıãÅBKË|(ÆÀÍwÑõÅÕÅıå|µ(Áx±ÂàÁDMÍR	ÁÑx±(ÍRxæ€´µÂá`iÁÑåÍRÑñ·üwÉÑÑÑÑ>OÍÚ!   Éå|µ(> !  >ƒñØİËfÀÍçÍƒÉé>UÍÚ  `hÉİËşH	8>DÃÚMust be discfileDisc full                  ıá2Qá|ş  	}·(=õ3ñå!  9 NS>¾ÚÎÅí°ÁùıåTÕÅ!\ åÍq!h 6 !QFÉ·(ş(3Éş ,É¾2? (empty string)6å	ãí°áùıå:Q=> È!Rå6?#~6 ÆGÑ>NÍÚ Í¡!6	 í°!»~<'Ow#~Î 'wæö0yæö0yæö0!´İu
İtİËŞÉ PRO$TEM$İnİf}æÀ´(	 	)İtÉë!~ —<·íRòY=İwİ6İËöÉ!ÅİËF !ã;İËv ![İuİtİsİr	!xİuİtÉİåã$ ëáÉ€ ÍƒÉİËFÌ?İ~İ¶ İåá åİF Ë8ËÅÍiÍ¡Õ! 6 #ûİË*¾İË^ :½ş(İË*şİËVıãİáåı)İ)ãíjãíj0İ#ã·íRãíBò&ããíJı#= ÚñÉıáã	DMÑáíZê”ıéıáã·íBDMÑáíRê”ıéOŸGogÉDMËíbÉıáëáåËíbãåëıéıá  ëãåëıéË|Èë!  ·íBDM!  íRàãÅå>OÍÚáÁãÉıåîÀÀ,À$àäyÖOxŞ G  íRê†±µ´Éıáã·íBÑáõíRÑêÍ Ë»Õñıé>@úÓ·ıéıáë`iÁ·íBÁõëíBÑêÍ(İıéåÅÑë·íRå·íBDMì|áÉë`i·íRT]·íBDMëÉ|öğë!  ·íRÉıáÑZ Ë{(Õıéë!  yKË?0Ë#Ë· ôx·ÈQ Ë?0Ë"· öÉ!  x·(·ËA(ËËËñGÉ·ËA(ËËËòEl& É>@ú‡·É>È=É>À=É>ø=É>ğ=É·ğíDÉáÁ^#ÿ{· Wë9ùıåİåÅİ!„ İ9ë^# ë9åÕ*y9Ø>SÕ ÍÚëáıáİáùëıé0	êóúë¹Úìyo& D)!0öğ·íB0·í(Íƒ< İË^ ÃÍƒÑÕÍƒ<Êèáİ6İË^Ä8Ímİ6 ¯Éİ6 İnİfİËF İuİtİuİtİ~€6 #û= öÉİnİf 	İ~w+İ~wÉõİË^()İË~ #İËv İËF(İ6Í$İ~·(
İËvÄdÍfÍ¡Íƒ<ÁÊÈxØÍ¡İËfÌƒÉİnİf#İ5 Íbİ6€İuİt~İwÉİnİfİN 	İ5 "ÍbåıáİËF ı~~æ?İ¾Â²ı~İwÍbİuİtÉİËnÄTİnİfİ~w#İuİtİ4ğ İnİfİN 	İuİtİ~<İwİ¾ÀÍdÍfÍ8É>>2÷Í¡İnİfåİ~õÕåÑÕÍƒáÑÕå:÷OÍƒ· áÑñ€ 	= ŞÍ«áÉáááÍ«á:÷ş(PİËÆÉ¹MWrong file typeİË–İË×/Cannot close fileïDirectory full ÛÌáfÓ` n fßP!ÖfŞpm> p´X/X0$`p( <>šcG¨™à~	Å‚ +ÄxÓ=A¢AàñiY.6ìˆ`ÔU%$õ.  6 8X V‹ÆõA¨ˆ¨J¨ü n(¼^¬V«•Ê¨€Ûşı7 Ÿ¦`6› jè6ª¸Y´Ø #[€µuÀY´›O€-Ä@;Ø­W(Yşxk,Jnáh°_£` uÀBQ@x} °`¦4zŸ‚B0à€
ñ4ÆPhäx<ZcVIá¬XŠW(ë€€‚Á¦4 ‚Øğ öp°Cƒğ<#/ÖÅw[ôCÀBÀÖ	#’ß¥àôC€ ¡—éø½Ÿ§àğP:¬ÚBı? Vâ (X Í¦àéÔı: Öì‘Ö]Ù   _§àÜuÀ_§pìeÀFì—èØÿ~¹\   ·v£,ı7 Ÿ§à˜~g¿OÀ08Ì/¹Z¬ÛÑpƒ¢€XUı ŸïÑ°şÉ`€0e‚ DlÛˆ¯Q×  [Š ¯m> z¼Y)q–j„@°Èàí)Ùb¦Xm¥e
å×
\ŠÂ†>@ÂÒx½ú*¥à"¦#¿OÆ
Àîı7Ÿ¦cÅêÍ®€/ëÊ‡€²GÀ—  p²^£¨5	U€ -Åç‹ÕŠÕr¹^¡ Í¨€m> Ùm†p³iÀ…¢Áx¹]hrx !ƒ‘”‘QP“8  $æ#92ÇL°Û,tË²ÇL°ØLCƒ A –Ë•²Á8
Î"³¬æÕlºÜa–Õr„pˆ‹´¤áiQ°&‹eŠÕ`´LF°˜,lÿz ÔDT%T~  ·^/V+UÊåb„là6È ¸Y´à #i@·ĞÂÍ§ Ú€ áh°^.ÕƒDöæŠ Ät¸Ü.~Ù!HÍ¿À,0  
$L'¼Ìl7Á ¡ ë  —ÇX¿D8  , ~†_§à
Ü@b³oø
È~—€ Ñ•’ 1Y´Ì	‚|²Uã(5II=K€ 8\lÛ@8…ŸìÛşáh°\oQÔˆŠ„ªÀ â‹ÅêÅj¹\¡¦ Í£àOÓp	úf³iÀ F¯€3l@…›N 5À›eÀ‡X ›b€Yµ ÂÑ`¼GÀ&mh` Xı–?fÖ€CÛ6´™µ ÊÅf×0F‹„5 ‡ƒÑ@Ú²>Hk†CµdÉp¸Ù¶€…ÂÓxë ©O¢€3,t0=‚÷²!Ê2ÁÀ-¶,şõ`à›Ì'¼D fÛ1ü>„8, Ÿ„Xnü§@Âö›Âõp ¸ Dñzµ\­W(F³€3kp…›M€,Úl ­ÀÛö:Á ,Úèáh¼]¥< "À@.Ò^.£çø >}Œ°h	è/i°ÇÎfm!fÔ fÛÌ >#à  D“Ø½¦Ây°@	|4>ph
ÜP!ÔÌÚB! <ÉÇie¶À€ñÃá¶ÃÅŒ*Î
aÖPQñ]LÍ¤ ÂÀ,üv–OÂò;m€ã‡Áá¦Ã0¬@(q‡a^ ø xXˆo;Lj/QÅ'3œ@N`@ğ`G° #a@´$‚yfĞğVÛ^Í¹ ­¶½›sÁGX›uAGX ›vÁG\ n(Ÿc,÷;Kx U€€YfUMfÓ f<­ÅaŠ¤¤¥À Ìv(F¹ 3n +ŠyfŞVm> `³jˆ3í’õ°p-^02İã,Ób<ZlğPz ~²\£ç“6ƒ3jP0«€¥ÎîKm€Ë#ŠL‘ñ¦Ì(lÁÖ{X8¦Äd¸C¢©)'©p °ÂÁ´X.7¨êDEBUGà q@Åâõbµ\®PF fÚ'é¸ı3 Ù´à #WÀ´ÂÍ§ à Í¢ c¬ Í´àLÚ€ áh°^"(àÅj¹BÏóÃX±b_ğ7E‚ı @à6´° ,~Ë³k@!í›ZLÚĞåb³k˜#EÂ€CÁè íY†$5Ã!Ú³dÀEˆ¡ŒÅr€lÚĞ:À ,±û,~Í­ ŠömhfÖ€FmsW‘ÁÀF˜Ô üˆ.a8~ƒÄeáØ®ë~ˆp X :À@$r[ô¼ ~ˆp ô2ı? —¢ 3ôü^
AC•›z@ß§à
Ü@ ·üÂı:€Ÿ§@İ’:À +±» C€  À Kôü ;° ôî =Œ° İ’ı _ï×+„€ îÒõúN?HÀ7¨ë€ -Å‹ÕŠÕr½X¡Ò Í£@nm8 × m%x³i 6  8Z,‰èxÍ­ ‡ÖXı–?fÖ€A
` 	>³k@!ñ›Z¬ÚæÑYVCôl¿FÀ7û%êÛ2ÏâÓÅ¦6d¶ÆŒ³¸¡ôÛÖìŠ¤¤¥À Ìv(Fº 3ix#ŠyfÓ0F%Âã?…QÓPS dD•45$H%M]JINIDSK‘SĞàTÄÄô8	1.INILOWPÒQ`d4TÕE˜YIJVERLEN•‘T“TÑàeDócS(]%PØÖPCRLFŠ €TDT%Tx ERRORŠ de$TT$É@ˆŒÔD#D `  †‡ 2D"€$  )’„#)ÌÊa9Í1¤ØeÌ§#±”ä ;NB     ’„b˜4$>3@ ë i¨‚ ÎF“¡”@b6Ìf± ¤e0™#a¼Æk	!äe9œÄAHˆT)D‚ €H 3N†`€Èi9˜ÄS‘ÈŞr		&ãIĞ@m0œA ´@l2›ŒçC@€HÍ†S	È@$'C)Ì@f9Í¢!Øl7˜Ì'C(€Äl7˜Íb €Ìr7›DÓ	À@$#Œ¦QˆØo1šÄFK…Æ¯;½D8$?ÄaØ@à ˆ0ÆÏñÙş#?Äaz¼e€ GÄ–x¶D8D²õ`@P  å€ Q0Ê"À "åfÖ0!ÔŠ¤¤¥À â ªŠ €H  HFˆ  @!pÒø@.„ Ş:_ #¾ ×#ëİåá 	ë í°ëŸs#rİËF İ~Öİ¶ Iİåá İuİtİá*}éCONTKBD¶xŸLSTxÑŸNULxŸŸPUNxÊŸRDRÁxŸ>D„ÍÚDevice errorİËFÀ! İuİtÉÉÍƒİwşÊ  şÀ
 ÿÍƒİwÉÍƒİwÉİ^İ^ÍƒÉá"}ÍpåİãÜø>Í¦İ6İn
İfÍ    ÍÙİá*}é İåá^#Vëé*C	åİãÍrÍ;ÍŠİËæİáÉİ~æÊ¨İËfÈİ~ËWÊ¤ËgÈİËv MİnİfÍİË¦İËFÈİ~ş(*ş
(İËşÀİwİËN(İ~ş(Äİ6
İ6 İËÎÉİËöİËN(íİË¶İËÆÉ*C	åİãÍrÍ¯İnİf	ÍİËİáÉ*åİãÍrÍ,İ~æİáÉ*åİãÍrÍ,İËFÂ˜İ~æİáÉ*åİãÍrÍNAME	('FSVERS')
True	EQU	-1
False	EQU	0

verA	EQU	0
verB	EQU	6
verC	EQU	5

TEST	EQU	FALSE





PUBLIC	VERHI,VERLO

	IF	Test

VERHI	EQU	'T'+'e'*256

	ELSE

VERHI	EQU	verA+'.'*256+030H

	ENDIF

VERLO	EQU	verB+verC*256+03030H


	END
 PCONFIG COM   8}~ƒ             BIG     SUB   `                FSVERS  MAC   T                FSVERS  $$$                    ¯İ6Í	İ6Í	İËÎİáÉ*C	åİãÍrÍ,İnİfİáÉ*C	åİãÍ;ÍŠİËN ÍFòİËæİáÉ*C	åİãÍ¯İ6Í	İ6
Í	İËÎİáÉıáá"}ãåİã|·((¾ %#}¾  ıéİËFÈ>EÂ#İá>EÍÚ>ÉÍ
İË^Àİ
>FİáÃÚEnd-of-fileNo reset/rewriteNo rewriteİåã$ ëáÉİ^İVÕıáÉİnİNİFÉİnGİNEİFFÉİuİqİpÉİuİqİpÉyİ¾Àxİ¾À}İ¾Éİnİfİ^ İuİtİ4É}İ¾Àxİ¾Àyİ¾Éİ~Íñı¾ØÍû  ,ÍHØİËÆÉİ~İ†İwĞİ4Àİ4É:½ş Íç#ÍƒÍÍÉÍçÍƒİf0. Ë<Ë İN3	İuİtİ6 İ40ÍçÍƒ<(İ6D ÍçÍƒ·(Êİ60 ÍçÍƒÉİnİf)Ë=İuD|İ–0ÈåÍçİË³ÀË€«Ç‚pƒñ›O 7t›P€-‘l½FW8T  9D  #”L rˆnp•›p ‡Pj*’’z—  [ˆ‚ªâ  !   …ÃKá ¸F>,P ù ?Iâ÷èªÄ€ˆpP
˜ı?T+»ôÜb~™Œo«6è€¼G¯*ØÉ F\ ÂÉ   QÔˆŠ„ªÀ â€óÅêÅj¹\¯P‹ fÖ@‹6¯ „l¨6ñ€¸Y´ØÂÑ`¼\®´9< ÁÈÊH¨¨Iœ  sœ™c¦Xm–:e†Ùc¦Xl&!Â€ KeÊÙ`œgYÈVsj¶]n0Ëj¼9B:äÚRp´«ÀE²Åj°Z&#XL6½GPj"*ª?  [Š/«ªår±B6€›{@\,Úl µ Ú¢áfÓ`m> p´X/jÁ¢{sÅ b:\n?ìfÕ°&  ¦€€Şf6ÎàĞPuÀKã¬O ß¢   ?C/Óğn ±Y´Ü‚d?KÀ hÊÉ¬Û Á>Y*ñ”Š¤¤¥À .6mØBÏöm7p´X.7[Ôu¢"¡*£ğ ¸ bñz±Z®V¨F¨€3kàôÜ~™€lÚl «^Äƒáİt0ÍçÍƒÉyÍûİqEİpFİuGİFOÍñÕÅÍƒÍçÁÅÍƒÁÑ· !€ ëİ4E İ4F İ4GØõ€ ÍƒñÉÍñİsİrÍûÍHİËÆ0İË†:½!ş0Íç<(Í·È>ÉÍYİ6 ·ÈÍñİ~ıw~ı6 İËÉ:½"ş0Íç< ÍçÍƒ<Ê!Í·Â!İËÍÍHØÍÉİËN DİË^Ê,ÕÅÍ†İ6 ¬©!ùİËv(	³Â!êİqİpİsİr	İuİtÁÑİ6ÿİËÎÕÅİËv İN `hÍŠ}æğ´ÄÍ#(cÍÍY[ÕÅİN !  Í*}æğ´(ÑÑÍÅÅåÅÍ#(İË^Ä¦ÁáÍåÅÍ‹Íñİsİrİ6 İN h`ÍŠÍ<y·(Í2= úÍWİË¦ÉÍ¦ÍtÍYÉÍ2İ~İ¾(ÍWÉİËŞÍ2Íñİ~ı¾úØıwİ¾ÀİË^Ä¦ÍtÍ‹ÉİË~ 	õİË^Ä¦ñõÍçÍÃ­           Drive for compiler Pass Í¢ ÍX	>õ>õÍé	> õ>õÍé	>õ>õÍé	Í¡	ÃÑÍ¢ı	ÍX	Íc ? (Y/N) Í/		> õÍ

Í¡	ÍR	*åÍ—	Í~İwƒÍÍ¡	İ6‚İ~ƒÍ­İ6„)İ6„ #>İ¾ƒ0Í&İ6‚ Í'N—Y‘n—y‘İ~‚0ªÍe	Í¡	İ~„ÃÑÍ¢üÍX	Í÷ (A/B/.../P/Space/Return) Í/	> õÍ

Í¡	ÍR	*åÍ—	Í~İw…ÍÍ¡	İ6„İ~…õÍ	        şÿ şÿÍœ(İ~…İw‚İ6ƒ:6İ~…ş Í‰õİ~…şÍ‰Á°0Íb  á^#Vëİu‚İtƒ>İ¾…0Í&İ6„ *	åÍ# åİn‡& )Ñåİn‚İfƒëás#rİ~„ÒÍe	Í¡	ÃÑ!³ÃÇ!å! åÍÂCON:Í/	Í
!å! åÍ[
Íe	Í¡	Íe	ÍThis program enables you to chan boundsÍ/	> õÍ

Í¡	Ã[ÍX	Í8Range checks on assignmentsÍ/	> õÍ

Í¡	Ã[ÍX	Í`Checks on pointersÍ/	> õÍ

Í¡	Ã[ÍX	ÍŒHold before REL outputÍ/	> õÍ

Í¡	Ã[ÍX	ÍÄAccept only strict Standard PascalÍ/	"> õÍ

Í¡	Ã[ÍX	ÍüReal constants to double precisionÍ/	"> õÍ

Í¡	Ã[ÍX	Í-Console output to .LOG fileÍ/	> õÍ

Í¡	Ã[ ÍÛ Dm§åHpœÔQ*	åÍ# å:o& ÑåÍOáw:<!5Â:0*	åÍªÃoÍâ#~#_—W Íâ#^# Íâ^#V#Íâ^#V#~#¶#  å{ÍşË:Ëú& i+·íR8	! 9¦áá¯ıáùıé! 9 N#T]	ÉıáÍâÕF#ë& hãıéæge the disc-drive configurationÍ/	?> õÍ

Í¡	Íe	Írand/or the default compile-time options of the Pro Pascal systemÍ/	@> õÍ

Í¡	Íe	Í¡	Íe	Í°The file PROPAS.COM will be modified,Í/	%> õÍ

Í¡	ÍX	Íèand must be on the default drive - OKÍ/	%> õÍ

Í¡	ÍOÒ!	å!€ åÍPROPAS.COMÍ/	
Í
!	å!€ åÍÚ!6 Íe	Í¡	ÍX	ÍUChange the disc-drive assignmentsÍ/	!> õÍ

Í¡	ÍOÒ¾!6ÍX	!Í	> õÍ

Í2 (PROPAS2.COM)Í/	> õÍ

Í¡	> õÍÒÍX	!Í	> õÍ

ÍÅ3 (PROPAS3.COM)Í/	> õÍ

Í¡	>õÍÒÍX	Í Drive for error texts (PROPAS.ERR)<G¯7ıÉıá ıN ı#
á N#åıáı	ë&ÿy/o9ùq#ëí°ıåÃÄıááÖıá~# O· ßõ3ıé                *¯*¯*>*>ÑíS}Õåõ:B	·(ş(F !E		ë!ıÿí¸<2B	ñá"C	2E	ÉÍrİ"C	İáÉ:E	şÌ2:E	şÌP!B	5È!F	C	 í°É>FÎ	ÍÚRead/write nesting too deepáñ·(ÁÅ>õå>WÍÚèáÁÅ>áñÁÅ· yGÍO
å! 9~·(	#~Í@
ø	#ÑùëéáñãNG~·ÈÍO
#~Í@
ùÉåÅı*C	ıwÍ¢ÁáÉy¸Ğ> Í@
õ >>2Z
á"}ÍpåİãÜø>Í¦:Z
İwİn
İfÍ‹
İá*}é á"}>Íc2Œ
Ípåİã¯Í¦İË®:Œ
ş(Íøİåá$ ë!\  í°İËæİá*}éİË:] !B	 ¾(ú>Nì
ÍÚBad device name:^ #¾Í/	"> õÍ

Í¡	>õÍÒÍX	Í8Drive for compiler's work filesÍ/	> õÍ

Í¡	>õÍÒÍX	ÍqDrive for linker (for auto-link)Í/	 > õÍ

Í¡	>õÍÒÍX	Í«Drive for library (for auto-link)Í/	!> õÍ

Í¡	>õÍÒÍe	Í¡	ÍX	ÍùChange the default compile-time option settingsÍ/	/> õÍ

Í¡	ÍOÒ€!6> !p2Í=ÍX	Í4Source listingÍ/	> õÍ

Í¡	Ã[ÍX	Í]Compact object codeÍ/	> õÍ

Í¡	Ã[ÍX	Í—Restricted-width subrange arithmeticÍ/	$> õÍ

Í¡	Ã[ÍX	ÍÕMaintain source line numbers at run timeÍ/	(> õÍ

Í¡	Ã[ÍX	ÍRange checks on index ‹ P   `@  `` `€  "ƒ‰S“ÕU8  ‹ €  a h  ¯a@	@ "ƒI“¸  8Í  Àğ€p°p 84@ µ¼“ ¤ˆH‰êqá 
Hˆ†˜ Äˆ‰Éˆê‘’Hˆ ¤¦© ÄˆŠiˆÉ‘•p
HŒ‚†©` ÄˆÉ)É)ñàÀHŒœ¦Š£ ÄˆêIêÊQà H¬‚’™0 Ä‰)‰èqààH† š­ Ä‰ªH(‘Ğ0H’œ’©* ¤‰
	‰±à 
H’œ’±  Ä‰¨©ªK1‘àH®œŠ¥ ÄŠÉˆ(ñà€H®¤¬¥ ÄŠêÈ))“€  …QŒ“P bDd”ä”ø‘9]$FTXCG‰•Ô"€€‘%9=UR(‰SÑQ¢€@‘19
P5ƒ‰S“ÕU%à ğ 	x H’ˆŠ/  —€€A¤ˆÉ‰ÈRğ 	x¼\ . –€ @  ŒH’œª©À€®P  j¹Y´˜Êıp¿FÀP³6“ 9_®èØ
WŒ âD”ôDTn  Ép°\eáXVå=-ÅP  å~¸O‹Q@yÚR7¦`K•º6ƒYµÂİÁLÚˆ Án›Ó04ğÍ¨€Ñ° Ét¸\gÅ»!Êİp«Ù´ ºn7LÀ0Ãº:Š‰ÓPã  ‘1=Np  ß£` ú6
 '…ˆ ı8†§ È`:ıeÂ¸ 2ı:„§^³ip AòÅB7ì›@ /)}›K€ÀfĞ EÂåj±O.` *ÀÀÆm8 >³iÀ xÍ¥ÀàS6— 
°@6ı 0Ya–•ğ Ñp%›@ Àm  EwñäP™WÀüne_  #ĞÃ€<fÒà ğ)›K€"¬ åf€ 0 ÒNG#yÈ@$N‚	Èr2œÎb!Şn:MÇS(€~ EäáH€H‘Ğ 
H„ˆ§ ÄˆŠ
Jj‘à@
HŒ‚†©õ ÄˆÈiˆ(qĞÀH‚˜‡ Ä‰ªH(‘Õ°
HŠ¤¥  ¤‰
	‰±ß H¨Š¤›
 Ä‰êéÈªQÕ 
H Š¤¥ ÄŠj‰i‰³€  …QŒSP bDd4Äõ8‘1P 5Y –€ Û§à+˜Èe—Å¦ë,
~	¬°!Pn²À¤á aŠİ¦àôÌ;\.Sëõ|Õğ<@u´Uì—Êår€I +4  p—„ec¬è#:ˆÀÄa° F}µ_®U3 ~@OÓ ÚS¯`éÄı8ß£` ú6
 '…ˆ ı8†§ È`:ıeÂ¸ 2ı:„§@ˆØ@! .±Æ  ‚ ÕƒõÊá Y78… Ñ0<!ƒI“¸ùn(EX  üİ;…Äb,  Éğ  p)š  x ‹  x F~\
£@° ¾­Ñ°\Í¡@!†#t¼ ™· ’İeJÌ  ,˜È€$BDOSŒÂ€RDd5Hè $FINIO“ bDdäUthîp$FTXCG… âDeE„5Ë $HNEWœ   …’MÓP RD„äUy@ Ô8Z  á`¸İ¥°  æ#93@ Ld,$ ¦'¡Ç@ )"Br*¼d’$(&&Î   …R“P RD$Dõ8‘!1=$PERRIT” bD…DU$Ø‘!A16$STKLMIPÕ bD„U$H‘AIMR$OWNER” MIÀeÀ à 	p ¸\.
 — K@ ®ess:	POP	AF

	ENDIF

	ENDM



pstat	MACRO	sw,mes1,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	rm,<Research machines version>
	IF	rm
	pstat	large,<8 inch disk version>,<5 inch disk version>
	ENDIF
	pstat	nascom,<Nascom version>
	pstat	t200,<Fixed 200K disk size (test)>,<Variable disk size (normal)>
	pstat	t.on,<Tracing ON>
	pstat	c.on,<Bounds checking ON>





; Various version string related routWë•š ?\-×$U€ #€ ‹   @ Hà|™Ï¢óx‹ [ñ fÕ°+”fĞ ’O ƒáğø}ÌcÃ§ÕJ cËìÚ\ y;™.ˆ8åfÕ°JÜU‚€·è `e†Ya–Ãø =Ya‘€!Ö^³ip AòÅB7ì›@ /)}›K€ÀfĞ EÂåj±O.` *ÀÀÆm8 >³iÀ xÍ¥ÀàS6— 
°@6ı 0Ya–•ğ Ñp%›@ Àm  EwñäP™WÀüne_  #ĞÃ€<fÒà ğ)›K€"¬ åf€ 0 ÒNG#yÈ@$N‚	Èr2œÎb!Şn:MÇS(€~ EäáH€H‘Ğ 
H„ˆ§ ÄˆŠ
Jj‘à@
HŒ‚†©õ ÄˆÈiˆ(qĞÀH‚˜‡ Ä‰ªH(‘Õ°
HŠ¤¥  ¤‰
	‰±ß H¨Š¤›
 Ä‰êéÈªQÕ 
H Š¤¥ ÄŠj‰i‰³€  …QŒSP bDd4Äõ8‘1P 5Y –€ Û§à+˜Èe—Å¦ë,
~	¬°!Pn²À¤á aŠİP bD„tõDø $IODEF”  MU  âD”ôDTix ¼Z  ıq°O iº*  ®Wÿ¾_®UxË€ Ú† }²G\ n OOöèeºùp´[®ËõÊÍ¨`×+…ní!2®Ã‘Š*  µ0‚ÉtˆÀà4  Œ¢€bDDäÄuHÊ$HERR€ bD„tõDøÈH$INIXœ   …’L“P RD„TåI@ Ô€Z  á`—„ea¬rù~¹[®V+tB„ 7G.²ğŒ¬#u\­V   ¤‰©Ê‘‘à
H¦‡8  …’LSP bD„ÄCEˆ‘!1Ñf$HST4X‰Õ`RE4¸‘U9A.P 59 –€ ?\¡€uÊÑpŸ„nWY|.Ÿ+†X` õÊ7\­øFãr›Âéó8e¢qœg1ÈFëd¿\,‹…Ú°~ºc"@‘!1Ñ":‰#  ‘!1Ñf:0‰Õ#¢€‘!MPÑf:`IPÒã¦ ‘U9A.p  …’LP bD„ÄC…ˆ‘!1áf$HP8XI`bD…5C…ˆ‘!MPáf((IPPĞå  Sà H`uQ€Õ \¶¨ˆäŞ& !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPH„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰hªJQ—à
HŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …RÓP RDD•5	@ ÖZ  á~¸\dáÖ*  îÒjğ 
€ [´„Ò¼ ±° V6@
€ *Ü"  ;JN( 6·v†”¼#+:Ï‹q@ÚB Ü!€#„CI€¥áYÖå>-ÅÁÚBœ-+¤€¨ª€-İ¥! CQ€UŒÂ^•œ.V©ÌFr‚ß¢7èúåp‚Z-SÒÜP$v”‡8U[€îÒ€!­`+" áhµ\­RğŒ¬á9ˆÎOÑôF*  «wi	Â8ˆ@ )xFVu¹O‹qAÚBœ-+Ş ?\®KEª·v”‡±@-Âáp¸GÅ pš  
­xİÚ4‘E^ / –€ ?\¡€uÊ 4\'á•Ö_§Êá€†  x   v¬/×(`İr€!†ëõÊ7\­	øFå7…ÓæpË  ‚ bD„ÄC…ˆè $HLD8YŒ‹ RD…„ˆé($HP8X€RD……˜Éà$HST8H—€bD…5C…ˆéX$HST8Yœ   …RSP bD„ÄC„x‘!1á"$HLD8CI RD…„8‘!MPá"$HST8TŠ
 RE49@ Ôì$QACC—€ KÅ %    rºÃ w	xFV¹]a   «KDB \®¶¬Bø_.¶( v¬.¬CÀ   €µ`É€ bD„ÄC„8èH$HLD8Gˆ bD„ÄC„ˆèÈ$HP8C RD…„ˆéˆ$HST8H—€bD…5C…IÀ  …RP bD„•%5I@ ×0Z  *¤à € UJ@A  ª•€‚€ód „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãe†‡ R„6ä Ez @ ˜4„İeáYú.Sè|Ü"ª ·vŸ®VŠİÚRT<ní)¨èD Ÿæsè¼Ş"  "1° 0Kp¹Db2ğŒ¬ár†VîÒ€,áÀb0QÜ#/ÊÏĞËõÊÑ9
Îa3õÊá€€wiH@p¸O  ğpœDgK„â#8?\­ö€N&: ITÔ#>`‘I=YJ3à‰ÕRS#< ‘!IJ2FIc"@‘55If2`‰ÕÓc3€‘]I=YJ32‰ÕRS'   …RSP bD„”ä•H‘Y%2$WVAIL‰Ô“Õ” bEu$õe(‘9MF$HCPMV‰QST–`RD”ä•ˆ‘A1$DCLN‰“Õ bDE4ÄdÈ  $INOUTŠ) RDdÄä)@¨Ö$INOUT—€ KÀ€%à€i"2br¼ ^¤.  — K %ÀÀà€	pP¸0\. —	 K… %Â Ğ    í=€ `0ì ırˆ€ è…  n[¢, !°`   D  ° ª€ €    Í    ÖXhpe†‡ÒğŒ¬ëd²ÃC;,48"ºÜ.3˜ŒäÉe†›W êzsÛ®Wë„zú² Ò²ú^@5C‹%–
Ş§§0=ºåh­Å Æ«õÂı+ _¥ä ô@ô¼Y&ğº|ÎÉu˜+wiI’O †Iš!  1•p
Hˆ†˜  Ä‰	*Jj“€  …RÓP bD„TåE8‘!M=$HEXIT”  MN@%  	xFÖâ 	]Ö9|¿\­×+º!B £—YxF :Ç.V¨¨  ¶Å6¨8 Í  në…ºá|ºß®˜è $HENTSŒ–€RD„U%(éx$HEXIT‘ RD…4ô8É$STKLMœ   …R“P bD„ÄCDx‘!1Ñ"$HST4G‰Õ RD…5sI@ ÔÀZ  á/ÊÂ7+¬œ##ËÂ2°ÖÉq—„eaÖºÜ.3ˆŒà#9ˆÎB7[%úáh¸Ø¤"[õÓ  Ä‰	ˆ†ˆñĞpH˜ˆh‘ Ä‰
j†ˆñÑ H¦¨h©' ¤‰
jæ“€  …RSP bD„$48‘!]N$HCERRIÕ`RD…t5X‘!	MA$HWSPC”  M`€dEXè $WFT‹€REteEXéh$WNEG³ bEuTÕTÈê$WWMULœ   …PP BD$eH‘	QV$BFDI‘‘e  Qàyá"Òw v‘#wÀnÉ'!€= GY1ĞPH„Œ‰ ¤ˆHÈŠ±Ğ H„Œ© ¤ˆHÊŠ³€  …PŒÓP RD$ÔôH‘	5=V$BMODF”  MV ï* í"8\`â `áqƒ€ğÀIÂã[¾ªp 8 oeŸ V[å.”3ŸVâ)ñnÈ­`€
ËÃ ´»,H^ IQ AìË<²¤FC,âÀB²GÄ p	š  €,˜è˜$BMOD€ bD$ÔôDhè`$BMODUŒ©€RD„U%)À  …PŒ“P RD$D•h‘	%YVP 5W p¸ÁÄx`0áqƒ€w• e¾]¤C{,ø(]Èz](g>­Å£âİZÀ! –<Òì± ]z8%D±ñ–q`2Ï" 2İà>'† ®Ò#$|J ™   øÉƒ€RD$D•hè $BDIVUŒ© RD„U%)À  …PŒSP RD$ÕTÈ‘	5U1VP 5@ p¸ÁÀıt·FÀStl7\-Ñ  |O Ú#â£uÂ3@ Ld’$"©)G@ )"ªš¢”à  …ULÓP RET4õ	@ ÔØúáx´Kâ  rz[ŠGäà<<]Œ ¥óó4   	À—Y4Ø& EgHÚ¸uˆß/×Hø Í£ ×Lt ’*¡§¨FL€)"ª*’¤à  …UL“P RET4ôé@ Õ„úá€ “ó¬L 7Dhg[r® :ÃKq@|F\¢gû´ˆo¾]g„ O€İ«  9'İ«»åúéu‰Ÿç‡iŞ9|ºÏ»”  İ«XmÂ+'€ 7jáÖ#|¿]!¡{  € RET4ôèÊø$UERTœ   …ULSP REU55h‘UMYB$USSWISS RETU%I@ Ö úáuˆ@ Êù¹S  ÀpÚ°|¿]/×„  “€À $¼#+5]f#X¬V»Wë¥úá€ •ór¦ %… â¡t '­İ¤'Ë¬œv¬®–«ÕÊırŠ€à4  ~¸\/qİÊ ]nx$í\:Ú,åŠÉ~¸X,Q0 Ò9¾@À¡úéŒ« RD„U%(ê`$UERT¸ Rx`(áq“Öï*  í"Ï*Â{,ø(¥Ò†sêÜP>-Å0!.·e‘E  }–=Lì³Ë ^g>‹Íâ6H„  dÇAÀ)"jªdt !&ª¦*Î   …PŒP RD$%9@ Ô Z  W{ÏOi“  ¤ˆH(Js€  …SP RD4Õ‘5AJP 5 u†—Ìj„&ê  
öLt’ ¡¦¨G@ 1"
j‚”à  …UNP REd4Õ‘Y5AJP 5& u†‰äe¸ *x[ŠA1i|ÀŠ ¡²Ü0Uì•€¡ö7Âëpû&: IÓT#  ‘Y5AJp  …UMÓP RETDTÈ‘U%9NP 5 ~¸^-û„ô·É!Àx“CQñP~¹Y  $PzŸ’gwˆ JºÄÀ É=Ú°~ºNCWë¥úáx´\%ön(‡‹±ÀÔò†Hç¥ÀàXy[Š'áâLPrµX¥0 œ	u‰€—Y=Ú¸`´\' 0 , ºÄ  åÚ°|¿]/×(ø¨3hØõÂár‰€—ÈÍúéŒÁ RD„U%(è $UDEL› RET”å9À  …UM“P REUõ9@ ETÄTèè $USSVŠ REU55xéx$USVPœ   …’M“P dõtäU%)A Õô\ . —€K %À à`	q ´ ÂÁqˆ° áb ˆhÈ ˆ  dˆàà4  d¿Šb‚óø(-°Ôò2À`
 6 Æ s€hFw	„B0 r^•™e@Ú[    •ª!À SÈ}Ìw ^¢ 6 9EX ›_ XÌş'„p( in(2Ø$p˜ë ÇX’éŒ¢€bD„U$HÈ°$HERRŒ‡ bDõtäU(è OWNERRœ   …’MSP bD„”åe8‘!	iJ$HBNZI“‘àRD„%9@ Ô„Z  > >¨0 ]nÉ YÖHøÀ²GÀÀõ’> ¼¬•»ÁÚDdÇD€)"Br<t4’$!'-GEÀ)"B‚œt ’$!-)G@ 1"BJr²œà  …’MP RD„ÄD(‘!
P 56 –€ 8ÊÂ7„İr¿\ WÕ ~•/Òòªx°Y.2°ÆÅ!7\¡W•) h†mWë…úV@¿KÈ ƒÔ2ÁdÇF@)"B
"t ’$&"!N   …’LÓÕ$úá€ ’pÖ& C$aán(R€É<_îV«
(Äa¥ğ¡îÁh¸B`Ñ¥.0Z.‹Tö$G``2ù'€CõÓ  ¤Šª	ês€  …UMSP RET4Õ‘U5AJP 5H  C »õÂ!  $çX˜ iˆÈÏW+ Dlån(â€XLFK`Ñ@ õ[†a C…ò¯~ºV‡ÀİÂÑÂê ûåúé€ RET4Õè $UCMPRœ   …UMP REU5E)@ Ô$úáx´X.ë•ªİqµ[£` –|›£@tFİ £ÖUş uˆ@ »´„D&ˆ@ iIõ{@«vYà@>-E( Ê¦‡lÛN Å €!¨›iÀ X"˜ 3m8@!Aàm§ b€T`ˆ Í´àP@N  ¶œ Àiˆ@NÍ¸€@›q &@6â A@mÄ h†Vèºw 7\-Ñ ºád¿\#á€]Æ·vœnÒ“êŞ ÆãÀ¸aàã¸İ¥¦`$ıp†u»´¤úº ñ¸ğ.zVáñ€E¢İ·Nàëº4 7\aQ@Qª@À Àµ`áh­İ¥"(0³$Äa§1üî|„æ ¬ }2IÆó €Ìo:›Œƒ¡ ‚3&I‘Ôã  ‘:2‰“”ÑTc¨à‘9Q%:2T‰•Ô#?@‘!A5Z2&IT”£;À‘!9^2@‰“Qç   …QŒÓP bDd4„´é@ ÖäÂıp°\n·ë•Â6 b1°€ û<­Ù§ğ€@	ƒDt»$ır¸D``H5•jÀA7ğ€Pz…Çğ¸P1
…—ğ°PuÇ Gñ pm '1}ü[ßÅÑA|î#3¬°Ø@J~Ÿ/á  †&?Y`°€Œıe€Ï×+…Š€,00¦~²Àá ¼ğş
 ïà0€L>2_§àX€8?‚# Ã-şı;€£`€Ã¤ ÓğÌ~Àà$|dÇ@ 1"2BZtà  …SSP RDÄÔôH‘15=P 5ˆ f€ ×EÆıqˆ€añúáh¸ß®5»ê½ %Ø¤"[,ø(³@ ²¢İr½X¯×ğ±Y+6Ux  „ë•ÂËˆ@ XUâå€ €K4  z¿\/ë”.0…Æ P  P,EG€ REtÕTÈé0$WMULUŒ–€bEuTÕTÉÀ  …UÌ“P bEtD”Ôù@ Ô„ B   Á¸€y €±,.Ë
²ÂÒÀ Aq“  ÄŠè‰)©ó€  …SSP BDÄeH‘1$LFINC‰‘PàRDÅ59@ Õìúáh¼^­Wë•êå0VîÒ‘šáh†×Eâõj¿\¯WZİÚB"\.ÒİÅK€€án`Æ ‘’yk Iç†ğ   ¥&K­Âıp¿\n·¬ö¾ˆ‡¥ğŒ@u¸İgµğŒ@=/„b @`#u¸İb1Ú¡uTÀ‰xFVºİ1ÑPH˜Œ‰8 Ä‰ˆÈˆ¨qÒğH˜Œ’œ‡  „‰ˆÊ‘Ô`
H˜¦ ‡8  …SP RDÄDH‘1MU
$LABSI‘QàRDÄ”ä8‘1$LCMP‰ÓT BDÄ$‘1]$LWTIÕ`RDÄU%)@ Öüúáq‚H„Ö‹…ÚZuVpë¥úáq­İ¤"!5¢áv”Uœúé'…Óäsy’D&²ÂÓ%úáu¸\¬°£´Äãrºß®—ë„"  :ÜnW[õÒË>2b n®5¢ÕÆ(ºØ¯×ní!?\®7iI‚İp²Z-ñ(f€    2c/à‘!IJ2IP”ã)€‘1%5>:ISÑ#  ‘15=2BI‘Qç   …SP RDÄD•i@ Õ€.Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í Àë•êÅ~¸Ø'…ŠÈ@Y²ª€ø ?\¬‹,XË²Ã°È`Í  -×+…úå`…Û”hºád´Z#âP8Í      dÆUÀ)"B*’”e &"$¦§Ç@ )"b"J´e,’&'"£Î   …SÓP RDÄÕTÉ@ Õ .Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À«ªÅ~¹O‹Q@9‚xX°ª°ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …S“P bDÄD”Ôù@ ÔìÊ|ZŠ ãá „  Áëºár¿E!vè¥Æí58İ¦ øÀİ¸ÖîÒ“ÚBySí!	¢ ÚRp8Ø®Qñ<f€ ’ır†ÀÆ €,`	‡!å¬'À8D  v”UdbµZ2_®İÚBh¸^®Ò“EÕh  FZíªñ~ºGÄÕ¦ ­ß®—ë…Ö`4°VîÒêëvš.«@ (n¿]1–
HŠ¤¥G ¤‰ˆ(JqĞ 
H˜‚ˆ‰  „‰ˆH1Ø
H˜†š¡© Ä‰ˆiª
Q×P
H˜ˆŠ‡Y ¤‰ˆªJQÖ°
H˜’œ‡J ¤‰‰È¨ñĞğ
H˜¦ª…' „‰Šè1ÒàH˜®©< ¤‰ŠêŠ³€  …UÌSP BEteH‘]$WFTUIÑ‘`REt%8‘]9$WBT‰ÕÓUS bEuTÕTÉ@ ÖTÊÅhºÖîÒ`å[»HDBk²–€ Ïw%Ö`4­İ¥ À¨][»HDBhÖÉ>=ïX„  [»JL—ë…¢Z g±@*Õ~º]b  òKeÆ Ë,FË	-ÄCÂİQ cñ€2Ë-ÄfH„  <-Å00AnË Š !–Xq–²Ã!‰’-Ùd@2Ë2Ã¬°ÈAäE6	€˜éH$WABSš€BEt%HèH$WFD€REt@eÆí% OÑô@Úx²c  ‘1%5>p  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à  …UÍP REtD•h‘]%YVP 5Z u¸X.SÂ©Ì€7ï*( /#Eäğénò¤àò¹ì^_	† Î·Ê. 9OKq 5f(¿€B 3,pË† lĞ ¢`4²ÎlYí„  2ÏŒñ<0p‰@à4  €@˜Ê $HERRŒ bEtD”Ôøè $WDIV€bEtD•eXÊ($WNEGœ   …UÌÓP REtÕTÈ‘]5U1VP 55 u¸X.SÂ¨Şx[¼¨ ¼y“Àg¥»Ê€Êç±y|&åf€ ƒ  u¸X.Qp›GÀgÆC  Œ™€RDÄU%(É $LNÂÍ¥ V+6Ô †¬Ú İ9„§ ‹tl 7IÁP0 Ğ`fÕ &h  y[Š ÌÚ– =>™µÀºË©™,Û†Í² ÚìÉfÔ°éø,İ_Emp d·Yavó6¥€3hPtü~¯ïªı;ŸÙ´P›X@  `€ EŒÚd İ_XÖX\¼Ä¸`,Û" Íµ ,–ë,
~^­ÖX\¼Ä¸`/«6€ ‚Û°ñ¶¬°!™€Í   à›6—²]#â¨8Í     €ĞÉn²À¯àwC PgÄ@p‡R É§S™Ğ@b2ˆ†“™ŒÌi6H†“™Œ@f:›‘“ğ:H„ˆ§  ÄˆÈi‰êqß`HŒ¦ŠŠ—ÄÄ‰j	ªÑ–P:HŠ¤¥q¤‰ˆ‰*Ñšğ*H˜šª™²¤‰Šj¨S€  …Q“P bDe4”Äi@ÔĞ\ . –€ 8D@ 4  r·\cà4  n²À‰æë,în¹\ 0 ëÓğ   íX7\®ˆ fĞğèØL n„àë„U@€5ˆÊ€Tp° İ7	¦a+têna  2İ:†§@Ëtl@2[¦àÃtÌnŸ‚Ëq aºn	7LÁ2ğã  ‘MQ-162¬‰Ô“Õ”£?@‘]Y%2p  …QP bDdDTdè‘9Q%:P5y—  K€@%  ÛR !§À HÚ°€ áàœwŸ™À9İÌ{A3È|>¹ïa€Hòæ½†0†Ş 7N ¦éĞİeÌ@¤O¤Ñ#tÜn™ƒ'×3h(€Oà H¥ºt
2]bğ.<[»JO*Â =nÂ­Ñ°PİeÌ‘ÍÒP&ë,F„7¬#PÀ›¬°!Ø@Ñ° cn@ÍÓ ºs7N@‘€nAÓ 5’İr¸Â"@ eÖád„P  piš  2[¬°!™QÀ§à“ul[®WD$ ¹[¤` 8 Ë2Ã,Vh  Íµ Q0 ÀAöİeŠ—ÍÖX¼ € ğPn²ÅOæë,
VAÀöm¹ -ÖX¼ 0èğ8&Í¡ -¨8,Í£À#ÆUğp·FÁ`u–/1* 6º€7FÁp½’İ€ÓpIºf	·Y`B0€İ:„§@ˆ`İ:†§@Ëtü ÀAö==™-ÓpIºf	€Oà Ktü;ŠÛ§àÁİ’õn²À¥á@¥ºŒ¬ënBMÓ L" [£`² üİ;…ÄmÓ¨aºt·F¡fKu–71  é¸0İ3[§à²Ü@!n›‚MÓ0L¼#+
İgÅ¨€ëfĞğéÔ$İ:Â @ eº6 §à¹ÜFİ:†§@Ëtjd‡Æ Öë,
^d7FÁpÓ6Î 2[¦á#tÌ%` ğŒ¬#jˆp ”B„ 9Y  „øµ:£a º6€.Q  rˆP€+4  ` ˆØ # g1ÈF6
° ¬æ#9:Ù1Ÿğ
Hˆ’¦¡ ÄˆÈi‰êqPHŒœŠ®  ÄˆÊi)ˆÑ™ HŒ¨°†¡< Ä‰ªH(‘‘HœŠ¯8  …QSP bDeTåé@ÖP\ . — K„€%  ×Ë  8Oá €}[Š £×¨Ì0ñrˆ@ È Nà ğ9|Ú­`Pµ`Á|¿\¡ ÕbˆK€+4  š ` ‡  ‚ JÜP Å0€’ş ˆŒ[ !ø€Pe6œ‡‘Ìèr4›Œâ‘°=Ê	qƒ‚Õƒ…òır°  ô| dp”l?Ÿ†Â0ÑÀVh 7 ÄˆÈi	iÑĞ HŒªœ ’ ¤‰ªËŸ„6ë,v[¬°!Pn‚á¦m,nŸ‚Ëq@)ºË˜•°›[€™¶¤ fÒPã•t öÃ6Ô€‚mÖXÌÌ¶À,–é¸0İ3DmÑ¨X@fÖ &èØ,€nCÓ düİ;…Ù-ÓpAºf·IÁ€0 İ…„&mjr¿\-ÖXŒ ¿OÇç0ıº¾0­ĞôünÂÁ€6µ7N¡éĞ"Én²À¦æ   İ7¦`Ëtü;ˆÛ§PÃtènÏ Àºn7LÁé80 [§PƒtènŸ‚ÃÆéÜ,İ_XÚØÍ­ÀLÚ€É !ğTe€ ¶¤ºn	7LÁ7+tüzµ\­¨84Í¹@.‹UÊ:À ömˆ[ˆî‹Ä€ G¢ó6Ù€8Y.…›lÀ#¬  ş
Š
ÖXŒÉÜ 0<0M+œæã8€Ìi6DCÉÀÊİeRÍÖX<»à@`ˆ`^C0›Æó €Æl7œÌ¢1¤Øeßp 080"NFSĞŞr<ˆÇSa°#E@ÀÀ–ë,
şÀVh  D4œÌb1ÔØlh€ ¸øÈ`µZ¢X 2[Š ìb Œî#€À†m[…À`6­ˆ "¶‹”C[JS€  …RP BDäUx‘!9^P5]—  K€€%À€à`	h „0pˆ€ ë…Æå  ,  ır¸B  İÚRÀÀ!P  ^•…g¥¸€!  0À­Ö"À Bhª€;HB 0†• ©¸ (Ş„ÁFpŠ €-ØT¤CO€U0‡J@D(  ‹ 
€ +…Ê^•Kq "  " 2~™ï×+ní!6¬à  \ ¤&•´ e‘D §”E b, ëpµEUˆní)îV >-ÙTÈÖ*À€Q rŸ„fc{õÊÁ[»HLè|9C",  á>-Äu¨ ş«> ·v”„ ao ]°”4w	ˆÃGpØ«  -İ¥!@„CTÀ¤áğ·—iH`p˜,;ø y	Ï Û„æ#98KÂ2³¬ø· Ä7Œ Ey€X Öá9ˆÎL—ë•‚x[ˆ—3 @ € "  ÊÅ~¹D5ÊÅf€ ×Â"© ,Ğ ‡VÀ#)À4‘%MB2N‰Ô“Õ”£$€8‘Y%22°‰SĞã  ‘!I: I‘Uã* 4‘!A16:	‘U¢@%©:õ€SĞ$R"© ë ¢@#â Fû€€à+6®€§cIŒÊ 2œFó“u–#04Lºu7N€vK$f€ Ó¸]üe  àk <
 ƒ p<ÿfÑ`éÜ.É Ù´¸ºw²AÀFéx.ƒ€­Òğ]›MÀY1Ğ H‚¦¦J¤ˆH‰êq‘@HŒ†˜§" ÄˆÈˆ¨ÉÑĞHŒœŠ®¸ ÄˆÊ‹hñ› HŒ¨°†¡ ÄˆÊ©Ê	Ñ› HŠ¤‚‰õ ¤‰ªJS€  …‘ŒLP bEUDI@ Ô¼Z  á  Ğ Êİq‡Û€  øÍ  £`(1ºn7LÀ¶m. €   š  7\"ª éŒˆ€bDd4Äõ8È`$FDEFNŒ‚€bDdäUthÉ8$FSEEKŒ– bD„U$Hè $UPDATœ   …QSP bDäI@ ÕäZ  á  Ğ Êİq‡Û€  øÍ  £`(1ºn7LÀ¶m— n²À©fë,naQĞë,^G@ ø 	3kx8FÍ  µ¼!fÓà Àñ›[ÀAÁmF nŸ†mÓ¹º43kx8Íª Á@=º6"Ìñ#n@@À°ÀºáAÀfh  > ²@À€ÀÜ@À)ºË—˜¨ˆÀà+uÂÃ²À$SqZo3LÆ“a”œoŒ§3)Ğ^r2ÎF“¡”œoŒ§s‘¤èe´€âDd4„”èèĞ$FDER‰ âDdDU$HéH$FDORL£€âDdDõtÈîh$FELNDß€RDdTôhí¸$FEOFDê€bDdTôÄèè˜$FGET…€bDdtUDHïX$FPAGDù€bDetXí$FPUTÌ€bDeUDHËh$HERADŒÛ€ÒD„U%)À  …QÓP bDe4TT¹@ Ö ºåq„D€ Ë­ÂÉn—‚MÒ°Mªıp²[¦àãtœn‘ƒl–é¸İ'[¤b3%ºu7N!¦éÀ6ÉnCíÓˆuºp2O-Õği€xn¯ƒlëu|d·MÁé˜"İ/À Ëtên-Ñ Y’}n¯ƒìÃu|`[«àë%ºË¡›§à³6… ?WÇöÃ6Š  @ €,fÖÃu–c2[§àÓunÃMèĞ6ÀnŒ‘Ğ  şìÚ  ³@ m fÓ K6€ ‚Û` İ3ÀXñ–  µ¼fÖ¸¡ºİŒµ¼f× éøŠİ;‘¬°!@n²À‡a%ºáP K6š Œ­Ñ°XÍ¬`,Úhİ7›¦`›tl 7N¡†éĞ2~…athy[ñ#sÀ ÀÀpš  J)8ˆ 2œFó“6š ŒMÑ°XÍ¬`-ÓpIºf	·OÁfêø* ` Œ ûn‚À ÂAÊÍ¦€.éx0 7OÁféÔ İ:Vì«$ †MÓpaºfŸŸÁ¦U’ n›€ÍÓ0›eÀ–éøˆ·‡­Ó¹nÉnŸ†vCuÊã‰ —[Tf×àèÔ`ÑÙµDÂİãvK•ºn7LÀvm— p²[®WDH ºÜ,˜è $APPNDŒ­ ÒD$Dõ8Èˆ$FCLOSŒ† bDdDTdèÈ($FNEWFŒ™ bD„5ÕhÌ¨$HERADŒæ€RD„U%)À  …QP bDdtUDH‘R$FPUTDI”U bDdTôdH‘=$FELND‰‘SÓ bDetH‘A$FDERDI‘T bDdDõ$È‘=]2$FCHINŠ bD”äõUH €$I¤á˜%ºu·NæèØ> nÚ  ³mø ğPnˆ€m  ·Œn(e7FÃ 6€ ìÛä Én›ƒMÓ0lRË·N¤Cãu,0d9AÁm  n²À¥æ%p·Nƒm  Ù´€’yfÑ@éÄŠİ8›§R;tŒ'³hPUŠ3i`6€ 0X¬ÚÁh­ÄA
  u·F„Q !º4# mÑ¡ Øz„P  pi›T ^,–m
 nœÂÓE›E µ„ºË±†¦ë,
†Z@ p…ü´x(ƒ‚ŒÚ^·d€,–mvn‚À»!›B€§àÃôî~~àë,.d¬€8DşŒÚ<´  f× ã*¨ƒ‚¬Ú^·aU 6ë,.fÑàma l3i%ºË“„Fë,^eU°6«›hÀ£`¸ r@‚7CJ Û¬°!ØP	 İ  ßÑ6éÄİ8Û§0Ctä	nAÓ 5‚Ñnƒöë,.Îj±[¬°!Ø@n“‚€`€ĞÍ  ®g‚Ñ‰PÀÙ´ğ PcfÒ€mvÚ¬Vé8* @ h  }s<‚€;E¢Í¨`lV+•ŠÍ§€€›u–/1.ODEF”  Mw€`âD”äõUIx ¼^$§¢"£KÀ %à ğ0	x ¼@Z -   ®Wd¼#+:İ"® ån¸Ã 6mifÓ mn²À®fë…’İ?\ÀÆUŸn²À¦f@`İ?YevU›e™ÙÖXì &·MÀfé˜Í¡@ÖXLİeÌ†éø.ş
OàP İeQÏàkºw-ÖXœ(·OÁ§ğ4PÄnƒ@¦èØ. n²À¬æKu–{7Y`Rp¡ÚİeVÍÖXŒÉp+uÆ³kH6Ó ·MÀ†é˜Í¡@ÖXİp²EPq"Jrzª§  r·\a€6´€³itüs [®H«€ 9[®0À›Z@Y´ŒºË‘˜V<º~‡ÜÀë…’*à@VëŒ0fÖm¦n‚àĞğ!›@ £`¸0<fĞ ë,
În¸Y"¨8‘%=€€9[®0À›Z@Y´Œºn7LÁë…’*à Vë›L€¶ºË“„ Vm= <›¬°+™ºádŠ¸•ºãfÚ`èØ.´ º6‚ƒÀ†m  n²À¬æë…’ıp¸D@ ÊİqŸâBø@%ŸWÂõÒİeHIÀ  …‘ŒP T55DI@ Ô  f€ `&2I‘Ôã  MQRp  …‘ŒŒÓP bD4„”é@ Õ¤Z  Í  a  2İeÂ‚D¸  ‰ Õ€F¨ @ 0œVÂ§ÈD tˆP  Ë”f@à f@ğ@é—  àƒ4
    àÓ4
 €À°p#W€®h  C$I$á”är7œ£  ‘!%:2‰ÒS£+€‘!IJp  …‘ŒŒ“P BDe$H‘]J$FRDLN‰•Ô“ RDe4TÈ‘9I^(‰S“ÕU"‚ ‘%=P 5— ƒ‰S“ÕU%à ğ 	x H’ˆŠ/  —€€KÀÀ%à€ñ 	h  ª$INOUTà 
ğÀHUÀ€á€`«€ €!€(« €MiL  j¹^£¨8‘%=€ -Å'ğPF ƒ  	uˆ_¯ğËµp<p ‹„EÀ@\’Í  ¢. İp²G\üf  ® ş3    ²< #À@  Àµ`É€Á°p#_   HÊa2Îç#IĞÊ 7NgHd‚|t ’"¡¤'ÆM€)"B*’”à  …‘ŒMSP bE$TäÙ@ ÖZ  á  à4  f€ VëŒ|f€ ÖXÌİr¸B"@ eÊ .WX„¸ v¬-òÜP/…¸€hÕrƒƒ,Ğ ÂÑ/„q°ª—  pM›O@ à»6¨  fë„U@€#  ü<ÇÄ@À|FÁÀPx f€ S‘ÈŞrMÂ‘œA&‘c*À‘	=N2$‰ÓÔã!@‘9]2‰•S”£,@‘!A5Z2¼‰TQ#.À‘!IJ: ‰‘SSg   …‘ŒMP RDe$U8‘I^P51 —  K€@%  à°`>Œ° „D  3@ +uÆn  à4  ` éÜ
İ7›¦`[6˜ 7\"ª éŒ bDd4Äõ8È¨$FDEFNŒ‡ bDdäUthè $FRES‚ RDe$UxÉp$HERADœ   …‘ŒLÓP bD4Äõ4X‘IMP 5S –€ +Ã !ğÂ"  nVëê|[Šá tF}_
öh  ñ[Š­×+„"$ ]`à›4  CI¸Î :Íâ!”ÊpŒ£ bDd4„”èÊ¨$FDORLŒ®€bDdDõtÈêx$FENRW€ BDe$Hè`$FRDLN¢€RDe4TÈè0$FWR‰€bDeu$ÄèÈØ$HERADŒ½ RD„U%)À  …‘ŒŒSP bDd”ä•9@Ö„\ . –€ 8D@ •ºåp„OOğÉ8FFn¹[¢  ºn7LÀ÷*İÚrp.ÒÀÍ¬ *& |Zˆ-×%ºn7LÀ3âÔPór·\mé¸İ3Ü«wiÉÂ8r»HCU›X ®éÔİ: Ã6*½š  7Y`Cp€<İ7›¦`™ñj(
°  ‡  9[¦` ¸ Ë2Ã®Vh  İ7 ›¦`•ºn7LÀ÷(„ r³l8…‚ÉŒÎ RDD•5ÉP$FACTŒ±€bDd4Äõ8è $FINISŒ bD„U$IÀ  …‘ŒŒP RDe$E8 €$IODEF”  MJÀ âD”ôDTix ¼^/ —ˆ K@ ,”l r±Y  Âıpë,
¦~²À¤á 9ú~ˆÎî1£úË¹‚×&2‰‘ÑU#  ‘INp  …‘ŒNSP RDn¸Y/ë„|FÀ0B f€ ’0S"‹È¥"	LŠ 2œFó”d´’!"'©Ç@ 1"bzš,t"© ©¢ÆG 1"2bzœd$"© ¢FOÀ)"B*’”à  …‘ŒL“P bDdäÔX‘MQRP5. —  K€@%  
ğÀ|` ˆ   Y  ø> c¬  ·ÁÁ‰p Í  ‚€ø*¡@˜É$BDOS€ bDdäÔXè$FSTATŒ‡€bDeTåèÉX$HERADœ   …‘ŒLSP bD54té@Õ4\ . –€ 8D@  øÍ  X š  9[®5{4  n²ÀŠáÖ   …Öh  İr¸B"@ eÖ!.   Àµ`İeÍ×ª :[¬°"xt] m¨ D —Â€ğd ú€Àğp#WÀ  Âd§cIŒÊ 7M¦QÑx #_Ã¢ø F¾5Än¶ë•Â .° íX:Â4Hæ#97Y`B0€.İ?ÀêØ2 $·\®ˆ\ nBÓ EºáS°IN    
K!)Hë ¢@$Â™Rõ€T@$N*“/Xeu$)@ Ôœ¢Áx­Ä Q ¢D åbµGÅpp	ˆ  0À  )Âl9™@…C‘ÔË  ¤ˆÊêHQ‘ HŒ®¤¦› ¤‰ªJS€  …‘ŒNP RDeu%8‘]IM6$FWRCH€ÉĞâ‚ ‘%=P 5q ƒ‰SÑQ¥à ğ	x¼^ -  p¼Vâ€3b†ÃàÕÊ>+ƒ€LĞ  0èp°AÀ(ø8^,*Ü@<‘Ùµ˜Ê! 'å¸ #?3j¸ 4 øˆÚ/—[¥Âñq“ˆçå»!›Y€gæmW >Y.V+ôUÀ@§p»4  `¸Y'•Ã@| fÕp (aëa ÄˆÊ
ªˆ‘Ğ HŒ®¤†‘! ¤ˆÊêJqÔ@HŒ®¤¦› ¤‰ªJQÑ€H®‡8  …‘ŒMÓP RE4TT¹@ Ô4ÂÁh¹Y  4  n¸Y1PHŒ†’ ÄˆÊh¨©qĞ 
H¦ŠŠ—8  …‘ŒM“P RDT4„ù@ Õ4Z  á`¸Ï‹q@•| Ï«á tVå~¸_¬°!¸@~²À…á@4 ~²À®àÀúË«™#â0(„iÈ4  d‘NG#yÈ@i7§3(€ŞfŸOVh  |AcûÊœ ?€cÄB  	¬–±ıåa ¦SAñúå~¹\lRA¦\f€ Wë…ÂÅ>ˆ@ »  `‚F 'è¢ã>ˆ@ »ª 0A# ôFD&¿\®ˆP@eŸ ¶h  ·^/[ñ’ñÀ&h  !  „ÖKõÂ|Z¬" CE¢ır‹A‡+¬Ài`¸Ï‹U‚Å•B@®3â©êÍ£ ÄàÆ?¾®Pøş(†ìcûê– =O¦I-úåh‘Ï/ä €{Y‚)°ÂOh†§†ë•º!  ¢  [«‘ÀAÚRLŒ!”Kƒ€­İ¥$ËôFİ¿E# tF)G„í×…úå`´OL²à€·eRÀ0®Ã¯ ˜ 
HŠ¤¥d „‰ªèQ”pHš®¯’ ¤ŠH‰*ÑĞ 
H¤šª™z ÄŠIÉêI±›@H¤ªœ —8  …TŒ“P RE$DH‘IMU
$RCMPRIÓT bE$õTäH‘QIU9P 5Å~¸O‹U‚ÄP †pÀ1úá>-V ‚á~º]fKÆıqŸ«ˆ€
ë~¹X,—)ñTõf€ Ä P8>®˜ø2òº`W[õÊÁfÙpúáu°í-,‡ÕŠåÀ&h  á`¼\l“âÔÀid+‡UJ }R ¹åtzuTğ€a°ú¨ †›à0Ğ\¤sÊàğĞ1œ«wi	Âê®@ªD ë[»JN·UO xªÎ U¹VîÒ„p¤u­İ¥'[@0œ~¸\¬W+ú^?JÀ6«ô¼ ~•€-Wéxı+Ú¯ÒğúVµY  êÜ€0\,ÛR Áp¼tˆ¢Ñh´X." ‘ bDD$U%(éÈ$DBRCK© bDD%$5Xè $DBWA… RDD%u8è$DBWUÃ bDDÅ$4¸èÀ$DWLA™ RDEtÅXêà$DWRCK»€bDEu$5XÉX$HERRŒØ€RDÄ4Õ	À  …Q“P bDE4„¸‘=YJ$DWINC‰ÑPå  TàX¨  [»JC€P¨  »JC ­’ëq¹GÅ p	š  8\l–‹ÕÊÅj‰àà6€4X.‹U’ €îÒÓ€0€@wiIÀãr‰àà6• 8\l˜é $DOVER€ bDE4„¸éØ$DWDEC™ bDEt”ä8ÊH$HERRŒ RD…ÄØÈP$MEMRYœ   …QSP C çiõu€Á—•Ö fÙpÄú`4¿\¬Õ† ¢ÆPû,8ËŒ ¬²(€,
 Ïña‡c CÀ Àíní!&ÃÀ€,¾D&«Ìæ÷i	6@–â *Ñj($+Öâ Qé¬+Ÿ¢à aæË?ˆ ÁQH]‡kÀg¡@–x
	¤C{-zbe &[õâ«x2ßŒ—‹…’ñpºß®V-zË L·ê©àË~2^"    2_®‹EŠõ`† ¯×EÖãe„ fYğ@gÁ ^<VîÒà 8İ¤!À@W†ä `¯U=î¶‹õÒá`¸Â û,ø(2ßMPˆ  ÕfĞàHp°\gĞ¹ğ.Ö?¾¬ˆø>ò±@.Q0–ıkßU¬P"eˆYai¨zz¿Ÿ/*îH"›À€ÃÑn(2Ç¬°Ã,2<a×pŠİø  2GÄ°p	š  @ !5’& ?«Na$EÀ° 0ò[ŠŒ±ë,0Ë²ÃƒÖ¨>? –Ad Ï ±“¤‰ªJQ˜pH˜œŠ ¤ŠH(ˆ‘ß 
H¤†š¡ñ ÄŠHiª
QÒàH¤ªœ‰  ¤ŠJj¨Q“H¤ªœ —EÄŠŠJ©Ès€  …TŒSBDD”è‘M1%:$DENTIVe @3P`p ¸\. — Ë@ ã,  2À ~ "  5h D  @ ³ı’ã+ËÂ7´¦  2D4P üjP U! ` Ö  ŞTì x2À ğ0nË²Â 	u„Ä8 +v®   Š–€2^¬W(ë  Ç¯ªş 2À  `İ–e„8 C€€b7jÀU€€U\ÂÁx²\¡Pní)8_V|Êå‚€Ğ ›`À  4  >±†ğp	š  2\ àHF€³m0…›`ÀÀÿ fÛ H8½`Ûx *¯ , —`x˜ )à  ÉxFVu³mH ë €p ù<8Êfó©ÈÆe&ã(€Üu6˜Œ§#˜è
$g’!"'©Ær )""btt’""§*GV€)""*ÂLt "$§FD@1""rb:¤d,"())ªFI@1""šb2dtd")¦$§Fe )"º"J´ft’+¦§¢N   …‘ŒSP dE$U4UI@ ÔLZ  ³@ ¨8Í `ø8Í¡ ˜È€$BDOS€ dE$U4UP RE$dÅH‘I1QR$RNORM‰•S”àBDÕux‘5]
P 5Õ >-VC,øõb  dó6“ <Y·ã%úáh¸Ø¤"[6€ ,UúéW¯ ÓÓXWŒ¦‚
¼x2Ï‚ PU–!e„¦¦7 <¿€€Ë 
€A $FË> CÒİ> ’¦ÆZôÄË4oÖJ\Îo#“ÇŒ“è]–e¿OavXI–ûdˆ@ zäP]ŠG€0AnË Š !–Xq–²Ã!‰’xfÚà;$ôÕ(Y¶¸¢G $uzìP<vYP²ÃŒ°è| ódš À…»,Š(  ƒì°èAêgW²c! ‘19;\	UĞ£¯À‘5]^: I‘“#¢ ‘I1QR:L‰““Ô“c® ‘IU9A.p  …TŒP RE$äTy@ Ô( øµX,Yä°ÎÉ€ RE$äTyÀ  …QÓP RDD%t‘]1$DBRCK‰ÔÒàbDDÅ$4¸‘	]V$DWLUI•ÔàbDD%$5X‘]IV$DBERR”  Mp€…ÖXMœ >²ƒë™ ´>²âÜúÈpˆ  Ê:À Vh  ·µ¬ e€ ¬Úf ·9]¤¼ *À€¬ ·b  ‘ñHf€ ‡C4  fĞó&2‚‰PĞÕSc)À‘%%R2Ş‰‘T‘#-€‘Q2ÎIT”£+à‘19: 	‘'   …“LP bD45TØ‘%%RP 5l –€ 8Z.7+Uš  3j€ à <^¯áÀÀLñfÖ0+›XÀµŒÊÅk  Í  ´¬Öá8ˆÎ3˜Œä¯d¼^#à%Âñrµ†€#ø8+Ù#à$øş6×ó1°À<?™†åüÌd²Ä,°ƒ,*Ë
2c  ‘U6:€‰QÒU# À‘!1Ñ"2\IQ'   …”ÌLSP RE4$4‰@ Õ”Z  Õbˆ@ÀÉ8‚  gå¸€>-K¬R)‡Ç 1aôÑ[»JC„ € Yùn ŠÃƒ¤F)ŠEaqƒñÖá[»JC€%¢>!‚ àFª€3@ ILÊtçSqæ 2œFó”eH’$"©)G@ )"šDà  …”ÌLP bE5dÅ	@ ÔÈZ  Í  ®o×Le’$"©)FR@)"š‚‘Œt )©ªGHÀ)"š²Dà  …TÌ“P RE5#‘MAHÊ$SPR3”  MI€%    r „eBè%’ıp³h TŒ#u‰€€ËúésÇ„uxÜ.~²c  ‘MAHÆ:IÔŒ££€‘MAHÎp  …TÌSP RE4ÄEh‘M1$ULSVISÓ%  S 	h õÂ ?IÀèŒ0
p€á•úá~‚]bgùä^o¾N"7[µ`ır°À ë…Âk?\'á O[ˆïQ›õÓ% ¤‰
ièqĞ°
H¦˜ˆ‡  ¤ŠiˆŠÑÒp
Hª˜¦™, ¤Š©ŠjÓ€  …“LMÓP REô´Y@ Ô$úáh°\,›õÓ  ¤Š	éh³€  …“LM“P RETT¹@ Ô0úáp´OÄğ0 Àh~ºc  ‘A.p  …“LMSP Tõõ%I@ Ô(úáh¸X.ieúé€ Tõõ%IÀ  …“LMP T•õ%I@ Ô4úá`¸]§‚x `4?]1Ğ 
’ ¤©8  …“LLÓP E$äI@ Ô†  F@@)"’
r$t ) §"NÊ@Pn±0 Ğ9$€ÕÃ­ò3~ºDÏóxŒrùu€Õƒ¬l §ë•†  FL )"Bšzt )« ¦(F@@)"š²Dà  …TÎSP BE4•8‘M%JP 5{ –€ 8X,V+•ÂÁh¹L•»´¤ø¹O'Õr ‚ ‘ÁYª! 'âe›Y@dô˜À:s  p $ˆM€ —X™şo¾]nÕƒ¬l ¦‹š  Ù  U›Y@ P dr¶;´B`³ÂÄ@êd²ÇL°Û,tË²ÇL°Û%¢>+€LĞ “x ¤‰ªJQ”À
H¦‡ „Ši*QĞ H¦’§P ¤Šj
Fs€  …TÎP bE4ÔTÔ(‘M55V$SMEMW‰ÓQSS%  U 	h 4  Ÿ„eğº\®3h Œ¼# fm /ÊÂ0À5›EÀÂ2°Œü#[Ä)íš  €l±Ó,6}	€‘ZİÚRD P ä2¦p† N{õÂù~ºc  ‘M55
:>‰ÓQSS#¡€‘M55V:,‰ÓQSUã$ ‘MAHÆ2^IÔŒç   …TÍÓP RE44ÄX‘MP 5M –   …“LLSP RE$äH‘MP5l —  êä´ ÚKÀ ¬ x€  `,xË‡Ùa–Xh õ#ºÚ¯×[»Kx ÚRq»KxÚRqŒ OÑXAÖÁ~ŠOq€	ú#e®®Vˆd`²Ï€C-p#>-D ‹  ;HxŠD&¸Y  •Š! È¤Öh  É€ RE$äHËH$RDIVŒ¯€RE$dÅHğ $SEEDœ   …SM“P bEUD4Ù@ Ô0Z  á`¸Â(   v¬1Ğ H ª¨†›8  …SMSP bDtUD4Ù@ Ô4Z  á`¸İb   ;V˜è $GETCMœ   …SL“P tÔTÔd˜  $INOUT”  MCÀ  ğÍ    	†  FA€1"j²
Jdd$"§*)ÆC@1"B*ÂJ¤d$$)ª,G@ :j*j
²
Là  …SLSP bDÕd”É@ Ô4Z  ıpŠ€ É4ˆ!  ®˜è $MVAILŒ€bE5D´ÄÙÀ  …TŒÓP RE$ÕTÈ‘I%ZP 5)~¸O‹U‚Ä@h´_®—Y€ÒÁqŸ«ˆ¡äıq€ /QÀ‚ …êa ”4® À˜Œ ñx² ’8in „Â–K´ˆG?-Ä AòÉ Y-sı’Í   vm7 u$öm  p¿\/“Êİúé› RE44tXéØ$SCLEŒ RE5#)À  …TÍ“P RE4D”i@ Ô„Z  Í  g…ÈàAÔÇp˜Œ{Vâ€ L ~:Ú/×åúé€ RE4D”hÈ$SPR2œ   …TÍSP RE4”åI@ ÔÄZ  Í  +À5Öå)á1Aòá†ìPÒ˜îA¢¸L ı`€ 0Ø­Ú¸uˆÚ/×åúé€ RE4”åHÈ$SPR2œ   …TÍP RE5Tä™@ ÔÈZ  Í  ‘À9ªë †–Çp˜Œ ùpŠÃv(ilw	ˆÁ¡ÀŒ ~0@À lVí\:Ämë…òıtÆ@@)"š‚‘”t ’)ª§$Î   …TÌÓP BE55H‘MY"P 5R –€ 3iõÂÕ/ÊÂ7á"0à`µ`·İdq° F}¸_/×KõÂÍ  daŒğ¹):¼V¶?®5¸ ırŠÀà4  ~¸Y´˜úF¿\›O@†\P›fÀ° •Š    6«ˆ¢  EÅ€<  l À   „ ?fÔP< !À€VéùO   İÚBr³l6¯à +›g@ğ 6È3l   fÕ`m¤À V+6Ñ
¸° ¬EÅ€§ä+Õº~A½Y·‡G@ã7`t‘IMQJ2xIT”£#@l‘]3æIÔÕ£,`‘IaB34‰ĞĞSc?ÀT‘]%Z2"IÓSÑ#= T‘]93RIQ#-€t‘I5B2@‰S•ã: x‘!a%R3b‰S•”ã9 4‘	QV2bI–”£! 4‘!	9j2²I“‘ã? ‘!	AN3h‰ã)@x‘!1Ñb3X‰Õã  ‘I)UMR:¬‰”ÒV‘c¯€‘]I;„ ÉÑ£ ÀT‘I]I:>I•Ô‘§   …‘LMP RE%5E(‘IaB(2I•S%  W 4‘Y2^ / —Š KÆ@%  Œúe…oÓá”ĞA Çá@-–<e‡Ya†Xdxx¹X¢  c` AöÁb³j`Í©€+6¦ ° øVÍ©ÀMÕ²>03o°Ë  ° Õ›v€]ÀøÀ>)=Y  šˆp ”C}€\¬Vm‘ ´©xë  ?ˆ¬Ú²õ` ñ•›d€˜+ øÀR!á€`‡  9D7ØÊÅfÑ0øÀí%ğĞW ˆ¸@ `>)=YµÜ0jpÀpê*á Å«4  `¨ã @ø¤õfÜp Á=ºnA·LÈG+4  à Ğ ›G€›¦ätÌ„rŠ¸@•š  Ææéù›¦ätÌ„r·MÈ6é™Í    6û Ãâ“Õ›x€ƒ añIêÍ¥`l:ÄŠhh)ˆ±“0:H Š¤¥!ÄˆÈˆªH‘ŸÀHŒŠ¨‰L Äˆ(hj©±–À,Hˆ’’©©¤Šéª©‘°H®œŠ¬„‰Šê‘šğH˜‚ˆ‰ ¤ŠIÈ¨ñŸ0*H¤Œ˜©Ä‰©ÊŠq“`<HŠ°’©z ¤‰	ˆˆQ˜ĞH’œ¬§›¤‰KJQp*H„œµîÄ‰	ˆ†ˆñ‘Ğ<H˜ˆh‘ÄÄ‰	ˆ†‹—àH˜ˆh³­ Ä‰
j†ˆñ’0<H¦¨h©‘ ÄˆŠH¨(‘Ñ0HŠ¤Š‚‰„ŠJH“€  …S0IÚ˜ !à  `Aùì0;ˆÂ–HX!à  `B½–? L`S,~w„¡Q©’á`¸ÏŒ°¨\Ş& OÀ»´¤åf€ ˜Ë¸$DEXPT²€bE$DU…è $RSTRœ   …TÓP bDDU…H‘]MQJ(2I•S%  T 4‘Y2^ / —Š KÅ@%âÀñ€	xÈ´ Âã € ³à€|ZŠ B°Ê!&€  ”ĞÁ²\/*İGğ qån>
#® bˆx G€€ B@jÁ‚Åz³@ AÂ!à Lt ""¬(*FP "ºdT’+¦ª¦GG )"ºš¢”à  …TSP bDE$TH‘I$RRDŠ bD”äõUH x$PRDV” MN Ù    Í   /ÓrúfD¬Ğ  >0;°¸ ÒE$Ea  r³h0 únC¿LÈƒóÕš  ° ë€Æa r³i  únC¿LÈƒóÕ›L ÀøÀ*á@±
 p€‹„ ¸` |`p€X‹„ 3j  únC¿LÈ‡+6·€ Y  Šıp„lHUÒá;°è(  P BDÅu)@`ÔÀ\ . –€ 8^+q@y‚ãz¹X¡  ÕŞ¬Ğ â!À eÀÀxr½Y  $|z¹GÅpp	š  ’ HŒ®¤¦›, ¤‰ªJQĞ H˜®¥ ¤ŠªjŠS€  …TP bE44ÄY@ ×ˆÂÁq¹KÂ2°Œü#3Ö‹%˜ Ê}²ÂŒ·éánò§àÁ\òşY
DC)¨¦ =X¬Û  ñ@ oÁ ñc ßT¨ 0/âpÀnD2šŠaàÜPz±Y¶Ğâ€ Ş!â=aÔĞ©A‚Í  â€›­Âqœg1È|dƒ€I„0íx«Ù'Ã)¨¦ ©À8Ã± 0y–#e„¦ ºDp	°í ï=ÙgÆ –#e„¦ ºE°d¹Z¬±ã,:Ë2Ãl±ã,:Ë2Ãc 0Lô³ Dn0Ë­‚áv’€À6ƒ,8Ë²ÃL°Ø“e ÄŠIÉêI±Ğ H¦†‚˜‹8  …SÓP BDÅ$I@0ÕÌ\ . — K€%  Ğ  üş
 àH€Í­`: !À `øZ  Gğ¬@fÖ°–  € , "À€Vh  ·
„8fĞø4C€ÀÀ   !       €  ›h€8  „  p€  "á@ 6 7FÈ uÊıp³h tÜ‡n™‘çğ¸@5n›íÓ2!ÊÍ  lWë„#zÀ®—	İºnC·LÈƒóÕ›D€ã p‡† €-×+õÂÍ  €#tl‚ 7OÈ& fÙ ğ8B  ¸htlƒ ·MÈ†é™åfŞ #úáÓP«¥Âwn›‘Ó2$üş³@ éİİ7"¦dIùü+fÔêÙ[¦äCtÌ‰r³iP
Šıp„kXUÒá;·MÈ†é™~z³o°¸›£d 0^  ‚® ·v€ ÊÜ ·MÈ†é™h?ÏÆñ0 åpĞ(„ f€ Ğ š  ". 7FÈ0tÜˆn™‘.Vm`B1_®Ïjº\'vé¹İ3"OÏVmvw Cãtü‚Œ"® Í  \4º~A°èˆ6Š ¿ÀìĞ š  °ùºwA0ï 6û€¿Á-ÓrºfB9@   „  f€ Ûş"À á–  ` ğ›T ^£¬  ş³i€`·Øe€ !Ö  Y´ä	ºwAİÚRdŠ à4  € Bk&3IT”£. ‘I2äI‘U£' ‘I5U2: IÔT•'   …U“P BDU…	@ ×Z  á`¸Â+"T"Íf5Y  êë€V&¨D  j³h`Êï ¬°˜]¬fiS 
 ~  .V(Ep?j„Gj¦«4  r±Y  š  <Z/×ÕÊÅ~¹Z¡ˆıª  ¬Úv Í  .6+•ª!/.@(46¬€3jà•Šåb³kPEúár±_®V¨E;j„A6«6º Pæ¨D  j³@ m‡ h¿\.V+•ŠırµD$Áè¶¿fÙP ˆ ~Õ€ Vm’ fÖĞh  Í   ûT"  5Y¶Ì¢K²ÅL°Ø|¦_²×Œ‘ñ`f€   ˆMdÇ@ !"*Â„gp’$"©)FqÀ)"’
"$dh’)!¦¨Fo )"’"J´e’)#&*Fj )"’jªdfä’)'"£ÆP 1"’zªr$fØ’))ª¡N   …UÓP 2DÄé@ ×¸Z  á`¸ÙgÆá >-VUá r²Ä¬°¡°L  Ÿá—˜~Ë^„F£ö¨Eæj³@ ÕB h†Ú®V(ÉÑ RE%u$X‘I]I(‰S“ÕU"ƒ ‘Y2P5Òf€   34  À V(šÌ³¬Ğ åK 8 Ê! €¬Ğ $FVALq`X‹‹ ,Ú€ ¬P  !@Ù´LõTÀ8 Ê!¿Ü¬ÚB *âÀ1 6X` 6€€  ÌÚZ€ ¬Vh  "âÀ  åq`h  åfÔ€m  aÕ@mW  ›¤ä#tŒ…¿Àwi	Ø  <­X ùşõf€  øºnB7LÈU»´„İ:¡§D+tü„z³l¸ ø\õf€ ÓòêÍ¶ :ô Í¯ °{tlƒ ¸ |f€ ‚Ctà‚nĞÏVéùO \X #"^&ñ0Ö`4­İ¥'e f€ Vé¹& x  düş3@ 
€>Ò¢€-Ñ² İ?!‡Ñª	…v@§ä|`ñ@°º~D1€Fñ0 E‚ \X ø·}Tpi/‹ 
°@ $E‚ \P >0Š°@ ŒE‚ §äQ< `€»´„ì¾ *ê>=Y¶Øº~E[§tPa¾:â€ñ€|-z³kP«‹ ï+î>=Yµü|.z³lh«‹ „ ? € Ğ ÊÅr±C+ÊÅ€à ›N€¬Q ~  µ4¢ıp¹X¯×+TB €@ h   Ú¡ ªÍ    •Šåb¹X¬ÚÒ åb„A«ö¨Dz~j³l Eúár±_®V¨…¨À ‡ìÚè Í®àÛ Í³À+ÖD&²ÄÓ4  h¿\.V+õÊÕr±D%åÈ€fÚ@m§ h¿\.V+õÊÕŒGà›qÀ·(’>&€LĞ  B  	¬˜Ï0$HERR€ 2DÄèÎğ$RADDŒ”€RE$4ÕÍ$RDIVŒÚ RE$dÅHÎØ$RMULŒ¬ RE%5T)À  …UP BE4”è‘=NP 5î –€ 8X.6Zñ.<,]ºår²×V+ÔP²GíP‹lÕf€ ª  ¬Ğ õvÀ¬Q
ˆ|A¾Y  •ŠÍ  d@)Ö!€'çr îëf€ @-ÊÅ€à ›H /×•ŠırµB$’T" 5Y´äš  4_®+úåjˆB«p	èîÍ® Úæ åb¹X®V+6Â 9X®V+•ŠåbˆEÃ`	m8Í² V(„¹ ˆ–LÚº Í´ V(„3k€ ­ºuB7NˆW+tüˆ'€Y€Ò·v”•„åp@[¦ä@˜ İ:¡§D+tü„#€,Û¤ 87N&éİ>=Y¶Lº~C£T
ç€·IÈFé
İ7"À»´„}z³mè `*âÀ7+tüˆz³kàà 3n  İ? Öâ 0ø®õf€ Óòü£d!š  !kÆh € ´Œ	åb€@   Í§@Ğ  eÅ µp  9X   B  3iĞ€!  \X CÀ À Á)›U€    „ ?fÒ, !À€VéùO  `İÚBr³k 6¡` +›a ° 4  fÖ°,  Í  Û€ ¬Vh  *âÀ± q@ øÀ>½Y·X0¬Ûj! € ËıºnA‰€ “ëÕ›_ ÄW«6Ş
¸°ñnò¾ CákÕ›u@…\X›f@D\X 0
Ş¬ÛÆ*âÀQ( Í   #  $úõfß@!W rˆA@h   '×«6ƒ°è 6ƒ ÍÓònÍ  ­ÓònÍ¥ l€|`Ş¬Ú*Í¥ÀHfZñ›dÀ° 6Ÿ¡œ¬P  !  µ@	< ìÛX ÍµàV(„T¾ ©LÛt Í· Û– Í¹ »ğ  n¸Y/‹Åâİpˆ à4  € Bk&: 	ÓÔã<À‘!IJ3¢IQ#%`‘I5B2I‘“#9À‘I5U23¬I“‘Qã'À‘I=U93I”ÕP£¡ ‘M%:0 ‰•Sç   …USP bD$5Dé@ ×DÂÁq¹YkÀŠ ~Õ€ Vh  ò¤€ ıª  ¬Ğ  "  a ªDš¡ÁªÍ¡à*Ä åb„[£ö¨E®³j³@  Š~Õ€ Vh  Ñq±\­Qt~k¬Ùµ0›G@!6«•Šåb¹X¬Ú‚ åb¹X¡‚õªH¡š¬ÚÒ x¯š¡°AªÍ«@ÊÕ­à›1›`Àµt›^ ¶\›d@'µ¸ N=B aûT"’5Y¶t 0ˆ!HıªmƒÃ pŠ~Õ¤MVh  ñ[¿  Lt  ©!ª'Fl )"’
"$dÄ’)!¦¨Fe )"’"J´fh’)&ª¦Fs€)"’r*<g$’))ª¡N   …T“P bE$¥U5H‘IM%i$WFRAC€ÃmÓ˜‡S™a°ƒñºs :Ü'1Éºádƒ@                ?ßà2X  " KÀ %à j*’’z”¼ ^#)"¢¡&KÀ %à€à 	p ¸\.— ËeÀÀ²ààYup,fd’$(&&Æ  1"j*j’Ìu8 ¦&'¡ÆOj
B*Äv˜!¢¦¨*,Ç` ªJ"b,tX" ¦&'¡Çl ²"Jš’$t|"$©¡«©GwÁb2b\g #)¢¬$ªG@ rJrJ"š\w´$§$¦'«ÇP€*‚’b4g¨&¢©©ÇA€2²*’
"”d°«"©$$ÇB€2²*’b*td¸«"©&'Ç@ 2²*’jš<à  à2X  " KÀ %à j*’’z”¼ ^#)"¢¡&KÀ %à€à 	p ¸\.— ËeÀÀ²ààYup,fd’$(&&Æ  1le blocks in cache.

dsflag:	DEFS	1		;Double sided bit map

zeros:	DEFS	1024		;Contains 0s !!

;	******* MAPMAN AREAS ****;

alloc:	POP	HL		;Return address
	EX	(SP),HL		;Blk address

	LD	A,(HL)		;Get drive
	INC	HL
	LD	B,(HL)		; & block numbermess	<frblk0,HL,alblk1,AF,crlf>

	CALL	getblk
	OR	(HL)
	LD	(HL),A
	SUB	A
	RET



;PROCEDURE alloc (blk: block_descrip)
	EX	(SP),HL		;Blk address

	LD	A,(HL)		;Get drive
	INC	HL
	LD	B,(HL)		; & block number
	INC	HL
	LD	H,(HL)
	LD	L,B

	t MANAGEMENT CODE STARTS HERE *************
;
;


;PROCEDURE dalloc (blk: block_descrip);

dalloc:	POP	HL		;Return addressrr

	PUSH	HL		;Check valid block number
	DEC	HL
	LD	A,(HL)
	DEC	HL
	LD	L,(HL)
	LD	H,A
	CP	A
	SBC	HL,DE
	JP	C,ranerr
p
	DEC	HL
	LD	C,(HL)

	IF	c.on		;** Range check block **

	PUSH	AF		;Check map exists
	LD	A,B
	AND	C
	INC	A
	JP	Z,mape in A
	INC	B
	LD	C,B
	SUB	A
	SCF
getbl1:	RLA
	DJNZ	getbl1

	POP	DE
	PUSH	BC
	EX	DE,HL
	LD	B,(HL)		;BC:= address of maDD	HL,BC
	EX	(SP),HL

	LD	A,L		;HL/8, A=Remainder
	AND	7
	SRL	H
	RR	L
	SRL	H
	RR	L
	SRL	H
	RR	L

	LD	B,A		;Set bit ASàRE%8‘E9$QZEROŠ
 RE49@ Ö¬$QACC—€ KÂ %á@ñ 	x ´ úáv–ø0UÚ[à€Wio 5]¥¾  Õ~º_®ioˆ 5]¥¾ Õv–ø`UÚ[á@Wë¥úáh»J| ¢í)ğ ‹´§Á .ÒŸ ~º_®‹´§Â€.ÒŸ h»J|8¢í)ñ ë¤CÀ <(  ;V‘  Ä< ü·`€âµ°AøÈW `@Ñ€#>Ù" Ë_2YµÄ!ààçr îÉ€ . "à€. "à ˜ë $QABÄ€RE%8ëˆ$QAZ¶ BE%¨ì$QINCÇ€REäTxé€$QPOP¤ bEõ(èÀ$QPSHB€ bEU4ˆìØ$QZEROœ   …USP RE5%I@ Ö,ÂÁq²Ï‚¹ñj°X²¬W+ú>ÄÃöZõ¬~½\¬QÀXB€[Fh  åbˆZ£à	]RÍ  A	T~+ªY´œÊÅ…ÇààQ›L€¡vXQ–½x¡ì±àÀË~¼Z.V+UêÍ  µ  "€ -İ¥'‹EÊÅj½Yµ€›XÀ(  HL	Address of byte

getblk:	PUSH	HL

	CP	maxdrv
	JP	NC,maperr

	ADD	A,A
	ADD	A,A
	LD	C,A
	LD	B,0
	LD	HL,mapptr+3
	A
;
;On exit:
; A	Byte with bit set
; B	1 - 8 => Bit number
; DE	Points to low byte of address in MAPPTR (length @(DE-2))
;


;GETBLK
;Converts Map number & Block Number into address and bit number
;
;On entry:
; A	Map number
; HL	Block number
	INC	HL
	LD	H,(HL)
	LD	L,B

;	tmess	<alblk0,HL,alblk1,AF,crlf>

	CALL	getblk
	CPL
	AND	(HL)
	LD	(HL),A
	SUB	A
	RET
åååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååå€ Y·\›P€-ÅÚC¯àÎÒ{` !œ DUÜ|XaóüC]A˜oû…ÆÍ¹ b5II=K€ €¢Áq½GPj"*ª?  [Š/«ªår„jX6÷?MÀ'é˜Í§@È Í¨ nm: ×PmO` mõfÔ E‚ñÇ ö+UÊÀE‹–8Z,èØ W°gi¿ƒ@€Èë  ¡â*î¯Xaè†ºƒ0Ş/óÃX±6®V¨„ WğaW°a P:À (C8Š»ƒ+ÆVz!® Ì×‹ı¢á`†Çàx<F^­Šî·è‡  …€¬G%¿KÀè‡  ?C/Óğ	z ?OÀ5à 4t9Y´Xú~ ­Ä P°›K/Ó¨	út­Ù#¬ »²8   ¿OÀ¸ë  ¿NàØË  Ù/Ñ°şır¸@8 ní!FXún?OÀ70üÎ)~Ÿ€`p;˜_rµY¶¢áE °«!ú6?ß£`ı’:À ,`Ë €ˆÙ¶9^£®  ·^,Ú„ õx²Zªğˆö ¥ »,TË´¬@!\ºÁ<­ÇÀ@!À`*a@,ôş(…QÓPS dD•45$H%M]JINIDSK‘SĞàTÄÄô8	1.INILOWPÒQ`d4TÕE˜YIJVERLEN•‘T“TÑàU5$Äh DEBUGŠ €TU%$õ(  FREEBL”WÍcA‚4@†  hp$B* 2@ ™(@R2œÌ¦‘ŒĞ #M†QLÊr;NB±”ä     xÔD !ˆ`ĞPøÍ  ¬:x ¦à: ‰
ç#IĞÊ 1æ3X€HR2˜L‚°Şc5ˆ‚	Èr2œÎb €¤D*Ç¢A @$Œ'C	°@d4œÌb)Èäo9„“q¤è 6˜N €Z 6MÆs¡ @$‚ˆfÃ)„ä G“¡”æ 3æÑ ‚l6Ìf¡”@b6Ìf± @f9Í¢i„à FS(€Äl7˜Íb!¬@C0˜ÍQÌÒz2ƒAB@üÀ "6 ;V Ã¨À”CB8	 ŸîÕ€‡  p ş ?İ«  &?D8  øş(àGéĞ ıà ( L~‚X"A H s+ÆX ğ2À@*ñàœ üfÔ  Ş  ÃäúH®ËdFVô2± Ç¶Xœebqñ,PÆV ê:à q@yâõj±B5¸›V@Ü,Út áfÓ  u fİ€AÖfÕğ7ˆ„ (`!œE`Á‡Çñ‚f¼_ã«O[²0j*’’z—  1Ø¡ò Í¼ÀŒK…Æ~‘„fcCÔu¢"¡*£ğ ¸ Bñz±Z®W«”#t€´HÂÍ§@ Í¦ ¯mìfÔ E‚ñfÕàU±İ.Ép¸ÏÂ20ŒÌhfÕàQz˜î—d¹_À&•¥C¡Éà` ‡‚‚\g×0–<e‡YcÆXu–<e‡HàBB\n?Z,WYVNz#ÆU¥rŠÏÂ³q~í)6®+…âë°H,®fÓ Vo‚ˆF €Úa8ÇSiˆÊr‚„”
Íµ ¬;X
¦aˆØo1šÄã©´Äe9ABGÆİr±OÂ7)xFVu¹Yµx_OÂ€ |~^¬W+¬FV—…daY9Ö	`±[®û´„ë`¼\ àC’ƒ7OÀ¸€	aÒ°b|p„MÑlö²aQ g	ÜFwŠØw”Öá9ˆÎN)xFVu¯Ëì:®İ·KÀ
ı–ÅgÅ¨ z2fßà‹dCƒ[/Q•¾  Q å ¢|åfÛ !ÔŠ¤¤¥À â ª°€€H  HFˆ  @!pÒø@.„Â†>@ÂÒx½ú*¯ "¦#¿OÆ
Àîı7Ÿ¦cÅêÍ¸ /ëÊ® ²GÀ—  p²@  Ôu¢"¡*£ğ ¸ <ñz±Z®W+Ô#c µPâÍ©À!, Íº`.m: p´X/+­O 0r2’**g  œÄg&Xé–e™a¶Xé–	ˆpH($Ùr¶X'YÄVrœÚ­—[Œ2Ú­ NP®v”œ-*ĞÑl±Z¬‰ˆÖŸïQÔˆŠ„ªÀ âÅêÅj¹\¬P¡ fİĞ6 mP6 8Y´è›P€-ÅÚ°hÜÀq@—…ÂÃ»$#\@™µ,	†  ADƒ)„à 7™†ó¸4$` øë “ÀÀ7è‡  €ĞËôü[ˆ ìVm,`YÒğ  r²@Ä+6À0B–J¼e¢©)'©p ›s@Ç P³ı›K-ÖõA¨ˆ¨J¨ü n(¼^¬V«•ª« ÚØı7 Ÿ¦`6 k 6ë8Y´è #]@·”uyÚR¦àôÌ;\.Sëõ|Õğ<@u´Uì—Êår€I +4  p—„ec¬è#:ˆÀÄa° F}µ_®U3 ~@OÓ ÚS¯`éÄı8ß£` ú6
 '…ˆ ı8†§ È`:ıeÂ¸ 2ı:„§@ˆØ@! .±Æ  ‚ ÕƒõÊá Y78… Ñ0<!ƒI“¸ùn(EX  üİ;…Äb,  Éğ  p)š  x ‹  x F~\
£@° ¾­Ñ°\Í¡@!†#t¼ ™· ’İeJÌ  ,˜È€$BDOSŒÂ€RDd5Hè $FINIO“ bDdäUthîp$FTXCG… âDeE„5Ë $HNEWœ   …’MÓP RD„äUy@ Ô8Z  á`¸İ¥°  æ#93@ Ld,$ ¦'¡Ç@ )"Br*¼d’$(&&Î   …R“P RD$Dõ8‘!1=$PERRIT” bD…DU$Ø‘!A16$STKLMIPÕ bD„U$H‘AIMR$OWNER” MIÀeÀ à 	p ¸\.
 — K@åååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååå ®Wë•š ?\-×$U€ #€ ‹   @ Hà|™Ï¢óx‹ [ñ fÕ°+”fĞ ’O ƒáğø}ÌcÃ§ÕJ cËìÚ\ y;™.ˆ8åfÕ°JÜU‚€·è `e†Ya–Ãø =Ya‘€!Ö^³ip AòÅB7ì›@ /)}›K€ÀfĞ EÂåj±O.` *ÀÀÆm8 >³iÀ xÍ¥ÀàS6— 
°@6ı 0Ya–•ğ Ñp%›@ Àm  EwñäP™WÀüne_  #ĞÃ€<fÒà ğ)›K€"¬ åf€ 0 ÒNG#yÈ@$N‚	Èr2œÎb!Şn:MÇS(€~ EäáH€H‘Ğ 
H„ˆ§ ÄˆŠ
Jj‘à@
HŒ‚†©õ ÄˆÈiˆ(qĞÀH‚˜‡ Ä‰ªH(‘Õ°
HŠ¤¥  ¤‰
	‰±ß H¨Š¤›
 Ä‰êéÈªQÕ 
H Š¤¥ ÄŠj‰i‰³€  …QŒSP bDd4Äõ8‘1P 5Y –€ Û§à+˜Èe—Å¦ë,
~	¬°!Pn²À¤á ååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååååaŠİ7¦`K•º6ƒYµÂİÁLÚˆ Án›Ó04ğÍ¨€Ñ° Ét¸\gÅ»!Êİp«Ù´ ºn7LÀ0Ãº:Š‰ÓPã  ‘1=Np   –€ Û§à+˜Èe—Å¦ë,
~	¬°!Pn²À¤á €!Ö^³ip AòÅB7ì›@ /)}›K€ÀfĞ EÂåj±O.` *ÀÀÆm8 >³iÀ xÍ¥ÀàS6— 
°@6ı 0Ya–•ğ Ñp%›@ Àm  EwñäP™WÀüne_  #ĞÃ€<fÒà ğ)›K€"¬ åf€ 0 ÒNG#yÈ@$N‚	Èr2œÎb!Şn:MÇS(€~ EäáH€H‘Ğ 
H„ˆ§ ÄˆŠ
Jj‘à@
HŒ‚†©õ ÄˆÈiˆ(qĞÀH‚˜‡ Ä‰ªH(‘Õ°
HŠ¤¥  ¤‰
	‰±ß H¨Š¤›
 Ä‰êéÈªQÕ 
H Š¤¥ ÄŠj‰i‰³€  …QŒSP bDd4Äõ8‘1P 5Y –€ Û§à+˜Èe—Å¦ë,
~	¬°!Pn²À¤á Sà4‘E^ / –€ ?\¡€uÊ 4\'á•Ö_§Êá€†  x   v¬/×(`İr€!†ëõÊ7\­	øFå7…ÓæpË  ‚ bD„ÄC…ˆè $HLD8YŒ‹ RD…„ˆé($HP8X€RD……˜Éà$HST8H—€bD…5C…ˆéX$HST8Yœ   …RSP bD„ÄC„x‘!1á"$HLD8CI RD…„8‘!MPá"$HST8TŠ
 RE49@ Ôì$QACC—€ KÅ %    rºÃ w	xFV¹]a   «KDB \®¶¬Bø_.¶( v¬.¬CÀ   €µ`É€ bD„ÄC„8èH$HLD8Gˆ bD„ÄC„ˆèÈ$HP8C RD…„ˆéˆ$HST8H—€bD…5C…IÀ  …RP bD„•%5I@ ×0Z  *¤à € UJ@A  ª•€‚€ód „ , @– "€-×+D2Éq—„n0³ıºåeÙU Â/ÊÎ¶K–û´Nb3ÖÉq•„l³Ğ€^¸İ¥0 ’ãeİÚR„6ä Ez @ ˜4„İeáYú.Sè|Ü"ª ·vŸ®VŠİÚRT<ní)¨èD Ÿæsè¼Ş"  "1° 0Kp¹Db2ğŒ¬ár†VîÒ€,áÀb0QÜ#/ÊÏĞËõÊÑ9
Îa3õÊá€€wiH@p¸O  ğpœDgK„â#8?\­ö€N&: ITÔ#>`‘I=YJ3à‰ÕRS#< ‘!IJ2FIc"@‘55If2`‰ÕÓc3€‘]I=YJ32‰ÕRS'   …RSP bD„”ä•H‘Y%2$WVAIL‰Ô“Õ” bEu$õe(‘9MF$HCPMV‰QST–`RD”ä•ˆ‘A1$DCLN‰“Õ bDE4ÄdÈ  $INOUTŠ) RDdÄä)@¨Ö$INOUT—€ KÀ€%à€i"2br¼ ^¤.  — K %ÀÀà€	pP¸0\. —	 K… %Â Ğ    í=€ `0ì ırˆ€ è…  n[¢, !°`   D  ° ª€ €    Í  †‡ ÖXhpe†‡ÒğŒ¬ëd²ÃC;,48"ºÜ.3˜ŒäÉe†›W êzsÛ®Wë„zú² Ò²ú^@5C‹%–
Ş§§0=ºåh­Å Æ«õÂı+ _¥ä ô@ô¼Y&ğº|ÎÉu˜+wiI’O †Iš!  1•p
Hˆ†˜  Ä‰	*Jj“€  …RÓP bD„TåE8‘!M=$HEXIT”  MN@%  	xFÖâ 	]Ö9|¿\­×+º!B £—YxF :Ç.V¨¨  ¶Å6¨8 Í  në…ºá|ºß®˜è $HENTSŒ–€RD„U%(éx$HEXIT‘ RD…4ô8É$STKLMœ   …R“P bD„ÄCDx‘!1Ñ"$HST4G‰Õ RD…5sI@ ÔÀZ  á/ÊÂ7+¬œ##ËÂ2°ÖÉq—„eaÖºÜ.3ˆŒà#9ˆÎB7[%úáh¸Ø¤"[õÓ  Ä‰	ˆ†ˆñĞpH˜ˆh‘ Ä‰
j†ˆñÑ H¦¨h©' ¤‰
jæ“€  …RSP bD„$48‘!]N$HCERRIÕ`RD…t5X‘!	MA$HWSPC”  M   ‹ P   `@  `` `€  "ƒ‰S“ÕU8  ‹ €  a h  ¯a@	@ "ƒI“¸  8Í  Àğ€p°p 84@ µ¼“ ¤ˆH‰êqá 
Hˆ†˜ Äˆ‰Éˆê‘’Hˆ ¤¦© ÄˆŠiˆÉ‘•p
HŒ‚†©` ÄˆÉ)É)ñàÀHŒœ¦Š£ ÄˆêIêÊQà H¬‚’™0 Ä‰)‰èqààH† š­ Ä‰ªH(‘Ğ0H’œ’©* ¤‰
	‰±à 
H’œ’±  Ä‰¨©ªK1‘àH®œŠ¥ ÄŠÉˆ(ñà€H®¤¬¥ ÄŠêÈ))“€  …QŒ“P bDd”ä”ø‘9]$FTXCG‰•Ô"€€‘%9=UR(‰SÑQ¢€@‘19
P5ƒ‰S“ÕU%à ğ 	x H’ˆŠ/  —€€A¤ˆÉ‰ÈRğ 	x¼\ . –€ @  ŒH’œª©À€®P  j¹Y´˜Êıp¿FÀP³6“ 9_®èØ
WŒ âD”ôDTn  Ép°\eáXVå=-ÅP  å~¸O‹Q@`€ H`uQ€Õ \¶¨ˆäŞ& !Áìx-İ¤!€,0[»HNª ú¦@wiIµM@   dRB%´_®ËT¼#+8@`K­Ò0t†,—õÂ¾Š ‚1Ağ^•„n·K­Âıp×Â1 ô¾ˆ a‡PŒFíPº« aÂÕ~¹GÄ0p	š  4Y1ĞPH„†‚§  ¤‰Hj±ÔÀH„¦ ‡v Ä‰hªJQ—à
HŠ¤¥# Ä‰
èh*qÑÀ
H®†«] Ä‰
êjs€  …RÓP RDD•5	@ ÖZ  á~¸\dáÖ*  îÒjğ 
€ [´„Ò¼ ±° V6@
€ *Ü"  ;JN( 6·v†”¼#+:Ï‹q@ÚB Ü!€#„CI€¥áYÖå>-ÅÁÚBœ-+¤€¨ª€-İ¥! CQ€UŒÂ^•œ.V©ÌFr‚ß¢7èúåp‚Z-SÒÜP$v”‡8U[€îÒ€!­`+" áhµ\­RğŒ¬á9ˆÎOÑôF*  «wi	Â8ˆ@ )xFVu¹O‹qAÚBœ-+Ş ?\®KEª·v”‡±@-Âáp¸GÅ pš  
­xÁÀx`(áq“Öï*  í"Ï*Â{,ø(¥Ò†sêÜP>-Å0!.·e‘E  }–=Lì³Ë ^g>‹Íâ6H„  dÇAÀ)"jªdt !&ª¦*Î   …PŒP RD$%9@ Ô Z  W{ÏOi“  ¤ˆH(Js€  …SP RD4Õ‘5AJP 5 u†—Ìj„&ê  
öLt’ ¡¦¨G@ 1"
j‚”à  …UNP REd4Õ‘Y5AJP 5& u†‰äe¸ *x[ŠA1i|ÀŠ ¡²Ü0Uì•€¡ö7Âëpû&: IÓT#  ‘Y5AJp  …UMÓP RETDTÈ‘U%9NP 5 ~¸^-û„ô·É!Àx“CQñP~¹Y  $PzŸ’gwˆ JºÄÀ É=Ú°~ºNCWë¥úáx´\%ön(‡‹±ÀÔò†Hç¥ÀàXy[Š'áâLPrµX¥0 œ	u‰€—Y=Ú¸`´\' 0 , ºÄ  åÚ°|¿]/×(ø¨3hØõÂár‰€—ÈÍúéŒÁ RD„U%(è $UDEL› RET”å9À  …UM“P REUõ¸ RETÄTèè $USSVŠ REU55xéx$USVPœ   …’M“P dõtäU%)A Õô\ . —€K %À à`	q ´ ÂÁqˆ° áb ˆhÈ ˆ  dˆàà4  d¿Šb‚óø(-°Ôò2À`
 6 Æ s€hFw	„B0 r^•™e@Ú[    •ª!À SÈ}Ìw ^¢ 6 9EX ›_ XÌş'„p( in(2Ø$p˜ë ÇX’éŒ¢€bD„U$HÈ°$HERRŒ‡ bDõtäU(è OWNERRœ   …’MSP bD„”åe8‘!	iJ$HBNZI“‘àRD„%9@ Ô„Z  > >¨0 ]nÉ YÖHøÀ²GÀÀõ’> ¼¬•»ÁÚDdÇD€)"Br<t4’$!'-GEÀ)"B‚œt ’$!-)G@ 1"BJr²œà  …’MP RD„ÄD(‘!
P 56 –€ 8ÊÂ7„İr¿\ WÕ ~•/Òòªx°Y.2°ÆÅ!7\¡W•) h†mWë…úV@¿KÈ ƒÔ2ÁdÇF@)"B
"t ’$&"!N   …’9@ Õ$úá€ ’pÖ& C$aán(R€É<_îV«
(Äa¥ğ¡îÁh¸B`Ñ¥.0Z.‹Tö$G``2ù'€CõÓ  ¤Šª	ês€  …UMSP RET4Õ‘U5AJP 5H  C »õÂ!  $çX˜ iˆÈÏW+ Dlån(â€XLFK`Ñ@ õ[†a C…ò¯~ºV‡ÀİÂÑÂê ûåúé€ RET4Õè $UCMPRœ   …UMP REU5E)@ Ô$úáx´X.ë•ªİqµ[£` –|›£@tFİ £ÖUş uˆ@ »´„D&ˆ@ iIõ{@«vYà@>-E( Ê¦‡lÛN Å €!¨›iÀ X"˜ 3m8@!Aàm§ b€T`ˆ Í´àP@N  ¶œ Àiˆ@NÍ¸€@›q &@6â A@mÄ h†Vèºw 7\-Ñ ºád¿\#á€]Æ·vœnÒ“êŞ ÆãÀ¸aàã¸İ¥¦`$ıp†u»´¤úº ñ¸ğ.zVáñ€E¢İ·Nàëº4 7\aQLÓP bD„tõDø $IODEF”  MU  âD”ôDTix ¼Z  ıq°O iº*  ®Wÿ¾_®UxË€ Ú† }²G\ n OOöèeºùp´[®ËõÊÍ¨`×+…ní!2®Ã‘Š*  µ0‚ÉtˆÀà4  Œ¢€bDDäÄuHÊ$HERR€ bD„tõDøÈH$INIXœ   …’L“P RD„TåI@ Ô€Z  á`—„ea¬rù~¹[®V+tB„ 7G.²ğŒ¬#u\­V   ¤‰©Ê‘‘à
H¦‡8  …’LSP bD„ÄCEˆ‘!1Ñf$HST4X‰Õ`RE4¸‘U9A.P 59 –€ ?\¡€uÊÑpŸ„nWY|.Ÿ+†X` õÊ7\­øFãr›Âéó8e¢qœg1ÈFëd¿\,‹…Ú°~ºc"@‘!1Ñ":‰#  ‘!1Ñf:0‰Õ#¢€‘!MPÑf:`IPÒã¦ ‘U9A.p  …’LP bD„ÄC…ˆ‘!1áf$HP8XI`bD…5C…ˆ‘!MPáf((IPPĞå  @Qªıt·FÀStl7\-Ñ  |O Ú#â£uÂ3@ Ld’$"©)G@ )"ªš¢”à  …ULÓP RET4õ	@ ÔØúáx´Kâ  rz[ŠGäà<<]Œ ¥óó4   	À—Y4Ø& EgHÚ¸uˆß/×Hø Í£ ×Lt ’*¡§¨FL€)"ª*’¤à  …UL“P RET4ôé@ Õ„úá€ “ó¬L 7Dhg[r® :ÃKq@|F\¢gû´ˆo¾]g„ O€İ«  9'İ«»åúéu‰Ÿç‡iŞ9|ºÏ»”  İ«XmÂ+'€ 7jáÖ#|¿]!¡{  € RET4ôèÊø$UERTœ   …ULSP REU55h‘UMYB$USSWISS RETU%I@ Ö úáuˆ@ Êù¹S  ÀpÚ°|¿]/×„  “€À $¼#+5]f#X¬V»Wë¥úá€ •ór¦ %… â¡t '­İ¤'Ë¬œv¬®–«ÕÊırŠ€à4  ~¸\/qİÊ ]nx$í\:Ú,åŠÉ~¸X,Q0 Ò9¾@À¡úéŒ« RD„U%(ê`$UERTP,®5¢ÕÆ(ºØ¯×ní!?\®7iI‚İp²Z-ñ(f€    2c/à‘!IJ2IP”ã)€‘1%5>:ISÑ#  ‘15=2BI‘Qç   …SP RDÄD•i@ Õ€.Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í Àë•êÅ~¸Ø'…ŠÈ@Y²ª€ø ?\¬‹,XË²Ã°È`Í  -×+…úå`…Û”hºád´Z#âP8Í      dÆUÀ)"B*’”e &"$¦§Ç@ )"b"J´e,’&'"£Î   …SÓP RDÄÕTÉ@ Õ .Ë>
 ¬Ğ  |€~¸Z.7ëŠB%²Ï‚€+€Í À«ªÅ~¹O‹Q@9‚xX°ª°ˆMf€ €K¢xXŠ¬Úb xs ‹VW 0X-+6 4C/»ò 2Z-‹D|O ™   „   €@˜Êø$HERR€ RDÄÕTÈÊ˜$LNEGŒ¦ bEuTÕTÉÀ  …S“P bDÄD”Ôù@ ÔìÊ|ZŠ ãá „  Áëºár¿E!vè¥Æí58İ¦ øÀİ¸ÖîÒ“Ú ní!	¢ ÚRp8Ø®Qñ<f€ ’ır†ÀÆ €,`	‡!å¬'À8D  v”UdbµZ2_®İÚBh¸^®Ò“EÕh  FZíªñ~ºGÄÕ¦ ­ß®—ë…Ö`4°VîÒêëvš.«@ (n¿]1–
HŠ¤¥G ¤‰ˆ(JqĞ 
H˜‚ˆ‰  „‰ˆH1Ø
H˜†š¡© Ä‰ˆiª
Q×P
H˜ˆŠ‡Y ¤‰ˆªJQÖ°
H˜’œ‡J ¤‰‰È¨ñĞğ
H˜¦ª…' „‰Šè1ÒàH˜®©< ¤‰ŠêŠ³€  …UÌSP BEteH‘]$WFTUIÑ‘`REt%8‘]9$WBT‰ÕÓUS bEuTÕTÉ@ ÖTÊÅhºÖîÒ`å[»HDBk²–€ Ïw%Ö`4­İ¥ À¨][»HDBhÖÉ>=ïX„  [»JL—ë…¢Z g±@*Õ~º]b  òKeÆ Ë,FË	-ÄCÂİQ cñ€2Ë-ÄfH„  <-Å00AnË Š !–Xq–²Ã!‰’-Ùd@2Ë2Ã¬°ÈAäE6	€˜éH$WABSš€BEt%HèH$WFD€ByS@eÆí% OÑô@Úx²c  ‘1%5>p  …UÍSP REtÔôH‘]5=V$WMODF”  MW€  ­ÂÁr‰ˆ€[­ÂÁr–ïª¦ & 2Ï€‹-øx‘Ï"òx0u¸X.Q0Êz[ˆë1@}üF¦Xe– Ù  Ä.ĞŒ a  øµd:İ¥&K„|J ™   „ dÆV )"B*’”d’+ ¡)ÆP 1"º"Jj|t,’+¦§¢G@ 1"ºjz"4t”+¦§¢*Æ  )"ºr*<à  …UÍP REtD•h‘]%YVP 5Z u¸X.SÂ©Ì€7ï*( /#Eäğénò¤àò¹ì^_	† Î·Ê. 9OKq 5f(¿€B 3,pË† lĞ ¢`4²ÎlYí„  2ÏŒñ<0p‰@à4  €@˜Ê $HERRŒ bEtD”Ôøè $WDIV€bEtD•eXÊ($WNEGœ   …UÌÓP REtÕTÈ‘]5U1VP 55 u¸X.SÂ¨Şx[¼¨ ¼y“Àg¥»Ê€Êç±y|&åf€ ƒ  u¸X.Qp›GÀgÆC  Œ™€RDÄU%(É REtdEXè $WFT‹€REteEXéh$WNEG³ bEuTÕTÈê$WWMULœ   …PP BD$eH‘	QV$BFDI‘‘e  Qàyá"Òw v‘#wÀnÉ'!€= GY1ĞPH„Œ‰ ¤ˆHÈŠ±Ğ H„Œ© ¤ˆHÊŠ³€  …PŒÓP RD$ÔôH‘	5=V$BMODF”  MV ï* í"8\`â `áqƒ€ğÀIÂã[¾ªp 8 oeŸ V[å.”3ŸVâ)ñnÈ­`€
ËÃ ´»,H^ IQ AìË<²¤FC,âÀB²GÄ p	š  €,˜è˜$BMOD€ bD$ÔôDhè`$BMODUŒ©€RD„U%)À  …PŒ“P RD$D•h‘	%YVP 5W p¸ÁÄx`0áqƒ€w• e¾]¤C{,ø(]Èz](g>­Å£âİZÀ! –<Òì± ]z8%D±ñ–q`2Ï" 2İà>'† ®Ò#$|J ™   øÉƒ€RD$D•hè $BDIVUŒ© RD„U%)À  …PŒSP RD$ÕTÈ‘	5U1VP 5@ p¸$LNEG€ REtÕTÈé0$WMULUŒ–€bEuTÕTÉÀ  …UÌ“P bEtD”Ôù@ Ô„ B   Á¸€y €±,.Ë
²ÂÒÀ Aq“  ÄŠè‰)©ó€  …SSP BDÄeH‘1$LFINC‰‘PàRDÅ59@ Õìúáh¼^­Wë•êå0VîÒ‘šáh†×Eâõj¿\¯WZİÚB"\.ÒİÅK€€án`Æ ‘’yk Iç†ğ   ¥&K­Âıp¿\n·¬ö¾ˆ‡¥ğŒ@u¸İgµğŒ@=/„b @`#u¸İb1Ú¡uTÀ‰xFVºİ1ÑPH˜Œ‰8 Ä‰ˆÈˆ¨qÒğH˜Œ’œ‡  „‰ˆÊ‘Ô`
H˜¦ ‡8  …SP RDÄDH‘1MU
$LABSI‘QàRDÄ”ä8‘1$LCMP‰ÓT BDÄ$‘1]$LWTIÕ`RDÄU%)@ Öüúáq‚H„Ö‹…ÚZuVpë¥úáq­İ¤"!5¢áv”Uœúé'…Óäsy’D&²ÂÓ%úáu¸\¬°£´Äãrºß®—ë„"  :ÜnW[õÒË>2bÁ2ğŒ¬ënBMÓ L" [£`² üİ;…ÄmÓ¨aºt·F¡fKu–71  é¸0İ3[§à²Ü@!n›‚MÓ0L¼#+
İgÅ¨€ëfĞğéÔ$İ:Â @ eº6 §à¹ÜFİ:†§@Ëtjd‡Æ Öë,
^d7FÁpÓ6Î 2[¦á#tÌ%` ğŒ¬#jˆp ”B„ 9Y  „øµ:£a º6€.Q  rˆP€+4  ` ˆØ # g1ÈF6
° ¬æ#9:Ù1Ÿğ
Hˆ’¦¡ ÄˆÈi‰êqPHŒœŠ®  ÄˆÊi)ˆÑ™ HŒ¨°†¡< Ä‰ªH(‘‘HœŠ¯8  …QSP bDeTåé@ÖP\ . — K„€%  ×Ë  8Oá €}[Š £×¨Ì0ñrˆ@ È Nà ğ9|Ú­`Pµ`Á|¿\¡ ÕbˆK€+4  š ` ‡  ‚ JÜP Å0€’ş ˆŒ[ !ø€Pe6œ‡‘Ìèr4›Œâ‘°=Ê	qƒ‚Õƒ…òır°  ô| dp”l?Ÿ†Â0ÑÀVh 7 ÄˆÈi	iÑĞ HŒªœ ’ ¤@¥ºËŸ„6ë,v[¬°!Pn‚á¦m,nŸ‚Ëq@)ºË˜•°›[€™¶¤ fÒPã•t öÃ6Ô€‚mÖXÌÌ¶À,–é¸0İ3DmÑ¨X@fÖ &èØ,€nCÓ düİ;…Ù-ÓpAºf·IÁ€0 İ…„&mjr¿\-ÖXŒ ¿OÇç0ıº¾0­ĞôünÂÁ€6µ7N¡éĞ"Én²À¦æ   İ7¦`Ëtü;ˆÛ§PÃtènÏ Àºn7LÁé80 [§PƒtènŸ‚ÃÆéÜ,İ_XÚØÍ­ÀLÚ€É !ğTe€ ¶¤ºn	7LÁ7+tüzµ\­¨84Í¹@.‹UÊ:À ömˆ[ˆî‹Ä€ G¢ó6Ù€8Y.…›lÀ#¬  ş
Š
ÖXŒÉÜ 0<0M+œæã8€Ìi6DCÉÀÊİeRÍÖX<»à@`ˆ`^C0›Æó €Æl7œÌ¢1¤Øeßp 080"NFSĞŞr<ˆÇSa°#E@ÀÀ–ë,
şÀVh  D4œÌb1ÔØlh€ ¸øÈ`µZ¢X 2[Š ìb Œî#€À†m[…À`6­ˆ "¶‹‰ªJS€  …RP BDäUx‘!9^P5]—  K€€%À€à`	h „0pˆ€ ë…Æå  ,  ır¸B  İÚRÀÀ!P  ^•…g¥¸€!  0À­Ö"À Bhª€;HB 0†• ©¸ (Ş„ÁFpŠ €-ØT¤CO€U0‡J@D(  ‹ 
€ +…Ê^•Kq "  " 2~™ï×+ní!6¬à  \ ¤&•´ e‘D §”E b, ëpµEUˆní)îV >-ÙTÈÖ*À€Q rŸ„fc{õÊÁ[»HLè|9C",  á>-Äu¨ ş«> ·v”„ ao ]°”4w	ˆÃGpØ«  -İ¥!@„CTÀ¤áğ·—iH`p˜,;ø y	Ï Û„æ#98KÂ2³¬ø· Ä7Œ Ey€X Öá9ˆÎL—ë•‚x[ˆ—3 @ € "  ÊÅ~¹D5ÊÅf€ ×Â"© ,Ğ ‡VÀ#)À4‘%MB2N‰Ô“Õ”£$€8‘Y%22°‰SĞã  ‘!I: I‘Uã* 4‘!A16:	”C[@À Àµ`áh­İ¥"(0³$Äa§1üî|„æ ¬ }2IÆó €Ìo:›Œƒ¡ ‚3&I‘Ôã  ‘:2‰“”ÑTc¨à‘9Q%:2T‰•Ô#?@‘!A5Z2&IT”£;À‘!9^2@‰“Qç   …QŒÓP bDd4„´é@ ÖäÂıp°\n·ë•Â6 b1°€ û<­Ù§ğ€@	ƒDt»$ır¸D``H5•jÀA7ğ€Pz…Çğ¸P1
…—ğ°PuÇ Gñ pm '1}ü[ßÅÑA|î#3¬°Ø@J~Ÿ/á  †&?Y`°€Œıe€Ï×+…Š€,00¦~²Àá ¼ğş
 ïà0€L>2_§àX€8?‚# Ã-şı;€£`€Ã¤ ÓğÌ~Àà$|dÇ@ 1"2BZtà  …SSP RDÄÔôH‘15=P 5ˆ f€ ×EÆıqˆ€añúáh¸ß®5»ê½ %Ø¤"[,ø(³@ ²¢İr½X¯×ğ±Y+6Ux  „ë•ÂËˆ@ XUâå€ €K4  z¿\/ë”.0…Æ P  ‘Uã  ‘MQ-162¬‰Ô“Õ”£?@‘]Y%2p  …QP bDdDTdè‘9Q%:P5y—  K€@%  ÛR !§À HÚ°€ áàœwŸ™À9İÌ{A3È|>¹ïa€Hòæ½†0†Ş 7N ¦éĞİeÌ@¤O¤Ñ#tÜn™ƒ'×3h(€Oà H¥ºt
2]bğ.<[»JO*Â =nÂ­Ñ°PİeÌ‘ÍÒP&ë,F„7¬#PÀ›¬°!Ø@Ñ° cn@ÍÓ ºs7N@‘€nAÓ 5’İr¸Â"@ eÖád„P  piš  2[¬°!™QÀ§à“ul[®WD$ ¹[¤` 8 Ë2Ã,Vh  Íµ Q0 ÀAöİeŠ—ÍÖX¼ € ğPn²ÅOæë,
VAÀöm¹ -ÖX¼ 0èğ8&Í¡ -¨8,Í£À#ÆUğp·FÁ`u–/1* 6º€7FÁp½’İ€ÓpIºf	·Y`B0€İ:„§@ˆ`İ:†§@Ëtü ÀAö==™-ÓpIºf	€Oà Ktü;ŠÛ§àÁİ’õn²À¥áº6" µ¼fÖ¸¡ºİŒµ¼f× éøŠİ;‘¬°!@n²À‡a%ºáP K6š Œ­Ñ°XÍ¬`,Úhİ7›¦`›tl 7N¡†éĞ2~…athy[ñ#sÀ ÀÀpš  J)8ˆ 2œFó“6š ŒMÑ°XÍ¬`-ÓpIºf	·OÁfêø* ` Œ ûn‚À ÂAÊÍ¦€.éx0 7OÁféÔ İ:Vì«$ †MÓpaºfŸŸÁ¦U’ n›€ÍÓ0›eÀ–éøˆ·‡­Ó¹nÉnŸ†vCuÊã‰ —[Tf×àèÔ`ÑÙµDÂİãvK•ºn7LÀvm— p²[®WDH ºÜ,˜è $APPNDŒ­ ÒD$Dõ8Èˆ$FCLOSŒ† bDdDTdèÈ($FNEWFŒ™ bD„5ÕhÌ¨$HERADŒæ€RD„U%)À  …QP bDdtUDH‘R$FPUTDI”U bDdTôdH‘=$FELND‰‘SÓ bDetH‘A$FDERDI‘T bDdDõ$È‘=]2$FCHINŠ bD”äõUH € ¤á˜%ºu·NæèØ> nÚ  ³mø ğPnˆ€m  ·Œn(e7FÃ 6€ ìÛä Én›ƒMÓ0lRË·N¤Cãu,0d9AÁm  n²À¥æ%p·Nƒm  Ù´€’yfÑ@éÄŠİ8›§R;tŒ'³hPUŠ3i`6€ 0X¬ÚÁh­ÄA
  u·F„Q !º4# mÑ¡ Øz„P  pi›T ^,–m
 nœÂÓE›E µ„ºË±†¦ë,
†Z@ p…ü´x(ƒ‚ŒÚ^·d€,–mvn‚À»!›B€§àÃôî~~àë,.d¬€8DşŒÚ<´  f× ã*¨ƒ‚¬Ú^·aU 6ë,.fÑàma l3i%ºË“„Fë,^eU°6«›hÀ£`¸ r@‚7CJ Û¬°!ØP	 İ  ßÑ6éÄİ8Û§0Ctä	nAÓ 5‚Ñnƒöë,.Îj±[¬°!Ø@n“‚€`€ĞÍ  ®g‚Ñ‰PÀÙ´ğ PcfÒ€mvÚ¬Vé8* @ h  }s<‚€;E¢Í¨`lV+•ŠÍ§€€›u–/1$IODEF”  Mw€`âD”äõUIx ¼^$§¢"£KÀ %à ğ0	x ¼@Z -   ®Wd¼#+:İ"® ån¸Ã 6mifÓ mn²À®fë…’İ?\ÀÆUŸn²À¦f@`İ?YevU›e™ÙÖXì &·MÀfé˜Í¡@ÖXLİeÌ†éø.ş
OàP İeQÏàkºw-ÖXœ(·OÁ§ğ4PÄnƒ@¦èØ. n²À¬æKu–{7Y`Rp¡ÚİeVÍÖXŒÉp+uÆ³kH6Ó ·MÀ†é˜Í¡@ÖXİp²EPq"Jrzª§  r·\a€6´€³itüs [®H«€ 9[®0À›Z@Y´ŒºË‘˜V<º~‡ÜÀë…’*à@VëŒ0fÖm¦n‚àĞğ!›@ £`¸0<fĞ ë,
În¸Y"¨8‘%=€€9[®0À›Z@Y´Œºn7LÁë…’*à Vë›L€¶ºË“„ Vm= <›¬°+™ºádŠ¸•ºãfÚ`èØ.´ º6‚ƒÀ†m  n²À¬æë…’ıp¸D@ ÊİqŸâBø@%ŸWÂõÒİ.ÂÍ¥ V+6Ô †¬Ú İ9„§ ‹tl 7IÁP0 Ğ`fÕ &h  y[Š ÌÚ– =>™µÀºË©™,Û†Í² ÚìÉfÔ°éø,İ_Emp d·Yavó6¥€3hPtü~¯ïªı;ŸÙ´P›X@  `€ EŒÚd İ_XÖX\¼Ä¸`,Û" Íµ ,–ë,
~^­ÖX\¼Ä¸`/«6€ ‚Û°ñ¶¬°!™€Í   à›6—²]#â¨8Í     €ĞÉn²À¯àwC PgÄ@p‡R É§S™Ğ@b2ˆ†“™ŒÌi6H†“™Œ@f:›‘“ğ:H„ˆ§  ÄˆÈi‰êqß`HŒ¦ŠŠ—ÄÄ‰j	ªÑ–P:HŠ¤¥q¤‰ˆ‰*Ñšğ*H˜šª™²¤‰Šj¨S€  …Q“P bDe4”Äi@ÔĞ\ . –€ 8D@ 4  r·\cà4  n²À‰æë,în¹\ 0 ëÓğ   íX7\®ˆ fĞğèØL n„àë„U@€5ˆÊ€Tp° İ7	¦a+têna  2İ:†§@Ëtl@2[¦àÃtÌnŸ‚Ëq aºn	7LeHÌñ#n@@À°ÀºáAÀfh  > ²@À€ÀÜ@À)ºË—˜¨ˆÀà+uÂÃ²À$SqZo3LÆ“a”œoŒ§3)Ğ^r2ÎF“¡”œoŒ§s‘¤èe´€âDd4„”èèĞ$FDER‰ âDdDU$HéH$FDORL£€âDdDõtÈîh$FELNDß€RDdTôhí¸$FEOFDê€bDdTôÄèè˜$FGET…€bDdtUDHïX$FPAGDù€bDetXí$FPUTÌ€bDeUDHËh$HERADŒÛ€ÒD„U%)À  …QÓP bDe4TT¹@ Ö ºåq„D€ Ë­ÂÉn—‚MÒ°Mªıp²[¦àãtœn‘ƒl–é¸İ'[¤b3%ºu7N!¦éÀ6ÉnCíÓˆuºp2O-Õği€xn¯ƒlëu|d·MÁé˜"İ/À Ëtên-Ñ Y’}n¯ƒìÃu|`[«àë%ºË¡›§à³6… ?WÇöÃ6Š  @ €,fÖÃu–c2[§àÓunÃMèĞ6ÀnŒ‘Ğ  şìÚ  ³@ m fÓ K6€ ‚Û` İ3ÀXñ–NgCI¸Î :Íâ!”ÊpŒ£ bDd4„”èÊ¨$FDORLŒ®€bDdDõtÈêx$FENRW€ BDe$Hè`$FRDLN¢€RDe4TÈè0$FWR‰€bDeu$ÄèÈØ$HERADŒ½ RD„U%)À  …‘ŒŒSP bDd”ä•9@Ö„\ . –€ 8D@ •ºåp„OOğÉ8FFn¹[¢  ºn7LÀ÷*İÚrp.ÒÀÍ¬ *& |Zˆ-×%ºn7LÀ3âÔPór·\mé¸İ3Ü«wiÉÂ8r»HCU›X ®éÔİ: Ã6*½š  7Y`Cp€<İ7›¦`™ñj(
°  ‡  9[¦` ¸ Ë2Ã®Vh  İ7 ›¦`•ºn7LÀ÷(„ r³l8…‚ÉŒÎ RDD•5ÉP$FACTŒ±€bDd4Äõ8è $FINISŒ bD„U$IÀ  …‘ŒŒP RDe$E8 €$IODEF”  MJÀ âD”ôDTix ¼^/ —ˆ K@ ,”l r±Y  Âıpë,
¦~²À¤á 9ú~ˆÎî1£úË¹‚×&2‰‘ÑU#  ‘INp  …‘ŒNSP4  n¸Y/ë„|FÀ0B f€ ’0S"‹È¥"	LŠ 2œFó”d´’!"'©Ç@ 1"bzš,t"© ©¢ÆG 1"2bzœd$"© ¢FOÀ)"B*’”à  …‘ŒL“P bDdäÔX‘MQRP5. —  K€@%  
ğÀ|` ˆ   Y  ø> c¬  ·ÁÁ‰p Í  ‚€ø*¡@˜É$BDOS€ bDdäÔXè$FSTATŒ‡€bDeTåèÉX$HERADœ   …‘ŒLSP bD54té@Õ4\ . –€ 8D@  øÍ  X š  9[®5{4  n²ÀŠáÖ   …Öh  İr¸B"@ eÖ!.   Àµ`İeÍ×ª :[¬°"xt] m¨ D —Â€ğd ú€Àğp#WÀ  Âd§cIŒÊ 7M¦QÑx #_Ã¢ø F¾5Än¶ë•Â .° íX:Â4Hæ#97Y`B0€.İ?ÀêØ2 $·\®ˆ\ nBÓ EºáS°IN    
K!)Hë ¢@$Â™Rõ€T@$N*“/ RDeu$)@ Ôœ¢Áx­Ä Q ¢D åbµGÅpp	ˆ  0À  )Âl9™@…C‘ÔË  ¤ˆÊêHQ‘ HŒ®¤¦› ¤‰ªJS€  …‘ŒNP RDeu%8‘]IM6$FWRCH€ÉĞâ‚ ‘%=P 5q ƒ‰SÑQ¥à ğ	x¼^ -  p¼Vâ€3b†ÃàÕÊ>+ƒ€LĞ  0èp°AÀ(ø8^,*Ü@<‘Ùµ˜Ê! 'å¸ #?3j¸ 4 øˆÚ/—[¥Âñq“ˆçå»!›Y€gæmW >Y.V+ôUÀ@§p»4  `¸Y'•Ã@| fÕp (aëa ÄˆÊ
ªˆ‘Ğ HŒ®¤†‘! ¤ˆÊêJqÔ@HŒ®¤¦› ¤‰ªJQÑ€H®‡8  …‘ŒMÓP RE4TT¹@ Ô4ÂÁh¹Y  4  n¸Y1PHŒ†’ ÄˆÊh¨©qĞ 
H¦ŠŠ—8  …‘ŒM“P RDT4„ù@ Õ4Z  á`¸Ï‹q@•| Ï«á tVå~¸_¬°!¸@~²À…á@4 ~²À®àÀúË«™#â0(„iÈ4  d‘NG#yÈ@i7§3(€ŞX¢@%©:õ€SĞ$R"© ë ¢@#â Fû€€à+6®€§cIŒÊ 2œFó“u–#04Lºu7N€vK$f€ Ó¸]üe  àk <
 ƒ p<ÿfÑ`éÜ.É Ù´¸ºw²AÀFéx.ƒ€­Òğ]›MÀY1Ğ H‚¦¦J¤ˆH‰êq‘@HŒ†˜§" ÄˆÈˆ¨ÉÑĞHŒœŠ®¸ ÄˆÊ‹hñ› HŒ¨°†¡ ÄˆÊ©Ê	Ñ› HŠ¤‚‰õ ¤‰ªJS€  …‘ŒLP bEUDI@ Ô¼Z  á  Ğ Êİq‡Û€  øÍ  £`(1ºn7LÀ¶m. €   š  7\"ª éŒˆ€bDd4Äõ8È`$FDEFNŒ‚€bDdäUthÉ8$FSEEKŒ– bD„U$Hè $UPDATœ   …QSP bDäI@ ÕäZ  á  Ğ Êİq‡Û€  øÍ  £`(1ºn7LÀ¶m— n²À©fë,naQĞë,^G@ ø 	3kx8FÍ  µ¼!fÓà Àñ›[ÀAÁmF nŸ†mÓ¹º43kx8Íª Á@=fHd‚|t ’"¡¤'ÆM€)"B*’”à  …‘ŒMSP bE$TäÙ@ ÖZ  á  à4  f€ VëŒ|f€ ÖXÌİr¸B"@ eÊ .WX„¸ v¬-òÜP/…¸€hÕrƒƒ,Ğ ÂÑ/„q°ª—  pM›O@ à»6¨  fë„U@€#  ü<ÇÄ@À|FÁÀPx f€ S‘ÈŞrMÂ‘œA&‘c*À‘	=N2$‰ÓÔã!@‘9]2‰•S”£,@‘!A5Z2¼‰TQ#.À‘!IJ: ‰‘SSg   …‘ŒMP RDe$U8‘I^P51 —  K€@%  à°`>Œ° „D  3@ +uÆn  à4  ` éÜ
İ7›¦`[6˜ 7\"ª éŒ bDd4Äõ8È¨$FDEFNŒ‡ bDdäUthè $FRES‚ RDe$UxÉp$HERADœ   …‘ŒLÓP bD4Äõ4X‘IMP 5S –€ +Ã !ğÂ"  nVëê|[Šá tF}_
öh  ñ[Š­×+„"$ ]`à›áu°C çiõu€Á—•Ö fÙpÄú`4¿\¬Õ† ¢ÆPû,8ËŒ ¬²(€,
 Ïña‡c CÀ Àíní!&ÃÀ€,¾D&«Ìæ÷i	6@–â *Ñj($+Öâ Qé¬+Ÿ¢à aæË?ˆ ÁQH]‡kÀg¡@–x
	¤C{-zbe &[õâ«x2ßŒ—‹…’ñpºß®V-zË L·ê©àË~2^"    2_®‹EŠõ`† ¯×EÖãe„ fYğ@gÁ ^<VîÒà 8İ¤!À@W†ä `¯U=î¶‹õÒá`¸Â û,ø(2ßMPˆ  ÕfĞàHp°\gĞ¹ğ.Ö?¾¬ˆø>ò±@.Q0–ıkßU¬P"eˆYai¨zz¿Ÿ/*îH"›À€ÃÑn(2Ç¬°Ã,2<a×pŠİø  2GÄ°p	š  @ !5’& ?«Na$EÀ° 0ò[ŠŒ±ë,0Ë²ÃƒÖ¨>? –Ad Ï ±“¤‰ªJQ˜pH˜œŠ ¤ŠH(ˆ‘ß 
H¤†š¡ñ ÄŠHiª
QÒàH¤ªœ‰  ¤ŠJj¨Q“H¤ªœ —EÄŠŠJ©Ès€  …TP BDD”è‘M1%:$DENTIVe @3P`p ¸\. — Ë@ ã,  2À ~ "  5h D  @ ³ı’ã+ËÂ7´¦  2D4P üjP U! ` Ö  ŞTì x2À ğ0nË²Â 	u„Ä8 +v®   Š–€2^¬W(ë  Ç¯ªş 2À  `İ–e„8 C€€b7jÀU€€U\ÂÁx²\¡Pní)8_V|Êå‚€Ğ ›`À  4  >±†ğp	š  2\ àHF€³m0…›`ÀÀÿ fÛ H8½`Ûx *¯ , —`x˜ )à  ÉxFVu³mH ë €p ù<8Êfó©ÈÆe&ã(€Üu6˜Œ§#˜è
$g’!"'©Ær )""btt’""§*GV€)""*ÂLt "$§FD@1""rb:¤d,"())ªFI@1""šb2dtd")¦$§Fe )"º"J´ft’+¦§¢N   …‘ŒSP dE$U4UI@ ÔLZ  ³@ ¨8Í `ø8Í¡ ˜È€$BDOS€ dE$ŒSP RE$dÅH‘I1QR$RNORM‰•S”àBDÕux‘5]
P 5Õ >-VC,øõb  dó6“ <Y·ã%úáh¸Ø¤"[6€ ,UúéW¯ ÓÓXWŒ¦‚
¼x2Ï‚ PU–!e„¦¦7 <¿€€Ë 
€A $FË> CÒİ> ’¦ÆZôÄË4oÖJ\Îo#“ÇŒ“è]–e¿OavXI–ûdˆ@ zäP]ŠG€0AnË Š !–Xq–²Ã!‰’xfÚà;$ôÕ(Y¶¸¢G $uzìP<vYP²ÃŒ°è| ódš À…»,Š(  ƒì°èAêgW²c! ‘19;\	UĞ£¯À‘5]^: I‘“#¢ ‘I1QR:L‰““Ô“c® ‘IU9A.p  …TŒP RE$äTy@ Ô( øµX,Yä°ÎÉ€ RE$äTyÀ  …QÓP RDD%t‘]1$DBRCK‰ÔÒàbDDÅ$4¸‘	]V$DWLUI•ÔàbDD%$5X‘]IV$DBERR”  Mp€…ÖXMœ >²ƒë™ ´>²âÜúÈpU4UIÀ  …‘ŒP T55DI@ Ô  f€ `&2I‘Ôã  MQRp  …‘ŒŒÓP bD4„”é@ Õ¤Z  Í  a  2İeÂ‚D¸  ‰ Õ€F¨ @ 0œVÂ§ÈD tˆP  Ë”f@à f@ğ@é—  àƒ4
    àÓ4
 €À°p#W€®h  C$I$á”är7œ£  ‘!%:2‰ÒS£+€‘!IJp  …‘ŒŒ“P BDe$H‘]J$FRDLN‰•Ô“ RDe4TÈ‘9I^(‰S“ÕU"‚ ‘%=P 5— ƒ‰S“ÕU%à ğ 	x H’ˆŠ/  —€€KÀÀ%à€ñ 	h  ª$INOUTà 
ğÀHUÀ€á€`«€ €!€(« €MiL  j¹^£¨8‘%=€ -Å'ğPF ƒ  	uˆ_¯ğËµp<p ‹„EÀ@\’Í  ¢. İp²G\üf  ® ş3    ²< #À@  Àµ`É€Á°p#_   HÊa2Îç#IĞÊ 7ˆ  í-,‡ÕŠåÀ&h  á`¼\l“âÔÀid+‡UJ }R ¹åtzuTğ€a°ú¨ †›à0Ğ\¤sÊàğĞ1œ«wi	Âê®@ªD ë[»JN·UO xªÎ U¹VîÒ„p¤u­İ¥'[@0œ~¸\¬W+ú^?JÀ6«ô¼ ~•€-Wéxı+Ú¯ÒğúVµY  êÜ€0\,ÛR Áp¼tˆ¢Ñh´X." ‘ bDD$U%(éÈ$DBRCK© bDD%$5Xè $DBWA… RDD%u8è$DBWUÃ bDDÅ$4¸èÀ$DWLA™ RDEtÅXêà$DWRCK»€bDEu$5XÉX$HERRŒØ€RDÄ4Õ	À  …Q“P bDE4„¸‘=YJ$DWINC‰ÑPå  TàX¨  [»JC€P¨  »JC ­’ëq¹GÅ p	š  8\l–‹ÕÊÅj‰àà6€4X.‹U’ €îÒÓ€0€@wiIÀãr‰àà6• 8\l˜é $DOVER€ bDE4„¸éØ$DWDEC™ bDEt”ä8ÊH$HERRŒ RD…ÄØÈP$MEMRYœ   …QS ®Ê@Pn±0 Ğ9$€ÕÃ­ò3~ºDÏóxŒrùu€Õƒ¬l §ë•†  FL )"Bšzt )« ¦(F@@)"š²Dà  …TÎSP BE4•8‘M%JP 5{ –€ 8X,V+•ÂÁh¹L•»´¤ø¹O'Õr ‚ ‘ÁYª! 'âe›Y@dô˜À:s  p $ˆM€ —X™şo¾]nÕƒ¬l ¦‹š  Ù  U›Y@ P dr¶;´B`³ÂÄ@êd²ÇL°Û,tË²ÇL°Û%¢>+€LĞ “x ¤‰ªJQ”À
H¦‡ „Ši*QĞ H¦’§P ¤Šj
Fs€  …TÎP bE4ÔTÔ(‘M55V$SMEMW‰ÓQSS%  U 	h 4  Ÿ„eğº\®3h Œ¼# fm /ÊÂ0À5›EÀÂ2°Œü#[Ä)íš  €l±Ó,6}	€‘ZİÚRD P ä2¦p† N{õÂù~ºc  ‘M55
:>‰ÓQSS#¡€‘M55V:,‰ÓQSUã$ ‘MAHÆ2^IÔŒç   …TÍÓP RE44ÄX‘MP 5§"N   …“LLSP RE$äH‘MP5l —  êä´ ÚKÀ ¬ x€  `,xË‡Ùa–Xh õ#ºÚ¯×[»Kx ÚRq»KxÚRqŒ OÑXAÖÁ~ŠOq€	ú#e®®Vˆd`²Ï€C-p#>-D ‹  ;HxŠD&¸Y  •Š! È¤Öh  É€ RE$äHËH$RDIVŒ¯€RE$dÅHğ $SEEDœ   …SM“P bEUD4Ù@ Ô0Z  á`¸Â(   v¬1Ğ H ª¨†›8  …SMSP bDtUD4Ù@ Ô4Z  á`¸İb   ;V˜è $GETCMœ   …SL“P tÔTÔd˜  $INOUT”  MCÀ  ğÍ    	†  FA€1"j²
Jdd$"§*)ÆC@1"B*ÂJ¤d$$)ª,G@ :j*j
²
Là  …SLSP bDÕd”É@ Ô4Z  ıpŠ€ É4ˆ!  ®˜è $MVAILŒ€bE5D´ÄÙÀ  …TŒÓP RE$ÕTÈ‘I%ZP 5)~¸O‹U‚Ä@h´_®—Y€ÒÁqŸ«ˆ¡M –€ /QÀ‚ …êa ”4® À˜Œ ñx² ’8in „Â–K´ˆG?-Ä AòÉ Y-sı’Í   vm7 u$öm  p¿\/“Êİúé› RE44tXéØ$SCLEŒ RE5#)À  …TÍ“P RE4D”i@ Ô„Z  Í  g…ÈàAÔÇp˜Œ{Vâ€ L ~:Ú/×åúé€ RE4D”hÈ$SPR2œ   …TÍSP RE4”åI@ ÔÄZ  Í  +À5Öå)á1Aòá†ìPÒ˜îA¢¸L ı`€ 0Ø­Ú¸uˆÚ/×åúé€ RE4”åHÈ$SPR2œ   …TÍP RE5Tä™@ ÔÈZ  Í  ‘À9ªë †–Çp˜Œ ùpŠÃv(ilw	ˆÁ¡ÀŒ ~0@À lVí\:Ämë…òıtÆ@@)"š‚‘”t ’)ª§$Î   …TÌÓP BE55H‘MY"P 5R –€ 3iõÂÕ/ÊÂ7á"0à`µ`·İdq° F}¸_/×KõÂÍ  daŒğ¹):¼V¶?®5¸ ırŠÀà4  ~¸Y´˜úFäıqŸOVh  |AcûÊœ ?€cÄB  	¬–±ıåa ¦SAñúå~¹\lRA¦\f€ Wë…ÂÅ>ˆ@ »  `‚F 'è¢ã>ˆ@ »ª 0A# ôFD&¿\®ˆP@eŸ ¶h  ·^/[ñ’ñÀ&h  !  „ÖKõÂ|Z¬" CE¢ır‹A‡+¬Ài`¸Ï‹U‚Å•B@®3â©êÍ£ ÄàÆ?¾®Pøş(†ìcûê– =O¦I-úåh‘Ï/ä €{Y‚)°ÂOh†§†ë•º!  ¢  [«‘ÀAÚRLŒ!”Kƒ€­İ¥$ËôFİ¿E# tF)G„í×…úå`´OL²à€·eRÀ0®Ã¯ ˜ 
HŠ¤¥d „‰ªèQ”pHš®¯’ ¤ŠH‰*ÑĞ 
H¤šª™z ÄŠIÉêI±›@H¤ªœ —8  …TŒ“P RE$DH‘IMU
$RCMPRIÓT bE$õTäH‘QIU9P 5Å~¸O‹U‚ÄP †pÀ1úá>-V ‚á~º]fKÆıqŸ«ˆ€
ë~¹X,—)ñTõf€ Ä P8>®˜ø2òº`W[õÊÁfÙpú¿\o×Le’$"©)FR@)"š‚‘Œt )©ªGHÀ)"š²Dà  …TÌ“P RE5#‘MAHÊ$SPR3”  MI€%    r „eBè%’ıp³h TŒ#u‰€€ËúésÇ„uxÜ.~²c  ‘MAHÆ:IÔŒ££€‘MAHÎp  …TÌSP RE4ÄEh‘M1$ULSVISÓ%  S 	h õÂ ?IÀèŒ0
p€á•úá~‚]bgùä^o¾N"7[µ`ır°À ë…Âk?\'á O[ˆïQ›õÓ% ¤‰
ièqĞ°
H¦˜ˆ‡  ¤ŠiˆŠÑÒp
Hª˜¦™, ¤Š©ŠjÓ€  …“LMÓP REô´Y@ Ô$úáh°\,›õÓ  ¤Š	éh³€  …“LM“P RETT¹@ Ô0úáp´OÄğ0 Àh~ºc  ‘A.p  …“LMSP Tõõ%I@ Ô(úáh¸X.ieúé€ Tõõ%IÀ  …“LMP T•õ%I@ Ô4úá`¸]§‚x `4?]1Ğ 
’ ¤©8  …“LLÓP E$äI@ Ô†  F@@)"’
r$t ) essed
	CALL	emptyC

	CALL	Srelea		;Wait for switch to be released

	CALL	bldmap		;Re-build disc maps etc.

;	Drop through to show that we are now online again



; PROCEDURE On_line;
; Illuminate the on-line lamp!

online:	LD	A,onlin		;Disc Free OFF, online ON
	OUT	(leds),A
	RET



; syserr:
; Halt, flashing LEDs, until switch pressed to exit.

syserr:	XOR	A			;ROM (& hence LED) ON
	OUT	(paport),A
	CALL	Sdelay
	JR	Z,fsexit		;Operator forces exit.

	LD	A,romoff		;ROM & LED off
	O…SP BDÅu)@`ÔÀ\ . –€ 8^+q@y‚ãz¹X¡  ÕŞ¬Ğ â!À eÀÀxr½Y  $|z¹GÅpp	š  ’ HŒ®¤¦›, ¤‰ªJQĞ H˜®¥ ¤ŠªjŠS€  …TP bE44ÄY@ ×ˆÂÁq¹KÂ2°Œü#3Ö‹%˜ Ê}²ÂŒ·éánò§àÁ\òşY
DC)¨¦ =X¬Û  ñ@ oÁ ñc ßT¨ 0/âpÀnD2šŠaàÜPz±Y¶Ğâ€ Ş!â=aÔĞ©A‚Í  â€›­Âqœg1È|dƒ€I„0íx«Ù'Ã)¨¦ ©À8Ã± 0y–#e„¦ ºDp	°í ï=ÙgÆ –#e„¦ ºE°d¹Z¬±ã,:Ë2Ãl±ã,:Ë2Ãc 0Lô³ Dn0Ë­‚áv’€À6ƒ,8Ë²ÃL°Ø“e ÄŠIÉêI±Ğ H¦†‚˜‹8  …SÓP BDÅ$I@0ÕÌ\ . — K€%  Ğ  üş
 àH€Í­`: !À `øZ  Gğ¬@fÖ°–  € , "À€Vh  ·UT	(paport),A
	CALL	Sdelay
	JR	syserr


; Sdelay:
; Delay for ~.5 sec.
; Exit immediately if switch pressed
; Called from Syserr: & Pchar: & in dkfran

; On exit,
;	NZ	for normal exit after time delay
;	Z	If exit caused by operator pressing change disc switch
;	HL=0	if normal exit

Sdelay:	LD	HL,0
del2:	IN	A,(status)
	BIT	chdisc,A	;Test for switch pressed
	RET	Z		;Return if so (switch active lo)

	DEC	HL
	LD	A,L
	OR	H
	JR	NZ,del2
	INC	A		;Return NZ for normal timeout
	RET

; Srele
„8Ê:À Vh  ·µ¬ e€ ¬Úf ·9]¤¼ *À€¬ ·b  ‘ñHf€ ‡C4  fĞó&2‚‰PĞÕSc)À‘%%R2Ş‰‘T‘#-€‘Q2ÎIT”£+à‘19: 	‘'   …“LP bD45TØ‘%%RP 5l –€ 8Z.7+Uš  3j€ à <^¯áÀÀLñfÖ0+›XÀµŒÊÅk  Í  ´¬Öá8ˆÎ3˜Œä¯d¼^#à%Âñrµ†€#ø8+Ù#à$øş6×ó1°À<?™†åüÌd²Ä,°ƒ,*Ë
2c  ‘U6:€‰QÒU# À‘!1Ñ"2\IQ'   …”ÌLSP RE4$4‰@ Õ”Z  Õbˆ@ÀÉ8‚  gå¸€>-K¬R)‡Ç 1aôÑ[»JC„ € Yùn ŠÃƒ¤F)ŠEaqƒñÖá[»JC€%¢>!‚ àFª€3@ ILÊtçSqæ 2œFó”eH’$"©)G@ )"šDà  …”ÌLP bE5dÅ	@ ÔÈZ  Í a:
;
; Wait for switch to be released & debounce it.
; Corrupts A,B. Rest preserved
; Called from DKMAN, fsexit:, chksw:

Srelea:	LD	B,0
relea1:	IN	A,(status)	;Wait for release
	BIT	chdisc,A
	JR	Z,srelea
	DJNZ	relea1		;Debounce switch
	RET



;
; FUNCTION Syst_sw:Boolean;
;
; Return condition of key switch.
; Francis has no key switch, so permanently in system pos.

systsw:	XOR	A
	INC	A		;Return TRUE
	RET



;
; FSexit - exit to monitor. Must flush printer buffers 1st.

fsexit: