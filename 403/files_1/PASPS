PROGRAM pasps;{Simple printer server - writen in Pascal}TYPEbyte=0..255;buffer=ARRAY [1..255] of CHAR;VARtext:buffer;A,len,stn,dummy:INTEGER;port,ctrl,block:byte;seqno:BOOLEAN;{Econet Externals}PROCEDURE ECOINIT; EXTERNAL;PROCEDURE RXSET(VAR blockno:BYTE;port:BYTE;stn,data,length:INTEGER);EXTERNAL;FUNCTION RXREAD(blockno:BYTE;VAR ctrl,port:BYTE;VAR stn,length:INTEGER):BOOLEAN;EXTERNAL;PROCEDURE RXDEL(blockno:BYTE);EXTERNAL;PROCEDURE TRANSMIT(ctrl:byte;port:byte;stn:INTEGER;data:INTEGER;length:INTEGER;VAR result:byte); EXTERNAL;FUNCTION ADDR1(VAR data:buffer):INTEGER; EXTERNAL;FUNCTION ADDRINT(VAR data:byte):INTEGER; EXTERNAL;BEGINECOINIT;REPEAT  RXSET(block,0,0,ADDR1(text),255);  REPEAT  UNTIL RXREAD(block,ctrl,port,stn,len);  WRITELN('Station',stn);  TRANSMIT(0,port,stn,ADDR1(text),1,dummy);  WRITELN('Port (pseudo Hex)',port DIV 16,port MOD 16);  seqno:=true; {Already sent one reply}  REPEAT    RXSET(block,port,stn,ADDR1(text),255);    REPEAT    UNTIL RXREAD(block,ctrl,dummy,dummy,len);    WRITELN('Length',len);    IF ODD(ctrl)=seqno THEN BEGIN      FOR A:=255 DOWNTO 256-len DO WRITE(text[A]);      seqno:=NOT seqno;    END;    TRANSMIT(ctrl,port,stn,ADDR1(text),1,dummy);  UNTIL ctrl>3UNTIL FALSEEND.