PROGRAM print;{This program sends chars to port &D1 on a specified machine - ie sends data to a printer server}TYPEbyte=0..255;$STRING255 = STRING 255;VARtext:$STRING255;stn,dummy:INTEGER;cr,result,ackblock:byte;cond:BOOLEAN;{Econet Externals}PROCEDURE ECOINIT; EXTERNAL;PROCEDURE RXSET(VAR blockno:BYTE;port:BYTE;stn,data,length:INTEGER);EXTERNAL;FUNCTION RXREAD(blockno:BYTE;VAR ctrl,port:BYTE;VAR stn,length:INTEGER):BOOLEAN;EXTERNAL;PROCEDURE RXDEL(blockno:BYTE);EXTERNAL;PROCEDURE TRANSMIT(ctrl:byte;port:byte;stn:INTEGER;data:INTEGER;length:INTEGER;VAR result:byte); EXTERNAL;FUNCTION ADDR1(VAR data:$STRING255):INTEGER; EXTERNAL;FUNCTION ADDRINT(VAR data:byte):INTEGER; EXTERNAL;FUNCTION LENGTH(X:$STRING255):INTEGER; EXTERNAL;BEGINcr:=13;ECOINIT;READLN(stn);WRITELN('Stn=',stn);WRITELN('ADDR1(text)=',ADDR1(text));WRITELN('ADDRINT(cr)=',ADDRINT(cr));REPEAT  READLN(text);  IF LENGTH(text)<>0 THEN BEGIN    TRANSMIT(0,13*16+1,stn,ADDR1(text)-1,LENGTH(text),result);    writeln(result);    RXSET(ackblock,0,0,ADDR1(text)-1,255);    WRITELN('Block=',ackblock);    REPEAT      cond:=RXREAD(ackblock,dummy,dummy,dummy,dummy);      WRITELN('cond',cond);    UNTIL cond  END;  TRANSMIT(0,13*16+1,stn,ADDRINT(cr),1,result);  writeln(result);  RXSET(ackblock,0,0,ADDR1(text)-1,255);  REPEAT  UNTIL RXREAD(ackblock,dummy,dummy,dummy,dummy);UNTIL text='FINISH'END.