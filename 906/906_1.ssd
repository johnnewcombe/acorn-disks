TITLE	Disk R/W & format routines for 380Z 512 bytes/sector
NAME	('Disc512')
.Z80
; modifications:
; 18/3/84 Floppy code now works on SS discs in DS drives (only an 8" bug)
; 19/3/84 Restore cmd has verify
; 22/3/84 Various waiting code for Tunnelling etc
; 4/4/84  Dkman edited to produce DISC512

true	EQU	-1
false	EQU	0

t.on	EQU	true	;Trace

large	EQU	FALSE	;8"disc version ?

.COMMENT	*

    Globals <error> and <two_sid> are used. <error> is set on exit to indicate
   any error, although

ctc0	EQU	base+12
ctc1	EQU	base+13
ctc2	EQU	base+14
ctc3	EQU	base+15

pagon	EQU	34H
pagoff	EQU	35H



;Misc equates

lf	EQU	10
cr	EQU	13

	IF	large
maxdrv	EQU	4		;Allowed up to 4 8" drives
	ELSE
maxdrv	EQU	3		;Only allowed 3 5" drives as Sel4=Motor on
	ENDIF

maxtry	EQU	2		;Three retrys allowed


;Block 0 offsets

sjoff	EQU	64		;Offset to 'SJ Research File Server'
dsfoff	EQU	97		;offset of double-sided flag: =0-> SS,=FF -> DS
blkoff	EQU	98		;offset of number of blocks on disk  an error message will have already been displayed.
    <two_sid> is True on entry if the disc is to be treated as double sided.
    Format has drive nos. in the range 0..3 for two sides separately.

	*


PUBLIC	Rwblk, dkinit, Format, Verify, chkSJ, Fivein, Vermsg

EXT	pmess, cahex, verhi, verlo


; RM emt numbers

kywait	EQU	34	;wait for key, ctrl-F active


;Drive manifests

getzer	EQU	0F2H	;Seek trk 0 + Step 12mS + Head Load +    verify
seek	EQU	0E6H	;Seek trk n + Step 12ms + Head LoaÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂd + No verify
rdsec	EQU	077H	;Read 1 sec + IBM + No head load
wrsec	EQU	057H	;Write 1 sec + IBM + No head load + Data mark
settle	EQU	0FBH	;Settle time bit for read or write cmd
trkinc	EQU	0A6H	;+1 Trk +     Step 6/12mS + Head Load + No Verify
writrk	EQU	00BH	;Write track



;Port numbers

	IF	large
base	EQU	0E0H
sectrk	EQU	8	;For format
	ELSE
base	EQU	0C0H
sectrk	EQU	5
	ENDIF


status	EQU	base+0
comand	EQU	base+0
track	EQU	base+1
sector	EQU	base+2
data	EQU	base+3

latch	EQU	base+4 {Erase char from screen}
      b:=Pred(b)
    END
  END
  ELSE IF ((Ord(ch)>32) OR (Ord(ch)=13)) AND (b<10) THEN BEGIN
       {ctrl chars/spaces illegal}
    cache[1].data[87+b]:=Ord(ch);
    Write(ch);
    b:=Succ(b)
  END
UNTIL ch=Chr(13);
Writeln
END;



PROCEDURE Rename_disc;
VAR
drv:Byte;
BEGIN
Writeln('               RENAME DISC');
Writeln;
Write('Rename the disc in ');Get_blk0(drv);
Write('new ');Get_disc_name;
Writeln;
Write('Write back new name ? ');
IF Yes_no THEN Rw_blk
Write('Clear the disc in ');Get_blk0(drv);
WITH cache.ptr^ DO BEGIN
  FOR b:=128 TO 255 DO data[b]:=0;   {clear entry & blk list}
  pass_ent.name:='%Passwords';
  Get_clk;
  pass_ent.creation:=now.date;
  pass_ent.access:=12 { access WR/ only}
END;
Writeln;
Writeln('Password file cleared');
Rw_blk(False,cache.addr,drv,0)
END;



PROCEDURE Copy;
VAR
src_drv,dest_drv,read_ptr,write_ptr:Byte;
blocks_left,base_blk:Word;
needs_format:Boolean;
BEGIN
Writeln('           WHOLE DISC COPY');
Wr(False,cache.addr,drv,0)
END;


PROCEDURE Alter_accounts;
VAR
drv,acct:Byte;
BEGIN
Writeln('        DISC SPACE ACCOUNTS');
Writeln;
Write('Examine the disc in');Get_blk0(drv);
REPEAT
  Writeln;
  Write('Account number :');
  acct:=Get_hex;
  Writeln('Current balance =',cache.ptr^.words[acct+256]:5);
  Write('New balance :');
  cache.ptr^.words[acct+256]:=Get_num(cache.ptr^.words[acct+256],65535);
  Write('Adjust another account ? ');
UNTIL Not Yes_no;
Writeln;
Write('Write back new valuiteln;
Writeln('This option makes an identical copy of');
Writeln('a whole disc. Any previous contents of');
Writeln('the new disc are destroyed, including');
Writeln('disc name, account information etc.');
Writeln('The new disc need not have already');
Writeln(' been formatted.');
Writeln;

Write('Format new disc ? ');
needs_format:=Yes_no;

IF needs_format THEN BEGIN
  Write('Format disc in which drive (0..3) ? ');
  dest_drv:=Get_num(0,3)
END ELSE REPEAT
  Write('Overwrite disc in ');
  es ? ');
IF Yes_no THEN Rw_blk(False,cache.addr,drv,0)
END;


PROCEDURE Zap_passwords;
VAR
drv,b:Byte;
BEGIN
Writeln('        CLEAR PASSWORD FILE');
Writeln;
Writeln('This option will clear a corrupt or');
Writeln('unwanted password file from a disc.');
Writeln('All other files on the disc will be');
Writeln('left unaltered.');
Writeln;
Writeln('This option can also be used to add');
Writeln('a password file to a disc used with');
Writeln('earlier versions of the file server.');
Writeln;(Y/N):');
ch:=Get;
yes:=(ch <> 'N') AND (ch <> 'n');
IF yes THEN Writeln('Yes') ELSE Writeln('No');
Yes_no:=yes
END;


FUNCTION Get_num(default,max:Word):Word;
VAR
done_something:Boolean;
ch:Char;
value:Dbl_word;
BEGIN

REPEAT {until legal}
  done_something:=False;
  value:=0;
  REPEAT {until <return>}
    ch:=Get;
    IF ch IN ['0'..'9'] THEN BEGIN
      done_something:=True;
      Write(ch);
      value:=(value*10)+Ord(ch)-Ord('0')
    END
    ELSE IF (Ord(ch)=127) OR (Ord(ch)=8) lue;
Writeln
END;




PROCEDURE Get_blk0(VAR drv:Byte);
VAR
b:Byte;
BEGIN
REPEAT
  Write('which disc drive (0..3) ? ');
  drv:=Getnum(0,3);
  Writeln;
  Writeln('Insert disc & press space when ready');
  REPEAT UNTIL Get=' ';
  Open_ca(0);
  Chk_SJ;  {updates cache,<inches>}
  IF error=1 THEN Writeln('Not a file server format disc')
UNTIL error=0;

Writeln;
Write('Disc Name = ');
b:=1;
REPEAT
  Write(cache.ptr^.disc_name[b]);
  b:=Succ(b)
UNTIL (b>10) OR (cache.ptr^.disc_name[b-1THEN BEGIN {Backspace}
      Write(Chr(8),' ',Chr(8));
      value:=value DIV 10
    END
  UNTIL (Ord(ch)=cr) OR (value > 999999);
  IF value>max THEN BEGIN
    Writeln;
    Writeln('Must not be more than ',max:1);
    Write(' Try again :')
  END
UNTIL value<=max;
IF done_something THEN Get_num:=value ELSE BEGIN
  Get_num:=default;
  Write(default:1)
END;
Writeln;
END;


FUNCTION Get_hex:Byte;
VAR
ch:Char;
value:Byte;
BEGIN

value:=0;
REPEAT {until <return>}
  ch:=Get;
  IF (Ord(] = Chr(13));
Writeln;

Write('Density =');
IF drv IN inches THEN Writeln('Quad') ELSE Writeln('Double');
Writeln('Disc size =',cache.ptr^.disc_size:5,'K')

END;



PROCEDURE Get_disc_name;
VAR
ch:Char;
b:Byte;
BEGIN
Write('disc name (max 10 characters) :');
b:=0; {Offset in name - cache is used as i/p buffer}
REPEAT
  ch:=Get;
  IF (ch=Chr(127)) OR (ch=Chr(8)) THEN BEGIN {Del or backspace}
    IF b>0 THEN BEGIN            {Can't delete @ start of line}
      Write(Chr(8),' ',Chr(8)); ch)=127) OR (Ord(ch)=8) THEN BEGIN {Backspace}
    Write(Chr(8),' ',Chr(8));
    value:=value DIV 16
  END
  ELSE IF value < 16 THEN BEGIN
    IF ch IN ['0'..'9'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('0')
    END
    ELSE IF ch IN ['A'..'F'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('A')+10
    END
    ELSE IF ch IN ['a'..'f'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('a')+10
    END
  END
UNTIL Ord(ch)=cr;
Get_hex:=va,A
	LD	A,(cmdbuf)

;top 2 bits of Cache entry define which bank of RAM (ie which CAS) to use,
;the bottom 6 bits indicate wh
; cmdbuf  cache entry
;
;On exit:
; A	byte to go to port
; E	entry ROLed twice
; rest	preserved

topbyt:	PUSH	BC
	LD	C,A

;and release the dma bus

	OUT	(jbreq+1),A

	RET


;topbyt
;create a cache top-byte
;
;On entry:
; A	WE* statusNC	B		;1..4
	LD	A,7FH
setch1:	RLCA
	DJNZ	setch1

;Dth bit of A is zero

	LD	HL,eopbyt
	AND	(HL)		;reset D,(HL)
	LD	(HL)

inches:SET OF (0..3);  {Drive no in set if 8"}

error:Byte;

debug,stop:Boolean;

{ Disc Routines.
Dk_init must be called before any R/W activity. Chk_SJ reads block 0 into the
cache, checks for the presence of the SJ string, and sets up <two_sid>.
Globals <error> and <inches> are used. <error> is set on exit to indicate
any error, although an error message will have already been displayed.
<inches> has one bit per drive and is updated by Chk_SJ or Format.
}
PROCEDURE Format(drive); EXTERNAL clear the mask bit for this channel

	LD	A,D		;b2=0 => unmask
	OUT	(dmamsk),A

;and clear the software copy

	LD	B,D
	Ieg
	POP	HL		;number of bytes to transfer
	DEC	HL		;controller requires 1 less!
	OUT	(C),L		;lo-byte first
	OUT	(C),H

;nowD	A,E
	ADD	A,H		;correct high-byte in A
	OUT	(C),L		;DMA requires low byte first
	OUT	(C),A

	INC	C		;point to word count rcontroller
	LD	C,A		;address of base register

;calculate base address for DMA op.

	POP	HL		;offset in block: E is k*4
	L;
PROCEDURE Rw_blk(read:Boolean; addr:word; disc:Byte; blkno:Word);
 EXTERNAL;
PROCEDURE Ver_msg; EXTERNAL;
PROCEDURE Chk_SJ(drv); EXTERNAL;
PROCEDURE Dk_init; EXTERNAL;
PROCEDURE Open_ca(pageno:Byte); EXTERNAL;

PROCEDURE FS_exit; EXTERNAL;
FUNCTION Inkey(VAR ch:Char):Boolean; EXTERNAL; {Processes ESC to restart prog}


FUNCTION Get:Char;
VAR
ch:Char;
BEGIN
REPEAT UNTIL Inkey(ch);
Get:=ch
END;


FUNCTION Yes_no:Boolean;
VAR
ch:Char;
yes:Boolean;  {temp result store}
BEGIN
Write(' ore WE* in A for topbyt:
	CALL	topbyt
	OUT	(C),A

;now set DMA

	CALL	dmabus
	LD	A,D
	ADD	A,A
	ADD	A,dma		;base of DMA ngth

setchi:	PUSH	BC
	PUSH	HL
	LD	B,A		;Save WE* status
	LD	A,taphi
	SUB	D
	LD	C,A		;address of top byte
	LD	A,B		;Restsfer addr/len on a given channel
;
;On entry:
; A	WE* status
; D	channel number (0..3)
; cmdbuf entry
; HL	offset
; BC	le
	OUT	(kimid),A		;Hi byte to kimid
	LD	A,L
	OUT	(kimlo),A		;Lo byte to kimlo

	RET


;setchi
;set top byte and DMA tranÖSTì’U U‘U58!bP 5' zÉ¡‡{6ÑÄ<\¿ˆ2@NŒ 	ÀÏ0 Í’r∫«¬BÚÌâD¿b√Ö¢Òd«@ *
B*ƒ` #)¢¨$™FGÄ*ÇB
îtT®&¢©©Œ   û                   FSVERS  MAC                   INTFD10 REL                   MDEPNAS REL                   FSRTN   MAC   !"#$%&       FSMDEP  MAC   '(               L       SUB   )                MAKELIB SUB   *                MROUT   REL                    ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂfrom ARG again


;SETIO
;set up MODE, workspace, DMA chip, Interrupt vectors, I reg.
;disable J<->Z interrupts
;finally enable interrupts 

setio:	DI
	LD	HL,mode
	LD	(HL),0		;-cmdmod -test -monmod

;set up interrupt table with the following descending priority:
; tapirq (b7)
; fdirq  (b4)
; kimirq (b2)
; eopirq (b3)
; winirq (b1)
; jzdnr  (b5)
; jzdnw  (b6)

	LD	HL,intpag
	LD	A,H
	LD	I,A
	IM	2
	vector	outirq,jzdnw
	vector	inpirq,jzdnr
	vector	winirq,winist
	vector	eopirq,eopist
e ports:
fdstat	EQU	0		;WD2793 status reg
fdcmd	EQU	0		;	command
trkreg	EQU	1		;track
secreg	EQU	2		;sector
fddata	EQU	3		;data (and you wouldn't have guessed it)

fconwr	EQU	94H		;DS0..DS3, SideSel, etc
fstatr	EQU	94H		;various useful/unuseful signals


;ASCII

cr	EQU	13
lf	EQU	10

vector	MACRO	addr,bit
	LD	DE,addr		;interupt routine address
	LD	B,1 SHL bit
	CALL	vloop
	ENDM

do	MACRO	op,list
	IRP	oprand,<list>
	op	oprand
	ENDM
	ENDM

send	MACRO	port,byte
	LD	A,byte
	OUT	(portÖîìQT–‡e$‘î‰ïI@‘<∫Ânàp tl  =√-◊&\   éÄ e$‘î‰ïI¿  û                                                                        DKMAN   MAC  Ätuvwxyz{|}~ÄÅÇÉ DKMAN   MAC  'ÑÖÜ              M80     COM  áàâäãåçéèê       FSRTN   REL   ë                PROLIB  COM   Äíìîïñóòô         FORM512 MAC   Jöõúùû            FS      REL   (ü†°              FSP1    REL   %¢£§              FSP2    REL   "•¶ß              FSP3    REL   %®©™              FSP4    REL   8´¨≠Æ             RMDISC  REL                    ),A
	ENDM


p	MACRO	ch
	IF	debug
	LD	A,'&ch'
	CALL	cout
	ENDIF
	ENDM

print	MACRO	text
	CALL	msage
	DB	text
	DB	cr,lf,0
	ENDM


ioboot:	CALL	pcrlf

;do the old 'DI' cmd:

	CALL	init_w
	RET	C		;if an error occurred

;tell ARG to re-enter monitor mode by sending 0FFH

	LD	A,-1
	OUT	(zlatch),A

; now unmask JZDNR

	OUT	(imskrd),A

	LD	HL,mode
	LD	(HL),1 SHL cmdmod

loopm:	BIT	cmdmod,(HL)
	JR	NZ,loopm

; now mask JZDNR

	OUT	(imskrd+1),A

	JP	main		;and wait for char  offset in cache entry
; followed by a GO byte (=0)
;
;For cmd  4:
; 2 bytes are returned:
; 1 - is 0 if printer is busy (ie DMA is still continuing)
; 2 - reflects hardware status of printer
;
;For cmd  5:
; 2 - cache entry
; 3,4 offset in cache entry
; 5,6 number of bytes


;DMA channel allocations:
tapcha	EQU	0
wincha	EQU	1
sercha	EQU	2
ppchan	EQU	3



zlatch	EQU	96H		;data to/from ARG

;IRQ latch
status	EQU	97H

;all the bits in the IRQ latch are active low, and the latch is a  register (EOP stati)
dmacmd	EQU	dma+8		;main command register
dmawrq	EQU	dma+9		;write request
dmamsk	EQU	dma+10		;write single mask (used normally)
dmamod	EQU	dma+11		;mode register
dmaclr	EQU	dma+12		;clear Hi/Lo Flip/flop
dmatmp	EQU	dma+13		;temporary register
dmarst	EQU	dma+13		;master reset
dmamal	EQU	dma+15		;write all masks

;the following ports have A0 as the data line:
tactiv	EQU	0C8H		;- LED
winsel	EQU	0CAH		;+
fatxgo	EQU	0CCH		;
farxgo	EQU	0CEH		;
taprdy	EQU	0E0H		;- LED
fillz	ETITLE	pascal interface to bdos
.Z80
NAME	('Bdos')

PUBLIC	bdos


;This module enables Pascal programs to call CP/M routines. It does not
;at present allow acces to IX & IY as entry parameters.
;
;PROCEDURE bdos(VAR result:byte; job:Byte; data:Word);
;		^ A reg on exit  ^ C reg   ^ DE reg

bdos:	POP	HL
	POP	DE		;data to DE
	POP	AF
	LD	C,A		;job type to C
	EX	(SP),HL		;ret addr to stack, result addr in HL
	PUSH	HL
	CALL	5
	POP	HL
	LD	(HL),A		;store result
	RET

	END

QU	0E2H		;-
fdmagt	EQU	0E4H		;0 for Jbus, 1 for Cbus
pprst	EQU	0E6H		;-
windma	EQU	0E8H		;0 for Jbus, 1 for Cbus
jbreq	EQU	0EAH		;-
imskrd	EQU	0ECH		;Tx ints masked when high
imskwr	EQU	0EEH		;Rx ints masked when high

;bouncy ports:
znmi	EQU	85H
winrst	EQU	86H

sergo	EQU	91H		;when should these 3 be used??????
ppgo	EQU	92H
kimgo	EQU	93H		;this should used before reading Cache (only)


windat	EQU	95H
winsta	EQU	93H		;busy- msg- c/d- req- i/o-
wbusy	EQU	0
wmsg	EQU	1
wcd	EQU	2		;control iese two signals are masked. In a
;similar manner it follows that 'JZDNW' (which we will want to mask without
;masking 'JZDNR') must be of lower priority than 'JZDNR' in the INTtable.

tapist	EQ’	7
jzdnw	EQU	6		;b6=0 => OK to write
jzdnr	EQU	5		;b5=0 => OK to read
fdist	EQU	4
eopist	EQU	3
kimist	EQU	2
winist	EQU	1
jbgrnt	EQU	0

whwctl	EQU	97H

;DMA chip base and register offsets
dma	EQU	10H
;0,2,4,6 are base address registers
;1,3,5,7 are word count registers
dmasta	EQU	dma+8		;main status   cycle_no:Byte;
    parent_block:Word;
    parent_offset:Byte;
    no_of_ents:Byte;
    dum1:ARRAY [18..63] OF Byte; {Items common to both}
    );
3:(account:Byte;
    name:PACKED ARRAY[1..10] OF Char;
    next_ent:Byte;
    load_addr:Dbl_word;
    exec_addr:Dbl_word;
    extent:Three_byte;
    access:Byte;
    creation:Date_type;
    update:Short_td; {Time & date - no secs }
    Aux_acc:Byte;
    flags:SET OF dir_flags;
    blk_list:blk_vec
    )
END;


c_ent=RECORD
  CASE Byte OFof SETIO which should
;	     be called at the beginning of time, before running the monitor.
;	   - format code introduced

debug	EQU	-1

;JPROC globals
EXT	ramtop			;for 16/8k WHW area
EXT	intpag
EXT	$memry
EXT	main


PUBLIC	ioboot,setio
PUBLIC	dowsel,init_w,pwiner
PUBLIC	format
PUBLIC	eopbyt,mode		;b0..3, set => channel finished (irq has happened)

;monitor globals
EXT	cout,pcrlf,msage,prhex
EXT	echo,ucase

;Other
EXT	fdata,newtrk		;NOT to be confused with fddata !
maxtrk	EQU	77

    1:(data:ARRAY [0..M1block_size] OF Byte);
    2:(root:ent_type;
      SJ_msg:PACKED ARRAY [1..23] OF Char;
      disc_name:PACKED ARRAY [1..10] OF Char;
      DS_flag:Byte;
      disc_size:Word;
      spare:ARRAY[100..127] OF Byte;
      pass_ent:ent_type
      );
    3:(dir_ent:ARRAY [0..M1ents_per_block] OF ent_type);
    4:(Words:Array[0..M1words_per_block] OF Word)
END;

COMMON
ch:Char;

cache:RECORD CASE Boolean OF
  True:(ptr:^C_ent);
  False:(addr:Word)
END;

now:Time_date;


;code accepts the following commands:
; 0 - read disc into cache  (4)
; 1 - write disc from cache (4)
; 2 - read from cache into Z processor (4)
; 3 - write to  cache from Z processor (4)
; 4 - return status of print channel   (1)
; 5 - transfer data from cache to parallel printer (6)
; 6 - return to monitor mode (1)
; 7 - floppy test

maxcmd	EQU	7

;For cmds 0,1:
; 2 - cache entry
; 3,4 disc block number
; followed by a return code (=0 if OK)
;
;For cmds 2,3:
; 2 - cache entry
; 3,4Öë‘‡D$Dı9@ ‘0¬—xì‹nVh ·;≤c† 	=Np  û                                                                                     ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂHEN Verify(2,no_tracks);
  Writeln;
  Writeln(verified);
  Writeln;

  Write('Format another disc ? ');
UNTIL NOT Yes_no
END;




BEGIN  {Main Program}

Dk_init;

two_sid:=False; {arbitrary initial value}
stop:=False;
debug:=False; {Message print on/off}
Write(chr(17)); {ctrl-Q disables page wait on RML}

REPEAT
  Writeln;
  Writeln;
  Ver_msg;
  Writeln('Utility Program');
  Writeln;
  Writeln('A - Alter individual space accounts');
  Writeln('C - Copy whole disc');
  Writeln('PROGRAM FRANUTIL
;

CONST
cache_size=64;
blk_size=1024;
block_size=blk_size;
ents_per_block=16;
words_per_block=512;
M1ents_per_block=15;  {Minus 1!!}
M1words_per_block=511;
M1block_size=1023;

cr=13;

D_bit=32;

TYPE
Dbl_word=Integer;
Byte=0..255;
Three_byte=ARRAY [1..3] OF Byte;
Word=0..65535;
Nibble=0..15;

Block_descrip=RECORD
  drive:Byte;
  blk:Word
END;

Date_type=RECORD
  day:Byte;
  mth_yr:Byte
END;

Short_time=RECORD
  hrs:Byte;
  mins:Byte
END;

Short_td=RECF - Format new disc');
  Writeln('P - clear Password file');
  Writeln('R - Rename disc');
  Writeln('S - Stop');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'C','c':Copy;
    'D','d':BEGIN
        debug:=NOT debug;
        Write('Debug ');
        IF debug THEN Writeln('On') ELSE Writeln('Off')
      END;
    'F','f':New_disc;
    'p','P':Zap_passwords;
    'Q','q','S','s':stop:=True;
    'R','r':Rename_disc;
    OTHERWISE WritORD
  date:Date_type;
  time:Short_time
END;

Time_date=RECORD
  date:Date_type;
  time:Short_time;
  secs:Byte
END;

Disc_address=RECORD
  block:block_descrip;
  offset:Byte
END;

dir_flags=(exploded,xx1,xx2,xx3,xx4,xx5,xx6,xx7);

blk_vec=ARRAY [0..15] OF Word;

ent_type=RECORD CASE Byte OF
  1:(bit_map:SET OF Byte;
    chain:ARRAY [0..14] OF RECORD
      ents_in_chain:Byte;
      ent_no:Byte
    END;
    spare:Word
    );
 2:(Dum2:ARRAY [0..11] OF Byte;
    def_access:Byte;
 eln('Illegal option')
  END
UNTIL stop;
FS_exit
END.

  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'C','c':Copy;
    'D','d':BEGIN
        debug:=NOT debug;
        Write('Debug ');
        IF debug THEN Writeln('On') ELSE Writeln('Off')
      END;
    'F','f':New_disc;
    'p','P':Zap_passwords;
    'Q','q','S','s':stop:=True;
    'R','r':Rename_disc;
    OTHERWISE Writin ');
Getblk0(src_drv);

blocks_left:=cache[1].disc_size-1; {Got blk 0 already}
base_blk:=0; {block no. of 1st block in cache}
read_ptr:=2; {Start at 2nd block}

REPEAT
  IF (read_ptr=1) AND (src_drv=dest_drv) THEN BEGIN
    Writeln('Insert source disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  REPEAT
    Rw_blk(True,cache[read_ptr],0,base_blk+read_ptr-1);
    read_ptr:=Succ(read_ptr);
    blocks_left:=Pred(blocks_left)
  UNTIL (read_ptr > cache_size) OR (block);

FOR b:=1 TO 2 DO FOR w:=0 TO M1block_size DO Cache[b].data[w]:=0;


WITH cache[1] DO BEGIN
  ds_flag:=255;
  Write('Density = ');
  IF drv IN inches THEN BEGIN
    disc_size:=1280;
    Write('Quad - ')
  ELSE BEGIN
    disc_size:=800;
    Write('Double - ')
  END;
  Writeln(disc_size:3,'K disc');

  root.name[1]:='$';     {Root name}
  root.name[2]:=Chr(cr);

  root.access:=D_bit;
  root.def_access:=15; {WR/WR}
  root.blk_list[0]:=1;

  SJ_msg:='SJ Research File Server';

  pass_left=0);

  write_ptr:=1;
  IF src_drv=dest_drv THEN BEGIN
    Writeln('Insert destination disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  IF needs_format THEN BEGIN
    Writeln('Formatting ...');
    Format(dest_drv);
    Writeln('Format complete');
    needs_format:=False
  END;
  REPEAT
    Rw_blk(False,cache[write_ptr],1,base_blk+write_ptr-1);
    write_ptr:=Succ(write_ptr);
  UNTIL write_ptr=read_ptr;

  read_ptr:=1;
  base_blk:=base_blk+cache_size
UNs_ent.name:='%Passwords';
  pass_ent.access:=12; { access WR/ only}
  Get_clk;
  pass_ent.creation:=now.date;

  FOR w:=256 TO 511 DO words[w]:=acct_size
END;

cache[2].dir_ent[0].bit_map:=[0];
FOR b:=1 TO 15 DO cache[2].dir_ent[b].next_ent:=b;

REPEAT
  Get_disc_name;

  Format(0,no_tracks);
  IF two_sid THEN Format(2,no_tracks);
  Writeln;
  Rw_blk(False,cache[1],0,0); {disc routines print their own}
  Rw_blk(False,cache[2],0,1); {error messages}

  Verify(0,no_tracks);
  IF two_sid TTIL blocks_left=0;

Writeln('Copy complete - verifying ...');
Verify(dest_drv);
Writeln(verified)
END;




PROCEDURE New_disc;
VAR
drv,b:Byte;
acct_size,w,blocks_left:Word;
BEGIN
Writeln('           FORMAT NEW DISC');
Writeln;
Writeln;

Write('Format disc in which drive (0..3) ? ');
drv:=Get_num(0,3)

Writeln('How much disc space for each account ?');
Writeln('(Try 20K - any account may be adjusted');
Write(' later). In units of 1K :');
acct_size:=Get_num((no_tracks DIV 10)*10,65535he1+dsfoff)	;double sidedness
	AND	1			;leave relevant bit
	LD	(dsflag),A

	RET

;	Error exit. iabort is entry if errloc already set.

inierr:	LD	A,1		;Duff data in blk 0
	LD	(errloc),A
	RET


;
; PROCEDURE Format(drive,notracks:Byte);
;
; Format specified drive - drive nos 0..3 give sides separately
;


format:	DI
	POP	HL
	POP	DE		;notracks to D, junk to E
	POP	AF		;drive
	LD	E,A
	PUSH	HL		;Return address
	PUSH	DE

;	Stack holds DE - D=notracks=maxtrack+1, E=driveno.

	ADD	A,'IF
	ENDM

	POP	HL
	POP	DE
	POP	BC

nomess:	POP	AF

	ENDIF

	ENDM



pstat	MACRO	sw,mes1,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	large,<8 inch disk version>,<5 inch disk version>
	pstat	t.on,<Tracing ON>
	pstat	large,< (VERY) long macro expansion.......>,<long macro expansion.......>





;
; PROCEDURE ver_msg;		prints SJ FS ver etc. on screen
;


vermsg:	LD	DE,sjmess		;Print version on(16 bits)



; Various Macros


emt	MACRO	emtno
	DB	0F7H,emtno
	ENDM

;Macro to print string @ messadr

mess	MACRO	messadr

	IF	messadr EQ crlf
	CALL	pcrlf
	ELSE
	LD	DE,messadr
	CALL	pmess
	ENDIF

	ENDM



;Macro for message condition

mcond	MACRO	addr
	PUSH	AF
	LD	A,(mesflg)
	OR	A
	JR	Z,addr
	POP	AF
	ENDM



;Trace message macro

tmess	MACRO	list
	LOCAL	nomess

	IF	t.on

	mcond	nomess

	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL

count	DEFL	0

	IRP	param,<list> screen
	JP	pmess


sjmess:	DEFM	'SJ Research File Server ver '
	DEFW	verhi,verlo

	IF	large
	DEFM	'/8"'
	ELSE
	DEFM	'/5"'
	ENDIF

; NB this label must be defined before any references to the MESS
; macro is made.
; NB2 also forms part of the above string.

crlf:	DEFM	cr,lf,'$'


	IF	t.on

;dhxout
;Print hex of HL

dhxout:	LD	A,H
	CALL	cahex
	LD	A,L
				;DROP THROUGH
;cahex
;Print hex of A
;
;On entry:
; A	number to be printed

	JP	cahex		;Now lives in h2lib or some such p	;Count:= number of params
count	DEFL	count + 1
	ENDM

i	DEFL	count		;i:= count

	REPT	count
	IFF	i AND 1		;ie I is even
j	DEFL	0

	IRP	param,<list>
j	DEFL	j+1
	IF	(j EQ i)
	PUSH	param
	ENDIF
	ENDM			;of IRP param....

	ENDIF
i	DEFL	i-1
	ENDM			;of REPT count

i	DEFL	0

	IRP	param,<list>
	IFNB	<param>
i	DEFL	i+1
	IF	i AND 1		;ie I is odd (and param points to a string)
	mess	param
	ELSE
	IF	'&param' EQ 'AF'
	POP	AF
	CALL	cahex
	ELSE
	POP	HL
	CALL	dhxout
	ENDIF
	ENDIF
	ENDver1:	PUSH	AF	
	CALL	vtrk
	POP	AF		;Loop counter
	POP	DE		;notracks,drive
	PUSH	DE
	INC	A
	CP	D		;notracks
	JR	NZ,ver1

	POP	DE		;Discard

; done all the tracks

exitf:	CALL	drvoff
	EI
	CALL	dkinit		;Track stores are junk due to step commands
				;so Zap them.
	RET			;return to external caller



;fortrk
;Format a track
;
;On entry:
; A	track number
;
;On exit:
; A	WD status

fortrk:	LD	B,sectrk	;Fill in track numbers
	LD	HL,trknum
	LD	DE,blklen
form0:	LD	(HL),A
 	ADD	HL,DE;IF small
	INC	A		;A:=1
	ENDIF

	RET



;PROCEDURE dkinit;
;
;This procedure should be called before performing any disc operations
;

dkinit:	LD	HL,trkno	;Current track table
	LD	B,maxdrv-1	;length of it
lowlp1:	LD	(HL),-1		;Zap to indicate drive not yet used
	INC	HL
	DJNZ	lowlp1
	RET


;  PROCEDURE Chk_SJ; EXTERNAL;
;
; Read blk0 into 1st cache entry, set DS flag, check for SJ disc.
; Set <error> =1 means disc OK, but no SJ message


;	Set up parameters on stack for <rwblk>

c
	DJNZ	form0

	LD	A,writrk
	CALL	outcom
	LD	HL,fordat
	LD	C,data


form2:	LD	A,(HL)
	CPL
	LD	B,A
	INC	HL
form6:	IN	A,(status)
	RRCA
	RET	C
	RRCA
	JR	C,form6
	OUT	(C),B
	JR	form2




;vtrk
;Verify a track
;
;On entry:
; A	track number

vtrk:	CPL
	OUT	(data),A
	LD	A,seek
	CALL	outcom
	CALL	wairdy

	LD	BC,sectrk*256

vtrk0:	CALL	vsec
	INC	C
	CPL
	RLCA
	AND	0FCH
	JR	Z,vsecok

;Sector was duff so print status

	PUSH	BC
	PUSH	AF
	mess	vererr
	POP	AF
 	CALL	CAHEXhkSJ:	LD	A,1		;Read flag (=True)
	PUSH	AF
	LD	HL,cache1	;Read into 1st cache entry
	PUSH	HL
	XOR	A		;Drive no.
	PUSH	AF
	LD	HL,0		;Block no.
	PUSH	HL
	CALL	rwblk

	LD	A,(errloc)	;Had error ?
	OR	A
	RET	NZ		; Give up


iniok:	LD	HL,cache1+sjoff	;Where we put the block + Offset of SJ string
	LD	DE,sjmess	;Check it's an SJ disk
	LD	B,23		;B:= len SJstring

csjlop:	LD	A,(DE)
	CP	(HL)
	JR	NZ,inierr
	INC	HL
	INC	DE
	DJNZ	csjlop

;	Set/reset dsflag according to flag in blk 0

	LD	A,(caclace

	ENDIF

;
; Print a crlf!
pcrlf:	LD	DE,crlf
	JP	pmess


dtsmsg:	DEFM	' RDTS=$'
atmsg:	DEFM	' @ $'
errmsg:	DEFM	' fatal disc error $'
rtrmsg:	DEFM	' bad $'
formsg:	DEFM	cr,lf,'Formatting drive '	;Message continues below
drvmsg:	DEFM	'?$'				; - ? is poked at run time
forerr:	DEFM	cr,lf,'Format error &$'
vererr:	DEFM	cr,lf,'Verify error &$'
secmsg:	DEFM	' sector &$'




; FUNCTION Five_in:Boolean; EXTERNAL; {return 5"/8" version}
;
fivein:	XOR	A		; A:=0 <=> false

	IFF	large		URE Zap_passwords;
VAR
drv,b:Byte;
BEGIN
Writeln('        CLEAR PASSWORD FILE');
Writeln;
Writeln('This option will clear a corrupt or');
Writeln('unwanted password file from a disc.');
Writeln('All other files on the disc will be');
Writeln('left unaltered.');
Writeln;
Writeln('This option can also be used to add');
Writeln('a password file to a disc used with');
Writeln('earlier versions of the file server.');
Writeln;
Write('Clear the disc in ');Get_blk0(drv);
WITH cache[1] DO BEGIN
  FOA'
	LD	(drvmsg),A	;Poke part of format drive message

	LD	DE,formsg	;Now print it
	CALL	pmess

	POP	DE		;notracks,drivE
	PUSH	DE
	LD	A,E

	CALL	stadrv		;start drive A
	CALL	seekz		;restore

form7:	SUB	A

form3:	PUSH	AF
	CALL	fortrk
	CPL
	RLCA
	AND	0FCH
	JR	Z,form5

	PUSH	AF
	LD	DE,forerr
	CALL	pmess
	POP	AF
 	CALL	CAHEX
	LD	DE,atmsg
	CALL	pmess
	IN	A,(track)
	CPL
	CALL	CAHEX
	POP	DE		;Discard notracks
	POP	AF		;Discard track no.
	JR	exitf		;Give up


form5:	LD	BC,4000/29R b:=128 TO 255 DO data[b]:=0;   {clear entry & blk list}
  pass_ent.name:='%Passwords';
  Get_clk;
  pass_ent.creation:=now.date;
  pass_ent.access:=12 { access WR/ only}
END;
Writeln;
Writeln('Password file cleared');
Rw_blk(False,cache[1],drv,0)
END;



PROCEDURE Copy;
VAR
src_drv,dest_drv,read_ptr,write_ptr:Byte;
blocks_left,base_blk:Word;
needs_format:Boolean;
BEGIN
Writeln('           WHOLE DISC COPY');
Writeln;
Writeln('This option makes an identical copy of');
Writeln('a whole 	;1ms Delay for Tunnel Erase
deloop:	DEC	BC		;Loop is 29 T-states (assuming wait states)
	LD	A,B
	OR	C
	JR	NZ,deloop

	POP	AF		;Loop counter/track no.
	POP	DE		;notracks in D
	INC	A
	CP	D
	JR	Z,exitf
	PUSH	DE
	PUSH	AF
	LD	A,trkinc
	CALL	outcom
	CALL	wairdy
	POP	AF
	JR	form3


;
; PROCEDURE Verify(drive,notracks);
;
;Verify all tracks
;

verify:	POP	HL		;Return addr
	POP	DE		; D:=notracks
	POP	AF		;drive
	PUSH	HL
	PUSH	DE

	CALL	stadrv
	CALL	seekz

	SUB	A		;start at Trk 0
disc. Any previous contents of');
Writeln('the new disc are destroyed, including');
Writeln('disc name, account information etc.');
Writeln('The new disc need not have already');
Writeln(' been formatted.');
Writeln;

Write('Format new disc ? ');
needs_format:=Yes_no;

IF needs_format THEN BEGIN
  Write('Format disc in which drive (0..3) ? ');
  dest_drv:=Get_num(0,3)
END ELSE REPEAT
  Write('Overwrite disc in ');
  Getblk0(dest_drv);
  Write('Ok ? ')
UNTIL Yes_no;

Write('Read from disc ce}
    Write(Chr(8),' ',Chr(8));
    value:=value DIV 16
  END
  ELSE IF value < 16 THEN BEGIN
    IF ch IN ['0'..'9'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('0')
    END
    ELSE IF ch IN ['A'..'F'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('A')+10
    END
    ELSE IF ch IN ['a'..'f'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('a')+10
    END
  END
UNTIL Ord(ch)=cr;
Get_hex:=value;
Writeln
END;




PROCEDURE Get_ELSE IF ((Ord(ch)>32) OR (Ord(ch)=13)) AND (b<10) THEN BEGIN
       {ctrl chars/spaces illegal}
    cache[1].data[87+b]:=Ord(ch);
    Write(ch);
    b:=Succ(b)
  END
UNTIL ch=Chr(13);
Writeln
END;



PROCEDURE Rename_disc;
VAR
drv:Byte;
BEGIN
Writeln('               RENAME DISC');
Writeln;
Write('Rename the disc in ');Get_blk0(drv);
Write('new ');Get_disc_name;
Writeln;
Write('Write back new name ? ');
IF Yes_no THEN Rw_blk(False,cache[1],drv,0)
END;


PROCEDURE Alter_accounts;
VAblk0(VAR drv:Byte);
VAR
b:Byte;
BEGIN
REPEAT
  Write('which disc drive (0..3) ? ');
  drv:=Getnum(0,3);
  Writeln;
  Writeln('Check discs & press space when ready');
  REPEAT UNTIL Get=' ';
  Chk_SJ;  {updates cache,<two_sid>}
  IF error=1 THEN Writeln('Not a file server format disc')
UNTIL error=0;

Writeln;
Write('Disc Name = ');
b:=1;
REPEAT
  Write(cache[1].disc_name[b]);
  b:=Succ(b)
UNTIL (b>10) OR (cache[1].disc_name[b-1] = Chr(13));
Writeln;

Write('Density =');
IF drv IN incR
drv,acct:Byte;
BEGIN
Writeln('        DISC SPACE ACCOUNTS');
Writeln;
Write('Examine the disc in');Get_blk0(drv);
REPEAT
  Writeln;
  Write('Account number :');
  acct:=Get_hex;
  Writeln('Current balance =',cache[1].words[acct+256]:5);
  Write('New balance :');
  cache[1].words[acct+256]:=Get_num(cache[1].words[acct+256],65535);
  Write('Adjust another account ? ');
UNTIL Not Yes_no;
Writeln;
Write('Write back new values ? ');
IF Yes_no THEN Rw_blk(False,cache[1],drv,0)
END;


PROCEDhes THEN Writeln('Quad') ELSE Writeln('Double');
Writeln('Disc size =',cache[1].disc_size:5,'K')

END;



PROCEDURE Get_disc_name;
VAR
ch:Char;
b:Byte;
BEGIN
Write('disc name (max 10 characters) :');
b:=0; {Offset in name - cache is used as i/p buffer}
REPEAT
  ch:=Get;
  IF (ch=Chr(127)) OR (ch=Chr(8)) THEN BEGIN {Del or backspace}
    IF b>0 THEN BEGIN            {Can't delete @ start of line}
      Write(Chr(8),' ',Chr(8));  {Erase char from screen}
      b:=Pred(b)
    END
  END
  blk_list:blk_vec
    )
END;


c_ent=RECORD
  CASE Byte OF
    1:(data:ARRAY [0..M1block_size] OF Byte);
    2:(root:ent_type;
      SJ_msg:PACKED ARRAY [1..23] OF Char;
      disc_name:PACKED ARRAY [1..10] OF Char;
      DS_flag:Byte;
      disc_size:Word;
      spare:ARRAY[100..127] OF Byte;
      pass_ent:ent_type
      );
    3:(dir_ent:ARRAY [0..M1ents_per_block] OF ent_type);
    4:(Words:Array[0..M1words_per_block] OF Word)
END;

COMMON
ch:Char;
cache:ARRAY[1..cache_size] OF C_ench <> 'n');
IF yes THEN Writeln('Yes') ELSE Writeln('No');
Yes_no:=yes
END;


FUNCTION Get_num(default,max:Word):Word;
VAR
done_something:Boolean;
ch:Char;
value:Dbl_word;
BEGIN

REPEAT {until legal}
  done_something:=False;
  value:=0;
  REPEAT {until <return>}
    ch:=Get;
    IF ch IN ['0'..'9'] THEN BEGIN
      done_something:=True;
      Write(ch);
      value:=(value*10)+Ord(ch)-Ord('0')
    END
    ELSE IF (Ord(ch)=127) OR (Ord(ch)=8) THEN BEGIN {Backspace}
      Write(Chr(8),t;
now:Time_date;
inches:SET OF (0..3);  {Drive no in set if 8"}

error:Byte;

debug,two_sid,stop:Boolean;

{ Disc Routines.
Dk_init must be called before any R/W activity. Chk_SJ reads block 0 into the
cache, checks for the presence of the SJ string, and sets up <two_sid>.
Globals <error> and <inches> are used. <error> is set on exit to indicate
any error, although an error message will have already been displayed.
<inches> has one bit per drive and is updated by Chk_SJ or Format.
}
PROCEDUR' ',Chr(8));
      value:=value DIV 10
    END
  UNTIL (Ord(ch)=cr) OR (value > 999999);
  IF value>max THEN BEGIN
    Writeln;
    Writeln('Must not be more than ',max:1);
    Write(' Try again :')
  END
UNTIL value<=max;
IF done_something THEN Get_num:=value ELSE BEGIN
  Get_num:=default;
  Write(default:1)
END;
Writeln;
END;


FUNCTION Get_hex:Byte;
VAR
ch:Char;
value:Byte;
BEGIN

value:=0;
REPEAT {until <return>}
  ch:=Get;
  IF (Ord(ch)=127) OR (Ord(ch)=8) THEN BEGIN {BackspaE Format(drive); EXTERNAL;
PROCEDURE Rw_blk(read:Boolean; VAR buffer:C_ent; disc:Byte; blkno:Word);
 EXTERNAL;
PROCEDURE Ver_msg; EXTERNAL;
PROCEDURE Chk_SJ(drv); EXTERNAL;
PROCEDURE Dk_init; EXTERNAL;

PROCEDURE FS_exit; EXTERNAL;
FUNCTION Inkey(VAR ch:Char):Boolean; EXTERNAL;


FUNCTION Get:Char;
VAR
ch:Char;
BEGIN
REPEAT UNTIL Inkey(ch);
Get:=ch
END;


FUNCTION Yes_no:Boolean;
VAR
ch:Char;
yes:Boolean;  {temp result store}
BEGIN
Write(' (Y/N):');
ch:=Get;
yes:=(ch <> 'N') AND (
    write_ptr:=Succ(write_ptr);
  UNTIL write_ptr=read_ptr;

  read_ptr:=0;
  base_blk:=base_blk+cache_size
UNTIL blocks_left=0;

Writeln('Copy complete - verifying ...');
Verify(dest_drv);
Writeln('Verify complete')
END;




PROCEDURE New_disc;
VAR
drv,b:Byte;
acct_size,w,blocks_left:Word;
BEGIN
Writeln('           FORMAT NEW DISC');
Writeln;
Writeln;

Write('Format disc in which drive (0..3) ? ');
drv:=Get_num(0,3)

Writeln('How much disc space for each account ?');
Writeln('hort_time=RECORD
  hrs:Byte;
  mins:Byte
END;

Short_td=RECORD
  date:Date_type;
  time:Short_time
END;

Time_date=RECORD
  date:Date_type;
  time:Short_time;
  secs:Byte
END;

Disc_address=RECORD
  block:block_descrip;
  offset:Byte
END;

dir_flags=(exploded,xx1,xx2,xx3,xx4,xx5,xx6,xx7);

blk_vec=ARRAY [0..15] OF Word;

ent_type=RECORD CASE Byte OF
  1:(bit_map:SET OF Byte;
    chain:ARRAY [0..14] OF RECORD
      ents_in_chain:Byte;
      ent_no:Byte
    END;
    spare:Word
(Try 20K - any account may be adjusted');
Write(' later). In units of 1K :');
acct_size:=Get_num((no_tracks DIV 10)*10,65535);

FOR b:=1 DOWNTO 0 DO BEGIN
  Open_ca(b);
  FOR w:=0 TO M1block_size DO Cache[b].data[w]:=0
END;

{Cache page 0 is now open}

WITH cache.ptr^ DO BEGIN
  ds_flag:=255;
  Write('Density = ');
  IF drv IN inches THEN BEGIN
    disc_size:=1280;
    Write('Quad - ')
  ELSE BEGIN
    disc_size:=800;
    Write('Double - ')
  END;
  Writeln(disc_size:3,'K disc');

  r    );
 2:(Dum2:ARRAY [0..11] OF Byte;
    def_access:Byte;
    cycle_no:Byte;
    parent_block:Word;
    parent_offset:Byte;
    no_of_ents:Byte;
    dum1:ARRAY [18..63] OF Byte; {Items common to both}
    );
3:(account:Byte;
    name:PACKED ARRAY[1..10] OF Char;
    next_ent:Byte;
    load_addr:Dbl_word;
    exec_addr:Dbl_word;
    extent:Three_byte;
    access:Byte;
    creation:Date_type;
    update:Short_td; {Time & date - no secs }
    Aux_acc:Byte;
    flags:SET OF dir_flags;
    PROGRAM FRANUTIL
;

CONST
cache_size=30; {number of blocks in megabuffer}
blk_size=1024;
block_size=blk_size;
ents_per_block=16;
words_per_block=512;
M1ents_per_block=15;  {Minus 1!!}
M1words_per_block=511;
M1block_size=1023;

cr=13;

verified='Verify complete';

D_bit=32;

TYPE
Dbl_word=Integer;
Byte=0..255;
Three_byte=ARRAY [1..3] OF Byte;
Word=0..65535;
Nibble=0..15;

Block_descrip=RECORD
  drive:Byte;
  blk:Word
END;

Date_type=RECORD
  day:Byte;
  mth_yr:Byte
END;

S...');
  Format(drv);
  Writeln('Format complete - verifying...');
  Writeln;
  Open_ca(0);
  Rw_blk(False,cache.addr,drv,0); {disc routines print their own}
  Open_ca(1);
  Rw_blk(False,cache.addr,drv,1); {error messages}

  Verify(drv);
  Writeln;
  Writeln('Verify complete');
  Writeln;

  Write('Format another disc ? ');
UNTIL NOT Yes_no
END;




BEGIN  {Main Program}

Dk_init;
cache.addr:=0FC00H; {Address of cache page in memory}

stop:=False;
debug:=False; {Message print on/Getblk0(dest_drv);
  Write('Ok ? ')
UNTIL Yes_no;

Write('Read from disc in ');
Getblk0(src_drv);

blocks_left:=cache[1].disc_size-1; {Got blk 0 already}
base_blk:=0; {block no. of 1st block in cache}
read_ptr:=1; {Start at 2nd block}

REPEAT
  IF (read_ptr=0) AND (src_drv=dest_drv) THEN BEGIN
    Writeln('Insert source disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  REPEAT
    Open_ca(read_ptr);
    Rw_blk(True,cache.addr,0,base_blk+read_ptr);
    read_ptr:=off}
Write(chr(17)); {ctrl-Q disables page wait on RML}

REPEAT
  Writeln;
  Writeln;
  Ver_msg;
  Writeln('Disc Preparation Program');
  Writeln;
  Writeln('A - Alter individual space accounts');
  Writeln('B - Boot file server program');
  Writeln('C - Copy whole disc');
  Writeln('F - Format new disc');
  Writeln('P - clear Password file');
  Writeln('R - Rename disc');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'C','c':CopSucc(read_ptr);
    blocks_left:=Pred(blocks_left)
  UNTIL (read_ptr = cache_size) OR (blocks_left=0);

  write_ptr:=0;
  IF src_drv=dest_drv THEN BEGIN
    Writeln('Insert destination disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  IF needs_format THEN BEGIN
    Writeln('Formatting ...');
    Format(dest_drv);
    Writeln('Format complete');
    needs_format:=False
  END;
  REPEAT
    Open_ca(write_ptr);
    Rw_blk(False,cache[write_ptr],1,base_blk+write_ptr);y;
    'D','d':BEGIN
        debug:=NOT debug;
        Write('Debug ');
        IF debug THEN Writeln('On') ELSE Writeln('Off')
      END;
    'F','f':New_disc;
    'M','m':SRL_mon;
    'p','P':Zap_passwords;
    'b','B','S','s':stop:=True;
    'R','r':Rename_disc;
    OTHERWISE Writeln('Illegal option')
  END
UNTIL stop;
FS_exit
END.
sc');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'C','c':Cop»Q À?0À"∑ ˆ…!  x∑(∑ÀA(ÀÀÀÒG…∑ÀA(ÀÀÀÚEl& …·„@o·„ ∑ÚQ9À˘ÌDoÀ|(yÓÄOóîg}∑(*|∑»}÷ À<óÀ$Ω8ï$ˆ|Àq¿Ày ∑>OÌD…>JÕﬂ0>…·„ o·„O∑Ú•9ÌDoy¨OÀ|(óîg}∑(|∑(ó∑ÀE(ÑÀıgÀy»/g}/o#…!  …˝·Ò—¡·˝Â’›„’›6  À|(›4 ›#›6 -= ”:Î!  ∑ÌBDM!  ÌR˙¬:ı∑Àx |µ(@≈  ö;Õ|:≈ ·ıÕ|:≈Äñò Õ|:≈@B Õ|:≈†Ü Õ|:≈'  Õ|:`i`i'Õô:ËÕô:d Õô:
 Õô:—>0Ö›#›w ›·›4 ›·…˝·>0„∑ÌB„ÌR˙ë:7<„	„ÌZ¡˝·>0∑ÌR˙™:7<Ù∑0—›#›w ›„›4 ›„(’˝È›6 *›6*›·›4 >O—>T›·Õﬂ0…>@˙‰:∑…>»=…>¿=…>¯=…>=…∑ÌD…˝ﬂ0!   …                                                                                                                                                                                                                                                       0…›ÀV»!!∏6 ……·¡„Ì[9∏s#rÕü0…Õ“8Î·¡Â&@Î·¡Âz∑˙o>& Àx(À¸x/Gy/OÎ·¡Â& Âz∑ ≥(˛ bjÀÀÕ…7Ò–0  |µ»ÎÌR…·>JÕﬂ0! …—¡Ò∑ !ñ>=!ú>Â≈’>Wƒﬂ0√…4FalseTrueóÀ|(Õ48>Ä˝·—„˝„≈BKÀ|(∆¿Õ48—ı≈’≈˝Â|µ(¡x±¬˜>¡DMÕ9	¡—x±(Õ9xÊÄ¥µ¬¯>`i¡—ÂÕ9—Ò∑¸48…————>OÕÂ›Â—·~#ÂÎ_üW√D<˝Â›Â—„~#„Âoüg—q#p#s#r#Î…˝·¡—·Ì∞˝È*_;" *a;" *c;" >√2 2  !d;" !É;"! …›Â—…„^#„ˇ›ÂÀ{ x;·^#VÎ…„À˚—s#r#Î…„V#Àz ^#„ÌS4∏…„À8À8À8M^#VÎ…À8'À8EÎ·„s#r…À⁄¯;ızÊ›Â˝·=˙Õ;˝VÅ˝^Ä’ÒÒ…À8+ızÊ›Â—∑(’˝·˝VÅ˝^Ä= ÙÒ…oüg…Î`i∑ÌR…O `h…DM!  …·¡^#ˇ{∑ WÎ9˘˝Â›Â≈›!Ñ ›9Î^# Î9Â’*;∏9ÿ>S’ Õﬂ0Î·˝·›·˘Î˝È·^#V#ÂÎN#F#^#V#Î…„^#V#„ÎÎ·„q#p#s#r#Î…˝·—„≈BK˝Èê0	êÍÖ<˙}<π⁄~<yo& D)!0ˆ∑ÌB0∑ÌBÍ¥<˙ü<∑ÌR⁄¢<!  )BK—˝·’^#V·		ÎÈ0È·…·˝·æ#(##¯^#V#ÎÈÎ·˝·{æ# zæ# Í##Ì°ÍŒ<·’˝Â>CÕﬂ0—…!  @’Â @’ÂÕ=Âoot.name[1]:='$';     {Root name}
  root.name[2]:=Chr(cr);

  root.access:=D_bit;
  root.def_access:=15; {WR/WR}
  root.blk_list[0]:=1;

  SJ_msg:='SJ Research File Server';

  pass_ent.name:='%Passwords';
  pass_ent.access:=12; { access WR/ only}
  Get_clk;
  pass_ent.creation:=now.date;

  FOR w:=256 TO 511 DO words[w]:=acct_size
END;

Open_ca(1);
cache.ptr^.dir_ent[0].bit_map:=[0];
FOR b:=1 TO 15 DO cache.ptr^.dir_ent[b].next_ent:=b;

REPEAT
  Get_disc_name;

  Writeln('Formatting˝·˝6Õ=Â˝·˝6Ø2Q∏…·¡„^#V+Âz∑((*=∏Â˝·|µ(ÌR(˝n˝fÌ·Â}˝æ 
|˝æ Î—Ø…·≈ÂÂÂH ≈Õ>·^#Vbkt#u#F6 #˚’˝·*=∏˝u˝tÌS=∏¡˝q˝p˝6˝6Ä¡x±(˝q˝p˝À∆! ˝u˝t6 ! Î!µ= Ì∞˝Â·>…Ω=˘=>>!!∏~∑(5*a∏~›w#"a∏… ∏
Õò0!"∏"a∏! ∏F#~∏(’4 _#6›6
Õ˘=ƒ›^Õò0…›ÀV»!!∏6 ……·¡„Ì[9∏s#rÕü0…Õ“8Î·¡Â&@Î·¡Âz∑˙o>& Àx(À¸x/Gy/OÎ·¡Â& Âz∑ ≥(˛ bjÀÀÕ…7Ò–0  |µ»ÎÌR…·>JÕﬂ0! …—¡Ò∑ !ñ>=!ú>Â≈’>Wƒﬂ0√…4FalseTrueóÀ|(Õ48>Ä˝·—„˝„≈BKÀ|(∆¿Õ48—ı≈’≈˝Â|µ(¡x±¬˜>¡DMÕ9	¡—x±(Õ9xÊÄ¥µ¬¯>`i¡—ÂÕ9—Ò∑¸48…————>OÕAF
	ENDIF


;On entry to here:
; D	track
; E	sector
; H	read flag

	LD	(secsav),DE	;Save in case of retrys
	LD	(drvsav),HL

retryt:	LD	BC,(curtrk)	;Get pointer to current track
	LD	A,(BC)
	CP	D		;Already there?
	PUSH	AF		;Save Z flag in particular
	LD	A,-1
	JR	Z,nosetl
	LD	A,settle	;Settle time mask for read or write command
nosetl:	LD	(rwmask),A	;Save for read/write command

	LD	A,D		;Dest track
	LD	(BC),A		;Update track store
	CPL
	OUT	(data),A	; And prepare to seek

	LD	A,seek
 write
	CPL			; =FF for read, =0 for write
	LD	D,A

	ADD	HL,HL		;Block * 2 = Sector

	PUSH	HL
	PUSH	DE
	CALL	rwdisc		;Get first
	POP	DE
	POP	HL
	INC	C		;Error => return now
	DEC	C
	RET	NZ

	LD	A,(DMA+1)	;Hi byte of memory address
	ADD	A,2		;Sector is 2 pages long
	LD	(DMA+1),A
	INC	HL		;Next sector
	CALL	rwdisc

	IF	t.on
	LD	A,(mesflg)
	OR	A
	CALL	NZ,pcrlf
	ENDIF

	RET




;RWDISC
;Read/Write sector to/from disk
;
;On entry:
;    (DMA)	memory address to write to/get from
	mess	atmsg
	IN	A,(track)
	CPL
	CALL	CAHEX
	mess	secmsg
	IN	A,(sector)
	CPL
	CALL	CAHEX
	POP	BC

vsecok:	DJNZ	vtrk0
	RET


;vsec
;Verify a sector on current track
;
;On entry:
; C	sector number
;
;On exit:
; A	WD error number
; rest	preserved

vsec:	LD	A,C
	OR	A		;ZF on sector 0 which needs settle time
	CPL
	OUT	(sector),A

	LD	A,rdsec		;read 1 sector with no settle time
	JR	NZ,setlof
	AND	settle
setlof:	CALL	outcom

reed0:	IN	A,(status)
	RRCA
	RET	C
	RRCA
	JR	C,reed0
;	 D	Read flag (FF-read,0-write)
;	 E	Disk number
;	 HL	sector no.
;
;On exit:
; C	Error code (0 = OK)
;	(errloc) also updated


rwdisc:	SUB	A
	LD	(rcount),A	;Set retry count to zero

	PUSH	DE		;Save disk & read flag

;Convert sector number (HL) into track/sector (DE)

	IF	large

;Divide by eight

	LD	A,L
	AND	7		;Remainder MOD 8
	LD	E,A
	ADD	HL,HL		;*2
	ADD	HL,HL		;*4
	ADD	HL,HL		;*8
	ADD	HL,HL		;*16
	ADD	HL,HL		;*32
	LD	D,H		; div 8 <=> *32 DIV 256

	ELSE

;Divide by five 
	IN	A,(data)
	JP	reed0







; PROCEDURE Rw_blk(read:Boolean; VAR buffer:C_ent; disc:Byte; blkno:Word);
;
; Write out 1k block to disc from main memory <buffer>.

rwblk:	XOR	A		;No error yet
	LD	(errloc),A

	POP	BC		;Return addr
	POP	HL		;blockno.
	POP	AF		;Disc no.
	POP	DE		;Memory address of buffer
	
	LD	(DMA),DE	;Entry param for RWDISC
	LD	E,A		;Drive

	POP	AF		;read flag
	PUSH	BC		;Return addr.

				;Initially =1 for read, =0 for write
	DEC	A		;now have =0 for read, =FF forom
	LD	D,0FCH

write0:	LD	A,(HL)
	CPL
	LD	B,A
write2:	IN	A,(status)
	RRCA
	JR	C,write4
	RRCA
	JR	C,write2
	LD	A,B
	OUT	(data),A
	INC	HL
	JP	write0

write4:	PUSH	AF		;Write finished so wait for tunnel erase to end
	LD	BC,3700/29	; 1ms minus allowance for shortest code to
write5:	DEC	BC		; next call of OUTCOM
	LD	A,B		; 29 is the no. of T states in the loop.
	OR	C
	JR	NZ,write5
	POP	AF		;useful instruction as A has been PUSHed before

;drop through

;Return from Read or Write

rwreDrive bits
	JR	Z,stadr2
	SRL	D		;Modify track number (/2)
	JR	NC,stadr2
	OR	10H		;Other side
stadr2:	LD	L,A		;Save for trace
	OR	88H		;Drv4 + Dint |

	PUSH	HL
	LD	(lmask),A

	IN	A,(status)	;Ready ?
	BIT	7,A

	PUSH	AF
	LD	A,(lmask)
	OUT	(latch),A	;Set drive glowing
	AND	1		;Use as offset for track store
	LD	C,A		; WON'T WORK ON >2 DRIVES ***************
	POP	AF

	IFF	large		;8" drives go round all the time

	JR	NZ,stadr3	;Ready => going round

stadr1:	IN	A,(ctc0)	;Wait 16*64mS so it t:	RLCA			;Move byte back the way it came
	OUT	(pagoff),A	;Turn off cache memory
	CPL			;Data bus all inverted !
	AND	D		;Mask out silly bits
	LD	C,A		;Save error number in case we want to retry
	JR	Z,giveup	;OK ?

; Not Ready,Write prot,Write fault,Lost data are all fatal

	AND	0E7H
	JR	NZ,giveup

	LD	A,(rcount)	;How many goes have we had at this sector ?
	CP	maxtry		;Too many ?
	JR	NC,giveup
	INC	A
	LD	(rcount),A

	IF	t.on
	PUSH	BC
	mess	rtrmsg

	POP	BC
	LD	A,C
	CALL	cahex

;princan get up speed
	CP	90H
	JR	NC,stadr1

	ENDIF

stadr3:	LD	HL,trkno	;Work out track address
	LD	B,0
	ADD	HL,BC
	LD	A,(HL)
	LD	(curtrk),HL	;Save address of current track store
	OR	A
	CALL	M,seekz		;-ve => not used before so seek track zero
	CPL
	OUT	(track),A	;update track register
	POP	HL

	IF	t.on
trace:	mcond	l4
	PUSH	AF
	PUSH	DE
	PUSH	HL
	PUSH	DE
	PUSH	HL
	mess	dtsmsg
	POP	HL
	CALL	dhxout
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	HL,(DMA)
	CALL	dhxout
	POP	HL
	POP	DE
l4:	POP	- Leaves result in A & remainder 

	LD	DE,-500H
tscon1:	ADD	HL,DE
	JR	C,tscon0
	SBC	HL,DE
tscon0:	RLA
	SRA	D
	RR	E
	JP	NC,tscon1

	LD	D,A		;Swap regs - so correct for output
	LD	E,L

	ENDIF

	POP	HL		;drive now in L (0..3)


;Convert drive number into drive bits

	SUB	A
	LD	B,L
	INC	B		;As drive numbers start at 0
	SCF
cdrnol:	RLA
	DJNZ	cdrnol
	LD	L,A		;has a single bit set in it.

;Start drive in A and select the correct side

	LD	A,(dsflag)	;Double sided ?
	OR	A
	LD	A,L		;„ı≈Â>BÕﬂ0·¡Ò„…|µ`i»È∏Í(3˙ 3Wy∫zÍ-3ÿ˙3”¯–∏8ÕGy∏x–∆Â∑ÌB·ÍP3˙ 3Î∑ÌRÎÍ-3∞˙E3´Â∑ÌB·8§Î∑ÌRÎ–ú˝·Â≈Â≈˝^˝V’˝^ ˝V’˝^˝V’˝^˝V’Õs8˙ó3¡·Õs8¡·√ 3————¡·√ 3Î*9∏∑ÌR8
*Á/+ÌR0Î…Î„Â>PÕﬂ0·„…—ıÂ≈’>OÕﬂ0—¡·Ò’… ∑ÌZ‡ ∑ÌR‡„Â>OÕﬂ0·„…* @Ø*@Ø* @>*@>—ÌS?∏’Âı:Q∏∑(˛(F !T∏	Î!˝ˇÌ∏<2Q∏Ò·"R∏2T∏…Õ_6›"R∏›·…:T∏˛Ã6:T∏˛Ã=6!Q∏5»!U∏R∏ Ì∞…>Fj4Õﬂ0Read/write nesting too deep·Ò∑(¡≈>ıÂ>WÕﬂ0Ë·¡≈>·Ò¡≈∑ yGÕÎ4Â! 9~∑(	#~Õ‹4¯	#—˘ÎÈ·Ò„NG~∑»ÕÎ4#~Õ‹4˘…Â≈˝*R∏˝wÕè5¡·…y∏–> Õ‹4ı ›Â·^#VÎ	CALL	outcom		;Do it
	CALL	wairdy		;Seek with no verify can cause no errors

;wait for head to load (=output from CTC)

headld:	IN	A,(status)
	AND	020H		;Test head load (=0 for loaded)
	JR	NZ,headld

	POP	AF		;NZ if we have done a real seek, so insert
	JR	Z,nowait	;RML-style wait

	LD	A,4
headl2:	LD	B,0
	DJNZ	$		;15*256*4=15000T,4 ms.
	DEC	A
	JR	NZ,headl2

nowait:	LD	A,E		;Fill in sector
	CPL
	OUT	(sector),A
	DI			;Stop interrupts

;retry sector without re-seeking

retrys:	LD	A,H		;È*R∏Â›„Õ_6Õ(5Õw6›ÀÊ›·…›~Ê ï6›Àf»›~ÀW ë6Àg»›Àv M›n›fÕ 5›À¶›ÀF»›~˛(*˛
(›Àé˛¿›w›ÀN(›~˛(ƒ›6
›6 ›ÀŒ…›Àˆ›ÀN(Ì›À∂›À∆…*R∏Â›„Õ_6Õú6›n›f	Õ 5›Àé›·…* @Â›„Õ_6Õ5›~Ê›·…* @Â›„Õ_6Õ5›ÀF¬Ö6›~Ê›·…*@Â›„Õ_6Õú6›6Õˆ4›6Õˆ4›ÀŒ›·…*R∏Â›„Õ_6Õ5›n›f›·…*R∏Â›„Õ(5Õw6›ÀN Õ35Ú›ÀÊ›·…*R∏Â›„Õú6›6Õˆ4›6
Õˆ4›ÀŒ›·…˝··"?∏„Â›„|∑((æ %#}æ  ˝È›ÀF»>EØ6#›·>EÕﬂ0>…∫6
›À^¿ 6
>F›·√ﬂ0End-of-fileNo reset/rewriteNo rewriteóÀ|(Õ48>Ä˝·—„˝„≈BKÀ|(∆¿Õ48—›Âı≈˝„¡x±≤ ≥ $Save R/W flag
	LD	HL,rwmask	;Address of mask containing settle time bit
	OR	A
	JR	Z,write

;Read a sector

read:	LD	A,rdsec
	AND	(HL)		;Insert settle time
	CALL	outcom
	LD	HL,(DMA)	;Set address to R/W to/from
	LD	D,9CH		;mask for relevant error bits

read0:	IN	A,(status)
	RRCA
	JR	C,rwret
	RRCA
	JR	C,read0
	IN	A,(data)
	CPL
	LD	(HL),A
	INC	HL
	JP	read0




;Write out a sector

write:	LD	A,wrsec
	AND	(HL)		;Insert settle time
	CALL	outcom
	LD	HL,(DMA)	;Set address to R/W to/fr7˛ ˝Â¡ÒÀ,ÀÀÀ
Õ47Ò›Â·˝Â¡‹48›·…——>JÕﬂ0!   …Â|µ(> !  >˝„›·Â˝)›)„Ìj„Ìj0›#„∑ÌR„ÌBÚh7„„ÌJ˝#= ⁄Ò…Î·¡Âx™ÊÄox∑ÚÉ7/Gy/Oz∑Úñ7/W{/_Î·¡Â.@Âz∑ ≥(˛ À8ÀÕ…7—`iÀs¿À{¬÷8À|»>O·>JÕﬂ0! …!  x∑ y À!ÀÀÀÌR0ÓG…˝·„	DM—·ÌZÍQ8˝È˝·„∑ÌBDM—·ÌRÍQ8˝ÈOüGog…DMÀÌb…˝·Î·ÂÀÌb„ÂÎ˝È˝·  Î„ÂÎ˝ÈÀ|»Î!  ∑ÌBDM!  ÌR‡„≈Â>OÕﬂ0·¡„…˝ÂÓ¿¿,¿$‡‰y÷Oxﬁ G  ÌRÍC8±µ¥…˝·„∑ÌB—·ıÌR—Íä8 Àª’Ò˝È>@˙ê8∑˝È˝·Î`i¡∑ÌB¡ıÎÌB—Íä8(›˝ÈÂ≈—Î∑ÌRÂ∑ÌBDMÏ÷8|·…Î`i∑ÌRT]∑ÌBDMÎ…|ˆÎ!  ∑ÌR…˝·—Z À{(’˝ÈÎ!  yKÀ?0À#À∑ Ùx∑t 1771 Trk, Sec registers

	IN	A,(track)
	CPL
	CALL	cahex
	IN	A,(sector)
	CPL
	CALL	cahex

; and expected Trk, Sec values

	LD	A,(trksav)
	CALL	cahex
	LD	A,(secsav)
	CALL	cahex

	LD	A,(mesflg)
	OR	A
	JR	Z,debug1

;set HLD bit for next time around

	LD	A,settle
	LD	(rwmask),A

	emt	kywait		;doesn't zap registers
debug1:
	ENDIF

	LD	DE,(secsav)	;Reload HL,DE
	LD	HL,(drvsav)
	BIT	4,C		;T/S not found ?
	JP	Z,retrys	;No => CRC error only => No reseek
	CALL	seekz		;If T/S not founzero
; Rest	preserved

seekz:	PUSH	HL
	LD	A,getzer	;with verify

; NB verifying operations are generally dangerous since SideSel is
; multiplexd with StepDirection: but on a 'Restore' cmd, Dir is defined
; before any step pulses are sent, such as to select side 0.

	CALL	outcom
	CALL	wairdy
	LD	HL,(curtrk)
	SUB	A
	LD	(HL),A
	POP	HL
	RET	


;Wait for not busy
;
;On exit:
; A	status

wairdy:	IN	A,(status)
	BIT	0,A
	JR	Z,wairdy
	RET


;Set up final motor off

drvoff:
	IFF	larged reseek trk zero
	JP	retryt


; NB this is not necessarily an error return
;
; On entry, C=error code (=0 for OK)

giveup:
	LD	A,C
	OR	A
	JR	Z,timrt0
	LD	HL,errloc
	LD	(HL),199

	IF	t.on
	PUSH	BC
	mess	errmsg		;'Fatal error' message
	POP	BC
	PUSH	BC
	LD	A,C
	CALL	cahex
	CALL	pcrlf
	POP	BC
	ENDIF
timrt0:

	CALL	drvoff		;Turn of drive motor after ~10 secs

	EI

	RET			;C=error number




;outcom
;Output command - getting the SSel/Dir multiplexor right
; top bit =0 indicaÊ(*?∏|Õ¡0}Õ¡0Õﬂ/
Õﬂ/√Â/Èı’ÂÎ>$^ªƒﬂ/# ¯·—Ò…
Error $ at address $·Ò∑(¡„ıÂ≈E∏’>ıÕ’9Ò!E∏F∏0xÂıÕ…4…>ıÂ>WÕﬂ0–’≈! 9NA  #~∑ ¯——…Î)))8#˙—∑ÌR8!! 9 	~∑ +¯`i#)))+0¸Î·∑ÌR8…—>B 1Õﬂ0…Set bounds errorÕ~2#~#_óW Õ~2#^# Õ~2^#V#Õ~2^#V#~#∂#  Â{Õö2À:À˙& i+∑ÌR8	! 9¶··Ø˝·˘˝ÈÕO2˝·’^#V#„xë0HØ Ì∞∑(ÎG6 #˚·˘˝È˝·Õ~2„F#„xπ0 yêGØ+∂¸˝„∑(˝Â>VÕﬂ0˝·Õ~2˝Fˇ˝„˝È! 9 N#T]	…˝·Õ~2’F#Î& h„˝ÈÊ<GØ7˝…˝· ˝N ˝#
· N#Â˝·˝	Î&ˇy/o9˘q#ÎÌ∞˝Â√&<˝··÷˝·~# O∑ ﬂı3˝È|]ÀŒ }»}ÊÄ¥}»|∑}»
x  ÌZ`i»tes read or write => use side sel ELSE use direction
;
;On entry:
; A	command byte
;
;On exit:
; A	knackered
; Rest	preserved

outcom:	PUSH	AF
 	RLCA
	LD	A,(lmask)
	RES	5,A		;b5=0 gives SSel
	JR	NC,outcm0
	SET	5,A
outcm0:	LD	(lmask),A
	OUT	(latch),A
	POP	AF
	OUT	(comand),A	;Send command
	LD	A,20		;100 microsecond delay
outcm2:	DEC	A		; for WD to have valid status
	JR	NZ,outcm2	; and side sel to take effect on drive
	RET



;Seek track zero - waits for completion
;
;On exit:
; A	 screen
	JP	pmess


sjmess:	DEFM	'SJ Research File Server ver '
	DEFW	verhi,verlo

	IF	large
	DEFM	'/8"'
	ELSE
	DEFM	'/5"'
	ENDIF

; NB this label must be defined before any references to the MESS
; macro is made.
; NB2 also forms part of the above string.

crlf:	DEFM	cr,lf,'$'


	IF	t.on

;dhxout
;Print hex of HL

dhxout:	LD	A,H
	CALL	cahex
	LD	A,L
				;DROP THROUGH
;cahex
;Print hex of A
;
;On entry:
; A	number to be printed

	JP	cahex		;Now lives in h2lib or some such pL	0		;Set start sector to zero

fordat:
	gap	40		;Pre-index gap (gap 5)
	sync
	DEFB	0FCH		;Index mark
	gap	26		;Post index gap (gap 1)

	REPT	sectrk

begblk	DEFL	$

	sync
	DEFB	0FEH		;ID address mark

	IF	sec EQ 0
trknum:
	ENDIF

	DEFB	0,0		;Sector info (inc CRC)
	DEFB	sec,2,0F7H

	gap	11		;Post ID field gap (gap 2)
	sync
	DEFB	0FBH		;Data address mark

	do	512,0E5H	;Data
	DEFB	0F7H		;Data CRC

	gap	90		;Post data gap (gap 3)

endblk	DEFL	$
sec	DEFL	sec+1

	ENDM			;of REPT 

	LD	A,047H		;Reset CTC to 0A0H
	OUT	(ctc0),A
	LD	A,0A0H
	OUT	(ctc0),A

	ENDIF

	LD	A,(lmask)	;Motor select hold off
	OR	40H
	LD	(lmask),A
	OUT	(latch),A
	RET


;Start drive in A
;Only used by format - similar code in-line for normal r/w
;(gross inefficiency)

stadrv:	LD	B,A
	AND	2
	RLCA
	RLCA
	RLCA
	LD	C,A
	LD	A,89H		;Drv 1 + Drv 4 + Dint |
	BIT	0,B
	JR	Z,sta2
	LD	A,8AH		;Drv 2 + Drv 4 + Dint |
sta2:	OR	C		;SSel
	LD	(lmask),A

	IFF	large		;8" drives go round all the time
sectrk

	gap	300		;Final gap (gap 4) large to compensate
				; for variations in disk speed

	ELSE

; 5" disque

fordat:	DEFW	-1,-1,-1,-1,-1,-1,-1,-1
sec	DEFL	0

	REPT	sectrk

begblk	DEFL	$

	sync
	DEFB	0FEH

	IF	sec EQ 0
trknum	EQU	$
	ENDIF

	DEFB	0,0
	DEFB	sec,2,0F7H

	gap	11
	sync
	DEFB	0FBH

	do	512,0E5H

	DEFB	0F7H

	gap	74

endblk	DEFL	$
sec	DEFL	sec+1

	ENDM		;of REPT sectrk

	gap	160

	ENDIF		;of Large/small



blklen	EQU	endblk-begblk





	COMMO
	IN	A,(ctc0)	;Glowing anyway ?
	CP	0A0H
	JR	Z,sta0
	LD	A,(lmask)

	ENDIF

	OUT	(latch),A
	RET

sta0:	LD	A,(lmask)	;Set drive glowing
	OUT	(latch),A
sta1:	IN	A,(ctc0)	;Wait 16*64mS so it can get up speed
	CP	90H
	JR	NC,sta1
	RET



;
;
; *** DATA TABLES FOR FORMAT ***
;



do	MACRO	numb,byte
	REPT	numb/4
	DEFB	byte,byte,byte,byte
	ENDM
	REPT	numb MOD 4
	DEFB	byte
	ENDM
	ENDM

sync	MACRO
	DEFB	0,0,0,0,0,0
	ENDM

gap	MACRO	numb
	do	numb,0
	ENDM

	IF	large

sec	DEFÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                                                                                                                 ;Contains either FF or mask for settle time bit

lmask:	DEFS	1		;Mask for latch on RM disc ctrlr board


	END



che/

cache1:	DEFS	1024		;Actually longer than this

	COMMON	/twosid/

dsflag:	DS	1

	DSEG


secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

DMA:	DEFS	2		;Parameter to RWDISC

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		                                                                                                                                                                                                     ·Ò˜È·„˜ ˜»w>…˜2Ê…Ì[ Èı{˜Ò…˜ c∏DM!Ú/√⁄/Î˘≈"?∏›!Ä ›9›".∏!x0"C∏"A∏"6∏*Á/"9∏  Õü0!  "&∏!Ä "$∏"(∏!$∏"*∏!(∏",∏!  " @"@"=∏"0∏"4∏ÕÔ<˝Â˝*@!y0˝u˝t	˝* @!ã0˝u˝t˝·Ø28∏! " ∏! "2∏…˝Â’˝*@˝^Õﬂ/—˝·…È˝Â˝* @˝6 ˝·…yÕ¡0√Â/*9∏	8"9∏ 	8|/g}/o";∏9ÿ—>HÕﬂ0ıÕ 0ÒÊ∆ê'Œ@'_√ﬂ/·ÒÂÕﬂ0…À0Î^#Õﬂ/˘/1Õ1_Õﬂ/81Õ1—·Â’yIF
	ENDM

	POP	HL
	POP	DE
	POP	BC

nomess:	POP	AF

	ENDIF

	ENDM



pstat	MACRO	sw,mes1,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	large,<8 inch disk version>,<5 inch disk version>
	pstat	t.on,<Tracing ON>
	pstat	large,< (VERY) long macro expansion.......>,<long macro expansion.......>





;
; PROCEDURE ver_msg;		prints SJ FS ver etc. on screen
;


vermsg:	LD	DE,sjmess		;Print version onN	/debug/

mesflg:	DEFS	1


	COMMON	/error/

errloc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2

	COMMON	/cache/

cache1:	DEFS	1024		;Actually longer than this

	COMMON	/twosid/

dsflag:	DS	1

	DSEG


secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

DMA:	DEFS	2		;Parameter to RWDISC

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                            ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ                                                    ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ/”··ı:∏∑("Òı’Â’ÂÊÕ1·Õÿ·ÕÿÌÕ1*∏Õÿ·—ÒÌS∏"∏ÌK∏
∫ı>ˇ(>˚2∏z/”„>ÊÕ+ÕT€‡Ê  ˙Ò(	> ˛= ˘{/”‚Û|!∏∑(>w¶Õ+*∏ú€‡828¯€„/w#√{>W¶Õ+*∏¸~/G€‡8
8¯x”„#√ñı x± ˚Ò”5/¢O(RÊÁ N:∏˛0G<2∏≈Õ1¡yÕ¡0€·/Õ¡0€‚/Õ¡0:∏Õ¡0:∏Õ¡0:∏∑(>˚2∏˜"Ì[∏*∏Àa iÕD√5y∑(!∏6«≈ÒÕ1¡≈yÕ¡0Õ‡¡Õ[˚…ı:∏ÀØ0ÀÔ2∏”‰Ò”‡>= ˝…Â>ÚÕ+ÕT*∏ów·…€‡ÀG(˙…:∏ˆ@2∏”‰…GÊO>âÀ@(>ä±2∏”‰…:∏”‰€Ï˛ê0˙…                                              ¸                                ˛   ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ˜                                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ                                                                                ˛  ˜                 ˚ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÙ3ÕIs the disc double sided ?ÕÀ2> ıÕ¶4Õ=4Õ.Õ†2∏ÕK0›6ç(›6çMÕ4ÕsHow many tracks on each side of the discÕÀ2(> ıÕ¶4Õ=4ÕÙ3Õè(Usually ÕÀ2	> ıÕ¶4›~ç!  ÂoÂ>ıÕE1ÕÆ) :ÕÀ2> ıÕ¶4Õ=4›nç& Â!d ÂÕ©Õ2›wåÕ4Õ˙How much disc space for each account ?ÕÀ2&> ıÕ¶4Õ=4Õ4Õ(Try ÕÀ2> ıÕ¶4›~åı>
Õ>9ı>
Õï9  ’Â>ıÕE1ÕXK - any account may be adjustedÕÀ2> ıÕ¶4Õ=4ÕÙ3ÕÑ later). In units of 1K :ÕÀ2> ıÕ¶4Õ=4›~åı>
Õ>9ı>
Õï9Â!ˇˇÂÕ©ﬂ
>›pÖ›wç!   ›qÉ›pÑ›uà›tâ›~ç∑¸ 3ÕãÁÑ ÕÏ8<Â›nà›fâÀ|ƒ 3ÕÇ—6 ›nà›fâ#›NÉ›FÑx± t new discÕÀ2> ıÕ¶4Õ=4Õ4Õ4P - clear Password fileÕÀ2> ıÕ¶4Õ=4Õ4ÕOS - StopÕÀ2> ıÕ¶4Õ=4Õ4Õ=4ÕÙ3ÕqCommand :ÕÀ2	> ıÕ¶4Õ=4ÕÕ¶2@Õ4:@ı>ıÕÖ4Õ=4:@Õ5Õ&√f:∏ÓÕ†2∏ÕÙ3Õ∫Debug ÕÀ2> ıÕ¶4Õ=4:∏0Õ4Õ’OnÕÀ2> ıÕ¶4Õ=4Õ4ÕÌOffÕÀ2> ıÕ¶4Õ=4jÕâeÕk
`Õ¯[!∏6TÕ4Õ&Illegal optionÕÀ2> ıÕ¶4Õ=41Õπ<AùCD£F¸PQSaùcd£f¸pqs:∏“^ÕÂ/√1 √3  ˇ √u1  ˇ√:3√3  ˇ√:3
√3 √03 √03≤√1SJ Research File Server ver 0.38/8"
$|Õ¡0}√¡0’√1 RDTS=$ @ $ fatal disc errπ›~ç<›5Ö ßÕK0›~åı>Õï9›uà›tâ›~åı>Õï9›uà›tâ:∏0!f@6ˇ›nà›fâ"g@!f@6 ›nà›fâÀ<À"g@!@›uÑ›tÖÕ4›nÑ›fÖb ÁÄ  ’Â>ıÕE1ÕÑK discÕÀ2> ıÕ¶4Õ=4›nÑ›fÖ#6$›nÑ›fÖ##6›nÑ›fÖ 6 ›nÑ›fÖ 6›nÑ›fÖ  6#6 ›nÑ›fÖ@ ÂÕSJ Research File Server·— Ì∞›nÑ›fÖÅ ÂÕ%Passwords·—
 Ì∞›nÑ›fÖó 6!  ›pÇ›uà›tâ›nÑ›fÖÂ›nà›fâÀ|ƒ 3Õë)—Â›nä›fãÁÅ›nà›fâ#›5Ç Õ!DÂ≈ÕyÕ,2 >›pÖ›wç›~ç∑¸ 3ÕsÁÑ@ ÕÏ8D Â›~ç·w›~ç<›5Ö ‘ÕÙ3ÕƒDisc name (max 10 characters) :ÕÀ2> ıÕ¶4Õ=4›6ç ÕÕ¶2@˛ÕÊ:ı:@˛ÕÊ:GÒ∞05> ›æç0,ÕÙ3>ı>or $ bad $
Formatting drive ?$
Format error &$
Verify error &$ sector &$Ø…!∏6ˇ#˚…>ı!@ÂØı!  ÂÕá:∏∑¿!E@≤æ #¯:f@Ê2∏…>2∏…Û·—Ò_Â’∆A2
Õ1—’{ÕfÕDóıÕ/Ê¸(ıÕ1ÒÕ¡0ÌÕ1€·/Õ¡0—Ò3â x± ˚Ò—<∫(%’ı>¶Õ+ÕTÒ¿·—ÒÂ’ÕfÕDóıÕ-Ò—’<∫ ı—Õ[˚ÕM…!ÿyw¸>Õ+!à„~/G#€‡ÿ8˘ÌAÒ/”„>ÊÕ+ÕT Õm/Ê¸(%≈ı0Õ1ÒÕ¡0ÌÕ1€·/Õ¡0AÕ1€‚/Õ¡0¡œ…y∑/”‚>w Ê˚Õ+€‡ÿ8˘€„√{Ø2∏¡·Ò—ÌS∏_Ò≈=/W)Â’Õ∏—·¿:∏∆2∏#Õ∏:∏∑ƒ‡…ó2∏’}Ê_)))))T·óE7˝o:∏∑}(À:0ˆoˆàÂ2∏€‡Àı:∏”‰ÊOÒ!∏ 	~"∏∑¸DıÕÖ4> ı>ıÕÖ4>ı>ıÕÖ4Õ=4›~ç∑Ã¿3=›wçO›~ç˛
0H›~ç∆W‹¿3o& @Â:@·w> !@æ0ÕÙ3:@ı>ıÕÖ4Õ=4ÕÙ3>.ı>ıÕÖ4Õ=4›~ç<Ã¿3›wç:@˛¬’Õ4Õ=4> ı›~åıÕå:∏0
>ı›~åıÕåÕ4Õ=4> ı!@Â> ı!  ÂÕá> ı!DÂ> ı! ÂÕá> ı›~åıÕË:∏0
>ı›~åıÕËÕ4Õ=4Õ4!Õ§2> ıÕ¶4Õ=4Õ4Õ=4ÕÙ3ÕFormat another disc ? ÕÀ2> ıÕ¶4Õ=4Õ.Ó“ü√3<!:√Í/Õ8;ÕM!∏6 !∏6 !∏6 ÕÙ3>ı>ıÕÖ4Õ=4Õ4Õ=4Õ4Õ=4Õ¨Õ4ÕÇUtility ProgramÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4ÕæA - Alter individual space accountsÕÀ2#> ıÕ¶4Õ=4Õ4Õ‰C - Copy whole discÕÀ2> ıÕ¶4Õ=4Õ4Õ
F - Forma˛  ˘ÕX:∏˛ 0Õ4Õ2Not a file server format discÕÀ2> ıÕ¶4Õ=4:∏∑ ÇÕ4Õ=4ÕÙ3Õ]Disc Name = ÕÀ2> ıÕ¶4Õ=4›6ÇÕÙ3›~Ç∑¸ 3ÕöÁÑ[@~ı>ıÕÖ4Õ=4›~Ç<Ã¿3›wÇı>
¡∏> ı›~Ç∑Ã¿3=∑¸ 3ÕöÁÑ[@~˛ÕÊ:GÒ∞0ÆÕ4Õ=4Õ4Õ◊Two sided =ÕÀ2> ıÕ¶4:∏ı>ıÕz>Õ=4Õ4ÕˇDisc size =ÕÀ2> ıÕ¶4*g@  ’Â>ıÕE1>Kı>ıÕÖ4Õ=4√3<Õ<ˇÕ4ÕL        DISC SPACE ACCOUNTSÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4ÕäPlace disc to be adjusted in drive A.ÕÀ2%> ıÕ¶4Õ=4Õ¬Õ4Õ=4ÕÙ3Õ∂Account number :ÕÀ2> ıÕ¶4Õ=4Õ0›wÇÕ4Õ‡Current balance =ÕÀ2> ıÕ¶4 ›nÇ& ∑ÌJ‹¿3À|ƒ 3Õëtents ofÕÀ2&> ıÕ¶4Õ=4Õ4Õ@the new disc are destroyed, includingÕÀ2%> ıÕ¶4Õ=4Õ4Õvdisc name, account information etc.ÕÀ2#> ıÕ¶4Õ=4Õ4Õ´The new disc need not have alreadyÕÀ2"> ıÕ¶4Õ=4Õ4ÕŒ been formatted.ÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4Õ	Place disc to be copied in drive AÕÀ2"> ıÕ¶4Õ=4Õ4ÕA& new disc to receive copy in drive BÕÀ2%> ıÕ¶4Õ=4Õ4Õ=4ÕÙ3ÕlFormat new disc ? ÕÀ2> ıÕ¶4Õ=4Õ.Õ†›wÇÕ4Õ=4Õ¬*g@ﬂ:∏0ﬂÉÀ<ÀﬂÕK0AﬂÉÁáÂ≈ÕÍ7Õ3ﬂÂ! ÕA>|µ ﬂÉÂ! Õê7Õ2›wâﬂÉÂ! Õê7#|µÃ¿3Õ2›wâ.ﬂÉ}Ê∑ ﬂÉÂ! Õê7Õ2›wâﬂÉ)@ÁÄ  ’Â>ıÕE1Õ=4ÕÙ3Õ(New balance :ÕÀ2> ıÕ¶4Õ=4 ›nÇ& ∑ÌJ‹¿3À|ƒ 3Õë)@Â ›nÇ& ∑ÌJ‹¿3À|ƒ 3Õë)@ÁÄÂ!ˇˇÂÕ©ÁÅÕÙ3ÕóAdjust another account ? ÕÀ2> ıÕ¶4Õ=4Õ.Ó“öÕ4Õ=4ÕÙ3Õ—Write back new values ? ÕÀ2> ıÕ¶4Õ=4Õ.0> ı!@Â> ı!  ÂÕá√3<Õ<¸
Õ4Õ        CLEAR PASSWORD FILEÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4ÕZThis option will clear a corrupt orÕÀ2#> ıÕ¶4Õ=4Õ4Õêunwanted password file from a disc.ÕÀ2#> ıÕ¶4Õ=4Õ4Õ∆All other files on the disc will beÕÀ2#> ıÕ¶4Õ=4Õ4ÕËleft unaltered.ÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4Õ$Â! Õê7#|µÃ¿3Õ2›wâÕ4Õ$Tracks    =ÕÀ2> ıÕ¶4›~â!  ÂoÂ>ıÕE1Õ=4›~Ç0 >ı›~âıÕå:∏0
>ı›~âıÕåÕ4Õ=4*g@|µÃ¿3+ﬂ!  ﬂ›6à>ı›~à∑¸ 3ÕãÁÑ ÕÏ8<Â> ı›~àO ﬂÉ∑ÌJ‹¿3|µÃ¿3+ÂÕá›~à<Ã¿3›wàﬂÖ|µÃ¿3+ﬂ>›æà> ıﬂÖ|µÕÊ:GÒ∞0°›6á> ı›~á∑¸ 3ÕãÁÑ ÕÏ8<Â>ı›~áO ﬂÉ∑ÌJ‹¿3|µÃ¿3+ÂÕá›~á<Ã¿3›wá›æà º›6à ﬂÉ∑ÌJ‹¿3ﬂﬂÖ|µ¬zÕ4ÕLCopy completeÕÀ2> ıÕ¶4Õ=4>ı›~âıÕË:∏0
>ı›~âıÕËÕ4!Õ§2> ıÕ¶4Õ=4√3<Õ<ÙÕ4ÕÆ           FORMAT NEW DISCÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4ÕÏPlace disc to be formatted in drive AÕÀ2%> ıÕ¶4Õ=4Õ4Õ=4Õ	This option can also be used to addÕÀ2#> ıÕ¶4Õ=4Õ4ÕZ	a password file to a disc used withÕÀ2#> ıÕ¶4Õ=4Õ4Õë	earlier versions of the file server.ÕÀ2$> ıÕ¶4Õ=4Õ4Õ=4Õ4ÕŒ	Place disc to be cleared in drive A.ÕÀ2$> ıÕ¶4Õ=4Õ¬!@ﬂ>ÄÄ›pÇ›wÖ›nÉ›fÑÂ›nÖ& —6 ›~Ö<›5Ç ‰ﬂÉÅ ÂÕ
%Passwords·—
 Ì∞ﬂÉó 6Õ4Õ=4Õ4ÕJ
Password file clearedÕÀ2> ıÕ¶4Õ=4> ı!@Â> ı!  ÂÕá√3<Õ<¯Õ4Õê
           WHOLE DISC COPYÕÀ2> ıÕ¶4Õ=4Õ4Õ=4Õ4Õœ
This option makes an identical copy ofÕÀ2&> ıÕ¶4Õ=4Õ4Õa whole disc. Any previous conW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï ÂrΩ¿                                                                                                                                                                                                      √4Verify completeÕ<˛!Çˇ◊ÂÕ /0ı›~ÇÕ¶›wÉ√3<Õ<˝	ÕÙ3Õ@ (Y/N):ÕÀ2> ıÕ¶4Õ=4ÕÕ¶›wÉ˛NÕÎ:ı›~É˛nÕÎ:GÒ†Õ†›wÇ0Õ4ÕyYesÕÀ2> ıÕ¶4Õ=4Õ4ÕêNoÕÀ2> ıÕ¶4Õ=4›~ÇÕ†›wÑ√3<Õ<¯›6á   !  Õ;ÇÕÕ¶›wÜıÕØ2      ˇÕÊ1(>›6áÕÙ3›~Üı>ıÕÖ4Õ=4Õ;ÇÂ≈
 !  Õ°>Â≈›~ÜÁÜÕÍ7Â≈0 !  Õ˘7Õ;ÇK›~Ü˛ÕÊ:ı›~Ü˛ÕÊ:GÒ∞04ÕÙ3>ı>ıÕÖ4> ı>ıÕÖ4>ı>ıÕÖ4Õ=4Õ;ÇÂ≈
 !  Õ‘6Õ;Ç›~Ü˛ÕÊ:ıÕ;ÇÂ≈?B! Õì8Õ:GÒ∞“ºÕ;ÇÂ≈ﬂäÁáÕì8ÚÌÕ4Õ=4Õ4Õ¥Must not be more than ÕÀ2> ıÕ¶4ﬂä  ’Â>ıÕE1Õ=4ÕÙ3Õ‡ Try again :ÕÀ2> ıÕ¶4Õ=4Õ;ÇÂ≈ﬂäÁáÕì8˙Æ›~á                                                                                                                                                                                                                                                ÉQPïQÂ‡ 5II=J^ / ÉëîëQPì%‡ Ä5!^ / Éï”‘“Q%‡ 	p ∏\. ó KÅ@%¿‡‡ê	ph∏8\t®h)´⁄¿
Üêñ¶ï° »âi)…*ëŸåí¨äíù‡ »…ÍI®*ëñ‡:†öä¶ß€™JËIâqí 
¨ä§êì< »™I(À1í@
¨ä§òü   »™I™hÛÄ  û                                                     ÉQPïQÂ‡ 5I0Õ;ÇÕ3ﬂﬂåﬂÕÙ3ﬂå  ’Â>ıÕE1Õ=4Õ4Õ=4ﬂà√3<Õ<˝	›6Ç ÕÕ¶›wÉ˛ÕÊ:ı›~É˛ÕÊ:GÒ∞00ÕÙ3>ı>ıÕÖ4> ı>ıÕÖ4>ı>ıÕÖ4Õ=4›~Çı>Õ>9›wÇ√®›~Ç˛“®›~ÉıÕØ2      ˇÕÊ1(AÕÙ3›~Éı>ıÕÖ4Õ=4›~Çı>Õï9Â›~ÉO ·∑ÌJ‹¿3ÁáÂ≈0 !  Õ˘7x¥µƒ 3y›wÇ√®›~ÉıÕØ2	        ~ÕÊ1(KÕÙ3›~Éı>ıÕÖ4Õ=4›~Çı>Õï9Â›~ÉO ·∑ÌJ‹¿3ÁáÂ≈A !  Õ˘7Â≈
 !  ÕÍ7x¥µƒ 3y›wÇc›~ÉıÕØ2            ~ÕÊ1(IÕÙ3›~Éı>ıÕÖ4Õ=4›~Çı>Õï9Â›~ÉO ·∑ÌJ‹¿3ÁáÂ≈a !  Õ˘7Â≈
 !  ÕÍ7x¥µƒ 3y›wÇ›~É˛¬9›~Ç›wÑÕ4Õ=4›~Ñ√3<Õ<ˇÕ4ÕÒCheck discs & press space when readyÕÀ2$> ıÕ¶4Õ=4Õ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                rπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+‹                                                                                                           ¸   Op                  Ì Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï                         `‹                   ˚rπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆWÂrπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ïÓ                                                                                                            ˛   †'∏                  ˆÂrπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Â{Ä                                                                                                           ?Ä  8	Ó                   }π\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\Æ Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï ˜                                                                                       +ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ^‡                                                               \ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW∏                                                                                                           ¯  Äû‡                  €ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Âr                                            ‡  {Ä                  nW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\π\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï ÂÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\Øp                                                                                                             =¿                  ∑+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ’õ`@^-®Òt z¥Y∂ºˆÕ¥ ê0 CK'ê‹2~Ål⁄˛!ªÄ`Á¯^G∂‹ ˆ¿<p˘vêC{M∆>s3k¯6‘Ä@ Üm¡¿Óg‡†J≈zÑl 6äÄºY¥l#P@∂|∂·≥mF Ä3mHmƒ/f⁄Aû…<≠≈Ì7¯Ó 9ül⁄˛€p€ Ò√Â∂„a‹xÀÄ 0\/ã¥ßÅ¿Ô(Ù^WπZ¨⁄—pÉ¨÷ c ÜX  FÕ°ÄC®5	UÄ -ÿî–íó`@©ıÃ/äE"ëH§®·Kë@Ép∏A˙oA äÈÍi(ú n}ôc°Ä	Ï7ΩëQñ m∏g˜®Î 4‹é`	=‚!¡  ` $¸"¿†wÂò¥‹.®ÍDEBUG‡ q@â‚ıjπZÆPç: f€P6ñ 8Y¥∞ #P@µ§UÅ¿¥∞¬—xªJx  EÄÄ§º
 
]=GœÒ@|˚`––^”qèúÃ⁄˛Õµ m∑ò@ }<E ë ?á¢…Ï^”q<œÇ ∑««u36øÅä∞8 Y8€p« x·€qãŒ‚6œ‘Ã⁄˛*¿‡g·¯^Gm∏„ÄP<p¯<4‹                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                b6ÍzÄO‡ Y·b }º@Ì1®ΩDOúŒq8uÅ ¿!Åx2¿ÄPçX f◊p&	Âõn¿[n{6ìÅ∂‹Bˆm-`m3` m9p ∏†>}å∞h‹DÌ-‡ V eòYVÙ	õf ÿv$Ú∑Ñ0j*íízó  1ÿ°ä Õ§@l)ÂõO¿Ÿ¥–ÇÕµ‡o∂K‘:¡¿µx¿Àwå∞pM»Òi∏¡AËÅ˙…rèûL⁄˛Õµ b¨
 ó;∏Y-∑,é(}2GX8Ï@`‡õëíGs Ä‡p9<|âeê !Ú)b2¡¿7#$uÉÄnF€±¸ê>ô                                                    ?                                    ¿   ˜                   >‹ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆW+ï Ârπ\ÆWÖëT–ÕL`U%t$ƒ∏-%9%RFORMATÅïëTíQñ`T4Ñµ4®%Y%:VERMSGä ÄTDT%Tx†ERRORä de$TT$»† %CACHEä ÄeEtı4îI@x‘dd#AÄ` Lî )NfS	»∆hç&√(Ä¶e9åß!ÿ r     ºp"ÇÑá∆h  }a“‡ ç) a–@HàT)èDÇ ÄH 3NÜ`Ä»i9òƒSë»ﬁr	#	ê@$Çà∆Ûë¥¬t:M∆qê‰i;DÒ 4F7úç¶†Ä r9ŒB0ê
+NFì1‰@e9çÁ! òH 9ôLgCy»@&+Ÿ" çü‚0ÉÌí> ΩD0j
B/  r´ﬁ¢  Õª`#®5II=KÄ -ÿ5!† h0 ._¢0òA:Ï ` TWOSID‡ ëe¢©)'©p KÕ¬—xó‹≠V1e\@5xõN -S€6›≥l¿]ÍÕ´Ä";ô¯(ΩB5Ãõ| ,⁄d ® ⁄€pãŸ¥<¢Ò¿(ê ,±>ﬁ-‚ËP%jΩG fmf⁄Ä7àaÄ·hº\≠Vm∫fŸÄ4ª
	IN	A,(ctc0)	;Glowing anyway ?
	CP	0A0H
	JR	Z,sta0
	LD	A,(lmask)

	ENDIF

	OUT	(latch),A
	RET

sta0:	LD	A,(lmask)	;Set drive glowing
	OUT	(latch),A
sta1:	IN	A,(ctc0)	;Wait 16*64mS so it can get up speed
	CP	90H
	JR	NC,sta1
	RET



;
;
; *** DATA TABLES FOR FORMAT ***
;



do	MACRO	numb,byte
	REPT	numb/4
	DEFB	byte,byte,byte,byte
	ENDM
	REPT	numb MOD 4
	DEFB	byte
	ENDM
	ENDM

sync	MACRO
	DEFB	0,0,0,0,0,0
	ENDM

gap	MACRO	numb
	do	numb,0
	ENDM

	IF	large

sec	DEFL	/debug/

mesflg:	DEFS	1


	COMMON	/error/

errloc:	DEFS	1

	COMMON	/freebl/

dsksiz:	DEFS	maxdrv * 2

	COMMON	/cache/

cache1:	DEFS	1024		;Actually longer than this

	COMMON	/twosid/

dsflag:	DS	1

	DSEG


secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

DMA:	DEFS	2		;Parameter to RWDISC

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		;	0		;Set start sector to zero

fordat:
	gap	40		;Pre-index gap (gap 5)
	sync
	DEFB	0FCH		;Index mark
	gap	26		;Post index gap (gap 1)

	REPT	sectrk

begblk	DEFL	$

	sync
	DEFB	0FEH		;ID address mark

	IF	sec EQ 0
trknum:
	ENDIF

	DEFB	0,0		;Sector info (inc CRC)
	DEFB	sec,2,0F7H

	gap	11		;Post ID field gap (gap 2)
	sync
	DEFB	0FBH		;Data address mark

	do	512,0E5H	;Data
	DEFB	0F7H		;Data CRC

	gap	90		;Post data gap (gap 3)

endblk	DEFL	$
sec	DEFL	sec+1

	ENDM			;of REPT sContains either FF or mask for settle time bit

lmask:	DEFS	1		;Mask for latch on RM disc ctrlr board


	END



he/

cache1:	DEFS	1024		;Actually longer than this

	COMMON	/twosid/

dsflag:	DS	1

	DSEG


secsav:	DS	1		;Disk, track & sector saves for retry
trksav:	DS	1
drvsav:	DS	1
rdfsav:	DS	1

rcount:	DS	1

curtrk:	DEFS	2		;This points to something. Why no comment?

DMA:	DEFS	2		;Parameter to RWDISC

trkno:	DEFS	maxdrv		;Current tracks of drvs 0..4

rwmask:	DEFS	1		;ectrk

	gap	300		;Final gap (gap 4) large to compensate
				; for variations in disk speed

	ELSE

; 5" disque

fordat:	DEFW	-1,-1,-1,-1,-1,-1,-1,-1
sec	DEFL	0

	REPT	sectrk

begblk	DEFL	$

	sync
	DEFB	0FEH

	IF	sec EQ 0
trknum	EQU	$
	ENDIF

	DEFB	0,0
	DEFB	sec,2,0F7H

	gap	11
	sync
	DEFB	0FBH

	do	512,0E5H

	DEFB	0F7H

	gap	74

endblk	DEFL	$
sec	DEFL	sec+1

	ENDM		;of REPT sectrk

	gap	160

	ENDIF		;of Large/small



blklen	EQU	endblk-begblk





	COMMON 1771 Trk, Sec registers

	IN	A,(track)
	CPL
	CALL	cahex
	IN	A,(sector)
	CPL
	CALL	cahex

; and expected Trk, Sec values

	LD	A,(trksav)
	CALL	cahex
	LD	A,(secsav)
	CALL	cahex

	LD	A,(mesflg)
	OR	A
	JR	Z,debug1

;set HLD bit for next time around

	LD	A,settle
	LD	(rwmask),A

	emt	kywait		;doesn't zap registers
debug1:
	ENDIF

	LD	DE,(secsav)	;Reload HL,DE
	LD	HL,(drvsav)
	BIT	4,C		;T/S not found ?
	JP	Z,retrys	;No => CRC error only => No reseek
	CALL	seekz		;If T/S not foundero
; Rest	preserved

seekz:	PUSH	HL
	LD	A,getzer	;with verify

; NB verifying operations are generally dangerous since SideSel is
; multiplexd with StepDirection: but on a 'Restore' cmd, Dir is defined
; before any step pulses are sent, such as to select side 0.

	CALL	outcom
	CALL	wairdy
	LD	HL,(curtrk)
	SUB	A
	LD	(HL),A
	POP	HL
	RET	


;Wait for not busy
;
;On exit:
; A	status

wairdy:	IN	A,(status)
	BIT	0,A
	JR	Z,wairdy
	RET


;Set up final motor off

drvoff:
	IFF	large reseek trk zero
	JP	retryt


; NB this is not necessarily an error return
;
; On entry, C=error code (=0 for OK)

giveup:
	LD	A,C
	OR	A
	JR	Z,timrt0
	LD	HL,errloc
	LD	(HL),199

	IF	t.on
	PUSH	BC
	mess	errmsg		;'Fatal error' message
	POP	BC
	PUSH	BC
	LD	A,C
	CALL	cahex
	CALL	pcrlf
	POP	BC
	ENDIF
timrt0:

	CALL	drvoff		;Turn of drive motor after ~10 secs

	EI

	RET			;C=error number




;outcom
;Output command - getting the SSel/Dir multiplexor right
; top bit =0 indicat

	LD	A,047H		;Reset CTC to 0A0H
	OUT	(ctc0),A
	LD	A,0A0H
	OUT	(ctc0),A

	ENDIF

	LD	A,(lmask)	;Motor select hold off
	OR	40H
	LD	(lmask),A
	OUT	(latch),A
	RET


;Start drive in A
;Only used by format - similar code in-line for normal r/w
;(gross inefficiency)

stadrv:	LD	B,A
	AND	2
	RLCA
	RLCA
	RLCA
	LD	C,A
	LD	A,89H		;Drv 1 + Drv 4 + Dint |
	BIT	0,B
	JR	Z,sta2
	LD	A,8AH		;Drv 2 + Drv 4 + Dint |
sta2:	OR	C		;SSel
	LD	(lmask),A

	IFF	large		;8" drives go round all the time
es read or write => use side sel ELSE use direction
;
;On entry:
; A	command byte
;
;On exit:
; A	knackered
; Rest	preserved

outcom:	PUSH	AF
 	RLCA
	LD	A,(lmask)
	RES	5,A		;b5=0 gives SSel
	JR	NC,outcm0
	SET	5,A
outcm0:	LD	(lmask),A
	OUT	(latch),A
	POP	AF
	OUT	(comand),A	;Send command
	LD	A,20		;100 microsecond delay
outcm2:	DEC	A		; for WD to have valid status
	JR	NZ,outcm2	; and side sel to take effect on drive
	RET



;Seek track zero - waits for completion
;
;On exit:
; A	z) OR (ch='Y') OR (ch='n') OR (ch='N')

UNTIL (ch='N') OR (ch='n');
RM_init;

END.

 =fcb1.curr_blk;
        Disc_wr(Addr(big_buff[p+12]),1024,0,False,bl_des);
        p:=p+blk_size;
        IF error=0 THEN Update_blk(fcb1,p) {sets <error>}
      END;
      IF error<>0 THEN Err_message
    END;
    Inc_w(file_no)
  END
  UNTIL dir_code=255;

  Empty_cache;

  Write('Convert another disc ? (Y/N):');
  REPEAT
    REPEAT UNTIL Inkey(ch)
  UNTIL (ch='y'm
	LD	D,0FCH

write0:	LD	A,(HL)
	CPL
	LD	B,A
write2:	IN	A,(status)
	RRCA
	JR	C,write4
	RRCA
	JR	C,write2
	LD	A,B
	OUT	(data),A
	INC	HL
	JP	write0

write4:	PUSH	AF		;Write finished so wait for tunnel erase to end
	LD	BC,3700/29	; 1ms minus allowance for shortest code to
write5:	DEC	BC		; next call of OUTCOM
	LD	A,B		; 29 is the no. of T states in the loop.
	OR	C
	JR	NZ,write5
	POP	AF		;useful instruction as A has been PUSHed before

;drop through

;Return from Read or Write

rwretCALL	outcom		;Do it
	CALL	wairdy		;Seek with no verify can cause no errors

;wait for head to load (=output from CTC)

headld:	IN	A,(status)
	AND	020H		;Test head load (=0 for loaded)
	JR	NZ,headld

	POP	AF		;NZ if we have done a real seek, so insert
	JR	Z,nowait	;RML-style wait

	LD	A,4
headl2:	LD	B,0
	DJNZ	$		;15*256*4=15000T,4 ms.
	DEC	A
	JR	NZ,headl2

nowait:	LD	A,E		;Fill in sector
	CPL
	OUT	(sector),A
	DI			;Stop interrupts

;retry sector without re-seeking

retrys:	LD	A,H		;S:	RLCA			;Move byte back the way it came
	OUT	(pagoff),A	;Turn off cache memory
	CPL			;Data bus all inverted !
	AND	D		;Mask out silly bits
	LD	C,A		;Save error number in case we want to retry
	JR	Z,giveup	;OK ?

; Not Ready,Write prot,Write fault,Lost data are all fatal

	AND	0E7H
	JR	NZ,giveup

	LD	A,(rcount)	;How many goes have we had at this sector ?
	CP	maxtry		;Too many ?
	JR	NC,giveup
	INC	A
	LD	(rcount),A

	IF	t.on
	PUSH	BC
	mess	rtrmsg

	POP	BC
	LD	A,C
	CALL	cahex

;printave R/W flag
	LD	HL,rwmask	;Address of mask containing settle time bit
	OR	A
	JR	Z,write

;Read a sector

read:	LD	A,rdsec
	AND	(HL)		;Insert settle time
	CALL	outcom
	LD	HL,(DMA)	;Set address to R/W to/from
	LD	D,9CH		;mask for relevant error bits

read0:	IN	A,(status)
	RRCA
	JR	C,rwret
	RRCA
	JR	C,read0
	IN	A,(data)
	CPL
	LD	(HL),A
	INC	HL
	JP	read0




;Write out a sector

write:	LD	A,wrsec
	AND	(HL)		;Insert settle time
	CALL	outcom
	LD	HL,(DMA)	;Set address to R/W to/froan get up speed
	CP	90H
	JR	NC,stadr1

	ENDIF

stadr3:	LD	HL,trkno	;Work out track address
	LD	B,0
	ADD	HL,BC
	LD	A,(HL)
	LD	(curtrk),HL	;Save address of current track store
	OR	A
	CALL	M,seekz		;-ve => not used before so seek track zero
	CPL
	OUT	(track),A	;update track register
	POP	HL

	IF	t.on
trace:	mcond	l4
	PUSH	AF
	PUSH	DE
	PUSH	HL
	PUSH	DE
	PUSH	HL
	mess	dtsmsg
	POP	HL
	CALL	dhxout
	POP	HL
	CALL	dhxout
	mess	atmsg
	LD	HL,(DMA)
	CALL	dhxout
	POP	HL
	POP	DE
l4:	POP	A-11) THEN Writeln('Too long - not copied')
    ELSE BEGIN
       {already got 128 bytes of which 11 are loadaddr,file sighs, etc}
      p:=128-11;
      WHILE p < file_size DO BEGIN
        Bdos(b,26,Addr(big_buff[p+12]));  {set DMA}
        Bdos(b,20,Addr(read_blk)); {get some bytes}
        p:=p+128
      END;
 
 
      Writeln('Writing file ',fname);
 
      C_dir(dir_name);
      Open_out(fname,fcb1,file_size);
      Move(big_buff,cache.dir_ent[fcb1.DDA.offset].load_addr,8);
      p:=0;F
	ENDIF


;On entry to here:
; D	track
; E	sector
; H	read flag

	LD	(secsav),DE	;Save in case of retrys
	LD	(drvsav),HL

retryt:	LD	BC,(curtrk)	;Get pointer to current track
	LD	A,(BC)
	CP	D		;Already there?
	PUSH	AF		;Save Z flag in particular
	LD	A,-1
	JR	Z,nosetl
	LD	A,settle	;Settle time mask for read or write command
nosetl:	LD	(rwmask),A	;Save for read/write command

	LD	A,D		;Dest track
	LD	(BC),A		;Update track store
	CPL
	OUT	(data),A	; And prepare to seek

	LD	A,seek
	
      bl_des.drive:=0;
 
      WHILE (error=0) AND (p < file_size) DO BEGIN
        Update_blk(fcb1,p);
        bl_des.blk:=fcb1.curr_blk;
        Disc_wr(Addr(big_buff[p+12]),1024,0,False,bl_des);
        p:=p+blk_size;
        IF error=0 THEN Update_blk(fcb1,p) {sets <error>}
      END;
      IF error<>0 THEN Err_message
    END;
    Inc_w(file_no)
  END
  UNTIL dir_code=255;

  Empty_cache;

  Write('Convert another disc ? (Y/N):');
  REPEAT
    REPEAT UNTIL Inkey(ch)
  UNTIL (ch='y'name:='$'
    ELSE GetScr(Addr(big_buff[dir_code*32+10]),b-10,dir_name);
    fname:=Concat(dir_name,'.',fname);
    Writeln('Reading ',fname);
 
    FOR b:=0 TO 32 DO read_blk.data[b]:=0;
    read_blk.drive:=Land(Ord(ch),07H); {Insert drive}
    Move(big_buff[dir_code*32+2],read_blk.name,11); {move name to FCB}
    Bdos(b,15,Addr(read_blk)); {Open file}
    Bdos(b,20,Addr(read_blk)); {read 1st 128 bites}
    file_size:=big_buff[9]+big_buff[10]*256+big_buff[11]*65536;
    IF file_size > (buff_sizeO BEGIN {Currently, all bytes set to 0!}
      dir_ent[0].bit_map:=[0]; {only ent 0 exists}
      FOR a:=1 TO M1ents_per_block DO dir_ent[a].next_ent:=a;
      needs_writing:=True
    END
  END
END;

FUNCTION Check_open(DDA:disc_address;look_for:fcb_flags):Boolean;
BEGIN
Check_open:=false
END;



{ MAIN PROG }

BEGIN
WITH cache DO BEGIN
  needs_writing:=False;
  which_blk.drive:=255
END;

Writeln('Disc Convert/copy program');

REPEAT
  Writeln;
  Writeln('Insert FS 0.1x data disc  Leaves result in A & remainder 

	LD	DE,-500H
tscon1:	ADD	HL,DE
	JR	C,tscon0
	SBC	HL,DE
tscon0:	RLA
	SRA	D
	RR	E
	JP	NC,tscon1

	LD	D,A		;Swap regs - so correct for output
	LD	E,L

	ENDIF

	POP	HL		;drive now in L (0..3)


;Convert drive number into drive bits

	SUB	A
	LD	B,L
	INC	B		;As drive numbers start at 0
	SCF
cdrnol:	RLA
	DJNZ	cdrnol
	LD	L,A		;has a single bit set in it.

;Start drive in A and select the correct side

	LD	A,(dsflag)	;Double sided ?
	OR	A
	LD	A,L		;Din drive B');
  Writeln('and new format FS disc in drive A');
  Writeln;
  Write('Drive to read from (must be B or D):');
 
  REPEAT
    REPEAT UNTIL Inkey(ch);
  UNTIL (ch='B') OR (ch='D') OR (ch='b') OR (ch='d');
 
  Writeln(ch);
  Writeln;

  Init_disc;

  FOR b:=0 TO 32 DO search_blk.data[b]:=0;
  search_blk.drive:=Land(Ord(ch),07H);
  search_blk.name:='???????????';
  file_no:=0;


  REPEAT
  RM_init;
  Bdos(b,26,Addr(big_buff)); {set DMA}
  Bdos(dir_code,17,Addr(search_blk)); {Srive bits
	JR	Z,stadr2
	SRL	D		;Modify track number (/2)
	JR	NC,stadr2
	OR	10H		;Other side
stadr2:	LD	L,A		;Save for trace
	OR	88H		;Drv4 + Dint |

	PUSH	HL
	LD	(lmask),A

	IN	A,(status)	;Ready ?
	BIT	7,A

	PUSH	AF
	LD	A,(lmask)
	OUT	(latch),A	;Set drive glowing
	AND	1		;Use as offset for track store
	LD	C,A		; WON'T WORK ON >2 DRIVES ***************
	POP	AF

	IFF	large		;8" drives go round all the time

	JR	NZ,stadr3	;Ready => going round

stadr1:	IN	A,(ctc0)	;Wait 16*64mS so it cearch first - offset returned in A}
 
  FOR a:=1 TO file_no DO Bdos(dir_code,18,Addr(search_blk)); {search next}
 
  IF dir_code<>255 THEN BEGIN {=255 if not found}
   {Work out NEW file name}
    b:=2;
    REPEAT
      b:=Succ(b);
    UNTIL (big_buff[dir_code*32+b]=32) OR (b=9); {Skip until space}
    GetScr(Addr(big_buff[dir_code*32+2]),b-2,fname);
    b:=10;
    WHILE (big_buff[dir_code*32+b]<>32) AND (b<>13) DO BEGIN
      b:=Succ(b);      {Find end of name}
    END;
    IF b=10 THEN dir_be adjusted in drive A.');Get_blk0;REPEAT  Writeln;  Write('Account number :');  acct:=Get_hex;  Writeln('Current balance =',cache[1].words[acct+256]:5);  Write('New balance :');  cache[1].words[acct+256]:=Get_num(cache[1].words[acct+256],65535);  Write('Adjust another account ? ');UNTIL Not Yes_no;Writeln;Write('Write back new values ? ');IF Yes_no THEN Rw_blk(False,cache[1],0,0)END;PROCEDURE Zap_passwords;VARb:Byte;BEGINWriteln('        CLEAR PASSWORD FILE');Writeln;Writeln('This opriteln(' been formatted.');Writeln;Writeln('Place disc to be copied in drive A');Writeln('& new disc to receive copy in drive B');Writeln;Write('Format new disc ? ');needs_format:=Yes_no;Writeln;Get_blk0;  {Gets DSflag, displays size, leaves blk 0 in cache}base_blk:=cache[1].disc_size;IF two_sid THEN base_blk:=base_blk DIV 2;IF five_in THEN BEGIN  base_blk:=base_blk*2; { in order to divide by 2.5 }  IF (base_blk MOD 5) = 0 THEN no_tracks:=base_blk DIV 5  ELSE no_tracks:=(base_blk DIV 5) + 1tion will clear a corrupt or');Writeln('unwanted password file from a disc.');Writeln('All other files on the disc will be');Writeln('left unaltered.');Writeln;Writeln('This option can also be used to add');Writeln('a password file to a disc used with');Writeln('earlier versions of the file server.');Writeln;Writeln('Place disc to be cleared in drive A.');Get_blk0;WITH cache[1] DO BEGIN  FOR b:=128 TO 255 DO data[b]:=0;   {clear entry & blk list}  pass_ent.name:='%Passwords';  pass_ent.access: block.blk:=0
  END;
  Look_up([make,dir],1,real_name,DDA);
  IF error=0C4H THEN error:=0   {Already exists, so do nothing}
  ELSE IF error=0 THEN BEGIN
    WITH cache.dir_ent[DDA.offset] DO BEGIN
      no_of_ents:=0;
      cycle_no:=0;
      parent_block:=0;
      parent_offset:=0;
      def_access:=access;
      access:=Land(access,050H)+020H;
      DDA.block.blk:=blk_list[0]
    END;
    cache.needs_writing:=True;
    Cache_entry(DDA.block,False); {No errors should occur}
    WITH cache D=12 { access WR/ only}END;Writeln;Writeln('Password file cleared');Rw_blk(False,cache[1],0,0)END;PROCEDURE Copy;VARno_tracks,read_ptr,write_ptr:Byte;blocks_left,base_blk:Word;needs_format:Boolean;BEGINWriteln('           WHOLE DISC COPY');Writeln;Writeln('This option makes an identical copy of');Writeln('a whole disc. Any previous contents of');Writeln('the new disc are destroyed, including');Writeln('disc name, account information etc.');Writeln('The new disc need not have already');Won't echo ctrl chars or spaces}    b:=Succ(b)  ENDUNTIL ch=Chr(13);WritelnEND;{$Ifsutil1}{ FSUTIL1 include file for FSUTIL}PROCEDURE Rename_disc;BEGINWriteln('               RENAME DISC');Writeln;Writeln('Place disc to be renamed in drive A.');Get_blk0;Write('new ');Get_disc_name;Writeln;Write('Write back new name ? ');IF Yes_no THEN Rw_blk(False,cache[1],0,0)END;PROCEDURE Alter_accounts;VARacct:Byte;BEGINWriteln('        DISC SPACE ACCOUNTS');Writeln;Writeln('Place disc to write
	CPL			; =FF for read, =0 for write
	LD	D,A

	ADD	HL,HL		;Block * 2 = Sector

	PUSH	HL
	PUSH	DE
	CALL	rwdisc		;Get first
	POP	DE
	POP	HL
	INC	C		;Error => return now
	DEC	C
	RET	NZ

	LD	A,(DMA+1)	;Hi byte of memory address
	ADD	A,2		;Sector is 2 pages long
	LD	(DMA+1),A
	INC	HL		;Next sector
	CALL	rwdisc

	IF	t.on
	LD	A,(mesflg)
	OR	A
	CALL	NZ,pcrlf
	ENDIF

	RET




;RWDISC
;Read/Write sector to/from disk
;
;On entry:
;    (DMA)	memory address to write to/get from
	mess	atmsg
	IN	A,(track)
	CPL
	CALL	CAHEX
	mess	secmsg
	IN	A,(sector)
	CPL
	CALL	CAHEX
	POP	BC

vsecok:	DJNZ	vtrk0
	RET


;vsec
;Verify a sector on current track
;
;On entry:
; C	sector number
;
;On exit:
; A	WD error number
; rest	preserved

vsec:	LD	A,C
	OR	A		;ZF on sector 0 which needs settle time
	CPL
	OUT	(sector),A

	LD	A,rdsec		;read 1 sector with no settle time
	JR	NZ,setlof
	AND	settle
setlof:	CALL	outcom

reed0:	IN	A,(status)
	RRCA
	RET	C
	RRCA
	JR	C,reed0
;	 D	Read flag (FF-read,0-write)
;	 E	Disk number
;	 HL	sector no.
;
;On exit:
; C	Error code (0 = OK)
;	(errloc) also updated


rwdisc:	SUB	A
	LD	(rcount),A	;Set retry count to zero

	PUSH	DE		;Save disk & read flag

;Convert sector number (HL) into track/sector (DE)

	IF	large

;Divide by eight

	LD	A,L
	AND	7		;Remainder MOD 8
	LD	E,A
	ADD	HL,HL		;*2
	ADD	HL,HL		;*4
	ADD	HL,HL		;*8
	ADD	HL,HL		;*16
	ADD	HL,HL		;*32
	LD	D,H		; div 8 <=> *32 DIV 256

	ELSE

;Divide by five -	IN	A,(data)
	JP	reed0







; PROCEDURE Rw_blk(read:Boolean; VAR buffer:C_ent; disc:Byte; blkno:Word);
;
; Write out 1k block to disc from main memory <buffer>.

rwblk:	XOR	A		;No error yet
	LD	(errloc),A

	POP	BC		;Return addr
	POP	HL		;blockno.
	POP	AF		;Disc no.
	POP	DE		;Memory address of buffer
	
	LD	(DMA),DE	;Entry param for RWDISC
	LD	E,A		;Drive

	POP	AF		;read flag
	PUSH	BC		;Return addr.

				;Initially =1 for read, =0 for write
	DEC	A		;now have =0 for read, =FF for €X\à\‹›€‹ôö[^Â¿h\‘Ä àëö9îö/´RPhﬁPÊ` =HÄ¥ÅIïπÖµîÅë•ÕçÓ` ∂ÉÕH Ä£ô@I¢˙µ%&çÂf@î»HŸ]ö[HŸ\ùô\à›][€àù[~Xô\ûÊ@hà‘Ä àëö9îö/´RPhﬁPhæ≠I@I£i@Gô† @î6ˆ÷÷ÊBßπ†⁄	5  " dfée&ãÍ‘ J K i	Q´RPhﬁP ¸LLà23GÄìEıj ?âãÏÿWô–
íÄ«¿~Ÿ¿
Ø3¿  D®æŒ Uyü ©(,¨}ú ™Û@RPYÿ˚8UÊÑ§†œpÏ‡Wö 
íÄ… Ÿ¿
Ø4`% %é /≥Ä^i *J L˜Ä>Œ Uy• ©(	4o(ÛL íÿÿ Œ¬ÿ@ﬁ‡Ë“ﬁ‹˜L~ [A∆§ @å—ÕY@I¢˜Ÿ¿ô∞bs“Ä Á@≥¿ym nÑCD •£ S“ 0Á@≥¿ym nÑ√D Â£ s“ <Œ U |ì˘
µ*  L¯ < € Q \                      hL Ord(ch)=cr;Get_hex:=value;WritelnEND;PROCEDURE Get_blk0;VARb:Byte;BEGINREPEAT  Writeln('Check discs & press space when ready');  REPEAT UNTIL Get=' ';  Chk_SJ;  {updates cache,<two_sid>}  IF error=1 THEN Writeln('Not a file server format disc')UNTIL error=0;Writeln;Write('Disc Name = ');b:=1;REPEAT  Write(cache[1].disc_name[b]);  b:=Succ(b)UNTIL (b>10) OR (cache[1].disc_name[b-1] = Chr(13));Writeln;Writeln('Two sided =',two_sid);Writeln('Disc size =',cache[1].disc_size:5,'K')ˆ∆RFó67πP⁄5  " dfée&ãÍ‘îö7îyñ F - Format new disc{ñ -°3R  FhÊPhæ≠I@I£y@Gôp Au“6∆V"77v˜&Bfñ∆Wπp⁄5  " dfée~&ãÍ‘îö7îyò R - Rename disc{ò -†ÛR  FhÊPhæ≠I@I£y@Gôê B%2“6WBfñ∆R6W'fW"7FFñˆ‚ÁV÷&W'πê⁄"5  " dfée&ãÍ‘îö7îö/´RP~h⁄PÊh %ΩµµÖπêÄÈÓh ∂ÇMH Ä£ô@I¢˙µ “Ä¿@C@ çZíÄìFÚÄÅ ‚bd@à	ëö8îö/´P ¸L_f¿*ºŒÄTî ñ> æŒ Uyû ® ˘ 1 ®æŒ Uyü ©(,¨}~ú ™Û@RPYÿ˚8UÊÑ§†œpÏ‡Wö 
íÄ… Ÿ¿
Ø4`% %é /≥Ä^i *J L˜Ä>Œ Uy• ©(	4o(ÛL íÿÿ Œ¬ÿ@ﬁ‡Ë“ﬁ‹˜L [A∆§ @å—ÕY@I¢˜Ÿ¿ô∞bs“Ä~END;PROCEDURE Get_disc_name;VARch:Char;b:Byte;BEGINWrite('disc name (max 10 characters) :');b:=0; {Offset in name - cache is used as i/p buffer}REPEAT  ch:=Get;  IF (ch=Chr(127)) OR (ch=Chr(8)) THEN BEGIN {Del or backspace}    IF b>0 THEN BEGIN            {Can't delete @ start of line}      Write(Chr(8),' ',Chr(8));  {Erase char from screen}      b:=Pred(b)    END  END  ELSE IF (b<10) THEN BEGIN    cache[1].data[87+b]:=Ord(ch);    IF Ord(ch) > 32 THEN Write(ch)    ELSE Write('.');  {D Á@≥¿ym nÑCD •£ S“ 0Á@≥¿ym nÑ√D Â£ s“ <Œ U |ì˘
µ*  L¯ < € Q \                                                  L&ãÍ‘îö7îyò R - Rename disc{ò -†ÛR  FhÊPhæ≠I@I£y@Gôê B%2“6WBfñ∆R6W'fW"7FFñˆ‚ÁV÷&W'πê⁄"5  " dfée&ãÍ‘îö7îö/´RP~h⁄PÊh %ΩµµÖπêÄÈÓh ∂ÇMH Ä£ô@I¢˙µ “Ä¿@C@ çZíÄìFÚÄÅ ‚bd@à	ëö8îö/´P ¸L_f¿*ºŒÄTî ñ> æŒ Uyû ® ˘ 1 ®æŒ Uyü ©(,¨}~ú ™Û@RPYÿ˚8UÊÑ§†œpÏ‡Wö 
íÄ… Ÿ¿
Ø4`% %é /≥Ä^i *J L˜Ä>Œ Uy• ©(	4o(ÛL íÿÿ Œ¬ÿ@ﬁ‡Ë“ﬁ‹˜L [A∆§ @å—ÕY@I¢˜Ÿ¿ô∞bs“Ä~H Ä£ô@I¢˙µΩe %Å 4Ü Ä ïÿPÇ^§≈˘~•ZíÄìF“Äè ÑàÕÓM¨.Ñç.ld-ƒÌ,méM.Ã§≈∆e$‰L¥Hj@ D »Õ M’®%˝( " ˇ˘ì q ˇ¸…’~ñ
 “8Ç˛T_^ÍUxb©(	4m(∆$ûÏ ‰Ó‰“Ë @»“Ê∆@“‹@Ù∆[BF§ @å—Ã†$—}ZíÄB_∆Âá¿5jJMJ<2ßµêê=2–)© #4sVPhæPXH_òûkcÄjJMJ~<2Ç	)2∞≤397∂ê24π±ê4∑=2ñ–ë© #4s(	4_V§†ó˘πalàA/†ÄË ±Ê"g¿ ?ˇ ùZÇ__DÃ ûà` ˇÂN≠A/` ¿ ?ˇ ùZÇ_†@ ÄïŸ`ï^™	~ì  ~®K¸òâLôÍU©(	4o(–@í‹Ê ‰Ë@ÊﬁÍ‰∆ @»“Ê∆@L@‡‰ ÊÊ@Ê‡¬∆ Ù–[D§ @å—Ã†$—}Zè5• Ç ∆Êz¿)ÛP@¯ò’$
üö^Í‘™◊RPKÙòƒÛ#3“V§†~yÜ SJ Research File Server{Ü -°r˙≠Ï®%Ï(~  xÊ (ïAÖÕÕ›Ω…ëÕÓ ∂ÇãË*≠A/aC ¬‡@0®’©(3ÿV†ó∞°¯ ·ÄÄ‡m–oàA/°/@$ ø¿c~ Ê$†ó∞°‡_DÃê
®ó·3*b^Ç_Qœ Û[ËRP ôûê
µ £¿«Ä D‡ @À≤ ´PK¯K‹ Å ¯√ä yã ® ˝ < @K¯òí â¢%Ó%˝q`1@ø 5*º~∆ Tî Fg§≠I@	b‡o‡I@I£y@Gò– @‘f˜&÷GFñÊr‚‚Á∏–⁄5  " dfée&ãÍ‘îˇ&&FgÑ≠I@I£y@Gò‡ A‰f˜&÷B6ˆ◊∆WFR“fW&ñgññÊr‚‚Á∏‡⁄5 ~ " dfée&ãÍ‘îö7îö/´RP ÄÄË32b_‰ƒ»Å '3ƒV§†23= jJ" ˝ &fLK¸òô dÊxÄ+A ™J #3“V§† ó˘12! —‡cÃDÃ…ÀÄj‘îö7î~@à  &D ˙< L‚ ˇ˘ìˇ&1¸»â{1/“bv!Ä ˇô9û 
µøDøIäàÇ˛Tj‘¯¯&iÍƒ0 ˇÚ¶%˙L@Ç°/Çf 1~k≠¢®%¯ "˘Q´PK¸òâOÕï*‘îö7îxm~%Insert destination disc & press spacezm-¢SR  FhÊPhæ≠GÜÍèÚÄA „s=`Ö˘º ¸LjÅOÕœïj	zìÁ
ïjJM <8Ç#7π6∞∫:4∑3ê=8ñ–q~© #4s(	4_V§†óÒ1à ÊFgÑ≠I@I£y@Gá @Ùf˜&÷B6ˆ◊∆WFWß"⁄5  " dfée&ãÍ‘ı™@" 	Qxp´R´√ùI@!/¬c@?ÃåœHZíÅ D Ä ôÄË3à` ˇÊ~LK¯òƒÛ"%ÏLƒø	âÿÜ ˇ˛dÊxÄ*‘¸¸&*"˘Q™%¯LDøIäßÁ:€0Ç_†@ ÄïµΩÑΩâùP Äv!Ä ˇï1/Çf ?3V€Ä‘îö7îxtCopy complete - verifyi~ö/´RPhﬁPÊ< =Yï…•ô‰ÅçΩµ¡±ï—ïÓ< ∂ÉÕH Ä£ô@I¢˙µ%&çÂ&ãÎBÄ™JMJ<» #7π6∞∫0∑7∫42π24π±êê=» –±© #4s(	4_Z(,§,ü„ ~(É+D¿©‘î ôË ´P ˙< ¿?
ùZíÄ=†¢‡U  D ®÷åÅT™Û"RPhﬁPhæ≠I@I£y@I¢˙µ% &y@*‘îö7îyí Disc Preparation Program{í -°ÉR  FhÊP~hæ≠I@I£y@I¢˙µ%&çÂd¿–HH[\à[ô]öYX[‹XŸHXÿ€›[ùﬁ‰¿hå‘Ä àëö9îö/´RPhﬁPÊP qÄ¥Å	ΩΩ–Åô•±îÅÕï…Ÿï»Å¡…Ωù…ÖµÓP ∂áH~ Ä£ô@I¢˙µ%&çÂe@–»H€‹H⁄€H\ÿﬁÂ@hL‘Ä àëö9îö/´RPhﬁPÊX MÄ¥ÅΩ…µÖ–Åπï‹Åë•ÕçÓX ∂ÑÕH Ä£ô@I¢˙µ%&çÂe¿‘H~ng ...zt-°”R  FhÊPhæ≠I@A/‚c@?Ãàó—3à` ˇÊNX‘V§†$—º†#√® z≥+ìK3…{kÉc+£+”©möê  23G5e&ãËÇÎp lB@N’∏`3¡ *Ø‘  *íÄìFÚÄè‡ÉD~…ÍI®*Ñ	»™‰â*hoNÂ¥4j@ D »Õ M’©(	4o(	4_V§†$—º†$—}n@I@I£i@GáÄBDf˜&÷BFó62ñ‚vÜñ6ÇG&ófRÉ‚„2íÚßÇ⁄$5  " dfée&~ãÍ‘ˇî  ˇ¸…Å 8Ü ˇ˛dÂÇÄ4é Äï‹∞íÄìFÚÄè Ñ…Ó‰Æ¨mç.ldn,l§ÕÓD¨,m,lmÓ≠ŒÑÔO%¥Lj@ D »Õ M’©(	4o(ÙLP®‰Ú@d`ñ@Z@~¬‹Ú@¬∆∆ﬁÍ‹Ë@⁄¬Ú@ƒ @¬»‘ÍÊË »ÙÙ[D∆§ @å—Ã†$—}ZíÄìF“Äè`É$å.åÆE%ƒ	-ƒ≠Õ.édÏƒ)dOOe¥2j@ D »Õ M’®%˘(" ˇ˘ìˇÒ ˇ¸…À i~I¢˙µ%&çÂ¡Ÿ\ÿ»ò[YKXÿ€›[ù[ôõ‹õX][€à]ÀûñÀhå‘Ä àëö9îö/´RPhﬁP·pâQ°îÅπï‹Åë•ÕåÅπïïêÅπΩ–Å°ÖŸîÅÖ±…ïÖëÂÈp∂àçH Ä£ô@~I¢˙µ%&çÂAôY[àõ‹õX]YûóKh@‘Ä àëö9îö/´RPhﬁPhæ∂§†$—¥†#¬ í3{ìk°s+π#Kõ˘“Òm	ê  23G2ÄìEıj	z  K i	Q≠Ö®%ÍL_ó~ÍU©(	4m(¿Håﬁ‰⁄¬Ë@»“Ê∆@“‹@Ó–“∆–@»‰“Ï @P`\\fR@~@Ù¿[DÜ§ @å—Ã†$—}ZÇ_“ÄÄ@ …Å 3'VX(H ã„¬˝JØU%&ç•¡ì›ô\ù‹ö]H\ÿ»[àòÀh~H‘Ä àëö9îö/´RPK¯‹∞¯≠I@I£i@GÜ@@Tˆ≤Ú¶B⁄5  " dféj M  K iÛ√lpI@I£i@GÜPA%&VBg&ˆ“Fó62ñ‚¶R⁄5  " dfée&ãÍ‘îˇ7,>~s(	4_V§†$—¥†#√ÿ …c£+ëIqKq´sK£ô{1äY””Ÿmöê  23G2ÄìEıj	~JC&ˇˇÃú∞Pëï:› Ç_¬^‡@ H„√ÌJµ% ÑøââëôÈ ´PKËK‘ /8∆~x®~ ˝ < @KËôí ’ DK‘KÍ9üﬁÑΩƒø§âı·Ú∑\†ó∞@Ùx Y[©V†ó∞°Ê#˛Tj‘îö6îyÄ 
Density = {Ä -†£R  FhÊPhæ≠A/Úb ˚- Ô *‘ˆ<ƒÄJ~ùZíÄìF“Äè0@ ÄÍ.¨,Ñ§p@¥j@ D »Õ’îö/}É yÅ ©V†ó∞°Ê $@TÍ‘îö6îyÑ 	Double - {Ñ -†ìR  FhÊ¨†$—{ÃZíÄìFÚÄÇ^¬áòâôî fFhÓPÊ~ ,Åë•ÕçÓ ∂ÅçH Ä£ô@I¢˙ﬁ0Ç^¬áÄÄH     "HTj‘ˆ< <@ ÄÄ   ‘≈F∑ò†ó∞°‡·p @Tj‘ˆ< < çZÇ^¬áÄà @  TÎzÄj	{
@~≠ë®%Ù ˝ <ƒL ùZÇ__DÃ û*uj	{ ßV†óË*5≤¿5*º3T˝& @Pó˘1˛&*ò?3‘´RPhﬁP·†Å%πÕï…–ÅÕΩ’…çîÅë•ÕåÄòÅ¡…ïÕÃÅÕ¡ÖçïÈ†∂àH Ä£ô~@I¢˙µj<5J ?çÃıÄRÊ†ÄÒ1™H?4º3’©U·Æ§†óÈ123= jJ" ˝ &fLK¸òô/bf%˙LNô9û 
µøDøIäÇ£V†ó¿ó¡3OT©â~ì Ä®K‡ôÅ L_öÎhÄj	~ ~£V†ó˘1˛&*üõ*U©(	4o(⁄Jí‹Ê ‰Ë@» ÊË“‹¬Ë“ﬁ‹@»“Ê∆@L@‡‰ ÊÊ@Ê‡¬∆ Ù⁄[D¶§ @å—Ã†$—}Zè’Â Ç ∆Êz¿)Ûx@¯ò’$
üõû*‘ı&/Œ*‘îö7î~xqFormatting ...zq-†„R  FhÊPhæ≠I@!/‚bdfx@*‘îö7îxrFormat completezr-†ÛR  FhÊPhæ≠A/Z†D ®º8U©U·Œ§†ó·123= jJ" ~'r':Rename_disc;
    'S','s':Set_stn;
    OTHERWISE Writeln('Illegal option')
  END
UNTIL stop;
FS_boot
END.
Writeln('F - Format new disc');
  Writeln('P - clear Password file');
  Writeln('R - Rename disc');
  Writeln('S - Set file server station number');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'b','B':stop:=True;
    'C','c':Copy;
    'F','f':New_disc;
    'M','m':SRL_mon;
    'p','P':Zap_passwords;
    'R',˝ &fLK¯òô/bf%¯LNô9û 
µøø	äÇ£TKòâ~ìOŒu∂`5ø@ÄQ´PKÿKÿô’Jòó¡3 
üô´m¿jJM <:°∑∏<ê1∑∂∏62∫2êê;2π4≥<¥∑3ê=:–È© ~#4s(	4_V§† óÒ12"_DÃ…ÀÄj‘îö7îxuVerify completezu-†ÛR  FhÊ¨†$—}]n àH	⁄∑x U·⁄Ä RPhﬁP·‹hÄÄÄÄÄÄÄÄÄÄÅ=I5PÅ9\Å%M~È‹∂ÜçH Ä£ô@I¢˙µ%&çÂ&ãÍ‘îö7îö/≠»©(	4m(Håﬁ‰⁄¬Ë@»“Ê∆@“‹@Ó–“∆–@»‰“Ï @P`\\fR@~@Ù[DÜ§ @å—Ã†$—}ZÇ_ÚÄÄ@ …Å 3',§eF∑,§~†$—º†#√»!2C{πk´A#KõõÉ)3{ë+A{´s°˚”…mê  23G2ÄìEıjJM <=*9<ê%êê0∑<ê0±±∑∫∑:6∞ºê12ê0≤5:π∫2≤==—1© #4~
	DJNZ	form0

	LD	A,writrk
	CALL	outcom
	LD	HL,fordat
	LD	C,data


form2:	LD	A,(HL)
	CPL
	LD	B,A
	INC	HL
form6:	IN	A,(status)
	RRCA
	RET	C
	RRCA
	JR	C,form6
	OUT	(C),B
	JR	form2




;vtrk
;Verify a track
;
;On entry:
; A	track number

vtrk:	CPL
	OUT	(data),A
	LD	A,seek
	CALL	outcom
	CALL	wairdy

	LD	BC,sectrk*256

vtrk0:	CALL	vsec
	INC	C
	CPL
	RLCA
	AND	0FCH
	JR	Z,vsecok

;Sector was duff so print status

	PUSH	BC
	PUSH	AF
	mess	vererr
	POP	AF
 	CALL	CAHEX
e.addr,drv,0); {disc routines print their own}
  Open_ca(1);
  Rw_blk(False,cache.addr,drv,1); {error messages}

  Open_ca(0);
  Verify(drv,cache.ptr^.disc_size);
  Writeln;
  Writeln('Verify complete');
  Writeln;

  Write('Format another disc ? ');
UNTIL NOT Yes_no
END;




BEGIN  {Main Program}

Dk_init;
cache.addr:=0FC00H; {Address of cache page in memory}
Ini_clk;

stop:=False;

REPEAT
  Writeln;
  Writeln;
  Ver_msg;
  Writeln('Disc Preparation Program');
  Writeln;
  Wr5535);

FOR b:=1 DOWNTO 0 DO BEGIN
  Open_ca(b);
  FOR w:=0 TO M1block_size DO Cache.ptr^.data[w]:=0
END;

{Cache page 0 is now open}

WITH cache.ptr^ DO BEGIN
  ds_flag:=255;
  Write('Density = ');
  IF drv IN drv8in THEN BEGIN
    disc_size:=1280;
    Write('Quad - ')
  END ELSE BEGIN
    disc_size:=800;
    Write('Double - ')
  END;
  Writeln(disc_size:3,'K disc');

  root.name[1]:='$';     {Root name}
  root.name[2]:=Chr(cr);

  root.access:=D_bit;
  root.def_access:=15; {WR/WR}iteln('A - Alter individual space accounts');
  Writeln('B - Boot file server program');
  Writeln('C - Copy whole disc');
  Writeln('F - Format new disc');
  Writeln('P - clear Password file');
  Writeln('R - Rename disc');
  Writeln('S - Set file server station number');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'b','B':stop:=True;
    'C','c':Copy;
    'F','f':New_disc;
    'M','m':SRL_mon;
    'p','P':Zap_passwords;
    'R',
  root.blk_list[0]:=1;

  SJ_msg:='SJ Research File Server';

  pass_ent.name:='%Passwords';
  pass_ent.access:=12; { access WR/ only}
  Get_clk;
  pass_ent.creation:=now.date;

  FOR w:=256 TO 511 DO words[w]:=acct_size
END;

Open_ca(1);
cache.ptr^.dir_ent[0].bit_map:=[0];
FOR b:=1 TO 15 DO cache.ptr^.dir_ent[b].next_ent:=b;

REPEAT
  Open_ca(0);
  Get_disc_name;

  Writeln('Formatting...');
  Format(drv);
  Writeln('Format complete - verifying...');
  Writeln;
  Rw_blk(False,cach_ptr:=0;
  IF src_drv=dest_drv THEN BEGIN
    Writeln('Insert destination disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  IF needs_format THEN BEGIN
    Writeln('Formatting ...');
    Format(dest_drv);
    Writeln('Format complete');
    needs_format:=False
  END;
  REPEAT
    Open_ca(write_ptr);
    Rw_blk(False,cache.addr,dest_drv,base_blk+write_ptr);
    write_ptr:=Succ(write_ptr);
  UNTIL write_ptr=read_ptr;

  read_ptr:=0;
  base_blk:=base_blk+cache_size;1ms Delay for Tunnel Erase
deloop:	DEC	BC		;Loop is 29 T-states (assuming wait states)
	LD	A,B
	OR	C
	JR	NZ,deloop

	POP	AF		;Loop counter/track no.
	POP	DE		;notracks in D
	INC	A
	CP	D
	JR	Z,exitf
	PUSH	DE
	PUSH	AF
	LD	A,trkinc
	CALL	outcom
	CALL	wairdy
	POP	AF
	JR	form3


;
; PROCEDURE Verify(drive,notracks);
;
;Verify all tracks
;

verify:	POP	HL		;Return addr
	POP	DE		; D:=notracks
	POP	AF		;drive
	PUSH	HL
	PUSH	DE

	CALL	stadrv
	CALL	seekz

	SUB	A		;start at Trk 0
v
UNTIL blocks_left=0;

Writeln('Copy complete - verifying ...');
Verify(dest_drv,disc_size);
Writeln('Verify complete')
END;




PROCEDURE New_disc;
VAR
drv,b:Byte;
acct_size,w,blocks_left:Word;
BEGIN
Writeln('           FORMAT NEW DISC');
Writeln;
Writeln;

Write('Format disc in which drive (0..3) ? ');
drv:=Get_num(0,3);

Writeln('How much disc space for each account ?');
Writeln('(Try 20K - any account may be adjusted');
Write(' later). In units of 1K :');
acct_size:=Get_num(20,6er1:	PUSH	AF	
	CALL	vtrk
	POP	AF		;Loop counter
	POP	DE		;notracks,drive
	PUSH	DE
	INC	A
	CP	D		;notracks
	JR	NZ,ver1

	POP	DE		;Discard

; done all the tracks

exitf:	CALL	drvoff
	EI
	CALL	dkinit		;Track stores are junk due to step commands
				;so Zap them.
	RET			;return to external caller



;fortrk
;Format a track
;
;On entry:
; A	track number
;
;On exit:
; A	WD status

fortrk:	LD	B,sectrk	;Fill in track numbers
	LD	HL,trknum
	LD	DE,blklen
form0:	LD	(HL),A
 	ADD	HL,DE'
	LD	(drvmsg),A	;Poke part of format drive message

	LD	DE,formsg	;Now print it
	CALL	pmess

	POP	DE		;notracks,drivE
	PUSH	DE
	LD	A,E

	CALL	stadrv		;start drive A
	CALL	seekz		;restore

form7:	SUB	A

form3:	PUSH	AF
	CALL	fortrk
	CPL
	RLCA
	AND	0FCH
	JR	Z,form5

	PUSH	AF
	LD	DE,forerr
	CALL	pmess
	POP	AF
 	CALL	CAHEX
	LD	DE,atmsg
	CALL	pmess
	IN	A,(track)
	CPL
	CALL	CAHEX
	POP	DE		;Discard notracks
	POP	AF		;Discard track no.
	JR	exitf		;Give up


form5:	LD	BC,4000/29	? z^-°#R  FhÊPhæ≠A/Y@	`@!à  %F∂†ó©1~_©V§†$—¥†#√ !"3{ìk°#KõKqªCKA#ìK≥)AÅqqôI˘”mê  23G2ÄìEıj	J Ü ˇ˛d¿Ä~C  ˇˇ2ueÇÄ4é Äï∆Ö˙ï^™JMJ<1Ç	'ª2π;π4∫2ê24π±ê4∑=1ñ–ë© #4s(	4_V§†óÒπaZíÄìF“ÄèÄÄ©Ìd‰LÖ¥
j@ D »Õ’îö/î ñ “Ê'Üÿ~‡íÄìF“Äè†ÇJL¨,ÑŒMÌ§ç.ld-ƒL•¥$j@ D »Õ M’©(%˛nX|["PKË ˙< ,yàôƒ0 ˇÚßV†ó¿ó—3 '¢ ˇ˘S´PKÿ D0 ˇÚßV†óËà ÂF∂X•WÜ~jÇ_§ƒ *ˇ&"_ƒ≈SÊzïjJM <4$∑9≤π:9∑∫π1≤ê24π±ê892ππê9∏0±≤Ω4—© #4s(	4_V£√MGÜ©@ ÄÒπû¿
B¸‘ ˛&5@âßÊóÜzµ*º5‘î˝&1¸~cluding');
Writeln('disc name, account information etc.');
Writeln('The new disc need not have already');
Writeln(' been formatted.');
Writeln;

Write('Format new disc ? ');
needs_format:=Yes_no;

IF needs_format THEN BEGIN
  Write('Format disc in which drive (0..3) ? ');
  dest_drv:=Get_num(0,3)
END ELSE REPEAT
  Write('Overwrite disc in ');
  Getblk0(dest_drv);
  Write('Ok ? ')
UNTIL Yes_no;

Write('Read from disc in ');
Getblk0(src_drv);

disc_size:=cache.ptr^.disc_size;
blocks_left»Ãı U©(@b 	ë ~è 8Ü ˇ˛dƒø…åA ˇ2"^ƒÃKÙòùà` ˇÊNgå≠A/—/“b¢ Äïµææ	öz± ˇ¸©â~ì Ä®K‡ôÅ L_öÎhÄj	~ Ç˛Tj‘ˇ&"_ƒ≈SÛeJµ%~&çÂA	R[úŸ\ù\›[ò][€à\ÿ»	àô\‹»‹XŸ^õKhî‘Ä àëö9îö/´Q·∫£√|†@¯‹œ`!~o †DÅSÛs√eZÇ^§≈˘¬•ZíÄìFÚÄè Å»ÕÓM¨.éç-Ã‰~≈≈œN%¥j@ D »Õ M’©(%¸Lb˘ëô‚ ´RPhﬁP·»=Ω…µÖ–ÅçΩµ¡±ï—ïÈ»∂ÉÕH Ä£ô@I¢˙µΩjÅÇ T^*‘™ÁRPKòƒÛ#3‘V§†@ à  &D ˙< ~L‚ ˇ˘ì˛&1¸»â{1/¬bv!Ä ˇô9û0
µøø	äàÇ˛Tjâ~/“b©˘Œ∂Ã†óË à ÂF≠A/a/bgT à` ˇÂLK‡ôÅ OÃ’∂‡5%&çÂP€‹H€€\]HH~:=disc_size-1;      {Got blk 0 already}
base_blk:=0; {block no. of 1st block in cache}
read_ptr:=1; {Start at 2nd block}

REPEAT
  IF (read_ptr=0) AND (src_drv=dest_drv) THEN BEGIN
    Writeln('Insert source disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  REPEAT
    Open_ca(read_ptr);
    Rw_blk(True,cache.addr,src_drv,base_blk+read_ptr);
    read_ptr:=Succ(read_ptr);
    blocks_left:=Pred(blocks_left)
  UNTIL (read_ptr = cache_size) OR (blocks_left=0);

  writeô\öYûZ[ô»ããûùht‘Ä àëö9îö/´RPK¯òƒÛ"%ÙL‚ ˇ˘ìñ5 ’©(	4o(Í¨ ‰“ÃÚ@∆ﬁ⁄‡ÿ Ë ÙÍ[AÊ§ @å—ÕY@I¢˙ ∫‹ †µn@
´√µ  
§†$—º~†#√∏ —2zíj
°r*π"Jö”πmê  23G2ÄìEıjJM M’©(	4o(	4_[êRPh⁄P·‡ëΩ…µÖ–Åë•ÕåÅ•∏Å›°•ç†Åë…•ŸîÄ†¿∏∏Ã§Ä¸ÅÈ‡∂âH ~Ä£ô@I¢˙µøÂ ÄC  ˇˇ2`@!Ä ˇô9`†#à ÂF∑,§†$—º†#√»!2C{πk´A#KõõÉ)3{ë+A{´s°˚”…mê  23G2ÄìEıjJM <=*9<~ê%êê0∑<ê0±±∑∫∑:6∞ºê12ê0≤5:π∫2≤==—1© #4s(	4_V§†$—¥†#√ÿ …c£+ëIqKq´sK£ô{1äY””Ÿmöê  23G2ÄìEıj	~JHÜ ˇ˛d¿üˇ¸C  ~ace

	ENDIF

;
; Print a crlf!
pcrlf:	LD	DE,crlf
	JP	pmess


dtsmsg:	DEFM	' RDTS=$'
atmsg:	DEFM	' @ $'
errmsg:	DEFM	' fatal disc error $'
rtrmsg:	DEFM	' bad $'
formsg:	DEFM	cr,lf,'Formatting drive '	;Message continues below
drvmsg:	DEFM	'?$'				; - ? is poked at run time
forerr:	DEFM	cr,lf,'Format error &$'
vererr:	DEFM	cr,lf,'Verify error &$'
secmsg:	DEFM	' sector &$'




; FUNCTION Five_in:Boolean; EXTERNAL; {return 5"/8" version}
;
fivein:	XOR	A		; A:=0 <=> false

	IFF	large		;e1+dsfoff)	;double sidedness
	AND	1			;leave relevant bit
	LD	(dsflag),A

	RET

;	Error exit. iabort is entry if errloc already set.

inierr:	LD	A,1		;Duff data in blk 0
	LD	(errloc),A
	RET


;
; PROCEDURE Format(drive,notracks:Byte);
;
; Format specified drive - drive nos 0..3 give sides separately
;


format:	DI
	POP	HL
	POP	DE		;notracks to D, junk to E
	POP	AF		;drive
	LD	E,A
	PUSH	HL		;Return address
	PUSH	DE

;	Stack holds DE - D=notracks=maxtrack+1, E=driveno.

	ADD	A,'AIF small
	INC	A		;A:=1
	ENDIF

	RET



;PROCEDURE dkinit;
;
;This procedure should be called before performing any disc operations
;

dkinit:	LD	HL,trkno	;Current track table
	LD	B,maxdrv-1	;length of it
lowlp1:	LD	(HL),-1		;Zap to indicate drive not yet used
	INC	HL
	DJNZ	lowlp1
	RET


;  PROCEDURE Chk_SJ; EXTERNAL;
;
; Read blk0 into 1st cache entry, set DS flag, check for SJ disc.
; Set <error> =1 means disc OK, but no SJ message


;	Set up parameters on stack for <rwblk>

ch   'F','f':New_disc;
    'M','m':SRL_mon;
    'p','P':Zap_passwords;
    'R','r':Rename_disc;
    'S','s':Set_stn;
    OTHERWISE Writeln('Illegal option')
  END
UNTIL stop;
FS_boot
END.
clear Password file');
  Writeln('R - Rename disc');
  Writeln('S - Set file server station number');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'b','B':stop:=True;
    'C','c':Copy;
 kSJ:	LD	A,1		;Read flag (=True)
	PUSH	AF
	LD	HL,cache1	;Read into 1st cache entry
	PUSH	HL
	XOR	A		;Drive no.
	PUSH	AF
	LD	HL,0		;Block no.
	PUSH	HL
	CALL	rwblk

	LD	A,(errloc)	;Had error ?
	OR	A
	RET	NZ		; Give up


iniok:	LD	HL,cache1+sjoff	;Where we put the block + Offset of SJ string
	LD	DE,sjmess	;Check it's an SJ disk
	LD	B,23		;B:= len SJstring

csjlop:	LD	A,(DE)
	CP	(HL)
	JR	NZ,inierr
	INC	HL
	INC	DE
	DJNZ	csjlop

;	Set/reset dsflag according to flag in blk 0

	LD	A,(cach ó+6◊	…BëîÊe0úåfÅ“l2à
fSëÿ rp¥@!pµ`›7!¶d(E πY∑4HJP0úŒgsy»»sp¥@ †µ`›7!¶d(E. çÅÇ  núM”™!∫tD∑M»FÈô
Ânõë”2%ñ|bZAmõ¥C.VÈπ›3"‹ËÈπ›3"Dm—™@Õ G(b≥l≥4  Ä `{t‡Önù—≠”Ú5n¸ø¬L⁄˙,ÁB H mî @»D π[ß‰kÑÓ›?#Gç—™@‘f“0QÍ›?#¨⁄8*+ß©§¢∏  |`
 û≠”Ú1ÍÕ≠l⁄@$Õ©¢C‡÷CACHE (¯ ıÄ VmŒ ¢ Â ¢ Õ±‚c‡’∫~F=Y¥º>TWOSIDp  ¯¿>=[ß‰c’õjÑŸµÏMõ_ÑŸ∂ÙLC@ ¥‡<> =Yµ(IõpŸ∑MõtƒŸ¥êEõ}ƒ»∆Ûë¥¬tM∆Û°† r'3Ä~ f‘1 ∞¯ ıf›6mŸf“∞p>“´¢l:ä!¢¬å0 ö  3@     ≈5Dı    ‘DT%Tq   ∑pL|zèÄ/VmÔâî‘„%b‘ëU1M22∞â”QSUc9"tëM1Z2éI”„$‚pëMMR3-I–ê“#1·‘ë!	iJ2æIìñ£.¿4ë!	92.)âTî’#=Åÿë=YJ2r'âëTî£0‚ë	]V2ÿI”c5ÿë	I.3D-â‘ê“„6Çÿë	IV2â#+@8ë!MP—b: ——U#•`eM9>;Lë—UïSc•†YQ!b;~——UìÃ#§`ΩQ%M:‘ëSêSQQ#ºÄ›1QI;l÷êTT‘„•!q=Af:é”ëU—T–Á"Äû'36àäÉ«¿´6å
≥hÿ´6è
≥jh©L@-ŒÜÛÉ6ôäÇ¿´6ù
≥iË´6†
≥j¿´6ñ
3kx©ﬁm6òM∆A ÈõSÖA#‡’õUEYµxUõC¿∂¿Z
CHìUSc*¬8ë	%YV3Üâ—Uïc.°∏ë]5=V2à'â’”US#-!¥ë13I’P£>†8ë15AJ3ÍIUS#*‡4ë1%Z2()âSíU#/bÿë!QI62êâSï„!¬òë!a%R2x-f–!Fm÷f”ÅFm;f”·Fh  Õ®"å⁄º(U:MÜì°‰@P9ÃÁ#	µõ~¡„‡’õƒŸµQõRÖµ§Qõ[∂hPÇ à&√°î‰ 4õåÜì±§»u0õ3ÅÑ∆eLf3y‘‹t9≥j¯†å| z≥k0£6∑ä3kê£6‡
ƒ—ﬁp<àÊÉy∞  2Nf6mõ	èÄVm¢f⁄QFm®fﬁaB0ÄZ #ŒF”	–@n2ùƒCIÃ∆Õ∏"Å1ÍÕπå€ñ(Õπ¬å⁄ *PD3aî¬r'3ô‹ﬁr2∆ìaïõy≈„‡’õ{Ö∑ƒQõ}¥»T§ à
FSqÑ⁄e'36àäÉ«¿´6å
≥hÿ´6è
≥jh©L@-ŒÜÛÉ6ôäÇ¿´6ù
≥iË´6†
≥j¿´6ñ
3kx©ﬁm6òM∆A ÈõSÖA#‡’õUEYµxUõC¿∂¿Z
CHp m[p ®¯ıf”QFmzp m9fﬁ@fpf“ê∂pÉQPïQ«\ ‹f⁄°aó  f÷Vmæ"LGS8Åõ\@√‡’õ]≈Y∂LTu¿ „ ª6√
≥n»©<‹Õ∑‚†!ÍÕ∏¬¨€í*3nê´6Òj ∑–nQ Õ  † tÓâ[Ë7(Ñ
 f‹±ÒjÃ´@Ã€à›;¢CÊ˙˙Ê≠ƒ˙ ! ∑H-õv¬€ßtH`*ﬂAπD @6¯ÖàœãVeÿfﬂ@∂È›Õ∞l⁄BT9Lf≥òÄ@ Yµ®,> =Yµƒ-∫~Dà@ )Ω >ΩY¥4õ`¬€ß‰|`  ^≠”Ú%ÍÕ  \  >0ÄoVÈ˘ıf‘∞∆mf”∞»5!UÿÄãVe∑¿¢ ænçë !Í›?"Ô æÕ±¢Æt  fÄ ¯rèÄVÈ˘O Ë5ª¥î‹≠!á≈´2–
‹¨⁄∆›?"åÀJ›;¢ËS‚’ôlCm(¯<›_"¿ ª’æÖ>-Y∂‘éÒX∆
ËŸ ≠”Ún¸Ø·å€*ÁB @ Fmä¿Àî|z∑O»rx ﬂA≠›§¶Âª>-Yî4VÂf⁄†∆È˘<fPÄ÷È››_"∆ËŸ áÄÙ›⁄JnQ@÷¯æÖ>-XU‹1õWÉµ$4Üo8D3y¥‡l2ù¨⁄D ¨⁄RÕ¨!É‡’∫~DΩY† ®Æû¶íà:‡ ÒÄ(|z∑O»ó¯äìÃ∆fm⁄èÄVm·fﬁAP¡¡õQ√√∂m∂†≈5Dı   Cˆmô∑§UõJÖâ&√aîŒa6Á°§ﬁnfﬂ!Pp¯ ıfﬂëVm¸¿¡h  A≥b§;B*D¥‚§j ,P†¢≈,R¢"≈:,a≥b¶;B*d¥‚¶j ,p†¢«,r¢"«:-EÖá\  >“ßBå– Ü   A‡    /   Ä ¯Ü   C¿Å Ä ¯ád≈Ä †Ãã @   ?Äv∏Z2-ëî—VU#(‚ôYI5M24)ë“SíU#7ByYI%f2'ëì‘ìPU#9"9%Y%:3@'Tï–ì„ `ï!-M*24RSí—Vc&¢ÿë9I^3f+	ï‘£"‚ÿë]I1:3 +âï‘ê“#&B‘ë]IN3Ã	Iï‘ê£&‚Pë1]J3Ã#âìUSc*¬8ë	%YV3Üâ—Uïc.°∏ë]5=V2à'â’”US#-!¥ë13I’P£>†8ë15AJ3ÍIUS#*‡4ë1%Z2()âSíU#/bÿë!QI62êâSï„!¬òë!a%R2x-e.addr,drv,0); {disc routines print their own}
  Open_ca(1);
  Rw_blk(False,cache.addr,drv,1); {error messages}

  Open_ca(0);
  Verify(drv,cache.ptr^.disc_size);
  Writeln;
  Writeln('Verify complete');
  Writeln;

  Write('Format another disc ? ');
UNTIL NOT Yes_no
END;




BEGIN  {Main Program}

Dk_init;
cache.addr:=0FC00H; {Address of cache page in memory}

stop:=False;
debug:=False; {Message print on/off}
Write(chr(17)); {ctrl-Q disables page wait on RML}

REPEAT
  Writeln;
SIDp  ¯¿>Ω[ß‰K’õG√Ÿ∑‡8C@ †  <| z≥hê{6äá∞È8[6ïΩL⁄dÕ≠Å‚ Ä@  ÄåO)H%A8äW	%26ÖáÜá¿´6üá≥j{6¶á≥k∏{6Ω≥mPy@ÿa1ôDCIÃ∆ :ƒ#(ÄÃo9L'C°î» 4õÑCë§ÏeYµ¥<J> =Yµ–=õ_CŸ∂ =õmCŸ¥L5õwC…'1––e'3Ä»o:òçÜQÃ“d2ôˆm´ÄVm≤f€∞ˆm+ f⁄°aó  f’––¯¿›#EÄ#tlç&≥m¿{6òàÁq¥¬n<àá#	å÷sÕ¬)Ñ∆hÕ&C(ÄﬁfQê“s1≥nx†| z≥o({6Ù≥m{6¶à

ß3©Ñÿl<à¥»@> =Y¥‰A∫~Fà@ )Ω > ΩY∑‰5õ["”6ß «¿´6™à3i‡Ét‹ç ¢  Õ¥¿€ò›;£¥Aõn	Û∏Ä⁄u1öCIÃ∆ 9ú&3(ÄÃo9¶†@a1òÕÁSq–@?f÷—0¯ ıf◊Amwfÿ—m–Gë6‹àG¿´6‡7O»«®¯  Writeln;
  Ver_msg;
  Writeln('Disc Preparation Program');
  Writeln;
  Writeln('A - Alter individual space accounts');
  Writeln('B - Boot file server program');
  Writeln('C - Copy whole disc');
  Writeln('F - Format new disc');
  Writeln('P - clear Password file');
  Writeln('R - Rename disc');
  Writeln('S - Set file server station number');
  Writeln;
  Write('Command :');
  ch:=Get;
  Writeln(ch);
  CASE ch OF
    'A','a':Alter_accounts;
    'b','B':stop:=True;
    'C','c':Copy;
 ÕØ`OQ)õ\¿¬  U > ΩYµêAõEÑIbhÄ¬n<à&3ºÍn:¶»ÄƒeLÜ£©ÃËe23nàÄ|| z≥n¿É6·à3i¯É6°àÜ°î‰)	&·‘‹i:ƒÛ0ÄbKô¥\D2> =Y¥xEõHD[ß‰c‘|
fﬁ®¯Õº‚Q˝˛Âf⁄`¯(| õß+tÓçÄ   ∫qA∑NFÈ’›:"[ß‰j›˘h√ô∂TYŒÑ Ä å€\°†°§"Ñx‡e ›7"¶dK,¯ƒ±",€,—çÄ”r!∫fDà€§‰tåÑû"Àt¸ç7F®Qùõ}√„ ãt¸åzèÄ¨⁄∏"›:¢ßDH`›?#£‡C6Íà∑N®ÜÈ—*+ß©§¢∏  |`ÉP–P“D=Ñ lˇnõë”2$EÿÄ!a  ¶‰CtÃâeèa—b  È’›:!Y∑A∫nB7L»Pâà s†  U >ΩY∑»AõPÑâb!§Êcf‘10¯ ıf‘°mMnõêç”2F67M»FÈô
#çÅ≠”r∫fBÑB‡ »ÿ@›7!¶d(D çÅÌ”r∫fBÑD  »ÿ# ¶‰#tÃÖê6ÃÅ≥h(|ÂÅ@–  ¯µ[Ë7(Ñ
 fÄ – ∫wDÜ≠ÙîB 3lhå¯µfQ∞ÜmÖnù—!Ås}}s ÷‚ ã}ÂÅ €&Õ≥Å≠”∫$0o†‹¢ õlÉDg≈´2ÃÜ≥m®ktÓâf‘÷m‚*å&3YÃ@ ¨⁄V ¨⁄d›?"D  îﬁÂ^¨€úÕ®Å≠”Ú>0Ä/VÈ˘ıfÄ Æ  á¿7´t¸âz≥h`s6È≥o‡lÜÇÜêä*Ï@≈´2‰Üä€‡Q  ﬂ∑F»Ä¯ınüëwÂ fŸQg: 3@  è ¸πG¿´t¸à'ÅÄÙ›⁄JnR†„‚’ôXCÖnVm$nüë∆efnù—Ù)ÒjÃÆA¬∂¯|nØë‡ ]ÍﬂBü¨⁄Ê
Gx¨„tlá èÄVÈ˘∑~T Êmïs°   #6•áx‡e > Ω[ß‰9< o†÷Ó“Sræ¨Àà+r≥kXst¸á3.HstÓánØë„tlà ÄC¿˙nÌ%7.®s|ﬂBü¨*pÕ£·Ã⁄C7ú"º⁄p6NÜVm„èÄVmÍf“ ·Í›?"^¨– TWO:=disc_size-1;      {Got blk 0 already}
base_blk:=0; {block no. of 1st block in cache}
read_ptr:=1; {Start at 2nd block}

REPEAT
  IF (read_ptr=0) AND (src_drv=dest_drv) THEN BEGIN
    Writeln('Insert source disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  REPEAT
    Open_ca(read_ptr);
    Rw_blk(True,cache.addr,src_drv,base_blk+read_ptr);
    read_ptr:=Succ(read_ptr);
    blocks_left:=Pred(blocks_left)
  UNTIL (read_ptr = cache_size) OR (blocks_left=0);

  write5535);

FOR b:=1 DOWNTO 0 DO BEGIN
  Open_ca(b);
  FOR w:=0 TO M1block_size DO Cache.ptr^.data[w]:=0
END;

{Cache page 0 is now open}

WITH cache.ptr^ DO BEGIN
  ds_flag:=255;
  Write('Density = ');
  IF drv IN drv8in THEN BEGIN
    disc_size:=1280;
    Write('Quad - ')
  END ELSE BEGIN
    disc_size:=800;
    Write('Double - ')
  END;
  Writeln(disc_size:3,'K disc');

  root.name[1]:='$';     {Root name}
  root.name[2]:=Chr(cr);

  root.access:=D_bit;
  root.def_access:=15; {WR/WR}_ptr:=0;
  IF src_drv=dest_drv THEN BEGIN
    Writeln('Insert destination disc & press space');
    REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' '
  END;
  IF needs_format THEN BEGIN
    Writeln('Formatting ...');
    Format(dest_drv);
    Writeln('Format complete');
    needs_format:=False
  END;
  REPEAT
    Open_ca(write_ptr);
    Rw_blk(False,cache.addr,dest_drv,base_blk+write_ptr);
    write_ptr:=Succ(write_ptr);
  UNTIL write_ptr=read_ptr;

  read_ptr:=0;
  base_blk:=base_blk+cache_size
  root.blk_list[0]:=1;

  SJ_msg:='SJ Research File Server';

  pass_ent.name:='%Passwords';
  pass_ent.access:=12; { access WR/ only}
  Get_clk;
  pass_ent.creation:=now.date;

  FOR w:=256 TO 511 DO words[w]:=acct_size
END;

Open_ca(1);
cache.ptr^.dir_ent[0].bit_map:=[0];
FOR b:=1 TO 15 DO cache.ptr^.dir_ent[b].next_ent:=b;

REPEAT
  Open_ca(0);
  Get_disc_name;

  Writeln('Formatting...');
  Format(drv);
  Writeln('Format complete - verifying...');
  Writeln;
  Rw_blk(False,cach
UNTIL blocks_left=0;

Writeln('Copy complete - verifying ...');
Verify(dest_drv,disc_size);
Writeln('Verify complete')
END;




PROCEDURE New_disc;
VAR
drv,b:Byte;
acct_size,w,blocks_left:Word;
BEGIN
Writeln('           FORMAT NEW DISC');
Writeln;
Writeln;

Write('Format disc in which drive (0..3) ? ');
drv:=Get_num(0,3);

Writeln('How much disc space for each account ?');
Writeln('(Try 20K - any account may be adjusted');
Write(' later). In units of 1K :');
acct_size:=Get_num(20,6ƒ†$—}ZÇ_¬_ƒ≈ER£U‡—‡ÃK¸òÅ ‘ üå*‘´(	4o(	4_DZRc¯ 5≠+ûUx5†T˙¯ _ÑÃ°∆1≥¡ΩI@Ä"dB £¿Ã…âì"%ÙLÃùYû /Å/®Ê7x6¢≠1±˛ VôÄ~œ Ä™ºP  ™JM <Ç)"ß ¶¢ê"$©°Ωñ–—© #4s(	4_V§†$—º†$—}ZíÄìF“Äè@ÇjL≠Ã-¨§ç§ç.ld-ƒGE¥&j@ D »Õ M‘îˇ7~,>´RPh⁄P‡Ïπï‹ÅËÏ∂ÅH Ä£ô@I¢˙íÄ≈¿µ%&çÂ&ãÍ‘îö6îx<Write back new name ? z<-°cR  FhÊPhæ≠I@	`@!~=©(@à@Ùx ôô~1/Úbd@Äì´3ƒ {DZ~c˛ >≠AûUx>† Tîö7îx?        DISC SPACE ACCOUNTSz?-°≥R  FhÊPhæ≠I@I£y@I¢˙µ%&ç•—^[Z[ôHH~s(	4_RPK¸‹∞¯≠A/¿ÄË ≤∑R≠A/·/∞# „	I·N†ó‡°‡_ƒƒê /±/Ë‚SxR´PKP¸  ¬† Q*Éõõª{ì#õ“°m–UZíÄ=Äj	~
Ä  ~ –}U®%¯~(~  x^®*5jJM M’©(	4o(™*†¬ÊÊÓﬁ‰»@Ã“ÿ @∆ÿ ¬‰ »Ù™[B¶§ @å—Ã†$—}ZíÅ D »Ñ ?GÄ	ôìˇ&&D :≥<@@µÆ`60`j◊p‡∞WÖj  I@I£y@G~ÖpA¢tÑÙƒRDï424ıó•r⁄5  " dfée&ãÍ‘îö7îö/´RPhﬁP·`ôQ°•ÃÅΩ¡—•Ω∏ÅµÖ≠ïÃÅÖ∏Å•ëïπ—•çÖ∞ÅçΩ¡‰ÅΩôÈ`∂âçH Ä£ô@I¢˙µ%~&çÂA	òH⁄€H\ÿÀà[ûHô]ö[›\»€€ù[ù»ŸûñKhò‘Ä àëö9îö/´RPhﬁP·hï—°îÅπï‹Åë•ÕåÅÖ…îÅëïÕ—…ΩÂïê∞Å•πç±’ë•πùÈh∂âMH Ä£ô@~\ÿ»[ûêhL‘Ä àëö9îö/©(%˛nX|V•WÑíÄìFÚÄìEıjJMJ<! ±±∑∫∑:7:∂±2π=!–Å© #4s(	4_V†óÙ†∞®êïµ%&çÂ¡P›\úô[ùò[[ò~ŸH^êÀhD‘Ä àëö9î ~è   %¸L@ê 	“@"fe Ä)ëö;îö/´RPh⁄P·59ï‹ÅâÖ±ÖπçîÄÈÈ∂ÉMH Ä£ô@I¢˙µ £¿«Ä	$ tê
P ˙< ,x ÄóÒ1~@ 'I âôìˇÊNX(H ùZíÄìF“Äè†É(,çNÆnÑ-ÕÓçÆD,lmÓ≠ŒÑ‰H•¥2j@ D »Õ M’î ñ “O»5jJM M’©(	4m(å0Æ‰“Ë @ƒ¬∆÷@‹ Ó@Ï¬ÿÍ Ê@~~@Ùå[C§ @å—Ã†$—}ZíÄ¿ÄB¸èRP ÄÄË32b_‰ƒ»Å 'Vgà·à
µTƒëZÆ<™ë@ ©(	4o(í6@@@@@@@@ÜòäÇ§@†Ç¶¶Æû§à@åíòäÙí[Cf§ @~cluding');
Writeln('disc name, account information etc.');
Writeln('The new disc need not have already');
Writeln(' been formatted.');
Writeln;

Write('Format new disc ? ');
needs_format:=Yes_no;

IF needs_format THEN BEGIN
  Write('Format disc in which drive (0..3) ? ');
  dest_drv:=Get_num(0,3)
END ELSE REPEAT
  Write('Overwrite disc in ');
  Getblk0(dest_drv);
  Write('Ok ? ')
UNTIL Yes_no;

Write('Read from disc in ');
Getblk0(src_drv);

disc_size:=cache.ptr^.disc_size;
blocks_leftå—Ã†$—}ZíÄìFÚÄìEıjJM <%™44πê7∏:4∑∑;¥∂61∂2∞π0ê1∑π9:∏:7π=%—© #4s(	4_V§†$—º†#¬X!´sªs£+!Éõõª{ì!3Kc)3ì{i	#Kõ~s“Ymöê  23G2ÄìEıjJM <&†∂67∫42π34∂2πê7∑:42ê24π±ê;¥∂612Ω&—© #4s(	4_V§†$—º†#¬h {c+3°´sc£+ì+!s“imöê  23G2ÄìEı~jJM M’©(	4o(úF®–“Ê@ﬁ‡Ë“ﬁ‹@∆¬‹@¬ÿÊﬁ@ƒ @ÍÊ »@Ëﬁ@¬»»Ùú[Df§ @å—Ã†$—}ZíÄìFÚÄè	‡Ñl$.nnÌÓLÑÕ-å§ç‰$ç.ldÆl¨ÑÌ.çIÂ¥Fj@~ D »Õ M’©(	4o(†H ¬‰ÿ“ ‰@Ï ‰Ê“ﬁ‹Ê@ﬁÃ@Ë– @Ã“ÿ @Ê ‰Ï ‰\Ù†[DÜ§ @å—Ã†$—}ZíÄìFÚÄìEıjJMJ<(Ç	!∂2∞π:42ê24π±ê4∑=(ñ–ë© #4~s';
  Get_clk;
  pass_ent.creation:=now.date;
  pass_ent.access:=12 { access WR/ only}
END;
Writeln;
Writeln('Password file cleared');
Rw_blk(False,cache.addr,drv,0)
END;



PROCEDURE Copy;
VAR
src_drv,dest_drv,read_ptr,write_ptr:Byte;
disc_size,blocks_left,base_blk:Word;
needs_format:Boolean;
BEGIN
Writeln('           WHOLE DISC COPY');
Writeln;
Writeln('This option makes an identical copy of');
Writeln('a whole disc. Any previous contents of');
Writeln('the new disc are destroyed, inent[DDA.offset].blk_list[b_no]
  END;
  IF error=0 THEN Make3(ptr,new_ptr)
END
END;




PROCEDURE Open_out(VAR fname:Min_string;VAR new:FCB;init_ext:Dbl_word);
VAR
a:Byte;
x:Word;
BEGIN
BEGIN
  WITH new.DDA DO BEGIN
    offset:=0;
    block.drive:=0;
    block.blk:=0
  END;
  Strip_dirs(fname,new.DDA,False);
  IF init_ext=0 THEN x:=0 ELSE x:=Succ(Pred(init_ext) DIV block_size);
  IF error=0 THEN Look_up([make],x,fname,new.DDA);
  IF error=0 THEN BEGIN
    Update_blk(new,0);
    MakeFree :',free_bl[0]:4,'K');
messag:=True
END;




PROCEDURE Update_blk(VAR fbk:Fcb;new_ptr:Dbl_word);
{Corrupts <c_ent>, Sets <error>}
{Sets the new pointer into the FCB, updating the current block number.
 Also sets the extent if this is going to extend the file.}
VAR
b_no:Word;
bl_des:Block_descrip;
e:Dbl_word;
BEGIN
error:=0;
WITH fbk DO BEGIN
  b_no:=new_ptr DIV blk_size; {Block offset in file}
  Cache_entry(DDA.block,TRUE);
  IF error=0 THEN
  IF exploded IN cache.dir_ent[DDA.offset3(new.old_ptr,0);
    IF error=0 THEN Cache_entry(new.DDA.block,True);
    {cache used by Set_ptr & not set properly by Look_up anyway.}
    IF error=0 THEN BEGIN
      Make3(new.ext,init_ext);
      cache.dir_ent[new.DDA.offset].extent:=new.ext;
      new.flags:=[in_use,W,R];
      cache.needs_writing:=True
    END
  END
END
END;


Procedure C_dir(VAR real_name:min_string);
VAR
parent,DDA:Disc_address;
a:Byte;
BEGIN
error:=0;
  WITH DDA DO BEGIN
    offset:=0;
    block.drive:=0;
   ].flags THEN BEGIN
    {Exploded}
    bl_des.blk:=cache.dir_ent[DDA.offset].blk_list[b_no DIV 512];
    IF bl_des.blk=0 THEN curr_blk:=0             {512=blocknos per exp.block}
    ELSE BEGIN
      bl_des.drive:=DDA.block.drive;
      Cache_entry(bl_des,TRUE);
      b_no:=Land(b_no,(blk_size DIV 2)-1);  {Bring into range for this EB list}
      IF error=0 THEN curr_blk:=cache.EB_list[b_no]
    END
  END ELSE BEGIN
    {Not exploded}
    IF b_no>15 THEN curr_blk:=0
    ELSE curr_blk:=cache.dir_iteln;
Writeln('This option will clear a corrupt or');
Writeln('unwanted password file from a disc.');
Writeln('All other files on the disc will be');
Writeln('left unaltered.');
Writeln;
Writeln('This option can also be used to add');
Writeln('a password file to a disc used with');
Writeln('earlier versions of the file server.');
Writeln;
Write('Clear the disc in ');Get_blk0(drv);
WITH cache.ptr^ DO BEGIN
  FOR b:=128 TO 255 DO data[b]:=0;   {clear entry & blk list}
  pass_ent.name:='%Passworddisc in');Get_blk0(drv);
REPEAT
  Writeln;
  Write('Account number :');
  acct:=Get_hex;
  Writeln('Current balance =',cache.ptr^.words[acct+256]:5);
  Write('New balance :');
  cache.ptr^.words[acct+256]:=Get_num(cache.ptr^.words[acct+256],65535);
  Write('Adjust another account ? ');
UNTIL Not Yes_no;
Writeln;
Write('Write back new values ? ');
IF Yes_no THEN Rw_blk(False,cache.addr,drv,0)
END;


PROCEDURE Zap_passwords;
VAR
drv,b:Byte;
BEGIN
Writeln('        CLEAR PASSWORD FILE');
Wrs';
  Get_clk;
  pass_ent.creation:=now.date;
  pass_ent.access:=12 { access WR/ only}
END;
Writeln;
Writeln('Password file cleared');
Rw_blk(False,cache.addr,drv,0)
END;



PROCEDURE Copy;
VAR
src_drv,dest_drv,read_ptr,write_ptr:Byte;
disc_size,blocks_left,base_blk:Word;
needs_format:Boolean;
BEGIN
Writeln('           WHOLE DISC COPY');
Writeln;
Writeln('This option makes an identical copy of');
Writeln('a whole disc. Any previous contents of');
Writeln('the new disc are destroyed, initeln;
Writeln('This option will clear a corrupt or');
Writeln('unwanted password file from a disc.');
Writeln('All other files on the disc will be');
Writeln('left unaltered.');
Writeln;
Writeln('This option can also be used to add');
Writeln('a password file to a disc used with');
Writeln('earlier versions of the file server.');
Writeln;
Write('Clear the disc in ');Get_blk0(drv);
WITH cache.ptr^ DO BEGIN
  FOR b:=128 TO 255 DO data[b]:=0;   {clear entry & blk list}
  pass_ent.name:='%Password);
VAR
block_no:Word;
BEGIN
FOR block_no:=0 TO disc_size DO Rw_blk(True,cache.addr,drive,block_no)
END;


PROCEDURE Rename_disc;
VAR
drv:Byte;
BEGIN
Writeln('               RENAME DISC');
Writeln;
Write('Rename the disc in ');Get_blk0(drv);
Write('new ');Get_disc_name;
Writeln;
Write('Write back new name ? ');
IF Yes_no THEN Rw_blk(False,cache.addr,drv,0)
END;


PROCEDURE Alter_accounts;
VAR
drv,acct:Byte;
BEGIN
Writeln('        DISC SPACE ACCOUNTS');
Writeln;
Write('Examine the π–Q˝˛Âf⁄`:õuŸµT Çd5NgAÑ‹o:ß!Ñ∆c7ùM«A ¸@Õº‡·ëÍÕΩ¿Ï€‚Õ•`‡}•VŸ∂ õX¥‹!õc¬
Á#I–  1Lf±∏ wå&√©îÊ àµX 0> =Yµt!õ[¬¥¨ >0èÄQ  rèÄQ  Âf›f‚fﬁPg‡)õ[∑p @  ÄÜL"êJBÅ¶S+ì DAíL"≥lÄ@l| z≥l∏C6Õ3m‡C6ÛÑ3oPC6åïìòÄﬁp:MÊ·‹“l6f√)Ñ‰ 0àfÛë»Íp:Á&m›èÄVm‰fﬁ–Ümf‘‡ì©∏Óa7¶A¿¬s9ùÕÁ# ÄÃi6Dcëº⁄ 0àÜìôå\Õ£!"1ÍÕ§,⁄FÕ§¡,€A6Û°† rç&√)Ã@o7ÜÉ(Ä»i9òƒsI∞ÿ 1Yµ<$F> =YµX%õVBYµp%õiÇMÜS1–@u7MáC)» d3l(H<| z≥l`K6«Ñ≥lêK6ÿÑ≥m†K6ÒïìòÄﬁp:MÊ·å¬nMá3xÄƒeNfS ÄËoLÜFmß	èÄVmÆ);
VAR
block_no:Word;
BEGIN
FOR block_no:=0 TO disc_size DO Rw_blk(True,cache.addr,drive,block_no)
END;


PROCEDURE Rename_disc;
VAR
drv:Byte;
BEGIN
Writeln('               RENAME DISC');
Writeln;
Write('Rename the disc in ');Get_blk0(drv);
Write('new ');Get_disc_name;
Writeln;
Write('Write back new name ? ');
IF Yes_no THEN Rw_blk(False,cache.addr,drv,0)
END;


PROCEDURE Alter_accounts;
VAR
drv,acct:Byte;
BEGIN
Writeln('        DISC SPACE ACCOUNTS');
Writeln;
Write('Examine the 	f€pñm∫	f—Ä£Ä‡a9úŒÊÛëê@f4õ¢°º@a'3ÄÍs2ôsI––Õºa"1ÍÕΩA,€⁄Õæ,⁄ûe0úçÜì)»@v2úéfìy∏Ê 7ôÑCAî@f4õ¢ôî‰v2úÖÃ⁄2$ ¨⁄@Õ§aL⁄LÕ´AL⁄∫Õ±ÅEaÑ∆e'3ÄËoå¢∞ a9LÇI∏@d9N∆Q\Õ™BAÍÕ™·L⁄¿Õ∑‡b  ﬂèê dt‡Çnù–≠”r∫fB9[¶‰(ò —çÄ”Úx›†ÑF˙"Å \¨€∞%(Ng3πº‰d9∏Z P⁄∞o†¬)p dlf÷0¶mó
fﬁÄ¶m(Ng3πº‰dç&√(Ä∆l2òNFS#6∆ÖG¿´6 3oXP¯ ı (¯ ıÄ Vm±a€@Üm∑|ô∑∏)õSÇƒ Ä@ \êO&DBILÜ !ì ñm	ÄVmf—0∂m/f’ê∂m\fÿ–≤°†“sŒCIº‹ 6òMfSòÄ¬nLÜSq–“c0õ3y¿Ú 7ôôµ<,L> =YµX-õW¬Ÿµà-õqÇÃ"π†ﬁl2àÜìôå\disc in');Get_blk0(drv);
REPEAT
  Writeln;
  Write('Account number :');
  acct:=Get_hex;
  Writeln('Current balance =',cache.ptr^.words[acct+256]:5);
  Write('New balance :');
  cache.ptr^.words[acct+256]:=Get_num(cache.ptr^.words[acct+256],65535);
  Write('Adjust another account ? ');
UNTIL Not Yes_no;
Writeln;
Write('Write back new values ? ');
IF Yes_no THEN Rw_blk(False,cache.addr,drv,0)
END;


PROCEDURE Zap_passwords;
VAR
drv,b:Byte;
BEGIN
Writeln('        CLEAR PASSWORD FILE');
Wr  õè"Å» v4õŒß1åﬁn:M«CòÄﬁffÿ‡±0¯ ıfŸP∂mòfŸ∞∂m˛:¢qîÓ 2Nf1Ñ‰eß3°»ﬁy2ôÇI∏∆l:ô&„;6„ÖâG¿´6Á≥nà[6Í≥i†aê“s1à∆iîX 0òÃfÛ©∏Ë 4õå∆Ûë¥¬t4õÕ¬)–∆.fﬂ±¯ ıf–`∆m	f–¿∆mi*¢qîÓ 2Nf1∏ e2∆Û†Ä–a;Da» a2Y¥‘0D> =Y¥1õO√µ1õc#)î‹ 3ŒF”	–Ëe2ôµ®0 > =Yµƒ1õ]µ‹1õe√∂h1õq√
√	å  2Nf1–ﬁ 1D3y¿“e2&·ê‰i;DmçÄVmîfŸ–∆m†fﬂ¡0Ä‹e;àÜìôå@t7àFSî“v2àfÛÅ‰@i7á#Iÿ  !3n@`î| z≥nxc6È3n®c6Ö≥kêC6ïëçÁ#iÑË 7N‚!§Êcƒ⁄  ¨⁄Õ¢¨⁄V ÕµBÕ”∫	õCCY¥‘5õo¿≈]àæÉï”‘“Q\  >07–l±„,:ﬂ≥@  ¯¿ÇﬂAπ–ÓV+le. <b_list> is 2nd half of dir ent
 <exploded> indicates whether this is in fact an exploded file, in which
 case, all the blocks are loaded & scanned.}
VAR
a:Byte;
b:Word;
BEGIN
FOR a:=0 TO 15 DO IF b_list[a]<>0 THEN BEGIN {=0 => not allocated}
  bl_des.blk:=b_list[a];
  Un_count;
  IF exploded THEN BEGIN
    Cache_entry(bl_des,True);
    IF error=0 THEN WITH cache
    DO FOR b:=0 TO M1words_per_block DO BEGIN
      bl_des.blk:=EB_list[b];
      IF bl_des.blk<>0 THEN Un_count
    END
  EN
  ent_off:=0  {For all subsequent blocks, first ent is not reserved}
END
END;



PROCEDURE Init_disc;
VAR
ch:Char;
b_list:Blk_vec;

BEGIN
error:=123; {not really an error}
debug:=False;
WHILE error<>0 DO BEGIN
  Writeln('Check discs then press space');
  REPEAT REPEAT UNTIL Inkey(ch) UNTIL ch=' ';
  Inidsk(0)
END;
Writeln('Disc size :',free_bl[0]:4,'K');
bl_des.drive:=0;
bl_des.blk:=0;   {Look @ root}
Cache_entry(bl_des,True);
Uncount;
Scan_dir(cache.dir_ent[0].blk_list);
Writeln('D
END

END;


PROCEDURE Scan_dir(b_list:blk_vec);
{Scans (Recursively!) a directory tree, allocating the blocks which it finds
to be already in use. On entry, we have the block list of a dir.
These blocks have not yet been counted, so we count them as we scan them,
observing the entries which may be files or other dirs.}

VAR
ent_off,blk_off:Byte;
BEGIN

ent_off:=1; {entry 0 always exists and is reserved, so start at 1}

FOR blk_off:=0 TO 15 DO IF b_list[blk_off]<>0 THEN BEGIN
  bl_des.bl9N∆Q\Õ¶†¬AÍÕßÄÃ⁄äÕ∑‡l€Ã
Õ±`∆„)‹@ÕÆ@¿AÍÕØ Ã⁄¯Õ§`¨⁄êÕ≤¿Ã€Õ∑†≈së§Ëeå&3XÄ‹e;à∆iî@?3l`0X| z≥lò36œÉ3iX |` ¢  Â ¢  Õ  t4õDü‡vmúf–†q Ä@ !$¶C @A!ê…ÂRqP¶Õ∑¿¡±ÍÕ∏†Ã€êÕΩ@Ã⁄*Õ£ Ï⁄êP6LfQê“s1àÜÒà  0ôGSô– dM¬!»“v2à"ÊmèÄVmf—∞vmøf—‡vmSf⁄ fmt òÃfÛ©∏Ë 7M¶#)»@:f‘êpÄ¯ ıf’ vm\f“–&È›Õ´ Ï€<C:úéFSq–@b0õ&„î@=f◊Ppà¯ ıf◊¿p ›7 Ñ¿ª¥î‹ø ¨≥„”3lÿ∞§#¿ .t D  jπG¿W´6â≥k¯;6ØÉ≥o098 wå&√	∏∆eô∂|> =Y∂òõtA¿  t‹Ç Ó“Sr⁄≤œåKrÕ≥b¬êè  π@  t‹Ç Ó“SrˇÉ≤œåJÕ≥b¬êè  k:=b_list[blk_off];
  Un_count;
  Cache_entry(bl_des,TRUE);
  IF error=0 THEN REPEAT
    WITH cache.dir_ent[ent_off] DO  {Check if deleted}
    IF next_ent<>(ent_off+blk_off*ents_per_block) THEN BEGIN
      IF Land(access,D_bit)=0      {'D' bit in access byte}
      THEN Scan_file(blk_list,exploded IN flags)
      ELSE Scan_dir(blk_list);
      bl_des.blk:=b_list[blk_off];
      Cache_entry(bl_des,TRUE)  {c_ent is out of date}
    END;
    ent_off:=Succ(ent_off)
  UNTIL ent_off=ents_per_block;screen
	JP	pmess


sjmess:	DEFM	'SJ Research File Server ver '
	DEFW	verhi,verlo

	IF	large
	DEFM	'/8"'
	ELSE
	DEFM	'/5"'
	ENDIF

; NB this label must be defined before any references to the MESS
; macro is made.
; NB2 also forms part of the above string.

crlf:	DEFM	cr,lf,'$'


	IF	t.on

;dhxout
;Print hex of HL

dhxout:	LD	A,H
	CALL	cahex
	LD	A,L
				;DROP THROUGH
;cahex
;Print hex of A
;
;On entry:
; A	number to be printed

	JP	cahex		;Now lives in h2lib or some such plz≥mX6◊7O»'®¯ Õ∂‡NVÈ˘O +wi)πq@úËw+A @ m“r±@ † Ñ  fﬂ¬—jƒª GñÈ›1∑O»7´6Û@             ¸Õæ`BÇK6¸7O»7®¯ıf– 6mnüêOQAõCÄ‹≠”Úû 8VÓ“Sréπ–ÓV(¬ Ä ⁄RÂbÄA@  Õ¶ÄgÖ¢’âNÄœ-”∫	∫~AøÅ¨*l›? õßt#6ëÅ3kPt¸Ña“∞&m.ÅŸ∂–õ{Ä»fÉ)å÷ 2Nf3òÄL 8åß3òÄÊp0òÃ¢π† nå¶!ÂõwÄDÉ‡’õy@Y∂‹õC¿¬Âö  A®™JIÍCÆ  ˛ à€äÕ•‡Ñ„y–@aç&√(ÄÊe9åß!òﬁr6òNÇ!§Êcfﬁ0Ë¯ ıfﬂ`6m˘p ∏ÅÕ°†å⁄tÕ´†l⁄¥D4úÃbqÑ⁄eD⁄` ¨⁄nÕ®¿ç—≤Õ© ç”Ú	n¸≥‡l€H,ÁBA®h(i°¨ ?=G¿´6≥Å≥k(#t¸Ç3,tÓÇzèÅL¿¯ z∑O»%ª2«VÔ ÊÕ¥ÇŒt G´ Oœ‡k6Öëî’US 4tUHeM9>GETNUMÅë—UV ttUD$ƒ≥Q%MRENAMEDÅ–STêP‡u§58=AfNEWDISCä bDî‰ıUH†CHä <T44ÑX†ERRORä ÄE5Dı†TWOSIDä ÄTDT%Ty@ ÷ÿX¨e9L«ëåﬁm8ßC+4  ('˚] Õ  „´t¸Çf€fÈ›√  ¥@˙	fÄ ⁄z  E‰·HÈö  «¿´4  fÄ ⁄ Õ∂Õ”∫¸NfÄ VÈ˘˛73j∞‚†f⁄°fÈ›† 6ª Lß6m> èÄVmE f‘Ä ¿Uõ[Ä∂4 úof◊p ¯ ıf◊‡mÅ nüêL€T,›;°t§õK &ËŸ  Ä  ö   ô¥<õlõßt3’ö         ÄŸ†  †|›!¿,⁄b ›?!û£‡’ö  3l¿4  A9X†P B  3@ +∫~C9–Ã–  ≈ å  ö  3m∞0Knüêœ„˚4  z∑O»g!õF HÔÄ|`4f›ê!Í> ΩY∑å | zèÄ/Vm3•Åﬁ+ ¯¡\Õ®`å€Õ∑¿å€®T;õƒ3Iê dYµl> =YµàTWOSIDp ®¯ıfÄ €ÇÕ∏Äå€¯D4úÃbô§ÙeY∑T> =Y∑pCACHEv  à  ’rèÄØVmﬁ£‡’õa∑§áo@Ÿ∑ ¸f÷¿FmM2Nf1∏¬m2à”	‡@1fÉ	»¬c:NG1HÄtÕø†ÅÒÍÕ†Ä¨⁄<
› Ä⁄ Õ∂Õ”∫¸f€PG´t¸Éµ®éÒX∆Q∫æAå⁄R
>=G¿´6çÇèÑQÍÕ±Ä£‡C‘|z≥l®+6¨∑O»%ª2–Ç[ßt`ú›? ü¿°Å∫~A1äÌÀP
o <  2Ânüên∏¯@›_ ∆&mÉnüêoQÍÕ≥¿¨€B
≥n†(¯\ı ^¨€º
Õº ≠”ÚxÃ∑†≠”∫	∫~AøÅ¨*º
ÕΩÄå€‰
√§ ¨⁄H
 3h836ö Ä@  Ä@ )Iƒi@D$î»l⁄ú
 ¨⁄™
Õ°@Ã⁄*Õß‡Ã⁄ÑÕÆ ≈aÑ∆e'3ÄËoå¢ëî‹a6ôLÇI∏@d£‡’õO Y∑òõz@NV( Ä – õC@PM”Ú¸f“´6•Ä†ú¨P¸Ñ!Ä† 4  #ºVˆïπ f÷pïäﬂE9–Ï⁄ÊÚΩ@,€ Õ© ,€ Õ∂ $”©ÃË 7ŒÇî@m7úå¢°†¬n3lp X| z≥l®}  ÆQÍÕ  ∂LõJÄY∑t@T9D9Ñ“nô∂»> =Y∂‰õr@Y∂ Âb∑—Nt;6≈ æ≠Xt¸áål€÷ÇfÄ @`.ﬂF7¡€òﬂF@ ´î|z≥n06Ù ≥l∞6ê7—;H Õ¥‡–KtlÇ 3hx6ÿ7NË7Ò˝õX¿^≠”Ú¸f‘ ";≈`¥@|zèÄ/VmE£‡’õW@á¿á®¯ıf÷`&m&nüêOQAö  7NË&•nüêO‡ÉJ“Å∑O»7´6‚        ÄŸ∑@ PAf’@&È˘ı ^¨⁄ﬁÕÆ@M”Ú	Í>3@ +t¸É'ÅÄª¥î‹  Ëw+0 @ m
<-¨@  Ú›;†òvî∫~AΩY∂@         ~fŸ¿!A-õh@õß‰‘|w·ÍïjJMJ	"@Lå—ƒ†$—}ZÇ_¢_§ƒ˛&'@ã	Í†@(ÈQ™<:7U‡e‡`K¯òÅ ’O¬’j	â~ì£V•Y@I£y@I¢Ò/ÚcD[ﬁcÚ ≠Ò ûUx†T™ARPh⁄P‡Ñ~i›°•ç†Åë•ÕåÅë…•ŸîÄ†¿∏∏Ã§Ä¸ÅËÑ∂ÜçH Ä£ô@I¢˙µøÖJ & Ãú∞Pëïµ%&çÂ&ãÍ‘îö7îx"$Insert disc & press space when readyz"-¢~CR  FhÊPhæ≠GÇ9@	` !$
üàÍ‘î Fg§≠I@!/·Dƒ»ÃÛ U® ˙& @SÒ%I@I£y@GÇPA‘Ê˜Bfñ∆R6W'fW"f˜&÷BFó67¢R⁄5  " dféj Mº >â~à T¸A[˙RPhﬁPhæ≠I@I£i@GÇ`@ƒFó62Ê÷R“¢b⁄5  " dfée&ãÍ‘˝ %F≠JØı%&ç• £¿«ï»	~ì   bd@à	ëö8îö/´PKÙKÙò®™TDøIà
\~;Count:= number of params
count	DEFL	count + 1
	ENDM

i	DEFL	count		;i:= count

	REPT	count
	IFF	i AND 1		;ie I is even
j	DEFL	0

	IRP	param,<list>
j	DEFL	j+1
	IF	(j EQ i)
	PUSH	param
	ENDIF
	ENDM			;of IRP param....

	ENDIF
i	DEFL	i-1
	ENDM			;of REPT count

i	DEFL	0

	IRP	param,<list>
	IFNB	<param>
i	DEFL	i+1
	IF	i AND 1		;ie I is odd (and param points to a string)
	mess	param
	ELSE
	IF	'&param' EQ 'AF'
	POP	AF
	CALL	cahex
	ELSE
	POP	HL
	CALL	dhxout
	ENDIF
	ENDIF
	ENDI ˝ <Æ@KÙòÅ ƒ@    ƒ¶T≈¯û≠I@I£y@I¢˙–`íÄìF“Äè Å(å≠Œm.è$ØE¥j@ D »Õ M’®%¸(òÑ >À@ªÒMI@I£y@GÇ†@EVG¢¢⁄5  " dfée&ãﬂ
~ﬁ
jJM <"7∫±62Ω–1© #4s(	4^WV§†$—º†#¡h Z#KõõK”)Î—imöê  23G2ÄÅ —‡cÃDÃ  S#4w(RÃà23G°@2ÄìEÙ@u°‡6?`Í— ‡ ~WÇÍ  I@I£i@GÇAˆFó62Ê÷RÜ÷Ç6Ü&7FW'2íß¢Ú⁄5  " dfée&ãÍ‘˛ F≠JØøÂ %ÄÄ4Ñ®’®%˛L@É˙eB_‰ƒ&T≈¯∆•ZÇ_ƒƒ .~2©V§†$—¥†~ Ld@à	ëö8î$DÄô£â@@ ò»Å#4q(	4_V†óóÒ1OT®’x2™¯fcPK¸òÅ¬_‰ƒ™b%¸L@ÄR∆∆ï+G¿j ?GÄè 
‚_ƒƒÈ ó˘1*5jJMJ	ì"@Lå—~F
	ENDM

	POP	HL
	POP	DE
	POP	BC

nomess:	POP	AF

	ENDIF

	ENDM



pstat	MACRO	sw,mes1,mes2
	IF1
	IF	sw
	IFNB	<mes1>
.PRINTX	mes1
	ENDIF
	ELSE
	IFNB	<mes2>
.PRINTX	mes2
	ENDIF
	ENDIF
	ENDIF
	ENDM


	
	pstat	large,<8 inch disk version>,<5 inch disk version>
	pstat	t.on,<Tracing ON>
	pstat	large,< (VERY) long macro expansion.......>,<long macro expansion.......>





;
; PROCEDURE ver_msg;		prints SJ FS ver etc. on screen
;


vermsg:	LD	DE,sjmess		;Print version on 16 bits)



; Various Macros


emt	MACRO	emtno
	DB	0F7H,emtno
	ENDM

;Macro to print string @ messadr

mess	MACRO	messadr

	IF	messadr EQ crlf
	CALL	pcrlf
	ELSE
	LD	DE,messadr
	CALL	pmess
	ENDIF

	ENDM



;Macro for message condition

mcond	MACRO	addr
	PUSH	AF
	LD	A,(mesflg)
	OR	A
	JR	Z,addr
	POP	AF
	ENDM



;Trace message macro

tmess	MACRO	list
	LOCAL	nomess

	IF	t.on

	mcond	nomess

	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL

count	DEFL	0

	IRP	param,<list>	ÄBc"@Lå—ƒ†$—}ZÇ^Ç^Ñ“®
BU*ºº	| ®K–öCÙ Ã_É*‘Ù&Ç_ÑÕsÖJµ%&çÂ&ãÍ‘îö7îxMust not be more than z-°cR  FhÊPKôô@~ dféÂ&ãÍ‘îö6îx Try again :z-†√R  FhÊ¨†$—}WÅ/Bh%¯L÷ø’®%ÚL_ÑÍ	}	zHÜ ˇ˛TﬂÍU®%Ù%¸L‚ ˇ˘S´RPh⁄PK¯ôô@ dféÍ Mº~
U©(	4o(	4_TKËô—VÊÄX¸ kt 'Ä¿U∫@¥  *Ç_†@ Äïµ*ºT˛î ñ “Ç ˛Tj‘˛& A˝PóÒ1
òø‘´RPh⁄P&2 D»ÕJ"@Lå—ƒ† Ld@à	ë~ö8îö/´PKÙKÙò’b˘Q™¯0/PKÙòÅè√5*‘˛&. âÑB  ˜tNb ∏;ómﬂÜ™U©(	4m(%¸LLà23GÄìEıj	~â~ì  |K¯òù&ODÚ£Um‡j†óÒ1pPb ~ÖìQTî†de4UÑïHQ56PCHARÅë”T’ dî‰î’4xMeMQM^CHKSWÅì”ìSë`dÙddƒîËAI%9RSYSERRÅëìT“ e4DTƒò†MESSAGä ÄTDT%Tx†PACOPYî MA¿[cFY]ÄÕ   ¿ÿ—ñW>Üh  > 4∆¨ï{LhÕ•`Å–¯”3iX aﬁ!  cFY]ê+>≠a„%^<d´⁄cRªlhÀ+äAÄòá Ñka@,ÙÓ ⁄cVm+ ;UÌ1£  Äóç^…z±_ÆW+T|zà@@ÀîVÂ û¨€4 Ò[àÍˆò’õJ¿ƒò’õJ¿÷ãÖ˙·`ºY,ãÖ¢≈à` Î -ÿ¡ñ 4∆√FK¨å6 6∆l≥{!ñWdöc!†L Òdæﬁ™Òñ vìGG‡  MESSAG‡ £¯ e¢"°*£ HÑ  ‹`ôÃFr}ü\œÜò‡|Óié«¿òÏCÄ  ¿°∞ F}≤C B Ä5 @êrj*öö
<º ^¢"°*£À¿ %‡ rÇ
zÇÃº ^.  ó KÅ %¿¿‡Ä	pH∏(2&êì∏;†"çÄ =¡‹ªn¸9R≠I@I£i@A/‚bd@à	ëö8îö/´PKÙKÙòÅ‚_ƒƒËA=Tà ÂF´‡Î¿ÂA/‚b‡∞ƒ  pw@Eö!  {Éπv›¯z•ZíÄìF“ÄÇ_ƒƒ»Å#4q(	4_V†óËóÈ~1ƒøââ–"¬z®
;@? çWÅÁÅ◊Å∫Ø/_ƒƒ™~´PK¸KÙòƒÚ£V•Y@I£y@I¢Ò/ÚcD[ﬁcÚ ≠Ò ûUx†T™ARPh⁄P‡Ñi›°•ç†Åë•ÕåÅë…•ŸîÄ†¿∏∏Ã§~Ä¸ÅËÑ∂ÜçH Ä£ô@I¢˙µøÖJ Ü ˇ˛d¿ÄC  ˇˇ2r¡@G@? çZíÄìFÚÄìEıjJM <$∑9≤π:24π±ê892ππê9∏0±≤ê;¥2∑92∞≤<Ω—!© #4s(	~4_V£¡†∞êÅOƒujJ Ç˛dfz@*‘î˛Lb˘ëôÊ ´P ÙL@Ä
ß‚JíÄìFÚÄè†É©ÕÓÑ$Õ-å§lÆNÃÆDÕÓM¨.Ñç.loD•¥:j@ D »Õ’îö/x$ }  ©~PT#† !-M^:“ë”T’# ¿5AQe;∂ëìT“#ß†Ma%R:ƒë—UQScπ¿%9%5M3∏íSï’„¨¿=1%::*ì”ìSëc≠@A!J;4TíSï#•`M1f:4î÷T—Tî£ß@MeMQM^p  ûFr}ü\œÜò‡|Óié«¿òÏCÄ  ¿°∞ F}≤C B Ä5 @êrj*öö
<º ^¢"°*£À¿ %‡ rÇ
zÇÃº ^.  ó KÅ %¿¿‡Ä	pH∏(2&êìW+T|zà@@ÀîVÂ û¨€4 Ò[àÍˆò’õJ¿ƒò’õJ¿÷ãÖ˙·`ºY,ãÖ¢≈à` Î -ÿ¡ñ 4∆√FK¨å6 6∆l≥{!ñWdöc!†L Òdæﬁ™Òñ vìGG‡  MESSAG‡ £¯ e¢"°*£ HÑ  ‹`ôÃFr}ü\œÜò‡|Óié«¿òÏCÄ  ¿°∞ F}≤C B Ä5 @êrj*öö
<º ^¢"°*£À¿ %‡ rÇ
zÇÃº ^.  ó KÅ %¿¿‡Ä	pH∏(2&êì¯Ç∑Ù§†$—º†$—}ZíÄìF“Äè¿Åàç.ld	Ã-¨§§D≈¥j@ D »Õ M’®%˙ b˘Q´R´¡=I@I£i@@ÄË ±Âr_§∆  Ö ÄÄ  "@Lå—ƒ†$—}ZÇ_¢_§≈EXÇ˛TDø~Ià
\ ˝ <Æ@KÙòÅ — (à   òÅ ‘ òø’©(	4o(	4_ZRPh⁄P‡†%ïπÕ•—‰ÄıË†∂ÇMH Ä£ô@I¢˙µøÖÄŸh ∑~)©(	4o(T¢Í¬»ÙT[@Ü§ @~å—Ã†$—{·[¡MI@I£y@GÇ¿@dF˜V&∆W¢¬⁄5  " dfée&ãﬁ
Í‘îö7îx-Disc size =z--†≥R  FhÊP ˙< ,yàôô@ 
dféÂ äYë &Fh‚¥(Phæà¥<«~Ï ]Z$<™]@ ©(	4m(^>»“Ê∆@‹¬⁄ @P⁄¬@b`@∆–¬‰¬∆Ë ‰ÊR@tÙ^[CÊ§ @å—Ã†$—}ZÇ_¿@ Äïµ*ºTˇî ñ “Ç ˛Tj‘ˇ& A˝2°/Úb*b¸cR≠A~ Ù BUILD / 3D-Shapes Ù (c) CET 1982$ Ù Version 1.0 / 16 December 1982 *KEY10OLD|MRUN|M/ Ó Ö Á ü=17 ÂçTG@ ã €: ˆ: Ò" at line "; û: ‡C Î7: Ò ä15,10) Ω(&8D) Ω(&82)"Build" ä15,11) Ω(&8D) Ω(&82)"Build"4 Ò ä12,23)"Press SPACE bar";: ÚOFF: ı ˝ •=3ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ(+ ÁL=76 ÑL=136 åC=C-IN: Ò"Left": ÂçTq@), ÁL=82 ÑL=137 åC=C+IN: Ò"Right": ÂçTq@&- ÁL=85 ÑL=139 åZ=Z+IN: Ò"Up": ÂçTq@-. ÁL=88 åXC=XC+1: Ò"X - no plotting": ÂçTc@ã/ ÁL=72 å €: Ò"U=up, D=down, L=left, R=right, (or use"'"arrow keys); I=in, O=out;  X=don't2: ÚON/ Ó Ö Á ü=17 ÂçTd@ ã €: ˆ: Ò" at line "; û: ‡	 ﬁXF(4),YF(4),XB(4),YB(4)
 Î1 Ô28,0,31,39,28 Ô24,0;130;1279;1023; ⁄ € Ô29,640;600; ˚1: Ô19,0,4;0;19,1,6;0; *FX 4,1 Ò"Press H for help"	 ÚINIT( XF(0)=C/B:XF(1)=XF(0):XF(2)
 ”=ì-100 ﬁ X% 79:Y%=X% Å 2567 osbget=&FFD7:osword=&FFF1:osfind=&FFCE:osasci=&FFE3( „ pass=0 ∏ 2 à 22 P%=ì+< [OPT pass:.exec PUSH HL:LD HL,(oldword) F Ñ A:JR Z,trap:EX (SP),HL:RET~P .trap POP HL:PUSH DE:LD E,(HL):INC HL:LD D,(HL):DEC HL:.loop "'"plot on next move; /=restart, E=End.": ÂçTc@&0 €: Ô7: Ò"Press H for help.": ÂçTc@1 XC=XC-1: ÁXC>.5 åçTc@	2 ÂçTT@3 *FX 4,04 *KEY 10	5 Î7: ‡6 › ÚINIT67 Ù Variables which alter starting          position8 Ù$9 Ù MN magnifies the picture plane
Options:    CRG

Pass 1
 26753 bytes free at end

Pass 2
  8610 bytes free at end

Pass 3
  8235 bytes free at end

Name: FRANUTIL    Lines:  567
                  Code:  5772
                  Data:     0
                                  DISC512 REL   )"$              FRANUTILBAK   b*\`Ñàâç          FSUTIL  PAS   .%J              FSUTIL  COM   n+/7<@GH          FSCONV  PAS   }'^ÇÜóô         FSUTIL1 PAS   0KLQ              FRANUTILREL   <!#             DISC512 MAC  |Äåèïòöõúù       : Ù IN magnifies the 3-D space8; Ù C,Z & B are co-ords of the              first cube< Ù
= MN=800> IN=1
? Z=-3.5	@ B=8.5
A C=-4.5B ÙC ·D › ÚOFF  Ô23;11,0;0;0;0;: ·E › ÚON  Ô23;11,255;0;0;0;: · ˇˇ”"TWO YEAR OLD - â0"Ñ ‹"STONE"Ö ‹"11 N)  5,XB(N),YB(N)! 5,XB(N+1),YB(N+1)" ÌN# Ò">> ";$ *FX 15,0% L= •: ÁL>96 ÄL<123 åL=L-32*& ÁL=79 ÑL=48 åB= î(B-IN): Ò"Out": ÂçTq@' ÁL=67 ÑL=47 åçTM@(( ÁL=68 ÑL=138 åZ=Z-IN: Ò"Down": ÂçTq@) ÁL=69 åçTs@%* ÁL=73 ÑL=49 åB=B+IN: Ò"In": ÂçTq@DS -"x ‹"FIRST FOR NEWS"""y ‹XXXz ‹"FOR SALE"{ ‹"1980 250cc FAIRDREAM"| ‹"GOOD FOR SPARES, è5"} ‹"TITLEY"~ ‹"CHESTERFIELD 204090" ‹XXXÄ ‹"PRAM FOR SALE"Å ‹"V.G.C. ä0"Ç ‹"ALSO TRICYCLE FOR"É ‹"TWO YEAR OLD - â0"Ñ ‹"STONE"Ö ‹"11 ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ + No verify
rdsec	EQU	077H	;Read 1 sec + IBM + No head load
wrsec	EQU	057H	;Write 1 sec + IBM + No head load + Data mark
settle	EQU	0FBH	;Settle time bit for read or write cmd
trkinc	EQU	0A6H	;+1 Trk +     Step 6/12mS + Head Load + No Verify
writrk	EQU	00BH	;Write track



;Port numbers

	IF	large
base	EQU	0E0H
sectrk	EQU	8	;For format
	ELSE
base	EQU	0C0H
sectrk	EQU	5
	ENDIF


status	EQU	base+0
comand	EQU	base+0
track	EQU	base+1
sector	EQU	base+2
data	EQU	base+3

latch	EQU	base+4TITLE	Disk R/W & format routines for 380Z 512 bytes/sector
NAME	('Disc512')
.Z80
; modifications:
; 18/3/84 Floppy code now works on SS discs in DS drives (only an 8" bug)
; 19/3/84 Restore cmd has verify
; 22/3/84 Various waiting code for Tunnelling etc
; 4/4/84  Dkman edited to produce DISC512

true	EQU	-1
false	EQU	0

t.on	EQU	true	;Trace

large	EQU	TRUE	;8"disc version ?

.COMMENT	*

    Globals <error> and <two_sid> are used. <error> is set on exit to indicate
   any error, although 

ctc0	EQU	base+12
ctc1	EQU	base+13
ctc2	EQU	base+14
ctc3	EQU	base+15

pagon	EQU	34H
pagoff	EQU	35H



;Misc equates

lf	EQU	10
cr	EQU	13

	IF	large
maxdrv	EQU	4		;Allowed up to 4 8" drives
	ELSE
maxdrv	EQU	3		;Only allowed 3 5" drives as Sel4=Motor on
	ENDIF

maxtry	EQU	2		;Three retrys allowed


;Block 0 offsets

sjoff	EQU	64		;Offset to 'SJ Research File Server'
dsfoff	EQU	97		;offset of double-sided flag: =0-> SS,=FF -> DS
blkoff	EQU	98		;offset of number of blocks on disk (an error message will have already been displayed.
    <two_sid> is True on entry if the disc is to be treated as double sided.
    Format has drive nos. in the range 0..3 for two sides separately.

	*


PUBLIC	Rwblk, dkinit, Format, Verify, chkSJ, Fivein, Vermsg

EXT	pmess, cahex, verhi, verlo


; RM emt numbers

kywait	EQU	34	;wait for key, ctrl-F active


;Drive manifests

getzer	EQU	0F2H	;Seek trk 0 + Step 12mS + Head Load +    verify
seek	EQU	0E6H	;Seek trk n + Step 12ms + Head Load ¡∑˙J	Ê`_ !Å Â	 À~· ‹≈x˛> Ã=5Õ˙5Õ5ÕÑ5¡√ÕJ	º:\ =Â¸ ·∆A…BY≈î/CPÕî/DI“Á4ER¡Ü4REŒì4RESE‘é4TYP≈h4ˇ:Äˇ∑>~ÕÙˇ√~>:Õ˙5> Õ˙5~Ê#Õ˙5˜…ÕËBad sum √î/>√28 !a4"9 !]4"˙ˇ>Â!  ÕÙˇ>Ê!  ÕÙˇ65! Ø_ÜS_zŒ Ì°Í 5≥ ª!66w#¸ 8!Ä N#π(Ì∞Î6Ì[ _! ;…ı≈’ÂÕÓ, ≥(7)> Ï-size,-size? ﬂ-size,size@ ﬂsize,sizeA ﬂsize,-sizeB ﬂ-size,-sizeC ·D Ô29,0;0;: Ê0,1E Ï0,0F Ï0,1023G 85,640,512H Ê0,2I 85,1279,1023J Ê0,1K 85,1279,0L Ê0,2M Ï640,512N 85,0,0O „X=1 ∏14P Ô19,1,(1+X) É7+1;0;Q  Ù Demo for MICRO LIVE ﬁblock 9 osword=&FFF1 Î2 Ô23;10,32,0;0;0; ı ˜ ÛA$	 ı
 Ò ä0,7); ı Údisplay(A$) ÛA$ ˝A$="XXX" Úfillin ÛA$ ˝A$="ZZZ" ˝ £ › Úfillin Úwait(15) €! A= ≥(4): Ù Number of fill insˇ·—¡Ò…>>›!D6›u ›t›6ˇ›6 ›6ˇ>⁄!  ÕÙˇØ!D6ÕÒˇ⁄w5Ø…1õ                                                                                                                                                                                                          Ô19,2,(2+X) É7+1;0;R G= ¶(20)S ÌT ¯U Ô29,640;512;V „X%=10 ∏500 à20W Ústar(X%)X ÌY ¯Z › Ústar(size)[ Ê0, ≥(7)\ Ï0,size] ﬂ2*size/3,-size^ ﬂ-size,size/3_ ﬂsize,size/3` ﬂ-2*size/3,-sizea ﬂ0,sizeb ·c › Údouble(A$)
d ˚ ≥(7)	 *FX15 ÓA  ‰çTw@,çDD@,çDU@,çTh@ € · › Údisplay(A$) Ò â(10- ©A$/2) „I%=1 ∏ ©A$ Údouble( ¡A$,I%,1)) Ì  Ò''! ·" › Úwait(sec)# „Y%=0 ∏sec*10$ Ô19, ≥(7), ≥(7);0;% DUMMY = ¶(10)& Ì' ·( Ô29,640;512;) X1=-640:X2=640:X3ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂe ?block= óA$f X%=blockg Y%=block  Å256	h A%=10i ÷oswordj „F%=0 ∏1k Ô23,224+F%l „G%=0 ∏3m „H%=0 ∏1n Ôblock?(G%+F%*4+1)o Ìp Ìq Ìr Ô224,10,8,225,11s ·t ‹"ALLEN'S NEWSAGENTS"u ‹"STATION PARADE"v ‹"TEL 201090"w ‹"""BEST FOR A=X1:X4=X2* Y1=512:Y2=-512:Y3=Y2:Y4=512+ „I=-640 ∏640 à8, Ê0, ≥(3)- X1=+I:X2=-I
. ÏX1,Y1
/ ﬂX2,Y20 Ì1 „I=-512 ∏512 à42 Ê3, ≥(3)
3 ÏX3,-I	4 ﬂX4,I5 Ì6 ¯7 Ô29,640;512;8 „X%=10 ∏500 à169 Úsquare(X%): Ì; ¯< › Úsquare(size)= Ê0ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ2›ÀN(x∑(˙+Pz›Ü_˛8x∑˙3+(›~∑ >
∏8PXx∆ÅOÀ˙zπ0Ò(ÚH+ı˙W+>0‚O+6.#w#Ú6+„ÒM '6E#x=Úi+6-#ÌD60(˛
G>:8#604æ 60+4#ı#Î›ÀF>Ä»y∆ª(˜Î6 #Îˆ	 ≈G˝#˝~ Õ/˝~ Õˇ.8xááÄáG˝~ ˝#ÊÄGÚß+d·˛-x¡¿ÌD…˝#˝~ Õˇ.ÿ˛0Ã⁄,˝~ ˝#(ÏÕJ-¸¬,˙”+ÊŸ _Ÿ0Ÿ#÷>ñ–Too many open files Ì[‚:s#rx!¶ "‚:!\ ’$ Ì∞Î#q#—GÕ‡2x√R’ÂGÕU3x +p#NÀπÀ˛4#Â	w·Ã›2’ÂÕU3NÀπ4#Â 	F·Ï˜2Ã›2x·—…ÕU3+~<…ÕU3Î\ $ ’Ì∞Î„Î#Õ ·ØÕU3~á++V+^+foÀ:ÀÀÀ…U)ÀCL_’ÕU3ÒÊÀ~(ˆÄw’Â+++V+^Î∑ÌB·—»#∑¸3Â+++6 +p+q·Õ3Õˇ2+Àæ+w»6ˇ##≈ØÄw#¸¡…Õ)3Õ‡2<…Õ:?ÿ˛0…˛>–˛=–˛<…˝#˛+»˛-»˝+…ÕeÕc/˝#˛,»>
Õc/˝#˛)»>√ª˝#˙Å„ŸÂŸı≈È˙ÅŸ¡Ÿy¡GÒŸÎ·ŸÎ·Ÿ≈ŸÊÕ|/Ø˝~ …˝~ ˛ ¿˝#√c/Â!@Â÷ç!éx±ƒà,Â! ≈áO 	~#fo¡„…«›Â>!D6ÕÒˇ›!D6›n ›f›^›V›·…›Â›!D6›u ›t›s›r>!D6ÕÒˇ›·…>√Óˇ>ÅÕÙˇ|˛ˇ»∑7¿}…>ÕÓˇ{ÕÓˇ}√Óˇ>ÜÕÙˇ]l b…Õ\ŸÂÕπ>⁄ªÕ‘#Õ›'| À¸Ú},ÕY-À0ıÀ˚ÒØÀ¸Õ«,π»“&,√’,Õø,Õ:,Õø,»À|ı>üÕ!,Ò »∑Ÿ’Î!  ÌR—Ÿ’Î!  ÌR—…Ÿ/Â∑!  ÌBDM·‡À|¿ŸÀ!ÀÌjŸÌj¬k,…À|¿ÕY-¬},…∆Õø,Õï,Õø,¿Õ⁄,»|∑¸I,üÕ},∑¯Àº…Ÿ 	Ÿ–≈ 	¡…∑ŸÀ≈Ÿ…yHGÎŸÎŸ…Õ`-ŸÀÀ∞Ÿ¿>√ª|µŸ¥µŸ…Õ-> ŸgoŸgoO…Õ -Òy∏¿ÌR¿ŸÌRŸ…M3>!≈’ÂOÕ ·—¡∑…ÕM3>(Õ3(>∆Õ–Disk full Â!! 4#(¸·…\ >Õ3<…\ >Õ3>Õ3<…>ÎÕ3Î…Õj3!% ¿>ﬁÕ–Channel {Ê»á_ !46^#Vz≥…> ’Âe !4 Ì∞!| q#¸·OØ—Õ4˛" #Õπ3˛"#(n>˝Õ–Bad string ’#~˛:+x ~Ê##\ ~˛.('˛(#˛=(˛"(?˛*( #˛| ~#˛`0˛?8Ó@yÕW4/Õ\Ÿ—Õ)/›!D6›s ›r›u›t!D6>	ÕÒˇ›~o∆ügŸgoØO…ÕsŸ>ÄÕÙˇØÓ ›!D6≈›ÂÕ\Ÿ›·¡›u x˛(›#≈›ÂÕ/Ê!D6>ÕÒˇ√§ ›!D6≈›ÂÕ\Ÿ›·¡›u ›t›#›#x˛(≈›ÂÕ/‡!D6>ÕÒˇ√§.Â.ÂÕ\ŸÂÕ/Õ\ŸÂÕ/Õ\Ÿ—>ÕÓˇ¡yÕÓˇ{ÕÓˇzÕÓˇ}ÕÓˇ|ÕÓˇ√§Õ\Ø2˚:Ÿ>ÕÓˇ}ÕÓˇ√§>ÕÓˇ√§Õ\Ÿ>ÕÓˇ}|™|¯0ÏÕÛ,?…|™Úˆ,|…Õ-À(
(æ¿#Û∑»7…∑…Õl-Õ_-Õ_-ŸŸÌZ…Ÿ∑ÌRŸÌR…Õl-ÕY-¯ÕY-¯Õ<-¯Ÿ)ŸÌj…À<ÀŸÀÀŸ…AT]ŸT]Ÿ…Õk-Õp(›·≈ÂŸÂŸ›È›·Ÿ—Ÿ—y¡AO›È›·ÕR∑! 8TEÌR9˘W’(
K 8ÎÌ∞ÕR›È›·!  D9 8(Ì∞˘›ÈÕy-Õ…#ÕÖ'ÕÇ-Õy-Õø,Õ…#Õo'ÕÇ-√›'›! ›9›„Õ∏ Õp( ›Õ∏ ›„˙Ö'ÕÖ'Õ∏Ã~#˛*(˙˛. e (º+—Ä ~˛ ¿#˘BBCÕ4Î!K5ÕW4æ(8"À~#(˚##Ó’#ÕW4Æ(˜˛Ä(—ÊÒ#~#foÈÎ√˜ˇ˛`ÿÊ_…*ÇˇÂ·~#Â√–Î7Õ‰1∑ å1_ÕW2Õ˙5Õr5’Õq2— Õ≤1…ÎÕ|3*Î%ÎÕ|3˛= *#Â\ ’Õ ·< ,l  Ì∞·Õ|3~˛ \ Õ ∑>˛Õ–Bad command >ƒÕ–File exists >?ÎÕ~3˛ ‘!Ä ÕM3\ ≈ÕÕÓˇ√§Õ\ŸÂÕ/Õ\Ÿ—>ÕÓˇ{ÕÓˇ}ÕÓˇ√§·!61Â›~›^›fd›n`˝Èı}lŸ¡ghyŸg…≈Õ|3ÎÕ>3 >æÕ–Directory full Õ3	„ÌB„0ˆ¡Õ <¿>»Õ–Close error ≈Õ|3ÎÕ43 >÷Õ–File not found Õˇ2 
Õ)3	„ÌB„0Ò¡?…{∑ 
’Õ¿1— ¯Õj3»Øw+w!% À~#ƒ3!¶ ÌK‚:ÌB åÌS‚:ÜıÕ|3Ò‘>3‹43»!C6~+∂(+¯>¿Õ ›„‰<ÂŸÂŸÕ…#Õø,Ø=( Ú.π8<<À¸Õ2-0Õ_-‹´,˙.√’,Õø,À∫Ÿ·Ÿ·…∑ÌBŸÌBŸ0	ŸÌJŸ?ÀÀŸÀÀŸ<ÌjŸÌjŸ0ﬁ∑ÌBŸÌBŸ7√P.∑ŸÀÀŸÀÀ0	ŸÌJŸ<ŸÀÀŸÀÀ√p.ÌBŸÌBŸ0	ŸÌJŸ<À!ÀŸÀÀŸÀ#ÀŸÀÀŸÌjŸÌjŸÀ#ÀŸÀÀŸÌjŸÌjŸ“ê.∑ÌBŸÌBŸ√†.)ŸÌjŸ8Ó<ÌBŸÌBŸ–	ŸÌJŸ…˝~ ˛A8÷7˛?…˛}/oŸ|/g}/oŸØ…ÕÔ/EÕÔ/nÕ?Õq2 ≥)√‰,Õ?ÕW2oYÕ@&Õc/˛( 
ÕsŸDMÌhCÕO&Õ|Øª ≥)* 81Õ|Î+*‡:(*‰:#*‹:˝~ ˝#˛P¬{*ﬁ:*Ú:
*˝:*˚:& ŸØOgo…ˆ7ıÕ|Ò>! 8Õ‰1oÂÕ?Õx2Õ?Õë2Õï/’Ÿ·ØO…!IŸ!¢⁄ŸÅØ…Õ’!Õp(Ø…Õ’!Õ›'Ø…ÕlÕï,.eŸ”‡ŸÖ…ÕlÕ⁄,±»À|¬≥)Õ‰,√´,Õ|Ø˝ÂÀzŸÃ\.ÎŸÀ8À∑ÌB?ÎÃπ,‹´,¡‹”,yò?√©(|™À|ƒI,Õø,À|ƒI,DM!  ŸDM!  >ﬂÕo.ŸøÕ⁄, Àz 	Õø,J√I,ŸÀ#ÀŸÀÀŸÌjŸÌjÚW(¯Àº… ‰,»|™À˙À¸≈DM!  ŸDM!  >‡Õo.‹É.ŸÂ! Ä∑ÌR·Ãπ,‹´,¡‹”,yà8Ú‰,˙’,∆ÄO ‰,ÀºÀ¸…Õø,À|ıƒI,H ÕY-8˘ÒŸ,ŸL…Ò≈ÎÂŸÎÂŸ›!  ›9(4≈Ÿ’Ÿ’Õï,ÕX$Õ¯≈ŸÀ#À’…ˆØıÕlÕï,Õy-Õk-Õp(Õ…#Õu'ÕÀ"ÕÇ-ÒÃø, Õπ!…Õ›'ÕlÕï,|ıÀºTŸ–ÃŸ~ÕÛ, 8ÇŸöyŸÅÕÛ,8ÕX$Õ¿-≈Õy-Õs-Õﬁ-5Ûÿ7{ëkπ™|ﬁAóa|{ù7í}Z*ÃL}\©™™~    ÄÕÇ-ÕÇ-Õp(Õ‘#Òı‹Ö'Ò‹u'Ò∑À¸Ø…Õ/Õé-ÕeK—!  9’Õ”%Õ)/·& 9˘ØgoO…Õc/˛,>  ˝#≈ÂÕé-Õ\¡Õ≠-·¡Ÿ}Ÿ∑(=ÌDC 8ÄŸ_!  Ÿ˝! 8Õc/Õ/ıÕh Ò˝·˛-> ¿√πÕ|>˝Â 8˝! 8 Õ
ØÕé-˝! ˝9ÕL˝·˝9˝˘˝·…›!ˆ:Õc/˛((Õ
 À ŸÌjŸÌjÀ](?ÛÀÕ¯ØO…Õs›!ˆ:À|7 ÏÕ⁄,ıÕø,ŸÕ
 ƒT"ŸÕ},ÀºÒ»Ÿ{=≤Ÿ≥≤» Õø,Õï,Õp(Õ:,Õ´,Ø…Õl»>üDÕ!,†¸´,x∑¸I,ØO…ÕlÕï,À|>¬ª»À¸ÀAÃ«,y÷ÄÀ/∆ÄO≈Î!  DMŸÎ!  DM>·Õ¢.ŸÀxŸÃ¢.Õ€ŸÀÀ’>
ıÕk-Õ|/ÒÕ∏ ‹|/—Ÿ—Ÿy¡O⁄ÒÒÒ…ÒÒÒ°ÀzıÕø,Õy-(Ó>ûπ8<Õ!,Ú#)Õø,Õr$ÕÇ-ÒÕp(√Â#Õ-ÕÓ,Õ·,–QÕ-ÕÓ,Õ·,»ÿ@Õ-ÕÓ,Õ·,ÿ0Õ-ÕÓ,Õ·,(!–Õ-ÕÓ,Õ·,»Õ-ÕÓ,Õ·,¿!ˇˇŸ!ˇˇŸØO…Ÿ˝~ ˝#gÊ¿˝Æ ˝#o|Ê¿˝Æ ˝#gŸØOgo…˝#ÕlÕÎ)>Ä…Õ:,  8≈ØÕY-˙¡»x∑»æ(#˙…≈’Â(	#(æ(Ù7·—¡8ÊŸ{Ÿ∏8ﬂê<ŸoŸ…ÕsŸ} 8>Ä…ÕsŸÕ‘/8 8>Ä…!  Õ‘/0¯ 8>Ä…Õ/Õé-Õ\¡Õ≠-Ÿ}Ÿ∑(=oì 0ÌDOÕ∂&Õc/˛,˝#(˝+Õ)/>Ä…Õ/Õé-Õ\¡Õ≠-Õ)/Ÿ}Ÿª0k_>Ä…Õê&–»K}ìo bXÌ∞>Ä…Õ\Õ/Ÿ}ŸıÕeÕ)/Ò∑(‘=O>Ä»»Cb. ≈~#> ªı¡ >Ä…Õ1,|¢g}£oŸ|¢g}.∑Õ\.À`iŸ`i‹´,¡‹”,üÅOÀºØ…ÕlÕï,Õy-ÕA#ÕÇ-Õy-Õø,ÕO#ÕÇ-Õ›'Ø…ÕlÕï,Õ˛+{ÕlÕï,Õ˛+Ê´ıÀºÕ…#‹u'Õ‘#Õp(ÒıÊ‚ù#Õy-Õs-Õﬁ-∑®6m&ﬁ–s¿Äàyù™™™}    ÄÕÇ-ÕÇ-Õp(√ø#Õs-Õﬁ-q’xLpØî∂v»ú™*{›ˇˇˇ~    ÄÕÇ-ÒÊ»»À¸…  Ÿ  ŸÄ…IŸ¢⁄Ÿ…ÕlÕï,Õa$Õ›'|Õ,À{(	⁄‰,>√ªÊÄ≥ı¯(∑ ∏(Î∆ê'Œ@'G‡Õc/˛~(≈Õl›! :›~∑›!ó+(›! : 8Õï, À|(Àº>-Øπ(G’xıy˛°0˛õ0%/˛·8>¯∆Õ.ıÕp(ÒGÒê‡÷ Õ.ıÕ›'ÒGÒÄ—>	Õ.ÕÛ,y¡OÀ¸‹0-—Àπ> x›ÀN Ø›æ(
>ˆ›Ü∑˙¶*ØıÕY-è˛
8÷
Ÿ,Ÿ O|Ê?gÒÚÀ*< >π> ıyŒ0˛0(˛:?0„Àu„ >0<=ıÕ⁄, >  ªÒı> 8µÎˇ›^›ÀF £oŸ…Õ1,|™g}´oŸ|™g}´oŸ…Õ1,|≤g}≥oŸ|≤g}≥oŸ…Õ1,|™À|À|ƒI,Õø,À|ƒI,DM!  ŸDM!  >ﬂÕA.Ÿ »√I,Õ1,Õ+'∑Õø, √I,ÕB-‡Õ<-Õå,zÓÄW|ÓÄg
Õ<-‡ÕB-Õå,» ø,Ÿ  Ÿ|™ıxπ‹ø,xÀ¸ƒ!,ÒzÀ˙˙±'Õ<-‹«,À¸
ÕB-‹],Õk,/ŸÎ! Ä∑ÌBÎŸÃπ,‹´,‹”,Àº ‰,∑À¸…Õå,> ª»|™À˙À¸≈BK  ŸBK  >‡ÕA.ŸÀºÕa$Õv-Õﬁ-r@.îseoO.v7màyÂ†*{O™™}V˝ˇ~˛ˇˇˇ    ÄÕÇ-ÒıÙX$ÒÚC$ÊÌD∆ÄÅ8Ú‰,˙’,∆Ä ‰,OØ…Õ…#Õø,√›'r1Ÿ¯Ÿ…ÕlÕï,>À|¬ª ª5Ÿ3ÛŸÕˆ,yÄ8<ıÕ¿-Õy-Õs-Õﬁ-HÃ˚t}ØÆˇ~åŸÕL~„©™*    ÅÕÇ-ÕÇ-Õp(ÒÕy-Õ‰,÷Ä(0/<gáıÕ},ÀºÕa$Õp(Ò0˙Á$À¸ÕÇ-ÕÖ'Ø…Õl$[^Ÿ©ÿŸ~Õp(ØÕ Ÿ„ŸÂ≈&ı’ŸÂŸÕ  Ÿ·ŸK—ÕRÒ!  EÌB9˘G≈(	’ 8ÎEÌ∞—›ÂÕ5ÕRÕc/˛,(•ÎÈ˝~ ˛ »˛,»˛)»˛;»Õc/˛ã–˛:–˛…Õc/˝#˛=»>√ª˛ä(˛â(8˛'¿ÕJ	Ø…≈Õ\Ÿ¡˝~ ˛,(Õ)/}!˚:æ»ı‹J	Òñ˝#≈ÂÕ\Ÿ—¡Õ)/Õ‚/Ø…≈ÕsŸ}¡∑»≈G> ÕQ	˘¡Ø…! 8»~#ÕQ	˜ı≈Â˝„ÕÍÕc/˝„·¡Ò… 8~˛»#˜Õc/˛"˝# C ˝+ 8˝~ ˛,»ı&X''+''ç)ü)})\)Ø)"({'l)e'¿(⁄'Ú&U''(''à)ö)x)W)™)p(Ö'g)o'()›'É)ï)s)R)•)b)Õa˛Ç(˛Ñ¿Õ6/ÕaÕD/ÓÕr˛Ä¿Õ6/ÕrÕD/ÚÕ—Õ/¿G˝#Õc/Õ/ ˝#∏ {ÄGx˙§÷˛: ∆Õ8/Õ—ÕD/…=ÊÕé-ıÕ—ÚÅÒK—!  9C’ 8ÎÕn/—Î& 9˘ÎØO˝~ …Õ ˛-(˛+¿˙ÎÕ6/Õ ÕD/È˝#Õé-Õ ÚÅK—’! 8Tyx»ÀXÂÃ]·>›Àp(>˝∑W¯›w ›#∑…˝~ ˛)!  »Õ«≈’›ÂÕ\›·Ÿ—¡}∑…ÕˆÿxÊ?˛?…Õ8ÿ/Õ8ÿ&ÕˆÿxÊ÷0˛Ò7¿>ÕˆÿxÊ÷ÿÕ&˛?ÿ±O…!eÕ« 7»˛›(˛Ö?ÿ~∑(˝Æ Ê_(	À~#(˚#Ï˝ÂÀ~˝## æÃ∆~˝Æ Ê_(Ì˝·ﬁÕAƒ” ÙxF·…#ÕA¿ÕM»˝#Ù˛+»˛-…NO– RLC¡EX AF AFßRRC¡RL¡RR¡DA¡'CPÃ˛»˝#Ò N(###æ»	√
+7…˛bk)ÿ)ÿÎ¿Î…Î!  >)ÿÀ#À0	ÿ= Û…Õc/˛#>-¬ª˝#ÕsŸÎ…Õ«˝#˛:(˜˛]»˛»˝+›*@:!˛:Àv(›*<:›Â˝ÂÕ¡—ÿÕ«7¿˝+˝#˝~ ÕX ˆ:˛:›Â·∑ÌRÎÂ*@:Â"@:Àw(*<:"<:·›·Àg(†|ÕÒ}ÕÍØª(:˚:˛>‘å›~ ÕÍ›# Î>Õå˝Â·ÌB
Õj	- ¯ÕJ	√QÕÒ> ıÕ˙ÒÊ∆ê'Œ∑(EoÉ_>⁄ª’-Ì∏—Ÿ¡Õ≠-ŸˆÄ˝~ ¥Õ=˛*(˛/(˛É(˛Å¿Õ6/Õ=ÕD/ÊÕƒ∑Õc/˛^¿Õ6/Õƒ∑ÕD/ÌÕL%ÕLÚ:,ÕL¯Õƒ∑Õƒ∑Ú:,Õƒ∑¯>√ªÕLÕ)/…Õ‰,ÕÚ.8˝#ÊÕY-ÕY-ÕY-ÕY-ŸµoŸÕÚ.0ÁØ…>√ªÕl I,|ÓÄgØ…ÕRÕc/˝#˛&(æ˛-(‚˛+(î˛((™˛"(c˛∆“{˛ç“t/˝+˛:0˛00t˛.(pÕ
 +∑˙ /SC∆7CC∆?HAL‘vEXÿŸEX DE HÃÎD…ÛE…˚NE«DIM ∞FRETŒERET…MIM ±VIM ≤^RRƒgRLƒoLD…†CP…°IN…¢OUT…£LDƒ®CPƒ©INƒ™OUTƒ´LDI“∞CPI“±INI“≤OTI“≥LDD“∏CPD“πIND“∫OTD“ªBI‘@RE”ÄSE‘¿RL√ RR√RÃR“SL¡ SR¡(SRÃ8PO–¡PUS»≈EX (S–„SU¬êANƒ†XO“®O“∞C–∏Ä†Ñ∞ADƒÄAD√àSB√òIN√DE√IŒ@OU‘AJ“ DJN⁄J@'√j	˛. ˝#›ÂÕtıÕ‰,Ÿ*@:ŸÒÕÛ›·Õ«»˛÷ƒ˝# ˝+!ŸÕ~ÿH ÷'0˛Ë‘‰h÷
0˛˘‹nÿÕCÿÕËU÷0ÕbÿK÷
02˛˝‘ˆx˛ ÕCy0(ÓFÕÍÕ&xÊ?˛7¿y˛Ä	(ÕÓOÕ‰ƒ÷0ÕIy“ÍÓdOÕfÿy÷0!˛ˇÃŸÕIÿ‹Ÿ$(Ëx˛7¿yÓÕ%÷0$˛ˇƒOy0>ÕÕ&Ì[@:7ÌR}üº>¬ª}2G ÕO ∑( ÀG(›NŸ›n ›fŸ›n›f…!  Ÿ& ›n ŸL…⁄{:˛:Ào> #˝#Õ€0˘›!@:ØO  8˝~ ˝#˛"(˛ 0Ò>	√ª˝~ ˛"˝#(Ï˝+>Ä…Õ‰, Õ‘+˛. Ãœ+˛E> Ãö+∑ ∏ π»êÅüÕ},Àº∑»˙ú Õ.Õp(Ø…˛⁄8
ÌDÕ.Õ›'Ø…ı>&Õ.Õ›'Ò∆&‰›FŸ›^ ›VŸ›^›V… 80Õ Ÿ}Ÿ∑O>Ä» Ì∞…~#˛>Ä» ı…ÕlÀ|» I,Àº…Õs|/g–¬CALÃƒRS‘«RE‘¿Lƒ@]Õ ]¬ OP‘ ]◊  ¬ √ƒ≈»Ã(HÃ¡(IÿÜ(IŸ∆B√D≈
HÃIÿåIŸÃA∆S–N⁄⁄N√PœP≈–Õ(√  I ¡GR ¡OA …WA “_(BC ¡(DE ¡A (B√
A (D≈ æ)é!®!d!∞!Z!_!Ï %00G!%1%#!;#Ç!≈!x!}!"ﬂ#†!‰,Ã1!,!≥%¨"T!l$Ô$˙ é!ç!π!˙/!Õ!F"Ê!I#≈"#i!≥)ï˘!!3&O&@&ê&_&´&*ø&!y0xÊ?˛>È( >√ÕÕ1Õ&Õ¯|Õ&°¥ »}±x
ÕOy0pˆ	llÕ{0_ÕIÕ«˛((“pÕfÿ>∏GÃbxÊ?˛y ©>˘=≈‘Cy¡0w
ÕfÕ¿0íÕ&ÕbÕ¿ÿÕé {ÖÕ&!˛:OÌoyÌg…˛‹‰xm„›ÂÕe›·! 8Øª»~#Õıx8xÊ?˛y»Õ‰yˆC…˛7¿yˆ0…≈ÕˆÀh¡(D&ˇ>Ì.>À˛v7»Õ{ Â! Õ~·ÿÀã†Øæ—j0PcgeGÓ0B £0Ãõ<0¡™1%=M⁄0û0KN®0w–¿‹_mÃbLˆ0‰ˆ	ÕR(Õe>Ì{‰:Õ`Ì{‰:›!ˆ:Ì_(¸›wü›wÕ©!  "Ï:*‹:>‹Õ":˝*‹:Õ‹˝"Ù:Õr5Õc/˝#˛:(˜˛(È÷∆8oáO !Ó	~#foÕc/ÈÕ°	|µ ò Õ≤1√ó˝~  ˝	∑(Â*Ë:|µ»˝Vˇ˝^˛ÌRÿÎ>[ÕQ	Õﬁ	>ÕÂÕ·ø>‹Õ#–>*√ªÕ\Õ⁄,(˝~ ˛å¬§˝#Õc/˛ç¬§√™˝~ ˛ §˝#˛ã ÚÂÕœ/Ø2˚:√§ÕË
˙ Õ°	ÕÀ	ÕJ	√òÕ‹√§Õ©*‹:*‹:ÕR(ÕsŸÕà	>) í>‹Õ":√§Õ?Õ^{ıÕ\ÂŸ—ÒÕß2√§Õ^Õ\Ÿ. "‹:√§Õ^Õ\ÂŸ—Õ≤/√§Õ©Õ^Õ\Ÿ"‡:"‚:√§Õ^Õ\ŸÌ[‚:ØÌR⁄ªÌ[‰:"‰:ÎÌr¬§Î˘√§Õ\Ÿ}2¸:√§§>"°Õﬂ ˜ı˝~ ˛∏>$ í˝#›ÂÕU›·ÒG≈Â!  LŸÂ! Ÿ˝~ ˛à 	˝#›ÂÕU›·≈ÂŸÂŸ˝Â›ÂÕRÕ§¡!K∑ÌB>  sÕR·Â≈Âƒ
—Î∑ÌR P’›! ›9Õ∏ ›~›·Õ Àzı>Õ|/ÒıÕÛ›! ›9Õ∏ ÒÃø,>Õ|/$ ! 9˘Õc/˛,¬§˝#ü¡—˝·˝Â’≈√§! 9˘¡!KÌB·Â≈(ú>!√ªıÕ‘ıÕ‘ÕR˝+˝ÂÕ∞
¡(9>8‰≈*‹:>›Õ8!Â˝·˝#Õc/Õ∞
˝Â—8	]ÕQ	> √Q	Õe>! 8Õ!4ç˝Â·Õ!4˝Â·>GÌ±Â˝·√°˛≈(Ó˛d(‰˛w(L˛ï(˝+Õﬂ §86ıÕ^ÂÕe›·ÒÕ√§Õ‹˝"Ù:Õr5ÕQ8˛(Ì!˛:~Êˆ0wﬂÕ
»“
>!>√ªÕLCÎŸÎ¡!5∑ÌB(!–∑ÌB> „˝·˝"Ù:ÎŸÎ 8X…›·¡x∑˙Ω·Ÿ·ŸÕÛÕ!  9’YÕ—˘¿Õ
8{ RÕRÂ›·˝~ ˛(z rÂı B˝#≈’›ÂÕ\À| WŸ#›·›#›u ›#›t˝#!  ˛Ó(
˛á(˝+Õ\Ÿ+"Ë:√§Õ\˝~ ˛;(ÕB˝~ ˛, ÕB|Õ˙5˝#ÕR ‹√§Ÿ}√˙5Õ?Õ≤1√§Õ?’Õ/Õ\Ÿ}—Õ;2√§Õ\ŸÂ  9ÕR(Õ/Õc/≈’Õt—¡Îs#rÎ„x2 9·Õô√§ÕsŸÂ˝„$!»Â›! :Ã#1›N≈Ò›~›F›N›V›^›f ›n0›! 9˝È˝·ØO…Õ\ŸÂÕ/Õ\Ÿ¡Ìi√§Õ
ÿƒ
∑¯ıÕ^ÂÕU›·ÒÀG(ø›qŸ›u ›ƒR˝Â—s#rÎ>GÌ±ÿ˝·Õ∞
> Ø^#V! 9Õc/’˝„—˛( Õc/˛(¬{˝Â¡ŸÕ„Õ)/Ÿ≈˝·ÂÕn·s#r√§¡≈!–∑ÌB(!‘∑ÌB(!5∑ÌB>¬ª˝Â¡Ÿ˝+Õ„Ÿ≈˝·Õ
¬{∑Õ‰,ıÙÛÒY¸Õc/˛,¬§˝#Õc/‹¡!5∑ÌB(!‘∑ÌB˝· §>√ª›·¡x∑˙≈·Ÿ·ŸÕÛ÷!  9YÕ˘ÀÕIÕR §Õ/Õc/’Õt—ıÂ∑˙ÕW2ŸoŸÕW2ŸgŸÕW2oÕW2gÕW ¡Õ+8FÎ¡˝~ ˛,(’Õ)/Ò›#›„›p Õ·8+8(Â$($Ìr0 ·"‚:z≥(+6 ˆÕc/˛,¬§˝#Õc/Ä>
!>√ª∑(ı˙JG˝~ˇ˛)x(È*‚:Ÿ!  LÕÛÕ\Ÿ#Î*‚:´˛# jÕIÕR §Õ/’ÕL˙¨—≈Ÿ}ŸÕ;2Ÿ|ŸÕ;2}Õ;2|Õ;2¡yÕ;2“K—! 8(	~#≈Õ;2¡Ù>Õ;2π" ! :Øæ(:˚:∑(
ñ(0˚ÌDÕ≤: :O Õc/˝#˛~(—˛;(—˛,(“Õk(tŸ›u›t…ıÕ:,Ò˛(ËøŸ›u Ÿ…! 80?ÂÕ {Ÿo|Ÿª0ŸeŸÂ O	ÌK‚:ÌB·7(`iÕ˚ KÎ·»Ì∞–ÌS‚:Â*‚:$Ìr·ÿØ√ªK›Â—ØGπ(Ì∞>…>ˇı˝#’Õc/Õ
88ƒ
—Â∑ı’˝„˙úÕU˝„—ÒŸÂŸÂG≈ÕRÕe˝„Ÿ—ŸÒÕé-ŸÕc/˛, 
˛,(º>√ªÕ)/˛) ÛŸ¡x<Ÿ»Ÿ=˙Ÿ·Ÿ·Ÿ›·ÕÛÎÕ≠-›·Õ·—˝#Õc/’Ÿ≈’ÂŸÕtŸ·—¡Ÿ—∑˙
ŸÂŸG2O›·Ò’ÕÛ—«! 8ÕW2˛(w, ı›·Ò’ÎÕ—Æ˛#(ß ˛Ü ˝#Ä! 96ÕR §˝#˛,(M˛;(IÂ˛" 
≈ÕC ¡Õ¿Õk ·À¡“˝+≈Õt¡·ı~#˛ÃïÀyıƒﬁÒÃÕÒ≈Â∑˙åıÕ¸!ÒÕÛÕ·¡ÀÅ£ÀA 
>?ÕQ	> ÕQ	! 9≈Â›ÂÕ
6›··¡GØ2˚:∏»~˛»#˘…˛# –*:ÕR": §˛,˝#(Ò˝+ÂÕt·ı~#˛Ã	Ò∑˙ˇÂ˝„ı›ÂÕU›·ÒÕÛ˝„·…ÕÍ˝+ÕR(#ÀÄ≈ÕL˙%—’ÀJıÃ,*ÒƒÎ)¡≈yì‘≤¡Õ¿¿À@ÃJ	√§˝#!  "Ï:Õc/˛á˝# §˝+˝"Ï:√˛Ö(·Õ\˝~ ˝#˛Â(˛‰>' CŸÂŸ¡x¥µ )±(&G(ÕR(˝#˛, ı Ú≈Õs¡x˛Â(%ÕR(1˝#˜˝~ ˝#˛ã '˛ Ú>(√ªÕsÕR¬{ŸÕà	Â˝· °>)ÊÕs˝ÂÕRÕ≠—!Ã∑ÌR˝· §>&À˝ÂÕRÕ§¡≈!‰∑ÌB>+ ∑Õ\Õ⁄,¡— ’≈’˝·√"1y27!0Õ¡·…
>ÂÕÒˇ
 ~·∑»ˇ«Disc fault         * NG  disc to be copied in drive A and √O>~ÕÙˇˇ Escape Ì{;…>S>KÂ≈26è>2=>2>√HÕ≥ˇCopy complete - to copy another discplace disc to be copied in drive A and √O>~ÕÙˇˇ Escape Ì{;…>S>KÂ≈26)T]))Ëﬁ7…ÕR˝~ ˝~ ˛$(n˛!(n˛?(nÕ 
¿˝~ ˛!(i˛?(iÂ›·˛(z(ø…>√ªı~∑(ˆ›#  ı˝#ıÕ/’›ÂÕ\Ÿ›·—›N ›#›F ›#Î’Õ+—Î∑ÌB>0«Ò= ’Õ)/ÒÕ››Â·ø…>Ä>Ø  >Ø^#V’ı˝#ÕsÒŸ—Â›·ø…˝~ÕÁÿ˝~ !ÿ:˛§(C!⁄:˛Ú(<7…÷@ÿ& ˛0áo˝~˛%  ˝~˛(() :˝#˝#Ø…˛ÿ˛;?=ÿ÷áol:-ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ-7¯^#Vz≥(Ebk##˝Â~#˝#˝æ (˜∑(˝·Î√˝+˝~ ˛((˝#Õ€8˛((Ê˝~ˇÕÁ0ﬁ—˝~ˇ˛$Å»˛%»ø…<…ØÌ[‚:r+sÎw#w#˝#Õ€8w#ÕÁ0Ú˛((	˝~˛((Á˝#6 #ÂÕ@>∫(=6 #= ˙"‚:ÕR·Ø…Õc/Õ‰,Õ‘+|µŸ»√’,Õñ|µ .
ÕR˝#Â!
 ƒñ„¡x±¿Õ–Silly ÕñÕR˝#Âƒñ„Õà	¡…˝~ ˛$»˛%»˛(»˛0ÿ˛:?–˛Aÿ˛[?–˛_ÿ˛{?…ØÕ–ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÜ space {˛˙0Ì˝~ ˛»˛ (uÀA(˛*(?Ã ˛è8-˛î0)∆@%Ã(˝~ ˛,(Àa(À°≈’Õñ—¡|µƒ∂∂ÀÅ6˛Ù(˛‹ ÀÒ˛§(G˛Ú(C˛Â(˛‰(˛˜(˛¸(
˛å(˛ã À¡À·˛ı(˛Ö(˛&(˛: À¡˛" À?ÀÕÁ0À©ÕÓ8ÀÈ˝#√
À·Î6ç#zÊ¿G{Ê¿∞ÓTw#{Ê?ˆ@w#zÊ?ˆ@w#Î…*Ó:~#∑»Õj	˜„Õﬂ„…T0è_qvòùÕ˛(F˛" Õ!	Â˝·≈Õæ)¡Ÿ≈Õﬁ	¡Ÿ˝Â·…ÀC ,˛ç(ÂÕj	~Ÿ˛„(˛Ì Ú;	˛ı(˛˝ ÚH	Ÿ…>ÕQ	>
Õ˙5÷(ÿ:˚:<2˚:»Â*¸:Ω·¿‡˛äÍQ	≈Â!T“Ì±~#˛äıÏQ	ÒÍy	·¡…Î*‹:Øæ<–ØGNÂ#~#foÌR·–	√í	 Ì[Ù:*‹:∑ÌR0N(	ÌR8ıÌB#^#VÎ"Ê:…!  ˜*Ê:|µ»ÕË at line    'ØÌR<0˚=(À·ÀÈ±ƒQ	x˛(ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂRUNA ANIM.INT
SUBMIT DEMO
 DEMO    $$$                    ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÌs;1pˇÕ≥ˇAcorn CP/M Disc copier 0.12Place disc to be copied in drive A and Õ≥ˇa formatted disc in drive B then pressSPACE BAR to copy disc orRETURN    to exit Õ‡ˇ⁄„˛ Ò˛  ÒÕ≥ˇAre you sure you want to overwritethe disc in drive B ?Type Y or N ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ>! ÕÙˇÕ‡ˇ⁄„Êﬂ˛N Ò˛Y ÔÕ≥ˇCopying from drive A to drive B > 2=>2> ! :=20≈Õˆ 
ˆ¡! :>20Õ˙ 
ˆy˛P⁄J:=˛ è>2=>2>√HÕ≥ˇCopy complete - to copy another discplace disc to be copied in drive A and √O>~ÕÙˇˇ Escape Ì{;…>S>KÂ≈26ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Õß!t6Ä…>!tæ“%\ Õ=˛   >…!t6 :t<2t=O !Ä 	~2u˛¬b:∏<2∏O>9π“b!∏60+~<wO>9π“b!∑60+4:u÷a˛“t:uÊ_2u:u…ªÕM˛  âSÕß…!v6 !  "v!|6:|“Ä!x6 Õ	2}÷∆ˇüı:}÷∆ˇü¡H°“k:}˛
 h:}˛$¬6Õ	2}˛$¬Ê*}MÕƒ√3:}÷02}O>	π“˛çÕß√3!zÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ6 Õ≠:}˛  "!}5ÕÅ“√Õ≠√ÕÅ“3*yMÕƒ√"√h:}˛^¬aÕ	÷a2}O>π“VùÕß√^:}<OÕƒ√h*}MÕƒ√¶:}÷÷ü2|*xMÕƒ√ö…*z& Ù	~2y÷ ÷üı:y÷ ÷ü¡H±⁄™!z4>…> …*z& Ù	~˛ ¬√!z4√≠…!{q*v#"vˇÕô“ﬁdÕß*vv	:{w:x<2xO>}π“˝|Õß…ª√ﬂ copyright(c) 1977, digital research 
$Error On Line $SUBNo 'SUB' File Present$Disk Write Error$Command Buffer Overflow$Command Too Long$Parameter Error$Invalid Control Character$Directory Full$Cannot Close, Read/Only?$!  9"!ì˘ÕÃÕäÕ˛Õá…!›p+q*‹ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÕ-!€6 ªÕ]:ﬁ˛ˇ¬∑ÕßÕz2~˛  e:~2Ä O !Å 	6 *~& Ç 	6$> !~æ“_Õz*~& Ä 	w!~5√BÕx√ªÕ:ﬁ˛ˇ¬y∆Õß…*v+"vv	~…√  √ √ Õ ………_ {ïozúg…                      001 $ $$$     SUB   Î	Õä…!‡p+q*ﬂÎÕç2ﬁ…!‚p+q*·ÎÕç2ﬁ…!‰p+q*„ÎÕä…!Êp+q*ÂÎÕç…!Ëp+q*ÁÎÕç…!Íp+q*ÈÎÕç2ﬁ…!Ôs+p+q+—¡p+q’:Ô=2Ô˛ˇ ¶*ÎÂ*Ì¡
w*Î#"Î*Ì#"Ì√…!Ûp+q(Õ˜+Õ˜∂Õ˜*ÚDMÕ˜*˘…Å ≈ÙÕp*Ä & Ù	6 :≈e Õp\ Õ:ﬁ˛ˇ¬=«í  ‡OMITTEƒì  ‡O“î  ‡POSITIV≈ï  ‡PROCEDURE”ñ  	‡FROÕó  	‡MOD≈ò  ‡PROCEEƒô  ‡RANDOÕö	á‡Rƒõ  	‡PAG≈ú  ‡RECORD”ù	4	‡REEÃû  	‡THEŒü  	‡THR’†  ‡THROUG»†3	‡UPOŒ°ñ‡SOURCE-COMPUTE“¢  
‡AFTE“£	‡REPLACIN«§  
‡COMM¡•  
‡INPU‘¶  ‡WORKING-STORAG≈ß»
‡UNÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂmat complete - verifying...=Z=‚J€Á? =È?=‚J€Á?==È? =¸Á€‹÷=Z=ZDVerify complete=Z==YDFormat another disc ? =0"Ò======-==Ë=€A ¸  =Ì==‡J==6=Z=Z=Â=ZDDisc Preparation Program=Z=ZD#A - Alter individual space accounts=ZDB - Boot file server program=ZDC - Copy whole disc=ZDF - Format new disc=ZDP - clear Password file=ZDR - Rename disc=ZD"S - Set file server station number=Z=YD	Command :=⁄U=Z⁄=%⁄=>A>aˇ=>b>B‡K=>C>ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂcÉ=>F>fâÇ=>M>mÓ=>p>PÅÇ=>R>r˛=>S>sÔ=:ZDIllegal option==0‡==<                                                                                                                                                                                                                                                                                                                                                                                                                                            √¸Ø”5!¸Ä Ä Ì∞>”4√Ä >  ! ¸”4Ì∞<<<<˛« Ó√                                                                                                                                                                                                               ÂDDT     COM   &EFG             ÂPI      SCP                  ÂPI      DDC   	               ÂANIM    LST                    ÂPIP     COM   :HIJK            ÂSTAT    COM   *LMN             ÂCONFIG  COM  Ä
OPQRSTUVWXYZ[\]ÂCONFIG  COM  ^               	-ÄU––£@N Oƒ“Å(¿@@ †A15!Ù†A
,ÄU–– ˆ†Äh˜ÿÿK  Ë≈“Å*¿c ˘≈“Å*¿†C-ÄU––£@N Oƒ“Å*¿†B-ÄU––£@Y OƒÙ` ˇ“Å,¿†AG-ÄU––£@Y Oƒ`ˇ“Å,¿`ˇ†A-ÄU––£@Y OƒÓ“Å,¿Í†A0-ÄU––£@Y OƒÏ¿ÿ–Ë†@ U––
Ú–Ë∆Ù–Ë¿
–ËGŒM  ‡LEADIN«N  ‡TRAILIN«O  ‡SYNCHRONIZEƒP  	‡SYN√PÓ‡JUSTIFIEƒQ  	‡JUS‘Qª
‡BLANÀR  ‡OCCUR”S  
‡VALU≈T  	‡DAT¡U◊‡CODE-SE‘V≠
‡BLOCÀW  
‡LABEÃX	ë‡RECORƒY  ‡RELATIV≈Z  ‡STATU”[‘	‡FIL≈\  ‡ACCES”]‡ORGANIZATIOŒ^r‡ASSIGŒ_  ‡CURRENCŸ`  ‡DECIMA<'<|<_<ˆ=2=C=ï>&=û=˙=˛>>EINT-TEM– Ä   AA  AA$., ˇˇ  uAc	‡COPŸ∞‡ALÃ‡LOW-VALU≈  ‡LOW-VALUE”  
‡SPAC≈Z‡SPACE”¬
‡QUOT≈  ‡QUOTE”Y	‡ZERœ‡ZEROE”  
‡ZERO”  ‡HIGH-VALU≈%‡HIGH-VALUE”‡RELEAS≈
v‡RETURŒ  	‡SOR‘  ‡SORT-MERG≈Ë–Ë¶ÿ GFGL00C9¬D¿C9¬D¿ÿ†Ä!
 –†Ä!†@ U––ÿç–5ıç–5†Ä x† )Ùç–5ıç–5†Äyô†y Ùç–5Äç–5†¿'YOUR RUN TIME SYSTEM HAS BEEN CONFIGURED†/	“Å.†AWÄU––††O‘B257	j‘B256
ÿ†@ U––ÆÿÆ	œ kò ü0Õf˛ö7L-POIN‘a  ‡CURSO“bı	‡KEP‘c  ‡EXCLUSIV≈e  ‡AUTOMATI√fö‡MANUAÃg®‡ADVANCIN«h‡ANƒi	£‡AR≈jR	‡ARE¡k  ‡CHARACTE“m  ‡CHARACTER”n  ‡CLOCK-UNIT”o  
‡COBOÃp  ‡CONTAIN”q  ‡DATE-COMPILEƒr  ‡DECLARATIVE”s  	‡DOWŒt%
‡ERRO“u  
‡EVERŸvN‡EXCEPTIOŒw  
‡  
‡MERG≈ ¯‡COMMI‘  ‡ROLLBACÀ'	‡MOV≈  ‡SE‘  ‡ADƒ‡SUBTRAC‘  ‡MULTIPLŸ  ‡DIVID≈N‡I∆‡Gœ  ‡PERFORÕ0
‡ALTE“	=	‡EXI‘	‡STO–ò	‡CALÃ∫‡CANCEÃ‹
‡ENTE“Á‡INSPEC‘*	‡OPEŒ   
‡CLOS≈!™	‡REAƒ"
‡WRIT≈#  ‡REWRIT≈$‡DELET≈%ß‘k ª º … ÷ „  ˝
#LYeråô¶≥¿Èˆ)6BNZÇéö¶≤æ ◊‰Ò'3@MZgsÄç∂√–›Í˜*S`mzáî°Æª»˝	".:FR_áì†≠∫«‘‡Ì˙#/<IVcp}äó}Nœ√÷	ç	k	≤
öÜÉ;Ö&®œTA¡FIRS‘x  ‡FO“yf‡I-O-CONTROÃz	t‡INITIAÃ{  ‡SYSOU‘|h	‡LEF‘}  
‡LIMI‘~Ò‡LIMIT”à‡O∆Ä  ‡BŸÅ  ‡FƒÇ  
‡LINE”É	U‡LINKAG≈Ñ  	‡LOCÀÖ  ‡TœÜ  ‡MODULE”áz‡CR‘àÔ‡CONSOL≈â  ‡I-œä  ‡KEŸã≤‡NEGATIV≈å  ‡OF∆ç  ‡RUŒé  ‡TA¬è  ‡DEPENDIN«ê3‡OŒë  
‡USIN
‡STAR‘&  ‡US≈'ü‡ENƒ(  ‡ACCEP‘*∆‡DISPLAŸ+  	‡NEX‘,B	‡ELS≈-  ‡I”6“‡NUMERI√7  ‡ALPHABETI√8  	‡LES”9à
‡EQUAÃ:‚‡GREATE“;≈‡NO‘?“‡COMP-≥F<‡COMPUTATIONAL-≥FC	‡COM–G<‡COMPUTATIONAÃGq
‡INDEÿI  
‡USAG≈Jë‡REDEFINE”K  ‡PICTUR≈L  ‡PI√L  	‡SIÂ)U^µwû˛¡:W“ÂRUŒ                           CO    AA  AA$., ˇˇÚ  ≥Ò¥áÕ	:4˛0¬˙Ñ…Â’Õ»Ñ˛) ∞Ü˛  fÜ˛ ˙Ñ˛, fÜ ˛- ãÜ˛+¬˙ÑÕ»Ñ˛D ≥Ü˛  ∫Ü˛0⁄˙Ñ˛8“˙Ñ÷0_z !~w√fÜ—·…z2ï√fÜz2ù<A8AK5vAR5Ω5Î68j7k7R8P7]727j8Å8ö9:Õ9«9©959<9@9º9∂:o:":L:∞:ú<<^ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂU WISH THE CURSOR 'HOMED' AFTER EACH DISPLAY?†N°– 9†@- U––£@Y Oƒ†@ ¿†¿0DO YOU WISH THE CURSOR 'HOMED' AFTER EACH ACCEPT?†N°– 9†@- U––£@N Oƒ“Å¿£@ ƒ†@  “Å¿†@ ÿ†A9-ÄU––£@N Oƒ“Å ¿†A:AÄU@@–– h–@@ †A;-ÄU––£@N Oƒ“Å ¿†AV+ÄU–– —ˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇ        ˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇ          ˇ                                                                                                               ˙ H0  ˇˇ ;      ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ†Äh”†A<-ÄU––£@Y Oƒ@¨¿†A=-ÄU––@ “£@N Oƒ“Å ¿†AV+ÄU–– “C ƒ“Å ¿ —@ 	ÿDD		∆“Å ¿ ÉZ  	É≈  “Tÿ†A>-ÄU––£@N Oƒ“Å"¿†@A U@@–– h·ÿ;:ƒ“Å
¿†BZX-ÄU––£@N Oƒ“Å
¿†AYWÄUÄç†@ †ºÿ––£†O†ºƒ– C¿††O†ºçC0ƒ“Å$¿†@\ U“œÿ††O+        A:  COBOL   MSGA:  COBOL   MSG:F1:COBOL   MSG:F1:COBOL.MSG @:F1:COBOL   MSG    ¬˝Ë…»)√È≈:BÁO! ÕÈ¡yµox¥g…*≠Ò:BÁOÕÍË}Ê…!≠ÒN#FÕÈ"≠Ò*»Ò#Î*≥Òs#r…Õ^È	 ~–!‰√JÁÕÈ»!‰√JÁ*πÒ:ÈÒÖo–$…*CÁ ~…ÕiÈ6 …ÕiÈˆÄw…* X        :F0:X Äˇ €6~d7N Oƒ Y~ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂD;†Ä=®†=Ñ > 
;†@ U––– C††O.ãT  
;Ä Ä/Ä^Äç††º‘B256–	œÿ†D^_Q-ÄU––£@N Oƒ“Å&¿@∑†BR	-ÄU––£@N Oƒ“Å&¿†ASDÄU@†@4 @–– h∏ i∫ jº kæ†ATDÄU@†@2 –– hª iøÿ†AU-ÄU––£@Y Oƒ@ˇπ@ˇΩ¿†Bb)-ÄU––£@Y Oƒ†A/AÄU@@–– Z ¿ÿ†C≠ Ío–~⁄LÅ  Í|ÍoH
p~ Å~ Hè £@N Oƒ˘}D~˘}+ÄU––ˇ Íl ˇ¿Ío  IW~ Ío Y~ Ío†Ähﬁÿ†¿.DO YOU  W~ TO   S~5~   W~ ≠ U~W~AY HOMING?  ⁄6 W~Â~Ÿ~W~
DEFAULT - HOME ONLY AFTER ACCEPT FROM CRT)†N°– 9†@- U––£@N Oƒ“Å¿†@Ä †¿1DO YOÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇpq         RUNCV5  COM  r                COBOL   ISR Ä E                CONFIG  COM   ÄQRSTUxyz         CONFIG  COM  Ä{|}~ÇÉÖ         CONFIG  COM  ê                STOCK1  INT   	k                STOCK   IDX   l                FILEMARKCOM   Ñ     ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ           COBOL   MSG Ä 0FGH             ÂCOBOL   I04 Ä äã              ÂCOBOL   ISR Ä å               ÂCOBOL   MSG Ä 0çéè              STOCK   IT    s                PIP     COM   :tuvw            ÂCONFIG  INT Ä Cêëíìî            RUNCV4  SYM  ÄÅ    ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ          ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂNPUT,WORKING-STORAGE,UNTIL,RERUN,$†a_–ÅV†¿[WORDS,RIGHT,SAME,SEGMENT,SEPARATE,AUTHOR,BEFORE,SIZE,PROGRAM,COLLATING,SEQUENCE,STANDARD-1,$†a_–ÅV†¿KNATIVE,EXCESS-3,OVERFLOW,EXTEND,STANDARD,FILLER,GIVING,MEMORY,TABLE,OUTPUT,$†a_–ÅV@øß†¿YTALLYING,SELECT,THAN,∆XÂ–ÇæÿK 9ƒ@Í¿–õX·ÿÿK 9≈“Ç¬¿—HP0
–'  C?¬E@¿C¬@¬E ¡@ ¬¿D@∏≈–ÅR–Ç>C ¬ƒd Ç¿·–Åäÿ—ÇhÅÇ–ÇjC ›ƒ–Çƒ¿@ ›–Ç∆KˇˇÁƒX·¿K 9ƒ–õ¿ÿÿ æøC8ƒDæ¿C*¡ƒC 9ƒC8≈Dæ¿¿¿–ÅPC ¬ƒD ¿–Åä–ÇjC ›≈–Åä¡–Çƒ¿–Ç∆›ø@ › øæÿKˇˇÁ≈Á≈@ i¡H„dRö64 $ANIM   V45   b~†W^@ﬂiÄ¥7‰rˇTN†3.#"!À]ØDjÖ_h~u¢oïû‰‚0s–Î9VÙ˚	Öëô°¬®äÛΩÒGâÿoêºüµ%Ø%∏&,%Â%˙%˛EXI‘           Ä   AA  AA$., ˇˇ  u&/æ‹“Ç|“Êÿ–öÿ–õ@Û≈–ÅRT–Åä“ÿ@ i›⁄Çä–—ÇåÇé–öÿC+¡ƒ“Çê¿›óÇz–SWITCH,TIMES,DYNAMIC,INDEXED,INVALID,WHEN,TYPE,UNIT,ROUNDED,SECTION,$†a_–ÅV†¿[DIVISION,UP,SECURITY,SENTENCE,VALUES,CRT-UNDER,DEBUGGING,OBJECT-COMPUTER,PROCEDURE,VARYING,$†a_–ÅV†¿BREMAINDER,SD,SPECIAL-NAMES,AT,WITH,ASCENDING,DESCENDING,LINE,INTO,$†a_–ÅV@          RUNCV4  HEX   Ä	
         RUNCV4  HEX_ k          RUNCV4  COM   p          CONFIG  INT Ä a !"#$%          COBOL   INT Ä D&'()*            COBOL   I00 Ä -+,-              RUNCPX  SYM } +=>?              RUNCP2  SYM s (@AB   ö“Çíÿ›°Çz–ö›“ÇíDæ“Ç|ÿ›àÊÿ––öÿ@ i@›Cﬂ≈“Ê¿–Çî‹¯ÇñC*¡ƒ“Ê¿‹˙Çò›˚Êÿ æ≈–ÅR–Å⁄C gƒ—ÇöÇ*¡—ÇúÇ*¿ÿ † “ÿCˇ8ƒ“Ê¿C8≈C8≈“Ê¿¿@ Íÿ—ÇûÇ†C+¡ƒ“.π¿CÍ≈“.π¿@Í@›–Çî“.Ÿÿ@ 7–Ç¢—ÇhÅÇ–Çj·„R„HˇˇÁ@È†` †ø
ù@ 7ÿ·„ƒ“Ç†¿–Ç¢–Ç§ S  ”Ç¶/$Ç®/$Ç®Ç¶Ç®Ç¶Ç®“ÿÿDﬂß†¿F,PROGRAM-ID,SEQUENTIAL,ENVIRONMENT,IDENTIFICATION,SYSIN,SEGMENT-LIMIT,$†a_–ÅV@Êß†¿,,CONFIGURATION,,,,DATE-WRITTEN,FILE-CONTROL,$†a_–ÅV†ZINPUT-OUTPUT,INSTALLATION,$†a_–ÅVÿ@ ®—ÅXÅZÿ@ K@ g†` †AÿD® å_  b®ﬁ.Å\‹,Å^‹$ÅZ‹.Å`ÿ KDg åA  Äg“%∆ÿ           COBOL   I01 Ä 7./01             COBOL   I02 Ä g2345678          COBOL   I03 Ä 79:;<             COBOL   I04 Ä CD               RUNA    COM   ÄWXYZ[\]^         RUNA    COM  Ä_`abcdef         RUNA    COM  gV               RUNCV5  COM   ÄhijmnoÈC8∆“/$¿ÿCÍ∆—Ç™Ç¨¡—ÇÆÇ∞¿ 8 ‹	Ç≤‹Ç≤‹Ç¥“Ç∂ÿ.6C ¬ƒM ¡M ¿0≈DÈ“Ç≤¿ÿ–Ç∏ÿKˇˇFƒ–Ç∫“/$¿F.–Çº—ÇhÅÇ–ÇjRÂR¬–Ç∫“/$¿ÿEÈl äù  `È–Ç∏XÂ+%äù  `È≈@ 7“/$¿h  äù  `È‘ ö'%
Â“/ßÿ—ÇhÅÇ=–ÇæC iƒ“Ç¨¿K  9≈“Ç¿¿C «ƒ“Ç¿¿∆«ƒ“Ç¿¿=« ≈@k–Åj–õ=«DßÿC gƒ“%∆¿dÄåA  Äg@ JL J—d˘@‡5–	ê ß–	<“%∏ÿÿÆ) Œ€xéÜ@.Ã
´M[ÆE/¢#ööñ¡YÙ>/KM12ä…Ilﬂ∂g¬Uf˘"åó¢™πû

Ù{≤ÄG¿–HQD™¡	|	˝¶∫™`
âs
X
Ñ
;
ñ™O".eiÈ±˚P©q•œ#'D#This option will clear a corrupt or=ZD#unwanted password file from a disc.=ZD#All other files on the disc will be=ZDleft unaltered.=Z=ZD#This option can also be used to add=ZD#a password file to a disc used with=ZD$earlier versions of the file server.=Z=YDClear the disc in ˘Á=+€‹-=˙@Ä @ˇ —˙? =◊∆D
%Passwords=Ï=◊Ã›®=◊À?==Z=ZDPassword file cleared=‚J€Á? =====;É=$=ÇÇÉÇÑÇÖÇô=÷ÜÇáÇõ=àÇO=-=ZD           WHOLE DISC COPY=Z=ZD&ThiÉI  PCP∆D¿Dbb®«“Ò¿Û ÿ@ –ÄﬁkNOAƒ@
 b®D®–Äﬁ¡@ 
¿ÿ†` †A@ g—ÅDÅFÿ–ÅH‹ G‹¸ÅFC bƒ ®b¿ÿCƒ“ÅJ¿⁄aÅJﬁzÅJE  ÿ–ÅL–ÅH‹ ÅF‹(ÅF‹)ÅF‹¸ÅF“[ÿÿ—ÅNÅPÿ‹(ÅR› ÅT–ÅH“êÿ@–7ÿ‹)ÅP› ÅT–ÅH“¶ÿ@cE®ÿÿ–ä@g‘ ì'«ÇøÇ~AAÿCP®∆D® Éõ  P®¡@¸ ¿ÿDg åA 	`(	†#â  !b"	`)	cbƒ†#â  !b†	`(	¿“Å8ÿ–Å:ciƒ“Å4¿Cg≈“Å4¿c0A∆“Å4¿c9A¬“Å4¿ A	“Å8ÿ %^“Å8ÿC 
ƒ`Z¿“Å8ÿ %e“Å8ÿC
ƒ` a“Å8¿–Å:Ccƒ“Å4¿††A†±“Å8ÿC
ƒ`Z“Å8¿cZƒ`Z¿–Å:Ccƒ“Å4¿††A†Ú“Å8ÿciƒ“Å4¿ %d“Å8ÿ %h“Å8ÿ–Å:ciƒ“Å4¿Cgs option makes an identical copy of=ZD&a whole disc. Any previous contents of=ZD%the new disc are destroyed, including=ZD#disc name, account information etc.=ZD"The new disc need not have already=ZD been formatted.=Z==YDFormat new disc ? =àÇÒ==àÇ)-=YD$Format disc in which drive (0..3) ? =ÉÇÛ? ?=&6=YDOverwrite disc in =˘ÉÇ=YDOk ? =0Ò==YDRead from disc in =˘ÇÇ==÷€‹÷=ÜÇ÷?=áÇ? =ÑÇ?==6=ÑÇ? ÇÇÉÇ)-=ZD Insert source disc & press space=660≈“Å4¿c.B≈“Å4¿ A	 C	m00	“Å8ÿ–Å>ciƒ“Å4¿K ¬“Å4¿ (D“Å8ÿC
ƒ“Å4¿–Å>ciƒ“Å4¿ (ã“Å8ÿ–Å:ciƒ“Å4¿††A†+	F“Å8ÿC
ƒ` `“Å8¿–Å>K ∆“Å4¿ (C (B“Å8ÿ %_“Å8ÿ–Å:†` †,ÿC-g¬@-g¿H -g‘ èúD 	 Ç	‘ çAõÇÿÇ`f“Å8ÿciƒ“Å4¿–∂“]ÿ@ “Å@D,LINES,LINKAGE,LOCK,TO,MODULES,CRT,CONSOLE,I-O,KEY,NEGATIVE,OFF,RUN,TAB,$†a_–ÅV@èß†¿`DEPENDING,ON,USING,OMITTED,OR,POSITIVE,PROCEDURES,FROM,MODE,PROCEED,RANDOM,RD,PAGE,RECORDS,REEL,$†a_–ÅV†¿_THEN,THRU,THROUGH.UPON,SOURCE-COMPUTER,AFTER,REPLACING,COMMA,IÎ⁄0⁄> ==6=ÈÑÇ=‚K€ÇÇáÇÑÇ=ÑÇâÑÇ=ÜÇàÜÇ=0ÑÇéÜÇ? ==ÖÇ? =ÇÇÉÇ)-=ZD%Insert destination disc & press space=660Î⁄0⁄> ==àÇ)-=ZDFormatting ...=·ÉÇ=ZDFormat complete=àÇJ==6=ÈÖÇ=‚J€ÉÇáÇÖÇ=ÖÇâÖÇ=0ÖÇÑÇ==ÑÇ? =áÇáÇé=0ÜÇ? ==ZDCopy complete - verifying ...=¸ÉÇ÷=ZDVerify complete======;âÇ=$=Á˙ô=äÇãÇÜÇõ=-=ZD           FORMAT NEW DISC=Z=Z==YD$Format disc in which drive (0..3) ? =ÁÛ? ?==ZD&How much disc space fo–` M¡£ t` ƒ–Ä“¿¿ÿ–Á(…I–â††K†Oo†A**!o†F*******'∑@ @*—Ä‘Ä–ÿ Ño  P D ® ∆“@¿ÿ–
+–Ä“ÿ††Oo†OIc eƒÛ ¿ÿl 	†Ä !	2†Ä1	4–Á†A**†Oo†#â  !	1#q†F-------'∑c	1≈@ ¡@ ¿@-—@Wc	ƒ†A**†Go†^FLAG APPLIES TO WHOLE STATEMENT†<Ç–W¿` 	†13µ‘ û3µtA††3†+	Fchƒ c0	Ä≈` h¿¿chƒÄ¿†` †3£†Ú†/ƒ“Äˆ¿£†O¡` ƒ“Äˆ¿†Ä !	2†Ä1	4†T** OPTIONS SELECTED :†Oo–
+†` #q††O¡†Iu–
+£†` ≈†††Iu–
+¿£†ï` ≈††ï†Iu–
+¿–
X†1	4Ä†!	2Ä ÿ@≤@»≠CH®∆‘ çõõõõ√–€@®–E¡–\¿–öCÄ^«@  `i‘ ú33†F**BUILT†OI††3.UÛ “ÄËÿEgÿ†ECONSOL†A@gÿH -g ÇEC¬@ `,E¿‘ èúD‘ çAõEüE(Fÿ` i£@+†Aƒ` i–Äﬁ“r¿£@*†Aƒ–∂“Äÿ¿£@.†Aƒ“ÄË¿£†p†Aƒ`@††p†A@gc åA  Ägƒ–%“ø¿–9“Äÿ¿††A†pC gƒ–)¿–9‘ ùA¡3I†BI	4Ä†!	2Ä ÿc b¬`	1–q¿ÿc b¬`	1–q¿ÿcb¬`	1–q¿ÿcb¬`	1–q¿ÿcb¬`	1–q¿ÿc0	Ä≈††p†4d“Ä÷¿ÿc0	Ä≈††±†4d“Ä÷¿ÿc0	Ä≈††Ú†4d“Ä÷¿ÿ††3†4d“Ä÷ÿc0	Ä≈††t†4d“Ä÷¿ÿc0	Ä≈††µ†4d“Ä÷¿ÿc0	Ä≈††ˆ†4d“Ä÷¿ÿc0	Ä≈††7†4d“Ä÷¿ÿ@†S* FATAL I-O ERROR : †O@ ¡@ ` Å@ic gƒ–õ¡`Å–õ¿¿@ ≤“)ÿÿÿcaƒÄÇ¿ÿÄAÿ†` †4d†JOPEN FAIL :+IÛ ÿÄ Æÿ@ —Ä¯Ä˙ÿH  b–Ä¸‹¸Ä˙£@&†Aƒ“Ä˛¿£GCOPYLIST†Aƒ“Å ¿£CFLAG†Aƒ“Å¿£DRESEQ†Aƒ“Å¿£FERRLIST†Aƒ“Å¿£BINT†Aƒ“Å¿£CECHO†Aƒ“Å
¿£CLIST†Aƒ“Å¿£CFORM†Aƒ“Å¿£BREF†NT†OI‘ û±¡3I†BLST†OI‘ ûÚ¡3I†BSDB†OI‘ ûˆ¡3I†BSCP†OI‘ û7¡3I@P®H   ®	‘ çõ#¡õÿ†` ††` †ï–ÄÊC †ƒ“ÄÍ¿C ≈“ÄË¿†A**†OI£` †pƒ`@‘ üp33¿ A‘ çpõDUõDc0	Ä≈“ÄÏ¿`0	Ä£` †±ƒ` a¡c a≈Ç@e¿¿‘ ç±õDUõDc0	Ä≈*key 0 B:|MA:PROLINK|mY105|mAE00|mN
*key 1 BIGFS,PS,FSP1,FSP2,FSP3,FSP4,FSRND,BIGDATA,FSWILD,FSDEL,fsdir,FSUSER|m
*key 2 DKBIG,INT0080,MDEPBIG,fsvers,ECORTC,BIGLIB/S|M|M
*KEY 4 LOAD BIGFS.COM|MLOAD CRCGEN.COM C000|MGO C000|MSAVE 191 BIGFS.COM|M
*KEY 5 SEND 33 BIGFS.COM/I|M
 DISC512 BAK  √∏∑∂Æ≠¨™©®       BIG     $$$                     BDSPAS  REL   º                BDSPAS  MAC   Ω               “ÄÓ¿`0	Ä£` †Úƒ‘ ü3Ú3¿cZ«`]`^`_` `¡√†` †A‘ ü3A3£†A†Úƒ`e¿¿ Z[‘ çÚõDUõDc0	Ä≈“Ä¿c gƒ“ÄÍ¿«†`ˇ†c0	Ä≈“ÄÚ¿†`ˇ†ôc0	Ä≈“ÄÙ¿ÿ–’†J**COMPILING†OIc @ƒ‘ çpõEUõE¡†LCONSOLE INPUT.U¿Û ‘ ù	FµtA†` †µ‘ ü3ö 	úd0ú‘ üp/I ††å†OI†¿&COPYRIGHT (C) 1978,1982 MICRO FOCUS LTD†<\Û ‘ î/–Ä⁄¬Æ¿ A–Ä‹H  b@–Äﬁ£@=†Aƒ“Ä‡¡“Ä‚¿ÿM ‘ è0ü‘ é0ü¬†RINSUFFICIENT REGION†OIÛ ¿ÿ`@` \` ]` ^†` †±†` †ÚÿC ^ƒ–Ä‰@H®@^¿ÿ–Äﬁ††A†3` i–ÄÊ–’ ®©‘ çÓõ¢Óõƒ@™$\Z–Än“¨ÿC ¢ƒ“Ä,¿–ö‹˚Ä,‹ñÄp›˙ÄrCg≈“Är¿–Ä:ÿ@ g AB†!A!C††A#E††A'I††A/Q††A?a††?A†?Å“Äfÿ@‹ †.ﬂÄ,  †“Ä,ÿ†` †A“Äfÿ†` †A“Äfÿ`"A“?ÿ@ 9H  †`0†Aÿ@˚†ÿC≥ƒ–è¿“ÄTÿ  £ AD®‘ ì'«Çø√~BõC gƒC ¨ƒ“ÄD¡“Är¿¿Cÿ ãÅ  ¿qYDq–Äºc Nƒ†@*†Oo¿dN††X"Ñw  !NcNƒ–
Ñ¿ÿXZ«“Äæ¿XZ†` †AÿZ@Åqeqp«“Ä¿¿‘ çAõ*Ì*“Ä¬ÿ‘ çAõåÌå–	∞p††A†ÌÿK Ä∆“Ä¬¿M Ä–	∞“ëÿeÿÿl Ic ^≈“Äƒ¿(II–Äú††K$o†@0 tÿ††o%	ªc*uƒ“Ä™¿c _≈“Ä™¿C^¬ZC2 ∆“ÄÆ¡ 0ÿ@ˇ∞“ÄíÿHJh  çé J@g—d˘ÿ«“˝¿‘ ç-õûˇ3ûL D4ÿ¬“˝¿ ˇˇ  L D4ÿ‘ ç-õûˇKûL 0ÿ ˇˇ  0L 0ÿ Oˇˇ  ,Cˇ5≈“Äî¿ÿL , Pˇˇ  ,M ,@ˇ5ÿC°≈“Äñ¿ÿc a≈ÛÇ–Äò¿@eÿ`Bc `ƒ“Äö¿l K(KI–Äú†#L#‘††Oo†OI††Lã†OoÛ√–Äû–g¬“Är¿DgC §≈D§¿“Ätÿ  †–E⁄0ÄTﬁ9ÄTc.~≈“ÄT¿“Ävÿ–Ä:“¡ÿ–Ec,~≈“+¿⁄0+ﬁ9+ÿE®ÿ@ £‘ ì'Çø√~AõC §¬“Äx¿‹-6⁄AÄx⁄[6⁄aÄx⁄{6ÿÿ@ 9@˘†“ÄTÿ–‹@˙†ÿ“ÄzÿCÄgƒ“Är¿Dg åA  Ägÿ– »›-Ärÿ–E⁄!¥›"Ärÿ–Eÿ›"Ä|–E›"ΩÿCI®ƒ“¨¿–ï“¿ÿ–ÄL–äÿ–E—Ä~ÄÄ‹"ÄÇ‘ é†ÂY“Ä¨¿¿X+P#«“ÄÆ¿C ^≈“ÄÆ¿(#X-ÉXÿ–Äº††X!ºÿ #Y–Äº††X!∑ $Y–Äº††X!πÿÿ YX‘ èX† X‘ é†%Yc	X¬dX¿c	Y¬dY¿l00Xÿ‘ òKI°ûÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿDØÿÄ†††OI†Ooÿÿc N¬–Ä¢¿ÿ–
c M¬††O>†Oo–Ä§` M¿ÿeZ–Ä§` NdZÿ#BC√—	¿
¿cZ∆dBÛ√–Äû¿ÿ†A**†OocBƒk K¬††8ÿ†<Ç¿¿c Zƒ–
;¡–
+¿ÿc*oƒ–
;¡–Ä¶¿` Nÿ—Ä®Ä™††O>†OI††Oo†O>c M¬††OI†Oo–
;¡`M¿ÿ–
c M≈c _ƒ††O>†Oo ÂYZ—Ä¨ÄÆ††Oo†O>¿¿ÿH +%  –E—Ä~ÄÄ‹"Är –ï“ÊÿC gƒ“Är¿“ÄÑÿCI®ƒ—¨¿“ ¿‹"ÄÄ⁄0Är⁄:ÄÜ⁄AÄrﬁFÄrE ÿE0 ÿÿD» ÿ  †ÿD®ÿ † ÿÿ@°@ˇ @ˇ8“ÄPÿ†Ä,.ﬂ(çé JiH  Lÿ@ ° gD†` =MÿK  Nƒ“Z¿ÿNL‘ çˇgIõ(Iiÿ£†A=M≈“é¿L00(KR 8 ‹‡ÄPL.L .‹ˇÄP 733ÿ 89‘ èS† 8 ‘ é† DØÿDØÿDØÿDØÿDØL PCØ∆“Ä∆¿EØ@ˇ†“Ä»ÿ≠Øÿ–Ä chƒ–ÄÃ¿@ Ø@ˇ5@ iÿ [Z` c@  C±ƒ@ ¿C±ƒ@ ¿‘ ñ@≤Cˇ∞ƒ@ “Ä ¡ O¿“ÄŒÿı EØÿ#	r ≈  	rÄ ††+	F†/  C Ø≈–w“õ¿Ä ††OI†Au†A**†o††Oo†ï†` †/‘ üI/I ¡††ï†Oo¿–Ä–ÿ–
c M≈††O>†Oo–ÄE—Ä∞Ä≤g ECÄ«–Ä¥“¿‘ èúD†` †,ü‘ çpõü`(àü  -D‘ ç3õÇüÇg`)àü  -ÿ@ gÿDgc åA  Äg≈“i¿EgÿC ≈E¡Eg¿C g≈Eg¡E¿Dÿ–
c ]ƒ–Ä∂¿hZ@ –Ä∏ÿCÅeƒ–	∞¿@Åei¬ i¿‘ çÇ Ì eiC i¬“±¿ÿ@qqi«–Ä∫“Ì¿–
9 9:‘ èTû 9‘ éû:ÿÿÿ ˇˇ  ,L ,ÿ ˇˇ  
ÿ‘ çˇKû'õûL 0ÿ.0L 0ÿ ˇˇ  0L 0⁄ÄPÿÿÿCÄ^«“Äà¿–g@K  N≈–ò“u¿K  Lƒ(3çé J¡‘ ç3õûˇgû¿H  “Ääÿ(çé J-(3çé Jÿ–Äå@ 4–Äé.,4–Äéÿf¬“Äê¿g4‘ çAõÇˇ#Çÿ                                                                                                                                                                                                                  0123456789¿c õ∆“Ä¿‹ Ä‹DÄ›$Ä  ^ ‘ é£› Ä ‘ ñ@ †@  “Ä ÿc 	íƒ“¿ ® @®–Ä"  ®ÿD® Éõ  P®‹¸  ¨ÿÿ—[Caƒ@ @ ≤“Ä ¿ÿ–Ä$ÿ›.Ä&ÿ–Ä$ÿ†ƒ–Ä$¿ÿC6†ƒ–Ä$¿ÿÿcHƒ“Ä(¿ÿ@¢—Ä*Ä,ÿ@ ¢—Ä*Ä,ÿ—[Caƒ“Ä,¿“Ä*ÿ–Eÿ‘ ëõ√ ®©C®¬`H¡` H¿⁄AÄ.⁄[Ä0⁄aÄ2⁄{Ä0‹¸¨“Ä2ÿ⁄0Ä4⁄:o  ¸      º  ¿  û°æ. D%†  	Ë mñú,‡r     µ    ‡“ıK  jd˙  ∆        	◊≤‹  Ü∑      ‡          ¸ 9›    •¢  ]Ç œ w      ã  	%    ‘ b 
  è∂  Ã   ¢ N    r ∂     ^     Ã      F    «ó  Ó      6Ê   ABCDLPRSVXZ *+-,.;()"/=                                                                                                                                                                                             INPUT-OUTPUT,INSTALLATION,$                 Ä6ﬁ>Ä2ﬁ;Ä8›;Ä2–E–Ä:“¡ÿ‹.Ä<‹,Ä>‹"Ä@‹-ÄB‹+ÄB‹(ÄD‹)ÄDÿD®“Äÿ`	 ©®ÿ†` †A‘ ífÇ√Aõ›"ÄFCXK≈“ÄF¿Cgƒ“ÄH¿ÿCg¬“ÄJ¿C ≈–ÄL¿@ JL J—ÄNÄP‹‡ÄR@¯†c	ƒ–Ä:¿` 	›ˇÄTC °ƒ“ÄT¿C ¢ƒ†.ﬂÄ,M J¡—ÄVÄX¿“ÄTÿ ˇˇ  0†.ﬂÄ,  †ﬁÄ,ÿ@ g@9ÿ ®E Éõ  PCSƒ–Ä     †C Äô#.†C Ä#Ì†C Äï#¨†C Ä#k†C P¡#*†C Po#È†C ÄÌ#®†C Põ#g†C PI#&†C P	Ä#A†C P	Ä#Ç†C P	Ä#√†C P	Ä#†C P	Ä#E†C P	Ä#Ü†C P	Ä#«†C P	Ä#“Ä †¿&COPYRIGHT (C) 1978,1982 MICRO FOCUS LTD  ÿ—ÄÄÿC ™ƒ“Ä¿ı††O¡†Oõc0	Äƒ“Ä¿c1	Ä≈“Ä
¿Äc                                                                                    	Ÿ	Ÿ	Á  ˇ     ......                                                                                                                                                       :¿Csƒ–Ä:¿   ”ÄZÄ\Ä^Ä`ÄbÄd†`†A“ÄfÿC ™≈“Äh¿–Äj(	s	w √	y ®©E©‘ ç>õƒ>õ¶£` †ADƒ` M¿–Ä††Gõ†O>`M‘ ç>õ¢>õƒ–Ä"†` †A–£⁄¯ÄhC¯ ƒeÄåA  Äg¡–Äl¿††A†3—ptc \ƒdZ¿–ÄjE®c \ƒ‘ ç>õ√>õ¶¿–Ä [Z (	s	zl 	zc0	Ä≈“Äh¿††A°†AÙg≈“Ä¿(	s	|(	u	~l 	|l 	~Cy∆“Ä¿Û–Ä†`ˇ†ô@yÿ††	w(Üõ 	 yDyÿ–Ä@ ™ [Z†` †,ü‘ çpõEüFE††OÓ†Oõ£` †A°≈“Ä¿ÿıAc1	Äƒ@a@) “Ä¿–Äÿ õ‹* Œ‹ Œl 	sC ™ƒl 	u¿ÿ–Ä††Gõ†Oo`N °‹ Ä‹* Œ›/ÄcZ∆ CB¿“ Œÿh ¸„£` #¢ƒ@®¡@®¿ÿ– »Caƒ“Ä      ñ          :            E.  Qy  '%03[ Ü    }U´    ˛Ê  :¸  ˘K    m  æÖ  9     Áï  I 	Ò  Û Y  aL    R   ≠   ⁄            ç  Ç  ˚      A”  e    eP    ™–]         F /j	∆[ ≈  ~ŸuíéÑ?    ,  &                                                             COBOL.INT                                              00        /                    Ä   PI     CON:              00	Ä ÄÄ    p                       Põ     CON:               P	Ä ÄÄ              Ä  "HÄ 	
Äåçé.      ÔH           ˇˇˇˇ                                                                                                       ˇ<  ]             z K            ˇˇˇ    AA  AA$., ˇˇ                                                                                                                                                                                                                                                                           ±                        ÄÌ                        P	Ä  ÄÄ    Ú                        Po                        P	Ä  ÄÄ    3                        P¡     COBOL.COM          P	Ä ÄÄ    t                        Ä                        P	Ä ** CIS COBOL V4.5                                                 PAGE:                                                                  4V    CIS HIGHH-I L-I LOW                      COBOL.MSG                                   ˇ             00                                                                                                                                                                                                                                                                         ÄÄ    µ                        Äï                        P	Ä ÄÄ    ˆ                        Ä                        P	Ä ÄÄ    7                        Äô                         CCEPTED - VERSION(4.5)                                                         =  c   ≈–  ¿c   ≈†E      %  ¿`                                                     'Ë d 
 Çˇ∞≤ˇ≤ˇˇˇˇˇˇ¥ˇ†∂∂∂πˇ†ˇˇ∂ˇˇ†ˇ∂∂ˇˇ†ˇ∂∂                                                                                                                                                                                                                                                             Ô    	Ï       ˇ\H\H	˘  	˘              	Í	Í	¯  ˇ                              ˇˇˇˇ                                    = COBOL.COM OSNAMESIZE(18) VERSION(4.5)                                                                                                                                                                                                         ˇ2Ò√=+ÕÅ1>2:=˙.)¬⁄+:˛ :)Õ-Õì)√N1ÕÅ1Õk)ÕC)√N1ÕÅ1ÕC)Õk)√N1:˛Ä!  ì)!
 “ì)∑»!	 ıÕì)Ò=√[)Õ-:∑¬á)+{≤ ä)~˛  w)*∑Õì)! √ì)"≥Î"µÎ:∑ "/˛–Oz≥»’^#Õ 2—√¶)ÕÑ1:=>û¸=+¬,Õ\-ÕÒ,Õ-Õ/√N1 ÕÑ1Õ-:=˙!*¬í+:˛˙í*Õ+ °*˛‘g+O z≥>ÄÕ∏0√»0:∑ >0"˛"⁄*0:˛¬'0:˛0⁄*0(ÕÒ1 I0˛¬90¬*0>Õ=+ÕN0ÕÒ1¬90Ø2´…:∑¿*¢Ø}|g:(º‹≥0}Êo:çºÂ ≠0<º¬Ç0:°∑ÚÇ0}∑¬Ç0·…Õ‚1ÕÒ1˛ˇÃ≥0¡≈Õ81ÕÒ1˛ˇ¬™0ÕÒ1˛ˇÃ≥0ÕË1·}2°…>¬√=+ì» *ªp#=¬¿0=…>2´2¨…Õ21–Õ-2™"® Î*π##≈ÂgØzo{W> Ñ_& ‹+¡ÕQ2:-"≠2Ø…*π"µÎ*∑"≥…*¢:ß∑#Ø…Õ¯-!Ω"≥! "µÕ¸.*Ω}˛¬D-|˛
¬D-ß…Ø…!
"Ω!Ω"≥! "µÕ"/…:˛»√Õ=+}/∆o|/Œ g…*π√å-*π##√É-! Õg-ˇˇ√è-  Â. *^+V+~+∂ƒÛ-z≥¬´-x<·»Â:'∑¬≥-*π##≈Â¡Õ.2ƒÛ-Ø¡Ulg„„W_	Ø—{ı{Ê2≤ÒÎ|o{g"∞‹Û-z∑ƒÛ-Õ)1> <…>ƒ√=+*¢Î*∞}»Õ 2Ê ˛)˛Ãg+ *˛ ˛)˛
»w#√˛)Õ+:˛˙T* :*˛‘g+O√˛)Õ°*+~˛
ÃQ*˛ÃQ*+~˛ÃQ*…6 …Î"µÕ21‹g+Õ¸.+~˛
 Ç*˛>üƒ=+6 *®"¢:™2ß√N16 +~˛>üƒ=+6 √N1Õ˛,Õ21‹g+Õ¸.√N1:O∑¬“*
’Õ
2
Õ
2·#~∆O#"~˛Ãg++ 	6
+6*≥Â*µÎ*z≥ Ì*~#„w#„¬›*"·y2…! Øæ¿! '∑¬1¡*	Øw#w#r#s…ÎG*®|∫¿}ª¿:™∏.-…*∞:≤√1Õ-√1!çp#6 #¬=1…+ Õ-√·0:∑¿:˛ÃE1:'GÊ2':´†ƒ0Õ‚1*Î!Å/~#¬x1…Ä:∑>¸=+¬ó1x∑>ƒ=+:'† Æ1*π##)}∑¬Æ1>2'*ÎÕ	+:∑¿’!$ F#fh"Å/Õx1"ªÕÎ1*•Õg-—|µƒ+…!Ä √Î1*ªÎ√
2’:˛ 2Å√2ª¬(.|∫¬(.Õ)1“. :™_:≤Õ∏0ƒ»0:≤2ßÕ—0…Õ21¬U.Õ)1“U.ı:ß∑ÚÖ.:´∑ƒ0*¢#"¢Ø2ßÒ¬â.√Ø.:´∑ƒ0Õ)1⁄w.*∞"¢Ø2ß:'˛ƒΩ/√.ı*®"¢Ø2ßÕΩ/Ò .:™_ >ÄÕ∏0Õ0:˛"⁄–.:˛¬Ø.:˛0⁄–.*∞"¢:≤  Õ∏0ƒ»0:≤_>ÄÕ∏0√. X>ÄÕ∏0*∞Î*¢#"¢zº‹+¬Û.{Ω‹+ Ø.Õ0√–.Õ¯-ÕÉ/≈F#N*Ø	…!# ~2q…ıÂ’z≥ "+6 #√+—·Ò…Õ)>~2Ä Ä 
Õ
2
√
29O*Î!  p#q> Õ	+:∑Ão1Õ‚1:'Ê2'*˘…01√@+42√@+32√@+22√@+>«√=+`iáO „	~#fo¡ÈÕÒ,Õ-Õ)1‹g+Õ˘.Õ$-ıÕ˛,Ò í+√N1 ÕÑ1Õ-Õx-Ãs+‹s+Õ˘.Õ$-G:'∑¬‘+x∑Ãs+Õ˛,√N1:∑¬Û+ÕÒ,Õ-Õ/ÕF-Õ˛,√N1:'∑¬	,ÕÄ-Ãs+’≈ÂÕ
2·¡—…Õ ∑…≈Â≈Õo1*Î¡Õ
2ı*Å/Õx1Ò·¡—…yÕ?2ÂoxEÕ?2—J	Œ …!  )“L2Œ ¬D2…>ı)ıÎ)Î“]2#}ëo|òg“n2Òı⁄n2	ÒÒ=¬S2…Å0                                                                                                                                         ’G:=x¡—ÕG/˙/|2ßÎ…’Õö/BK—√	/Õ¯-Õ»0ÕÉ/ÕG/˙5/|2ß√—0≈Õö/¡ı|µ C/Õ»0Ò√(/ı„|∑}˙_/$∑„
¸a/+|µ¬H/·…ı„Êˇg„˛
 v/˛ ~/Ò2&…:&˛¬q/Ò! …*≥DMØ2&*ªW:ß_Î*µ…ÂoÂ>Ä2ßÕ—0*¢#"∞Ø2≤Õ¯-*ªÎÒ:ß·…:∑¬”/Õ21“”/>Ä √∏0:∑ Ù/!ÕÒ1»˛¬Í/¬›/˛⁄˝/Õ=+ÕN0ÕÒ1» X⁄	,Õ!-ƒy+Õx-Ãm+Õ-Õ/ÕF-√N1:∑¬(,Õ\-√	,:'∑¬	,ÕÄ-Ãm+‹s+Õ!-Ãs+√	, ÕÑ1:∑¬c,Õ\-Õx-Ã+‹+Õ¯-Õ|,√N1:'∑¬Q,ÕÄ-Ãm+‹s+Õ!-Ãs+√Q,Ø2Ω!Ω"≥! "µ*π#ˇˇÂ’Õ"/—·⁄ì,…@ ÕÑ1:==˙”, ø,ÕÄ- ø,‹s+Õ!-¬‚,Õr-‹s+Õ!-ıÕE1Ò¬‚,√ø,ÕÄ-Ãs+‹s+Õ!- s+Õx-Ã+Õ¯-Õ˛,√N1*≠"∞:Ø2≤…ÕÕ…ÕÕDÕ+…Õñ>2Ò> 2ÚÏ¶ÕÕ>¬≠…ÕñÏ®ÕÕ>¬—…:Ï˛0…Õñ!|eo"&Ä. "!  "¢Ï¨Õ:Ï˛1»Õ>¬—Ä *§ÂÕ◊*¢"¢·
w#¬à"§√]*ØÎ!  "Ø·’ß’È„"Ø·…:ç∑>§¬=*˘|eoƒ~#˛ ¬ø≠E √ >ú√=Õ+:ç∑¬Â>ù√=Õá#^#V’Î"Ø ^#VÕÈ—!ıÕ&z˛> &>Õp(2=ÕÑ+,&"&,&"&"&S(z=>ƒp(√S(z∑>ƒp(√S(:˛Ä>ƒp(Ø2·ÅÕ+":∑>ƒp(# Õ81:#˛⁄g&>Õp(<2#Õ›! ô&Â’≈Åæ#¬ê&¬y&:#=2#>Õp(¡—·ÕÍ!¬q&Õ≠!>Ãp("Â/ 	"ªÕÎ1—*"•$ 	s#r:∑ '=¬'ÕÒ1ÕÒ1˛ˇ>	Ã˚(:'Ó2¨>Ä Õ∏0:˛¬ˇ&:'∑¬ˇ&Õ|,Õ˛,Õ#~˛:ƒb"#√'##~+˛:G¬'#~#˛A‹b"˛Q‘b"~#
—Õ∏#	~˛. G#˛  G#Õj"#¬/#Õb"—Õ∏#~˛.¬h##~˛  h#Õj"¬U#Õb"x˛:*È·"Î—„≈ÎÕ∏#ÎÕÆ#—ÕÆ#—˛  í#6.#ÕÆ#*ÈÎÛÕÆ#`iˇÕÆ#·„˘ÕÆ#…˛ »w#√Æ#> ’¬ª#—…* +…:!!∑ ı#yÊÄ ı#>ÕÓ#>(ÕÓ#yÕı#>ÕÓ#>)ÕÓ#…≈OÕı#¡…≈’ÂyÊO:∑  *Ø6*  ˘√  >•√=jc"Âha"„ÕñΩ™Õ!  "„Ω™ÕÕ«[ ï !!Æ ∆ “ ﬁ Ú !!’`iV#^>2*zª¬é ∑ è <¬é ![
w#¬{ *ØØ22_  Â¡—√!_
∑ £ ˛¬!Îè~#¬• …≈Õä!  Â#Â!ÚÂ¡ÎÕ>†Õ=’>`iÕ  ·w…’>`iÕ  ·~…’>`iÕ  c.€"Ú·ÕÚw…’>`iÕ  c.”"Ú’0√S(ÕÒ1˛ˇ>Ã˚(√'ÕÒ1˛ˇ Õ&!ˇˇ"®:∑¬n'ØG2çÕÒ1˛ˇ C':(∏x“/'x˙Ÿ&2çÕÒ1:ê=2°˙C'O:çıÊgÒÊÄ±o"¢√≠'! Å~ÊÄ ú' ˇÕ 2ı  Õ 2#ÕÒ1Ò_ Õ 2Å√°'#ÕÒ1*¢|µ Ÿ&+"¢ÕΩ/*ªT]Ä 	x+æ¬»'¬º'√Ó'>π⁄Ó'xÎQ 	BT]+æ¬Ì'¬ÿ'Î~#˛ (∑ (Hy2ß:∑ %(>¥2%√% $YÕ
2√$!$Â* 	 È·—¡y…:!!∑ N$≈ÕN$O˛ @$˛:*“K$˛Ä¬K$>√L$:*ÓÄ2*√%$±¡…≈’Â:∑ f$ˇÕ
2ß X$√r$!r$Â*  È·—¡Ê…≈!ÅÎÕ+"Ä Õ
2ÕÒ1ÕÒ1˛ˇÃœ$Ä ≈ ’Õ
2ÕÒ1∑·¡—ƒœ$	Îzº⁄ø$¬ƒ${Ω“ƒ$Â≈√û$ÕÒ1˛ˇÃœ$…>≈Õ=Õ¡¡¡!$6Õ\ ·’Õ+":∑¬%—Õ
2˛ˇ %!%·~ÕÚ…>`iÕ  ÎÈ>°Õ=√!√$!Qıˇ d/Ø2$2'!-˘"Ô yï2Òxú2Ú:!2(!ˇˇÕ
2#|µ+¬\!go: !2("!"Ä G∑ w!˛ ¬w!x∆2 â!w#√~!6 #6#6
Ø2#Õ«!!˘}lg"õ!ˇ}lg" √!5∞ ~#∂ ¡!¬µ!…6ˇ#∆…!5∞ Øw#w¬–!…+6 …!5Ø ~#∂#¿¬Â!…Õ›! #"Â$ ^#VØ2(^#V#~Î"¢2ß√%(V#^#~2ßØ{ozg}o"¢Õ’0:˛!  }¬;(*®:™∑2ß"¢ J(Õ”/√S(>Ä Õ∏0:* ÎwÒ! wÕN1:%∑ƒ=+…ı√ˇ(:∑¯ı ÕÑ1¡¬Ò(:¨∑¬ï(:∑¬”(√‚(:´∑ƒ0*®:™∑ ß(#"¢>Ä Õ∏0*ª 	Î*®}ÊG)Îr#> ∞w#:™wÕ0ÕÒ1˛ˇ¬‚(>Õ˚(*ÕŸ!!#~∑ Ò(5* 6Ä…ıÕ‚(>Ä 'Õx11 √Ä >∆Õ=√    *• Ä "• ÎÕ \ Õ ∑ Ä =  √  Ä bk"60#60###~#2~#˛¬b%>2'ÕØ2'…2~#Ê2~2!  9"!& V#^#Î"πÎV#^*Ø"∑
Êo˛“∫%
2}*ÎÕÑ+ø%+)7))¥)’)Ø+A,ü,∫%&+>°Õ=Ø2%:∑˙t(ı Õ	+Õˆ*Â 	~˛:¬6&++~˛F 6&·ÕÜ">Ã=+ÎÒWı~˛¬&z˛ > ˆÄ2’Õ<%·~˛— !’·+6 ÕÒ1√!:$∑   …Ø2’Â!Â! DM!	 ÎÕæ"> —¬N":Ê!  w! Ø6 #¬Z"…Â!6·…˛!‹b"ÿÂ≈!æÃb" É"#¬w"¡·…Âø’æ¬®"#æ¬®"#æ¬®"#~˛: ∫"> π"· —’Î√å"Ø—·∑…·"Î—„≈Õ∏#’ÕÜ" ‚"—ÎÕÆ#·6 ·6 :√h#—~˛:¬#G#~˛Fƒb"#~˛0‹b"˛:‘b"∆#N#Î!Ä	*Ó⁄¯*Ø	√¯=˙ —¡!èÂ√[ ¬É¬Ñ7¬ÖBK≈“7GO*Ø	60Î¡
˛¯Â¬S~#„*Øw’Õ—! F#N*Ø	w˛9#w¬zO! ~∑yÚ>! ~<*Øw√èÕø’*kÎ*s{ïzú⁄üÕ∑√èÎÕ∑*yÎ:nG}ì|ö èp#√´DM*wÎ*o~#y∞¬¿…Õø’*kÎ*s{ïzú⁄Õ¬gÎ*q:vÕ√gÎÕ¬g*y:nÕyΩ“MD~+z∑Ú`i"¯·:ç∑¬""—Îs#r…:2ùú!óÕ”*ö"î*ØÎ*'>ˇÎìÕ¬*˙"§Õ*¢Î*˙"ˆ+^+V*…"À:2¸… Ow#∏»¬{p…’!ZF∏“ú#GÄ_ x—…>§√=˛$ ˜≈!ÂÂ>3ëG>°‹=w#¬∑6 #¬ø‹’ÊÕ—¡’’!‹ ‡*(ÂÊÕ·Âˇ~#˛ ¬Ó—![ ~ÂÊ@
˛⁄> <áOáÅ*ÔO}ëo|ﬁ g—¡˘≈ÎÈ·"âÕ,Õ6*âÈ
GO·„Î·„…’"{x<2ÅÎy2Ç2ÉØ2Ñw#¬K+"}"!Å5 †*{~#"{Ê*Ân& )DM))	O 	Î·sz*+"!É5¬i!Ñ∂w*}":Ç2É√X—*{+~Ê@ ≤:ÇOÕ∑:Ñ∑…A/¬∏Øâ– ¬ƒ…·—„GO  ’ˆˇ’úˇ’¸’ÿÂ>/`i<DMbk	⁄·w#—z≥¬?√gDM*wÎ*oæ¿#x±»√ÎG|í}õ»xæ¿#√∑˙6GO*…	…ÊGO*À	F#N*…	…’Îi`Õ\MDÎ—…≈ÎÕ\Î¡…< f÷Åg√i*ÂÎF#N#≈F#N#≈~#˛Úá N#Î*«√èF#N#Î*Ø	Ê  ôF#N·:j∑¬≤+}¥ ≤}ë|ò>ô⁄=·}!  	=¬∑¡	…ı!kÕ“!sÕ“Ò»·√áıÊGOÒı⁄ÂH q#p#6#6 Ò⁄##≈Â∑˙ O :’#^#V*'—’≈æ¬8#¬~˛ ¬8¡—·~Ê ¬KxF#≈N#F#^#V≈·¡…¡—·’ —:Z∏¬¸Ø…>§√=![ ~#∑ j :Z∏¬U√Âx…!  "§"û!1F#≈~#∂+ ∂Â^#V#N#F·yìOxöG±¬†w#w#w#w#√∫Î*ûÎyìxö⁄∂"§Â`i"û· 	¡¬z*§ V+^+Î"†ÎV+^Î"Ø…⁄÷’Î*†}ì|ö⁄÷Î—…Ø2¸Î"ˆÊˇÂ¡ÂÕª|Êg"Î>0Åw…·"âÕ,Õ$·~∑¬  Î	+~ˆw*âÈıÂ’≈ Î	Î¡≈H 	"Ö·Â$,"áÕÉ wÊOGÊ@>¿ O>–∞ÕôÕë ~ÕÉ wÊGÕÉ xÕôÊ∞Õë ~√YØÕë¬w¡—·Ò…!à5»*Ö+~"Ö…!á5»……`iF#NÎÂV#^Õ.2U·r#s…`iF#NÎÂV#^!  ÕQ2·r#s…’2çy2éÕ°∑ ˝2å"ØxÊ¬ˆ ˆ~#¬Í*ˆÎ·ÕÈ√!ÕP*«√∑GÎN#¸HÎ*Ø	DM·q#p#„	DM·q#p…∑Ú)w#s#r#Î	Îs#r…ı>°√=>§’2pØ2oo*WÂ!WÕ”·"W—*…{ïızú!fÕvÒÕvS √ GÕxÊ∆ê'Œ@'w#……¨ﬂÓ˝  &ÇÁÒ –û±·"â`iOV#^·Î·F·~#ngÎ„—Â*â„y∑»x∑>  ⁄~#√Ã
ÎV√Ë∑¬Ê…
ÎV√˜∑¬ı…!c∫Õ©Õ©2¿Õª"º! 	Â¡*ØÎÕª|Ω¬(˛ˇ )"–Õª"«ÎÕª"¡Õ∞Î*Ø"æ*¡Î*º"√Î*∫"…"±ÎÕª"À—! Â¡Õª|2œ}2ÕÕª|2ŒÕªÎ*¡Õ∞Î*Ø"∫!©"©:ç∑¿*Ø:Ów…|g}o…}/∆o|/Œ g…
g
o…≈!Õx!Â!‹ÂÊÕ—! 2"˜!Â|eo"˘!‹ Ù*(ÂÊz≥¬ 2åÎ—ÕZ’:åÕáÎ*ØÎ¡~ˆ@w#s#r#q#p:åÕá~ˆ w*ØÎ*):çw#:åw:ç∑¿:∑»*DMUÕÕ…SAVE :é  Õ¬Õl’*Ø"§Õ*ØÎ*¢Â*'Î*˘|eoÎ>ˇÕx>*/Î*ØÕx·Â:Q∑¬∂ˇ:ãæ¬ #:åæ¬ —’ÕÈ*À"˙·"§ÂÊˇ~“>ˇ*˘U\èÕ¬Õ·V#^#Â*…Õ◊Î*¢++ÎÕ◊DM„xº¬*~#¬…`i O	> M+#æ }ëÎÜw·„w…·"â·Â≈n& +  ~˛A⁄Q˛[⁄`˛a⁄h˛{“h÷ √`˛- `˛0⁄h˛:“hÉ_#√5
∆ÄFy·ïO·Üw·q·p·s·r*âÈ·"â·~·Â≈n& +W ~˛0⁄§˛:“√#√ì˛  √∫¬√#~˛ + √Øª¬√y„ï„<_√†y¡ë„WÜw{∑ –4·„s·„r·~·w`iB—Õ6*âÈ::…
2—·Â’"˙Õ(…=(value*16)+Ord(ch)-Ord('A')+10
    END
    ELSE IF ch IN ['a'..'f'] THEN BEGIN
      Write(ch);
      value:=(value*16)+Ord(ch)-Ord('a')+10
    END
  END
UNTIL Ord(ch)=cr;
Get_hex:=value;
Writeln
END;



PROCEDURE Get_blk0(VAR drv:Byte);
VAR
b:Byte;
BEGIN
REPEAT
  Write('which disc drive (0..3) ? ');
  drv:=Getnum(0,3);
  Writeln;
  Writeln('Insert disc & press space when ready');
  REPEAT UNTIL Get=' ';
  Open_ca(0);
  Chk_SJ(drv);  {updates cache,<drv8in>}
  IF error=1 THEN Writ@Õ2Õ2w#¬Õ2ıÕéÒ¬·√œÕ™Õ€ÊıÕ™Õ€¡∞…≈Â’ÕG—ÇWx·¡…!  ÕÑ⁄P:N∑Ãï>ULTÕwı!ü\ ~#¬aØ2| :] ˛  ˛!6Õ
ÕÇ< · COBOL   COM   IJ                 ÏÄ-    -  ,  	 6P f‘LPTLST:LP:BB:CI:COCONPUN:TP:HPRDR:TR:HR      CON:  C  ÎÕU’’Õn  >#Õ˝Ö!˘	^#V#„0}ìo|ög⁄-
√ 
x∑ÚD
ıy˛0 K
Õ˝ÒÊG√W
yÕ˝√W
ÒÊ˛¬W
G√D
„¬
——z∑¬{Ê˛ ⁄< Õ˚>'Õ˝{ÊÕ˝>'Õ˝√*±##V+^+N+y˛“ÕUÎÕßÎÕ˚ Æ
~+Õ˝√¢
Õ_¬√ä
 x ∑  ˛.»˛»˛*»˛ …Õ¡
 Ê
w#Õπ
¬Õ
Õ¡
»Õπ
√‹
 ˛*¬Ú
Õπ
?r#¬Ú
…:L∑¬·eln('Not a file server format disc')
UNTIL error=0;

Writeln;
Write('Disc Name = ');
b:=1;
REPEAT
  Write(cache.ptr^.disc_name[b]);
  b:=Succ(b)
UNTIL (b>10) OR (cache.ptr^.disc_name[b-1] = Chr(13));
Writeln;

Write('Density =');
IF drv IN drv8in THEN Writeln('Quad') ELSE Writeln('Double');
Writeln('Disc size =',cache.ptr^.disc_size:5,'K')

END;



PROCEDURE Get_disc_name;
VAR
ch:Char;
b:Byte;
BEGIN
Write('disc name (max 10 characters) :');
b:=0; {Offset in name - cache is used as n!Ä Ow#w¬q!\ Õ∑
˛  ıÕπ
˛:¬5Ò÷@w#Õ∑
√:G6 #ÒÕÕ
˛.Ãπ
ÕÕ
Õƒ
 UÕπ
√I6 #¬W¬6 √Õ÷ÕÏ⁄  
w#√j!e æ¿x#æ¿y#æ…Î*≥}ì|öÎ…ÕÑ–"≥…:N˛–Â!  ÕÑ·…ÕQ⁄· 1ÕËÂ! =:L ∆∑¬·ÕË√–!  ∑¬–! |∑¬·"Ø!&Â~∑ ˝#~#V·„Ω¬˚zº¬˚:Ø·w∑√„Â·√√√√¬":π°¬ê<√á¬-Ø√"= ê√"Ò ê= ê√áÒ¬ÖÕ'’#ÂØıÎ√ê¬ÉÕ'#ÂÕ'#Î„Î√gÒÒ· è{ïOzú±Âı√êÒ¬ÖÕ'~#Î¡·˛ÿ gÂ≈√ê¬®*Ø~∑ ß˙ß& oΩ⁄ß+)Î√vØı& o)ÎÒ√9¬á√ıÎØæ#F#N#Î*Ø¬—HG*«	~á*Û⁄›*çæ#O 	~#fo"#& o)OÒ¬y≈„-˙ÂÎFi/p buffer}
REPEAT
  ch:=Get;
  IF (ch=Chr(127)) OR (ch=Chr(8)) THEN BEGIN {Del or backspace}
    IF b>0 THEN BEGIN            {Can't delete @ start of line}
      Write(Chr(8),' ',Chr(8));  {Erase char from screen}
      b:=Pred(b)
    END
  END
  ELSE IF ((Ord(ch)>32) OR (Ord(ch)=13)) AND (b<10) THEN BEGIN
       {ctrl chars/spaces illegal}
    cache.ptr^.data[87+b]:=Ord(ch);
    Write(ch);
    b:=Succ(b)
  END
UNTIL ch=Chr(13);
Writeln
END;


PROCEDURE Verify(drive:Byte;disc_size:Word