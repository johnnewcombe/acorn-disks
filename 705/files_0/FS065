.x||\ FS065|y|u|cNotes on file server software version 0.65It would be wise to take a backup copy of the data on your disc before installing the new file server : the installation process requires writing direct to the fileserver disc, and it is possible to accidentally overwrite valuable data.|u 1. IntroductionThis is the first (limited release) version of the file server since a major re-design of the printer server system.  Two printers are now supported, and the access controls for printing are fully implemented.  Print banners, however, are still in a primitive form - future versions will read a banner specification from disc.  Various other facilities have also been provided :The date information returned by *INFO and *EX is now in a different format.An attempt to perform a system privileged operation while the key is in the secure position now produces the error 'Key Locked' (error number =5), rather than 'Insufficient Privilege'.A bug in the accounting system has been fixed.  Previously, when a file was extended by random access beyond a length of 16K, 1K too much was deducted from the account balance.Any reference to the password file (ie. use of editpass) now prevents users from changing their boot option or password unless they log on again.  Any attempt to do so will cause 'FS Unusual error 03' which means 'not in password file'.The file server program now checks its CRC before starting; the most noticeable effect is a 5 second pause during booting.  See notes below on front panel lamps.The 'Read Object Info' file server function now searches the library if the file is not found.  This call is seen in the BBC computer as various forms of the OSFILE call.  This change SHOULD allow !EPF files for EDWORD to be kept in the library.  There will be future changes to increase further the number of functions which reference the library, and also a facility to disable this.|u 2. New printer server features. 2.1 Printer tablesEach printer channel now has a table describing its features.  Current servers have only two channels : channel 1 is the parallel printer, and channel 2 is the serial printer.  Although no existing systems have more than two printers, it will be seen that there is provision in the utilities for supporting a larger number of printers in a compatible fashion on future equipment.Each printer is given a name, which may be up to 6 characters long.  This name will be quoted by users when they wish to select a particular printer explicitly.  The names PRINT and AUTO are reserved; they refer to the currently selected printer and the automatic printer selector respectively.  Upper/lower case is not significant in printer names.  If more than 6 characters are given, only the first six will be recorded or checked - the parallel printer might reasonably be called PARALL, as it could then be selected by typing PARALLEL.In addition to the name, the printer tables have a number of indicators associated with each printer.  First, there is an indicator to show that the printer exists : if a printer is marked as not existing, it will not be possible to send print output to it.  There are two restrictions which can be placed on the users of a printer.  It is possible to permit or prohibit 'anonymous' users from using the printer - anonymous users are those who have not logged on to the file server, and so nothing is known about their identity.  Anonymous users are never allowed to name a particular printer : they may only use the auto select printer, which will refrain from selecting printers to which they do not have access.  It is also posible to restrict use of a printer to those users who have access to a specified account.  This mechanisim may be used to control who has access to special printers, such as daisy wheels or plotters.  There are currently two extra indicators, to control the print banner generation.In addition to the printer information tables, there is a priority table for the auto select printer.  This is the default printer, used automatically for users who do not request a particular printer, and would typically be expected to be some sort of high speed text printer.  When users attempt to print, the system will check through the available printers in order, and the first one which is available and which the user is allowed to use will be selected.  The purpose of the priority table is to specify the order in which the printers will be searched.  If there is more than one printer suitable for ordinary printing, the table would list them in order of preferance (typically in order of speed).  The first user would get the best printer, and the second user would get the alternative, unless access to the better printer was restricted.  If the second printer is not suitable for ordinary output (eg. a plotter), the second choice may be set to zero, preventing ordinary output from being directed there by mistake.  If neither printer is suitable for normal output, the table may be set entirely to zeros, which will prevent the printers from being selected by mistake, and will also prevent the printer server offering its services when a general broadcast request for a printer is received.These tables are all stored on disc : in systems with more than one disc, it is the lowest numbered disc which is used.  When running the new software on existing discs, it will be found that neither printer is marked as existing, and the priority table will be blank.  It will usually be necessary to set up both in order to restore printer serving.|u 2.2 The system message channel & front panel lampsThe display of system messages is still available, and it is now possible to specify which printer will be used (they were previously sent to the serial port without option).  As the choice of printer is stored on disc, failure messages arising before the disc system has been initialised will be sent to the parallel printer, without option.  The main such messages are 'Bad FS code' (the file server has checked its CRC and found the program to be corrupt) and 'Block 0 corrupt' (the root block of the disc structure is corrupt).  All subsequent messages will be sent to the specified printer.  It is possible to send messages to a printer which is marked as not existing : if full messages are enabled, this will prevent them from being mixed up with user output.  In the normal state, when only system failure messages are produced, it is reasonable to allow users access to the message printer.  Messages will always be separated from user output by a form throw and header.There have been some changes to the operation of the lamps and controls.  The system failure lamp will now flash if the fileserver has stopped for some unusual reason; the only exit from this state is to power off, or press the rear panel switch to enter configuration mode.  A message will usually be printed on the message printer to explain the mode of failure.  Another change is that both printer buffers are allowed to empty before the file server will stop : if there is a delay for this reason, the online lamp will flash.  The fileserver can be forced to stop (discarding the contents of the printer buffer) by turning either the key switch or the rear panel switch to a different position.The online lamp will also flash if the buffer for the message printer is full and the system is trying to display a message.  Again, the output can be discarded by operating either switch.|gfs065a