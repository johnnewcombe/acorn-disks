PROGRAM Testdsk;TYPEWord=0..65535;Byte=0..255;Block_descr=RECORD  drive:Byte;    {Often set to 255 to indicate disc changed.                  If so, it will be caught at the cache request stage}  blk:Word    {Block number. Each block is <blk_size> bytes}END;VARdata:Array [1..1024] OF Char;z,a:Word;block:Block_descr;no_blocks:Word;rd:Boolean;error:Byte;ch:Char;PROCEDURE Inilow; EXTERNAL;{ Initialises various external routines, in particular the disc ones) }PROCEDURE Inidsk(max_drv:Byte); EXTERNAL;PROCEDURE Dalloc(blk:Block_descr); EXTERNAL;PROCEDURE Alloc(blk:Block_descr); EXTERNAL;PROCEDURE F_blk(VAR blk:Block_descr;VAR noblk:Byte); EXTERNAL;PROCEDURE Floppy(rd:Boolean;blk:Block_descr;addr:Word;VAR error:Byte);  EXTERNAL;BEGINIniLow;REPEAT  Writeln;  Write('{r,w,i},block,drive :');  Readln(ch,block.blk,block.drive);  Writeln;  IF (ch='i') OR (ch='I') THEN Inilow  ELSE BEGIN    rd:=NOT( (ch='W') OR (ch='w'));    IF NOT rd THEN BEGIN      Writeln('Data (terminated by <cr>):');      a:=1;      Read(Ch);      While (NOT Eoln) AND (a<1025)  DO BEGIN        data[a]:=ch;        Read(Ch);        a:=Succ(a)      END;      FOR z:=a TO 1024 DO data[z]:=' '    END ELSE FOR a:=1024 DOWNTO 1 DO data[a]:=' ';    Floppy(rd,block,addr(data),error);    Writeln('Error=',error);    FOR a:=1 TO 1024 DO      IF data[a]<' ' THEN Write('.') ELSE Write(data[a]);  ENDUNTIL False;END.